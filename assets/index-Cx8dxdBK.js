var KC=Object.defineProperty;var vv=t=>{throw TypeError(t)};var WC=(t,e,n)=>e in t?KC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var st=(t,e,n)=>WC(t,typeof e!="symbol"?e+"":e,n),GC=(t,e,n)=>e.has(t)||vv("Cannot "+n);var za=(t,e,n)=>(GC(t,e,"read from private field"),n?n.call(t):e.get(t)),bv=(t,e,n)=>e.has(t)?vv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const JC="modulepreload",YC=function(t){return"/shows-tracker/"+t},_v={},Qo=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=o(n.map(c=>{if(c=YC(c),c in _v)return;_v[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":JC,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},dp=(t,e)=>e.some(n=>t instanceof n);let wv,xv;function XC(){return wv||(wv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QC(){return xv||(xv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fp=new WeakMap,gf=new WeakMap,od=new WeakMap;function ZC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ci(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return od.set(e,t),e}function ek(t){if(fp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});fp.set(t,e)}let hp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fp.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ci(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function V0(t){hp=t(hp)}function tk(t){return QC().includes(t)?function(...e){return t.apply(pp(this),e),Ci(this.request)}:function(...e){return Ci(t.apply(pp(this),e))}}function nk(t){return typeof t=="function"?tk(t):(t instanceof IDBTransaction&&ek(t),dp(t,XC())?new Proxy(t,hp):t)}function Ci(t){if(t instanceof IDBRequest)return ZC(t);if(gf.has(t))return gf.get(t);const e=nk(t);return e!==t&&(gf.set(t,e),od.set(e,t)),e}const pp=t=>od.get(t);function mp(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ci(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ci(o.result),l.oldVersion,l.newVersion,Ci(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function Ev(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Ci(n).then(()=>{})}const rk=["get","getKey","getAll","getAllKeys","count"],sk=["put","add","delete","clear"],yf=new Map;function Sv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yf.get(e))return yf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=sk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||rk.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return yf.set(e,i),i}V0(t=>({...t,get:(e,n,r)=>Sv(e,n)||t.get(e,n,r),has:(e,n)=>!!Sv(e,n)||t.has(e,n)}));const ik=["continue","continuePrimaryKey","advance"],Av={},gp=new WeakMap,H0=new WeakMap,ok={get(t,e){if(!ik.includes(e))return t[e];let n=Av[e];return n||(n=Av[e]=function(...r){gp.set(this,H0.get(this)[e](...r))}),n}};async function*ak(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,ok);for(H0.set(n,e),od.set(n,pp(e));e;)yield n,e=await(gp.get(n)||e.continue()),gp.delete(n)}function $v(t,e){return e===Symbol.asyncIterator&&dp(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&dp(t,[IDBIndex,IDBObjectStore])}V0(t=>({...t,get(e,n,r){return $v(e,n)?ak:t.get(e,n,r)},has(e,n){return $v(e,n)||t.has(e,n)}}));var q0={},lk=Object.defineProperty,ck=(t,e,n)=>e in t?lk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wn=(t,e,n)=>ck(t,typeof e!="symbol"?e+"":e,n);function uk(t){return typeof t=="function"?t():t}function dk(t,e,...n){uk(t)||Ye(e,...n)}function Ye(t="Something went wrong",...e){const n=typeof t=="string"?Error:t;throw new n(...typeof t=="string"?[t]:e)}const Yi="items";let fk=class{constructor(e){Wn(this,"db",null),Wn(this,"namespace"),this.namespace=e}async has(e){return await(await this.getConnection()).get(Yi,e)!==void 0}async get(e){return(await this.getConnection()).get(Yi,e)}async require(e){return await this.get(e)??Ye(`Missing required '${e}' IndexedDBMap value`)}async set(e,n){await(await this.getConnection()).put(Yi,n,e)}async delete(e){await(await this.getConnection()).delete(Yi,e)}async clear(){await(await this.getConnection()).clear(Yi)}close(){this.db&&(this.db.close(),this.db=null)}async getConnection(){return this.db=this.db??await this.connect(),this.db}async connect(){const e=`${this.namespace}-map`;return await mp(e,1,{upgrade(n){n.objectStoreNames.contains(Yi)||n.createObjectStore(Yi)},blocked:()=>Ye(`Could not open '${e}' IndexedDB`)})}};function hk(){return typeof global<"u"?global:typeof globalThis<"u"?globalThis:window}const pk=hk().Error;let vr=class extends pk{constructor(e,n){super(e,n),this.name=new.target.name==="JSError"?"Error":new.target.name,Object.setPrototypeOf(this,new.target.prototype)}};function mk(t,e){return t==null&&e==null?[t===null?1:0,e===null?1:0]:[t??null,e??null]}function vf(t,e){const[n,r]=mk(t,e);return n>r?1:r>n?-1:0}function qm(t,e){return t===e?!0:!pt(t)||!pt(e)?!1:t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():Object.keys(t).length!==Object.keys(e).length?!1:!Object.keys(t).some(n=>!qm(t[n],e[n]))}function gk(t){return Object.entries(t).reduce((e,[n,r])=>(e[r]=n,e),{})}const Tl=Array.isArray.bind(Array);function pl(t){return t==null?!0:Array.isArray(t)||typeof t=="string"?t.length===0:typeof t=="object"?Object.keys(t).length===0:!1}function cn(t,e){return t instanceof e}function yk(t){return typeof(t==null?void 0:t[Symbol.iterator])=="function"}function pt(t){return typeof t=="object"&&t!==null}function vk(t){return typeof t=="string"||t instanceof String}function yp(t){return typeof t>"u"||t===null}function Hr(t){t={...t};for(const e in t)bk(t,e)&&(t[e]=Hr(t[e]));return t}function hc(t,e){let n=t;const r=e.split(".");for(const s of r){if(!pt(n))return;n=n[s]}return n}Object.entries.bind(Object);function mu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function K0(t,e){return t.reduce((n,r)=>(n[r[e]]=r,n),{})}function xi(t,e){const n={},r=Array.isArray(e)?e:[e];for(const s of r)s in t&&(n[s]=t[s]);return n}function bk(t,e){let n;return mu(t,e)&&pt(n=t[e])&&n.constructor===Object}function Ws(t,e){if(typeof e=="function"){const s=e,i={};for(const[o,a]of Object.entries(t))s(a)||(i[o]=a);return i}const n={...t},r=Array.isArray(e)?e:[e];for(const s of r)delete n[s];return n}function Gn(t){return Ws(t,e=>e==null)}function W0(t,e,n){t.prototype[e]=n}function Rt(t){return String(t)}function _k(t){return t instanceof Error?t:new Error(Rt(t))}function wk(t){t.splice(0,t.length)}function ka(t,e,n){const r=t.slice(0),s=[],i=n?(o,a)=>a.findIndex(l=>n(o,l)):(o,a)=>a.indexOf(o);for(const o of e){const a=i(o,r);a!==-1?r.splice(a,1):s.push(o)}return{added:s,removed:r}}function xk(t,e){const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}function Ek(t,e){return t.length!==e.length?!1:!t.some((n,r)=>e[r]!==n)}function un(t,e){return e?t.filter(e):t.filter(n=>!!n)}function Sk(t,e){for(const n of t)if(e(n))return n;return null}function Ak(t,e){return[...t.entries()].flatMap(([n,r])=>e(r,n))}function $k(t,e){const n=typeof e=="string"?r=>Rt(r[e]):e;return t.reduce((r,s)=>{var i;return(r[i=n(s)]??(r[i]=[])).push(s),r},{})}function Ck(t){return t.length===0}function kk(t,e){return t.map(n=>n[e])}function Ik(t){return t.length===0?null:t[Math.floor(Math.random()*t.length)]}function Rk(t,e){const n=t.slice(0),r=[];for(;n.length>0&&r.length<e;){const s=Math.floor(Math.random()*n.length);r.push(n[s]),n.splice(s,1)}return r}function ar(t,e){const n=t.indexOf(e);return n===-1?!1:(t.splice(n,1),!0)}function Tk(t,e){return t.splice(Number(e),1).length>0}function G0(t,e,n){const r=t.indexOf(e);return r===-1?!1:(t[r]=n,!0)}function ml(t,e,n){n=e==="asc"||e==="desc"?e:n;const r={},s=a=>{switch(typeof a){case"string":return"";case"number":return Number.MIN_SAFE_INTEGER;case"boolean":return!1;default:return null}},i=(a,l)=>{if(!(l in r)){const c=hc(t.find(u=>hc(u,l)!==void 0&&hc(u,l)!==null),l);r[l]=s(c)}return hc(a,l)??r[l]},o=()=>{const a=n==="desc"?l=>(c,u)=>vf(i(u,l),i(c,l)):l=>(c,u)=>vf(i(c,l),i(u,l));switch(typeof e){case"function":return e;case"string":return e==="asc"?void 0:e==="desc"?(l,c)=>vf(c,l):a(e);case"object":{const l=e.map(c=>a(c));return(c,u)=>{for(const d of l){const f=d(c,u);if(f!==0)return f}return 0}}}};return t.slice(0).sort(o())}function dr(t,e){return e?Object.values(t.reduce((n,r)=>{const s=e(r);return n[s]=n[s]??r,n},{})):[...new Set(t)]}function Ok(t,e,n){return t.filter(r=>{const s=r[e],i=typeof s=="function"?s.call(r):s;return n?i===n:!!i})}function gr(t,e){return Array.isArray(e)?un(t,n=>e.indexOf(n)===-1):Dk(t,t.indexOf(e))}function Dk(t,e){return Km(t,[e])}function Km(t,e){return t.map((n,r)=>[n,r]).filter(([n,r])=>!e.includes(r)).map(([n])=>n)}function vn(t,e=!1){return Array.isArray(t)||yk(t)&&!vk(t)?Array.from(t):e&&t==null?[]:[t]}class J0{constructor(){Wn(this,"listeners",[])}add(e){return this.listeners.push(e),()=>this.remove(e)}remove(e){ar(this.listeners,e)}async emit(e,...n){for(const r of this.listeners){const s=r[e];typeof s=="function"&&await(s==null?void 0:s.call(r,...n))}}}let gu=class{static isConjuring(){return this.__conjuring}static isMagicReady(){return this.__reservedProperties.has(this)}static prepareMagic(){this.__conjuring=!0,this.__reservedProperties.set(this,new Set(Object.getOwnPropertyNames(new this))),this.__conjuring=!1}static isReservedProperty(e){var n;return!!((n=this.__reservedProperties.get(this))!=null&&n.has(e))}constructor(...e){if(!this.static().isConjuring())return this.static().isMagicReady()||this.static().prepareMagic(),this._proxy=this.createProxy(),this.initialize(...e),this._proxy.instance}static(e){const n=this.constructor;return e?n[e]:n}reserveProperty(e){Object.assign(this,{[e]:null})}initialize(...e){}__get(e){return Reflect.get(this._proxy.target,e)}__set(e,n){Reflect.set(this._proxy.target,e,n)}__delete(e){Reflect.deleteProperty(this._proxy.target,e)}createProxy(){const e=this.static();return{target:this,instance:new Proxy(this,{get(n,r,s){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.get(n,r,s):n.__get(r)},set(n,r,s,i){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.set(n,r,s,i):(n.__set(r,s),!0)},deleteProperty(n,r){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.deleteProperty(n,r):(n.__delete(r),!0)}})}}};Wn(gu,"__conjuring"),Wn(gu,"__reservedProperties",new WeakMap);let Pk=class Y0{constructor(e){Wn(this,"keysToItems"),Wn(this,"itemsToKeys"),Wn(this,"getKey"),this.keysToItems=new Map,this.itemsToKeys=new WeakMap,this.getKey=e??(n=>Rt(n))}static createFromArray(e,n){const r=typeof n=="string"?i=>i[n]:n,s=new Y0(r);for(const i of e)s.add(i);return s}*[Symbol.iterator](){yield*this.keysToItems}get size(){return this.keysToItems.size}items(){return this.keysToItems.values()}keys(){return this.keysToItems.keys()}entries(){return this.keysToItems.entries()}add(e){const n=this.getKey(e);this.keysToItems.set(n,e),this.itemsToKeys.set(e,n)}require(e){return this.keysToItems.get(e)??Ye(`Couldn't find item with '${e}' key`)}get(e){return this.keysToItems.get(e)}getKeys(){return[...this.keysToItems.keys()]}getItems(){return[...this.keysToItems.values()]}hasKey(e){return this.keysToItems.has(e)}hasItem(e){return this.itemsToKeys.has(e)}delete(e){const n=this.itemsToKeys.get(e);n&&(this.itemsToKeys.delete(e),this.keysToItems.delete(n))}filter(e){const n=this.constructor.createFromArray([],this.getKey);for(const[r,s]of this.entries())e(s,r)&&n.add(s);return n}clear(){this.itemsToKeys=new WeakMap,this.keysToItems.clear()}clone(){const e=this.constructor,n=new e(this.getKey);n.keysToItems=new Map(this.keysToItems),n.itemsToKeys=new WeakMap;for(const[r,s]of n.keysToItems.entries())n.itemsToKeys.set(s,r);return n}},fs=class X0{constructor(){Wn(this,"resolveListeners",[]),Wn(this,"rejectListeners",[]),Wn(this,"resetListeners",[]),this.setPromiseValues()}static from(e){const n=new X0;return e.then(n.resolve.bind(n)).catch(n.reject.bind(n)),n}get value(){return this._value||null}isResolved(){return"_value"in this}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}resolve(e){this.isResolved()&&this.reset(),this._value=e,this._resolve(e),this.resolveListeners.forEach(n=>n(e))}reject(e){this.isResolved()&&this.reset(),delete this._value,this._reject(e),this.rejectListeners.forEach(n=>n(e))}onResolve(e){return this.resolveListeners.push(e),()=>ar(this.resolveListeners,e)}onReject(e){return this.rejectListeners.push(e),()=>ar(this.rejectListeners,e)}onReset(e){return this.resetListeners.push(e),()=>ar(this.resetListeners,e)}reset(){this.setPromiseValues(),this.rejectListeners.forEach(e=>e())}setPromiseValues(){this.promise=new Promise((e,n)=>{this._resolve=e,this._reject=n})}},ad=class{constructor(e=1){Wn(this,"count"),Wn(this,"listeners"),this.count=e,this.listeners=new Set}acquire(){return this.count===0?this.waitAvailable().then(()=>this.acquire()):(this.count=Math.max(this.count-1,0),Promise.resolve())}release(){this.count++,this.notifyAvailable()}isAvailable(){return this.count!==0}async run(e){await this.acquire();try{return await e()}finally{this.release()}}async waitAvailable(){for(;!this.isAvailable();)await new Promise(e=>{const n=()=>{this.listeners.delete(n),e(null)};this.listeners.add(n)})}notifyAvailable(){this.listeners.forEach(e=>e())}};const Cv={},Q0=class Z0{static get instance(){return this._instance=this._instance??new Z0}constructor(){}set(e,n){typeof n>"u"&&(n="__undefined__"),localStorage.setItem(e,JSON.stringify(n))}get(e,n=null){const r=localStorage.getItem(e);if(r===null)return n;if(r!=="__undefined__")return JSON.parse(r)}require(e){const n=this.get(e,Cv);if(n===Cv)throw new Error(`Failed getting required key from local storage: '${e}'`);return n}has(e){return localStorage.getItem(e)!==null}remove(e){localStorage.removeItem(e)}pull(e,n=null){if(!this.has(e))return n;const r=this.get(e);return this.remove(e),r}};Wn(Q0,"_instance");let Lk=Q0;const Er=Lk.instance;function yu(t){return!(!t||["0","false"].includes(t))}const bf={},ki={},ha={};function kv(t,e){return ki[t]=ki[t]??fs.from(e()),ki[t]}function Jc(t,e){return bf[t]=bf[t]??e(),bf[t]}function Mk(t){const e={};return(...n)=>"result"in e?e.result:e.result=t(...n)}function Iv(t,e,n){var r,s;return(r=ha[t])!=null&&r.has(e)||e1(t,e,n()),((s=ha[t])==null?void 0:s.get(e))??Ye()}function Rv(t,e){var n;return((n=ha[t])==null?void 0:n.get(e))??null}function Tv(t){vn(t??Object.keys(ki)).forEach(e=>delete ki[e])}function Ov(t,e){var n;(n=ha[t])==null||n.delete(e)}function Dv(t,e){var n;ki[t]=ki[t]??new fs,(n=ki[t])==null||n.resolve(e)}function e1(t,e,n){(ha[t]??(ha[t]=new WeakMap)).set(e,n)}function _f(t){if(!t)return null;try{const e=new Date(t),n=e.getTime();return isNaN(n)||n===0?null:e}catch{return null}}function t1(){return typeof globalThis=="object"&&("Cypress"in globalThis||typeof globalThis.top=="object"&&globalThis.top&&"Cypress"in globalThis.top)?"e2e":typeof process=="object"&&q0.VITEST?"unit":null}function ld(){var t;if(t1())return"testing";if(typeof process=="object"&&(t=q0)!=null&&t.NODE_ENV)return"production";try{return"production"}catch{return null}}function Mi(){return ld()==="development"}function Ol(t){return ld()!=="testing"?!1:!t||t===t1()}function Nk(){const t=ld();return t==="development"||t==="testing"}function jk(t){return Vk(t)}function wf(t,e){let n=t[0],r=t[1],s=t[2],i=t[3];n=En(n,r,s,i,e[0],7,-680876936),i=En(i,n,r,s,e[1],12,-389564586),s=En(s,i,n,r,e[2],17,606105819),r=En(r,s,i,n,e[3],22,-1044525330),n=En(n,r,s,i,e[4],7,-176418897),i=En(i,n,r,s,e[5],12,1200080426),s=En(s,i,n,r,e[6],17,-1473231341),r=En(r,s,i,n,e[7],22,-45705983),n=En(n,r,s,i,e[8],7,1770035416),i=En(i,n,r,s,e[9],12,-1958414417),s=En(s,i,n,r,e[10],17,-42063),r=En(r,s,i,n,e[11],22,-1990404162),n=En(n,r,s,i,e[12],7,1804603682),i=En(i,n,r,s,e[13],12,-40341101),s=En(s,i,n,r,e[14],17,-1502002290),r=En(r,s,i,n,e[15],22,1236535329),n=Sn(n,r,s,i,e[1],5,-165796510),i=Sn(i,n,r,s,e[6],9,-1069501632),s=Sn(s,i,n,r,e[11],14,643717713),r=Sn(r,s,i,n,e[0],20,-373897302),n=Sn(n,r,s,i,e[5],5,-701558691),i=Sn(i,n,r,s,e[10],9,38016083),s=Sn(s,i,n,r,e[15],14,-660478335),r=Sn(r,s,i,n,e[4],20,-405537848),n=Sn(n,r,s,i,e[9],5,568446438),i=Sn(i,n,r,s,e[14],9,-1019803690),s=Sn(s,i,n,r,e[3],14,-187363961),r=Sn(r,s,i,n,e[8],20,1163531501),n=Sn(n,r,s,i,e[13],5,-1444681467),i=Sn(i,n,r,s,e[2],9,-51403784),s=Sn(s,i,n,r,e[7],14,1735328473),r=Sn(r,s,i,n,e[12],20,-1926607734),n=An(n,r,s,i,e[5],4,-378558),i=An(i,n,r,s,e[8],11,-2022574463),s=An(s,i,n,r,e[11],16,1839030562),r=An(r,s,i,n,e[14],23,-35309556),n=An(n,r,s,i,e[1],4,-1530992060),i=An(i,n,r,s,e[4],11,1272893353),s=An(s,i,n,r,e[7],16,-155497632),r=An(r,s,i,n,e[10],23,-1094730640),n=An(n,r,s,i,e[13],4,681279174),i=An(i,n,r,s,e[0],11,-358537222),s=An(s,i,n,r,e[3],16,-722521979),r=An(r,s,i,n,e[6],23,76029189),n=An(n,r,s,i,e[9],4,-640364487),i=An(i,n,r,s,e[12],11,-421815835),s=An(s,i,n,r,e[15],16,530742520),r=An(r,s,i,n,e[2],23,-995338651),n=$n(n,r,s,i,e[0],6,-198630844),i=$n(i,n,r,s,e[7],10,1126891415),s=$n(s,i,n,r,e[14],15,-1416354905),r=$n(r,s,i,n,e[5],21,-57434055),n=$n(n,r,s,i,e[12],6,1700485571),i=$n(i,n,r,s,e[3],10,-1894986606),s=$n(s,i,n,r,e[10],15,-1051523),r=$n(r,s,i,n,e[1],21,-2054922799),n=$n(n,r,s,i,e[8],6,1873313359),i=$n(i,n,r,s,e[15],10,-30611744),s=$n(s,i,n,r,e[6],15,-1560198380),r=$n(r,s,i,n,e[13],21,1309151649),n=$n(n,r,s,i,e[4],6,-145523070),i=$n(i,n,r,s,e[11],10,-1120210379),s=$n(s,i,n,r,e[2],15,718787259),r=$n(r,s,i,n,e[9],21,-343485551),t[0]=Ei(n,t[0]),t[1]=Ei(r,t[1]),t[2]=Ei(s,t[2]),t[3]=Ei(i,t[3])}function cd(t,e,n,r,s,i){return e=Ei(Ei(e,t),Ei(r,i)),Ei(e<<s|e>>>32-s,n)}function En(t,e,n,r,s,i,o){return cd(e&n|~e&r,t,e,s,i,o)}function Sn(t,e,n,r,s,i,o){return cd(e&r|n&~r,t,e,s,i,o)}function An(t,e,n,r,s,i,o){return cd(e^n^r,t,e,s,i,o)}function $n(t,e,n,r,s,i,o){return cd(n^(e|~r),t,e,s,i,o)}function Fk(t){const e=t.length,n=[1732584193,-271733879,-1732584194,271733878];let r;for(r=64;r<=t.length;r+=64)wf(n,Uk(t.substring(r-64,r)));t=t.substring(r-64);const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<t.length;r++)s[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(s[r>>2]|=128<<(r%4<<3),r>55)for(wf(n,s),r=0;r<16;r++)s[r]=0;return s[14]=e*8,wf(n,s),n}function Uk(t){let e;const n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}const Pv="0123456789abcdef".split("");function Bk(t){let e="",n=0;for(;n<4;n++)e+=Pv[t>>n*8+4&15]+Pv[t>>n*8&15];return e}function zk(t){for(let e=0;e<t.length;e++)t[e]=Bk(t[e]);return t.join("")}function Ei(t,e){return t+e&4294967295}function Vk(t){return zk(Fk(t))}function n1(t){const e=t;return(e^Math.random()*16>>e/4).toString(16)}function r1(t=9){return(10**(t-1)).toString().replace(/[01]/g,n1)}function Qn(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,n1)}function Ir(t={}){const e=typeof t=="number"?t:(t.milliseconds||t.ms||0)+(t.seconds||0)*1e3;return new Promise(n=>setTimeout(n,e))}async function Hk(){await new Promise(()=>{})}async function qk(t){for(;location.href!==t;)await Ir({ms:1})}function gl(t){return Kk()[t]}function Kk(){const t=new URL(location.href),e={};return t.searchParams.forEach((n,r)=>e[r]=n),e}function Yo(t){return new URL(location.href).searchParams.has(t)}async function Wk(t){const e=Object.entries(t).reduce((n,[r,s])=>(s?n.searchParams.set(r,s):n.searchParams.delete(r),n),new URL(location.href));history.pushState(null,document.title,e.href),await qk(e.href)}function s1(t,e=0){const n=10**e;return Math.round(t*n)/n}const Gk=Object.getPrototypeOf(Object);function Jk(t,e){class n extends t{constructor(...s){super(...s);for(const i of e){const o=new i(...s);Object.assign(this,o)}return this}}return Wn(n,"__mixins",e),Xk(n,e),n}function Yk(t,e){if(e===Object)return;let n=e;do{const r=Ws(Object.getOwnPropertyDescriptors(n.prototype),["constructor"]);for(const[s,i]of Object.entries(r))Object.defineProperty(t.prototype,s,i);n=Object.getPrototypeOf(n)}while(n!==Gk)}function Xk(t,e=[]){for(const n of e)Yk(t,n)}function ud(t,e=[]){const n=Array.isArray(t)?Object:t,r=Array.isArray(t)?t:e;return Jk(n,r)}function dd(...t){return ud(...t)}function fd(t,e){var n,r;return((t==null?void 0:t.__mixins)??((r=(n=t==null?void 0:t.__proto__)==null?void 0:n.constructor)==null?void 0:r.__mixins)??[]).includes(e)}async function Qk(t,e){for(const n of t){const r=await e(n);if(r)return r}return null}function Zk(t){return"then"in t}function i1(t,e=null){return typeof t!="function"?t.catch(()=>e):async(...n)=>{try{return await t(...n)}catch{return e??null}}}function eI(t,e=300,n="..."){return t.length<e?t:t.substring(0,e-n.length)+n}function o1(t,e){return t.match(e)}function a1(t,e){return t.matchAll(e)}function tI(t){return t.split("").reverse().join("")}function Wm(t){return t.split(/_|-|\s|(?=[A-Z])/)}function ro(t){const[e,...n]=Wm(t);return(e??"").toLowerCase()+n.map(r=>r.slice(0,1).toUpperCase()+r.slice(1).toLowerCase()).join("")}function Gm(t,e="-"){return t=t.normalize("NFD").replace(/[֊־᐀‐‑‒–—―⸗⸚⸺⸻~〜〰゠︱︲﹘﹣－(){}><[\]]/g," ").replace(/[\u0300-\u036f]/g,"").replace(/[\u3000-\u303f]/g,"").replace(/['".,#!$%/\\^&*;:=`@+?]/g,"").toLowerCase().trim().replace(/\s+/g,e),e.length>0&&(t=t.replace(new RegExp(`${e}+`,"g"),e)),t}function nI(t){return Wm(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join("")}function rI(t){return Wm(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function Zt(t){return Cr(t)??Ye(`Failed getting parent directory from '${t}'`)}function sI(t){return l1(t)??Ye(`Failed getting directory name from '${t}'`)}function iI(t){return Jl(t)??Ye(`Failed parsing url from '${t}'`)}function pa(...t){let e=t.shift();for(;t.length>0;){const n=t.shift();n.startsWith("/")?e=_s(e)+n:n.match(/^[\w-]+:\/\//)?e=n:e.endsWith("/")?e+=n:e+="/"+n}return e}function vp(...t){const e=pa(...t);return e.endsWith("/")?e:e+"/"}function _s(t){const e=t.indexOf("://")+3,n=t.substr(e).indexOf("/");return n!==-1?t.substring(0,e+n):t}function Cr(t){if(t.endsWith("/")&&(t=t.substring(0,t.length-1)),_s(t)===t)return null;const e=t.lastIndexOf("/");return e!==-1?t.substr(0,e+1):null}function l1(t){t.endsWith("/")||(t=Cr(t)??t+"/");const e=t.slice(0,-1);return _s(t)===e?null:c1(e)}function c1(t){const e=t.lastIndexOf("/");return(e!==-1?t.slice(e+1):"").replace(/#.*$/,"").replace(/\?.*$/,"")}function Jl(t){const e=t.trim().match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);if(!e)return null;const n=e[4]||"",[r,s]=n.indexOf(":")===-1?[n]:n.split(":");return{protocol:e[2]||void 0,domain:r||void 0,port:s||void 0,path:e[5]||void 0,query:e[7]||void 0,fragment:e[9]||void 0}}function u1(t,e){const n=Jl(t);if(!n)return t;for(const[r,s]of Object.entries(n))n[r]=e[r]!==!1&&s||"";return[n.protocol?`${n.protocol}://`:"",n.domain??"",n.port?`:${n.port}`:"",n.path??"",n.query?`?${n.query}`:"",n.fragment?`#${n.fragment}`:""].join("")}function kr(t){return u1(t,{protocol:!0,domain:!0,port:!0,path:!0,query:!1,fragment:!1})}function d1(t,e){const n=t.prototype;for(const[r,s]of Object.entries(e))n[r]=function(...i){var o;const a=s(this.value,...i);return(o=this.chain)==null?void 0:o.call(this,a)}}function f1(t,e){const n=t.prototype,r=Object.getOwnPropertyDescriptors(e.prototype);for(const[s,i]of Object.entries(r))if(!(s in n)){if(typeof i.value!="function"){Object.defineProperty(n,s,{get(){return this.chain(this.value[s])}});continue}n[s]=function(...o){var a;const l=i.value.call(this.value,...o);return(a=this.chain)==null?void 0:a.call(this,l)}}}let h1=class{constructor(e){this.value=e}static isPrimitive(e){return this.prototype.isPrimitive(e)}create(e){const n=this.constructor;return new n(e)}chain(e){return this.isPrimitive(e)?this.create(e):e}};const oI={clear:wk,diff:ka,filter:un,first:Sk,flatMap:Ak,groupBy:$k,isEmpty:Ck,project:kk,randomItem:Ik,randomItems:Rk,remove:ar,removeIndex:Tk,replace:G0,sorted:ml,unique:dr,where:Ok,without:gr,withoutIndexes:Km};let Jm=class extends h1{static create(e=[]){const{prototype:n}=this;return n.create(e)}*[Symbol.iterator](){yield*this.value}get(e){return this.value[e]}toArray(){return this.value.slice(0)}isPrimitive(e){return Array.isArray(e)}};d1(Jm,oI);f1(Jm,Array);const aI={reverse:tI,toCamelCase:ro,toSlug:Gm,toStudlyCase:nI,toTitleCase:rI};let p1=class extends h1{static create(e=""){const{prototype:n}=this;return n.create(e)}toString(){return this.value}isPrimitive(e){return typeof e=="string"}};d1(p1,aI);f1(p1,String);const lI=[];function ts(t){let e=null;function n(){try{return t()}catch{return new t}}function r(i){return e=i,i}const s={setInstance:r,newInstance:n,requireInstance:()=>e??r(n()),reset:()=>r(n())};return lI.forEach(i=>i(s)),new Proxy(s,{get:(i,o,a)=>{const l=o!=="constructor"&&o in s?s:s.requireInstance();return Reflect.get(l,o,a)},set:(i,o,a)=>Reflect.set(s.requireInstance(),o,a)})}function cI(t){const e=new Proxy(t,{get(n,r,s){const i=Reflect.get(n,r,s);return typeof i!="function"?i:(...o)=>(i.call(n,...o),e)}});return e}function Be(t,e){if(!e)return cI(t);const n=e(t);return n instanceof Promise?n.then(()=>t):t}function uI(){}let dI=class{constructor(e,n){this.errorMessage=e,this.getValue=n}get(e,n,r){const s=this.getValue()??Ye(this.errorMessage),i=Reflect.get(s,n,r);return typeof i=="function"?i.bind(s):i}set(e,n,r,s){const i=this.getValue()??Ye(this.errorMessage);return Reflect.set(i,n,r,s)}getPrototypeOf(){const e=this.getValue()??Ye(this.errorMessage);return Object.getPrototypeOf(e)}};function On(t,e){return e??(e="Required value is missing"),typeof t=="function"?new Proxy({},new dI(e,t)):t??Ye(e)}function fI(t){return typeof t=="function"?t():t}function bp(t,e){const n=typeof e=="function"?e(t):!!e;return new Proxy(t,{get(r,s,i){return n?Reflect.get(r,s,i):()=>{}}})}function m1(t=[]){return Jm.create(vn(t))}function kn(t=[],e){if(!Array.isArray(t)||typeof t[0]!="string")return Pk.createFromArray(t,e);const n=e;return t.reduce((r,s)=>(r[s]=n(s),r),{})}var hI=Object.defineProperty,pI=(t,e,n)=>e in t?hI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gt=(t,e,n)=>pI(t,typeof e!="symbol"?e+"":e,n);let Ke=class extends Error{constructor(e,n){super(...n?[e,n]:[e]),this.name=new.target.name,Object.setPrototypeOf(this,new.target.prototype)}},Ym=class extends Ke{constructor(e){super(`Could not create document with id ${e} because it is already in use.`),Gt(this,"id"),this.id=e}},cs=class extends Ke{constructor(e,n){super(n?`Couldn't find document with id '${e}' in '${n}' Collection.`:`Couldn't find document with id '${e}'`),Gt(this,"id"),Gt(this,"collection"),this.id=e,this.collection=n}};function mI(t){return t instanceof gI||"getProxySubject"in t}let gI=class{constructor(e,n={}){Gt(this,"subject"),Gt(this,"overrides"),this.subject=e,this.overrides={create:(...r)=>e.create(...r),readOne:(...r)=>e.readOne(...r),readMany:(...r)=>e.readMany(...r),update:(...r)=>e.update(...r),delete:(...r)=>e.delete(...r),...n}}getProxySubject(){return this.subject}async create(e,n,r){return this.overrides.create(e,n,r)}async readOne(e,n){return this.overrides.readOne(e,n)}async readMany(e,n){return this.overrides.readMany(e,n)}async update(e,n,r){return this.overrides.update(e,n,r)}async delete(e,n){return this.overrides.delete(e,n)}},hd=class{constructor(){Gt(this,"rootFilters"),Gt(this,"rootUpdates"),Gt(this,"attributeFilters"),Gt(this,"attributeUpdates"),Gt(this,"documentsIn",(e,n,r)=>r.includes(e)),Gt(this,"documentOverwrite",(e,n)=>{for(const r of Object.getOwnPropertyNames(e))delete e[r];Object.assign(e,n)}),Gt(this,"attributeEq",(e,n,r)=>qm(e[n],r)),Gt(this,"attributeContains",(e,n,r)=>{Array.isArray(r)||(r=[r]);const s=e&&e[n];return Array.isArray(s)?!r.find(i=>!s.find(o=>this.filterValue(o,i))):!1}),Gt(this,"attributeOr",(e,n,r)=>!!r.find(s=>!!this.filterValue(e,{[n]:s}))),Gt(this,"attributeIn",(e,n,r)=>r.includes(e[n])),Gt(this,"attributeUpdate",(e,n,r)=>{if(Array.isArray(r)||!pt(r)){e[n]=r;return}if(this.isOperation(r,this.attributeUpdates)){this.runOperation(r,this.attributeUpdates,e,n);return}if(!pt(e[n])){e[n]=r;return}this.updateAttributes(e[n],r)}),Gt(this,"attributeUpdateItems",(e,n,r)=>{Array.isArray(r)||(r=[r]);for(const{$where:s,$update:i,$override:o,$unset:a}of r){s&&s.$in&&(s.$in=s.$in.map(u=>u.toString()));const l=this.requireArrayProperty("$updateItems",e,n),c=this.filterDocuments(l.reduce((u,d,f)=>({...u,[f]:pt(d)?d:{}}),{}),s||{});i&&Object.keys(c).forEach(u=>{this.updateAttributes(c,{[u]:i}),l[parseInt(u)]=c[u]}),o&&Object.keys(c).forEach(u=>{l[parseInt(u)]=o}),a&&(e[n]=Km(l,Object.keys(c).map(parseInt)))}}),Gt(this,"attributePush",(e,n,r)=>{this.requireArrayProperty("$push",e,n).push(r)}),Gt(this,"attributeUnset",(e,n,r)=>{if(r===!0){delete e[n];return}const s=e[n];if(pt(s)){r=Array.isArray(r)?r:[r];for(const i of r)delete s[i]}}),Gt(this,"attributeApply",(e,n,r)=>{for(const s of r)this.runOperation(s,this.attributeUpdates,e,n)}),Gt(this,"attributeOverwrite",(e,n,r)=>{e[n]=r}),this.rootFilters={$in:this.documentsIn},this.rootUpdates={$overwrite:this.documentOverwrite},this.attributeFilters={$eq:this.attributeEq,$contains:this.attributeContains,$or:this.attributeOr,$in:this.attributeIn},this.attributeUpdates={$update:this.attributeUpdate,$updateItems:this.attributeUpdateItems,$push:this.attributePush,$unset:this.attributeUnset,$apply:this.attributeApply,$overwrite:this.attributeOverwrite}}filterDocuments(e,n={}){return Object.entries(e).reduce((r,[s,i])=>(this.filterDocument(s,i,n)&&(r[s]=i),r),{})}updateAttributes(e,n){if(this.isOperation(n,{$unset:this.attributeUnset})){const r=n.$unset,s=Array.isArray(r)?r:[r];for(const i of s)this.attributeUnset(e,i,!0);return}if(this.isOperation(n,this.rootUpdates)){const[[r,s]]=Object.entries(n);this.rootUpdates[r](e,s);return}for(const[r,s]of Object.entries(n))this.attributeUpdate(e,r,s)}obtainDocumentId(e){return e??Qn()}filterDocument(e,n,r={}){r={...r};for(const[s,i]of Object.entries(this.rootFilters))if(s in r){if(!i(e,n,r[s]))return!1;delete r[s]}return this.filterValue(n,r)}filterValue(e,n={}){return pt(n)?this.isOperation(n,this.attributeFilters)?this.runOperation(n,this.attributeFilters,{value:e},"value"):pt(e)?!Object.entries(n).find(([r,s])=>!(this.isOperation(s,this.attributeFilters)?this.runOperation(s,this.attributeFilters,e,r):this.attributeEq(e,r,s))):!1:this.attributeEq({value:e},"value",n)}isOperation(e,n){if(!pt(e))return!1;const[r,...s]=Object.keys(e);return!!(r&&s.length===0&&r in n)}runOperation(e,n,...r){const[s,i]=Object.entries(e)[0];return n[s](...r,i)}requireArrayProperty(e,n,r){if(!n||!pt(n)||!Array.isArray(n[r]))throw new Error(`${e} operator can only be applied to array attributes`);return n[r]}},vu;function pc(t){for(;t&&mI(t);)t=t.getProxySubject();return t}function yI(){return vu}function Xm(){return vu||Ye(Ke,"Engine must be initialized before performing any operations. Learn more at https://soukai.js.org/guide/core-concepts/engines.html")}function g1(t){if(!t){vu=void 0;return}vu=t}var vI=Object.defineProperty,bI=(t,e,n)=>e in t?vI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rt=(t,e,n)=>bI(t,typeof e!="symbol"?e+"":e,n);let y1=class extends Ke{constructor(e,n,r){super(`Model ${e}: Invalid attributes (${JSON.stringify(n)}).`,r),rt(this,"modelName"),rt(this,"attributes"),this.modelName=e,this.attributes=n}},Si=class extends Ke{constructor(e,n){super(`Model ${e}: ${n}. Learn more at https://soukai.js.org/guide/core-concepts/models.html`),rt(this,"modelName"),this.modelName=e}},_I=class{constructor(e=null){rt(this,"database"),rt(this,"helper"),rt(this,"lock"),rt(this,"_metadata"),rt(this,"_metadataConnection"),rt(this,"_documentsConnection"),this.database=e?"soukai-"+e:"soukai",this.helper=new hd,this.lock=Jc(`idb-${this.database}`,()=>new ad)}getCollections(){return this.lock.run(()=>this.__getCollections())}async dropCollections(e){await this.lock.run(async()=>{await this.withMetadataTransaction("readwrite",n=>(e.forEach(r=>{var s;n.store.put({name:r,dropped:!0,updates:(((s=this._metadata)==null?void 0:s[r].updates)??1)+1})}),n.done)),this.closeConnections(),await this.getDocumentsConnection()})}async purgeDatabase(){await this.lock.run(async()=>{this.closeConnections(),await Promise.all([Ev(`${this.database}-meta`,{blocked:()=>this.throwDatabaseBlockedError()}),Ev(this.database,{blocked:()=>this.throwDatabaseBlockedError()})]),delete this._metadata})}async closeConnections(){this._metadataConnection&&this._metadataConnection.close(),this._documentsConnection&&this._documentsConnection.close(),delete this._metadata,delete this._metadataConnection,delete this._documentsConnection}create(e,n,r){return this.lock.run(async()=>{const s=this.helper.obtainDocumentId(r);if(await this.documentExists(e,s))throw new Ym(s);return await this.createDocument(e,s,n),s})}async readOne(e,n){return this.lock.run(async()=>{if(!await this.collectionExists(e))throw new cs(n,e);const r=await this.getDocument(e,n);if(!r)throw new cs(n,e);return r})}async readMany(e,n){return this.lock.run(async()=>{const r={};return(await this.__getCollections()).indexOf(e)===-1?r:(await this.withDocumentsTransaction(e,"readonly",s=>{const i=async o=>{if(o)return r[o.key]=o.value,o.continue().then(i)};return s.store.openCursor().then(i)}),this.helper.filterDocuments(r,n))})}async update(e,n,r){await this.lock.run(async()=>{const s=await this.getDocument(e,n);if(!s)throw new cs(n,e);this.helper.updateAttributes(s,r),await this.updateDocument(e,n,s)})}async delete(e,n){await this.lock.run(async()=>{if(!await this.documentExists(e,n))throw new cs(n,e);await this.deleteDocument(e,n)})}async __getCollections(){const e=await this.getMetadata();return Object.values(e).filter(({dropped:n})=>!n).map(({name:n})=>n.toString())}async collectionExists(e){return(await this.__getCollections()).indexOf(e)!==-1}async documentExists(e,n){return!!await this.getDocument(e,n)}async getDocument(e,n){try{return(await this.__getCollections()).indexOf(e)===-1?null:await this.withDocumentsTransaction(e,"readonly",r=>r.store.get(n))||null}catch{return null}}async createDocument(e,n,r){const s=await this.__getCollections();return s.indexOf(e)===-1&&(await this.createCollection(e),s.push(e)),this.withDocumentsTransaction(e,"readwrite",i=>(i.store.add(r,n),i.done))}async updateDocument(e,n,r){if((await this.__getCollections()).indexOf(e)!==-1)return this.withDocumentsTransaction(e,"readwrite",s=>(s.store.put(r,n),s.done))}async deleteDocument(e,n){if((await this.__getCollections()).indexOf(e)!==-1)return this.withDocumentsTransaction(e,"readwrite",r=>(r.store.delete(n),r.done))}async withMetadataTransaction(e,n){const r=this._metadataConnection=this._metadataConnection||await mp(`${this.database}-meta`,1,{upgrade(s){s.objectStoreNames.contains("collections")||s.createObjectStore("collections",{keyPath:"name"})},blocked:()=>this.throwDatabaseBlockedError()});return this.retryingOnTransactionInactive(()=>{const s=r.transaction("collections",e);return n(s)})}async withDocumentsTransaction(e,n,r){const s=await this.getDocumentsConnection();return this.retryingOnTransactionInactive(()=>{const i=s.transaction(e,n);return r(i)})}async getDocumentsConnection(){const e=await this.getMetadata(),n=Object.values(e).reduce((r,{updates:s})=>r+(s??1),0);return this._documentsConnection=this._documentsConnection||await mp(this.database,n,{upgrade(r){for(const{name:s,dropped:i}of Object.values(e))r.objectStoreNames.contains(s)&&!i||!r.objectStoreNames.contains(s)&&i||(i?r.deleteObjectStore(s):r.createObjectStore(s))},blocked:()=>this.throwDatabaseBlockedError()})}async getMetadata(){return this._metadata??(this._metadata=await this.initializeMetadata())}async initializeMetadata(){return(await this.withMetadataTransaction("readonly",e=>e.store.getAll())).reduce((e,n)=>(e[n.name]=n,e),{})}retryingOnTransactionInactive(e){try{return e()}catch(n){if(!(n instanceof Error)||!n.name.toLowerCase().includes("inactive")&&!n.message.toLowerCase().includes("inactive"))throw n;return e()}}async createCollection(e){await this.withMetadataTransaction("readwrite",n=>(n.store.add({name:e}),n.done)),delete this._metadata,this._documentsConnection&&(this._documentsConnection.close(),delete this._documentsConnection)}throwDatabaseBlockedError(){throw new Ke("An attempt to open an IndexedDB connection has been blocked, remember to call IndexedDBEngine.closeConnections when necessary. Learn more at https://developer.mozilla.org/en-US/docs/Web/API/IDBOpenDBRequest/blocked_event")}},Hn=class _p{constructor(e){rt(this,"value"),this.value=String(e)}static from(e){return e instanceof _p?e:new _p(e)}equals(e){return this.value===e.value}toString(){return this.value}};const wI={},xI={},xf=new WeakMap;let Yc=new WeakMap;function Lv(t){if(t==null)return wI;switch(typeof t){case"string":return Jc(`listeners-string-key-${t}`,()=>new String(t));case"number":return Jc(`listeners-number-key-${t}`,()=>new Number(t));case"boolean":return Jc(`listeners-boolean-key-${t}`,()=>new Boolean(t));case"object":return t;default:return xI}}function EI(t,e,n){Yc.has(t)||Yc.set(t,{});const r=Yc.get(t),s=r[e]??(r[e]=[]);return s.push(n),()=>ar(s,n)}async function ls(...t){var e;const n="__attributeGetters"in t[0]?t[0]:t[0].static(),r="__attributeGetters"in t[0]?null:t[0],s=t[1],i=t[2],o=r??n,a=(e=Yc.get(n))==null?void 0:e[s],l=Lv(s),c=Lv(i),u=xf.has(l)?xf.get(l):Be(new WeakMap,f=>xf.set(l,f)),d=u.has(c)?u.get(c):Be(new WeakSet,f=>u.set(c,f));!a||d.has(o)||(d.add(o),await Promise.all(a.map(f=>r?f(r,i):f(i))),d.delete(o))}const Va=new WeakMap;function Mv(t){const e=t.target,[n,r]=Va.get(e)??[t.getTargetEngine(),0],s=()=>{const[o,a]=Va.get(e);if(a>1){Va.set(e,[o,a-1]);return}Va.delete(e),e.setEngine(o)},i=o=>{const a=o();return a instanceof Promise?a.then(()=>Be(a,()=>s())):Be(a,()=>s())};return Va.set(e,[n,r+1]),e.setEngine(t.engine),t.operation?i(t.operation):new Proxy(e,{get(o,a,l){const c=Reflect.get(o,a,l);return typeof c!="function"?(s(),c):(...u)=>i(()=>c.call(o,...u))}})}function Nv(t,e){let n=t;for(;n;){if(n!==e){n=Object.getPrototypeOf(n);continue}return!0}return!1}let bu=class{constructor(e,n,r,s){rt(this,"name"),rt(this,"parent"),rt(this,"relatedClass"),rt(this,"foreignKeyName"),rt(this,"localKeyName"),rt(this,"enabled",!0),rt(this,"deleteStrategy",null),rt(this,"_related"),this.parent=e,this.relatedClass=n,this.foreignKeyName=r,this.localKeyName=s||n.primaryKey}get loaded(){return this.related!==void 0}get related(){return this._related}set related(e){const n=this._related;this._related=e,this.onRelatedUpdated(n,e)}static(){return this.constructor}enable(){this.enabled=!0}disable(){this.enabled=!1}resolve(){return this.load()}isEmpty(){return null}async getModels(){return this.loaded||await this.load(),this.getLoadedModels()}getLoadedModels(){return this.related?vn(this.related):[]}unload(){this.related=void 0}onDelete(e){return this.deleteStrategy=e,this}clone(e={}){const n=e.clones??new WeakMap,r=e.constructors??new WeakMap,s=Object.create(Object.getPrototypeOf(this));return s.name=this.name,s.parent=this.parent,s.foreignKeyName=this.foreignKeyName,s.localKeyName=this.localKeyName,s.deleteStrategy=this.deleteStrategy,s.enabled=this.enabled,s.relatedClass=r.get(this.relatedClass)??this.relatedClass,this.related===null?s.related=null:Array.isArray(this.related)?s.related=this.related.map(i=>i.clone({clones:n,constructors:r})):this.related&&(s.related=this.related.clone({clones:n,constructors:r})),s}initializeInverseRelations(e){for(const n of this.relatedClass.relations){const r=e.requireRelation(n);!r.enabled||!r.isInverseOf(this)||(r.setForeignAttributes(this.parent),r.addRelated(this.parent))}}clearInverseRelations(e){for(const n of this.relatedClass.relations){const r=e.requireRelation(n);!r.enabled||!r.isInverseOf(this)||(r.clearForeignAttributes(this.parent),r.removeRelated(this.parent))}}isInverseOf(e){const n=r=>e instanceof r;return this.static().inverseBelongsToRelationClasses.some(n)?Nv(this.parent.constructor,e.relatedClass)&&e.foreignKeyName===this.foreignKeyName&&e.localKeyName===this.localKeyName:this.static().inverseHasRelationClasses.some(n)?Nv(e.parent.constructor,this.relatedClass)&&this.foreignKeyName===e.foreignKeyName&&this.localKeyName===e.localKeyName:!1}onRelatedUpdated(e,n){}};rt(bu,"inverseHasRelationClasses",[]),rt(bu,"inverseBelongsToRelationClasses",[]);let Ii=class extends bu{constructor(e,n,r,s){super(e,n,r||ro(n.modelName+"_"+n.primaryKey+"s"),s)}get related(){return this._related}set related(e){const n=this.related;this._related=e,this.onRelatedUpdated(n,e)}attach(e={}){const n=e instanceof this.relatedClass?e:this.relatedClass.newInstance(e);return Be(n,()=>{!this.assertLoaded("attach")||this.isRelated(n)||(this.addRelated(n),this.initializeInverseRelations(n),this.setForeignAttributes(n))})}async create(e={}){const n=this.attach(e);return await n.save(),n}addRelated(e){var n;(n=this.related)!=null&&n.includes(e)||(this.related=(this.related??[]).concat(e))}removeRelated(e){var n;(n=this.related)!=null&&n.includes(e)&&(this.related=gr(this.related,e))}isRelated(e){var n;return!!((n=this.related)!=null&&n.includes(e))}onRelatedUpdated(e,n){}assertLoaded(e){if(this.loaded)return!0;if(!this.parent.exists())return this.related=[],!0;throw new Ke(`The "${e}" method can't be called before loading the relationship`)}},Zo=class extends Ii{isEmpty(){return this.parent.getAttribute(this.foreignKeyName).length===0}async load(){const e=this.parent.getAttribute(this.foreignKeyName);return this.related=this.isEmpty()?[]:this.localKeyName===this.relatedClass.primaryKey?await this.relatedClass.all({$in:e}):await this.relatedClass.all({[this.localKeyName]:{$or:[...e.map(n=>({$eq:n})),...e.map(n=>({$contains:n}))]}}),this.related}setForeignAttributes(e){const n=e.getAttribute(this.localKeyName);if(!n)return;const r=this.parent.getAttribute(this.foreignKeyName);r.includes(n)||this.parent.setAttribute(this.foreignKeyName,r.concat([n]))}clearForeignAttributes(e){const n=e.getAttribute(this.localKeyName);if(!n)return;const r=this.parent.getAttribute(this.foreignKeyName);r.includes(n)&&this.parent.setAttribute(this.foreignKeyName,gr(r,n))}},Ia=class extends bu{constructor(e,n,r,s){super(e,n,r||ro(n.modelName+"_"+n.primaryKey),s)}get related(){return this._related}set related(e){const n=this.related;this._related=e,this.onRelatedUpdated(n,e)}attach(e={}){const n=e instanceof this.relatedClass?e:this.relatedClass.newInstance(e);return Be(n,()=>{if(this.loaded&&this.related&&!this.isRelated(n))throw new Ke(`The "attach" method can't be called because a related model already exists, use a hasMany relationship if you want to support multiple related models.`);this.addRelated(n),this.initializeInverseRelations(n),this.setForeignAttributes(n)})}addRelated(e){e!==this.related&&(this.related=e)}removeRelated(e){e===this.related&&(this.related=null)}isRelated(e){return e===this.related}onRelatedUpdated(e,n){}},yl=class extends Ia{isEmpty(){return!this.parent.getAttribute(this.foreignKeyName)}async load(){const e=this.parent.getAttribute(this.foreignKeyName);return this.related=this.isEmpty()?null:this.localKeyName===this.relatedClass.primaryKey?await this.relatedClass.find(e):await this.relatedClass.first({[this.localKeyName]:e}),this.related}setForeignAttributes(e){const n=e.getAttribute(this.localKeyName);n&&this.parent.setAttribute(this.foreignKeyName,n)}clearForeignAttributes(e){e.getAttribute(this.localKeyName)===this.parent.getAttribute(this.foreignKeyName)&&this.parent.setAttribute(this.foreignKeyName,null)}},ea=class extends Ii{async load(){const e=this.parent.getAttribute(this.localKeyName);return this.related=await this.relatedClass.all({[this.foreignKeyName]:{$or:[{$eq:e},{$contains:e}]}}),this.related}setForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.setAttribute(this.foreignKeyName,n);return}r.includes(n)||e.setAttribute(this.foreignKeyName,r.concat([n]))}clearForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.getAttribute(this.foreignKeyName)===n&&e.setAttribute(this.foreignKeyName,null);return}r.includes(n)&&e.setAttribute(this.foreignKeyName,gr(r,n))}},so=class extends Ia{async load(){const e=this.parent.getAttribute(this.localKeyName);return this.related=await this.relatedClass.first({[this.foreignKeyName]:{$or:[{$eq:e},{$contains:e}]}}),this.related}setForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.setAttribute(this.foreignKeyName,n);return}r.includes(n)||e.setAttribute(this.foreignKeyName,r.concat([n]))}clearForeignAttributes(e){const n=this.parent.getAttribute(this.localKeyName);if(!n)return;const r=e.getAttribute(this.foreignKeyName);if(!Array.isArray(r)){e.getAttribute(this.foreignKeyName)===n&&e.setAttribute(this.foreignKeyName,null);return}r.includes(n)&&e.setAttribute(this.foreignKeyName,gr(r,n))}};const Ae={Number:"number",String:"string",Boolean:"boolean",Array:"array",Object:"object",Date:"date",Key:"key",Any:"any"},jv=Object.values(Ae);function wp(t,e,n,r=!1){let s={};if(typeof n=="string"&&jv.indexOf(n)!==-1)s.type=n;else if(typeof n=="object")s=n;else throw new Si(t,`Invalid field definition ${e}`);if(typeof s.type>"u")s={type:Ae.Object,fields:s};else if(jv.indexOf(s.type)===-1)throw new Si(t,`Invalid field definition ${e}`);switch(r||(s.required=!!s.required),s.type){case Ae.Object:if(typeof s.fields>"u")throw new Si(t,`Field definition of type object requires fields attribute ${e}`);for(const i in s.fields)mu(s.fields,i)&&(s.fields[i]=wp(t,i,s.fields[i]));break;case Ae.Array:if(typeof s.items>"u")throw new Si(t,`Field definition of type array requires items attribute. Field: '${e}'`);s.items=wp(t,"items",s.items,!0);break}return s}function v1(t){return t.type===Ae.Array}function b1(t,e){for(const[n,r]of Object.entries(e)){if(!(n in t))switch(r.type){case Ae.Object:t[n]={};break;case Ae.Array:t[n]=[];break;default:t[n]=void 0;break}if(r.type===Ae.Object){const s=t[n];if(!pt(s))throw new Ke(`Invalid value for field ${n}`);t[n]=b1(s,r.fields)}}return t}function xp(t,e){for(const[n,r]of Object.entries(e)){if(r.required&&(!(n in t)||yp(t[n])))throw new Ke(`The ${n} attribute is required.`);if(n in t&&!yp(t[n])&&r.type===Ae.Object){const s=t[n];if(!pt(s))throw new Ke(`Invalid value for field ${n}`);xp(s,r.fields)}}}function Xc(t,e){t=Hr(t);for(const n in t){const r=e[n];if(typeof t[n]>"u")delete t[n];else if(n in e&&r.type===Ae.Object){const s=Xc(t[n],r.fields);pl(s)?delete t[n]:t[n]=s}}return t}const Ct={CreatedAt:"createdAt",UpdatedAt:"updatedAt"},Fv=Object.values(Ct);function SI(){so.inverseBelongsToRelationClasses.length>0||(so.inverseBelongsToRelationClasses=[yl,Zo],ea.inverseBelongsToRelationClasses=[yl,Zo],yl.inverseHasRelationClasses=[so,ea],Zo.inverseHasRelationClasses=[so,ea])}const Uv=new WeakSet,Ef=new WeakMap,mn=class Qc{static boot(e){SI();const n={};this.bootedModels.set(this,!0),this.modelName=this.bootModelName(e),this.collection=this.bootCollection(),this.timestamps=this.bootTimestamps(this.timestamps,n);const{fields:r,fieldAliases:s}=this.bootFields(this.fields,this.primaryKey,this.timestamps,n);this.fields=r,this.fieldAliases=s;const{classFields:i,relations:o,attributeGetters:a,attributeSetters:l}=this.bootClassDefinitions();this.classFields=i,this.relations=o,this.__attributeGetters=a,this.__attributeSetters=l;const c=this.bootHooks(this.hooks);this.hooks=c}static ensureBooted(){this.bootedModels.has(this)||this.boot()}static async updateSchema(e){await this.performSchemaUpdate(e),await ls(this,"schema-updated",e)}static create(e={}){return new this(e).save()}static createFromEngineDocument(e,n){return this.instance().createFromEngineDocument(e,n)}static createManyFromEngineDocuments(e){return this.instance().createManyFromEngineDocuments(e)}static async findOrFail(e){return await this.find(e)??Ye(`Failed getting required model ${e}`)}static async find(e){this.ensureBooted();try{const n=await this.requireEngine().readOne(this.collection,this.instance().serializeKey(e));return await this.createFromEngineDocument(e,n)}catch{return null}}static async all(e){this.ensureBooted();const n=await this.requireEngine().readMany(this.collection,e);return await this.createManyFromEngineDocuments(n)}static async first(e){const[n]=await this.all(e);return n||null}static newInstance(...e){return this.instance().newInstance(...e)}static on(e,n){return EI(this,e,n)}static instance(){return this.instances.has(this)||this.instances.set(this,new this),this.instances.get(this)}static hasAutomaticTimestamp(e){return this.timestamps.indexOf(e)!==-1}static hasAutomaticTimestamps(){return this.timestamps.length>0}static getEngine(){return this.engines.get(this)??yI()}static getFinalEngine(){const e=this.getEngine();return e&&pc(e)}static requireEngine(){return this.engines.get(this)??Xm()}static requireFinalEngine(){return pc(this.requireEngine())}static setEngine(e){if(!e){this.engines.delete(this);return}this.engines.set(this,e)}static withEngine(e,n){return Mv({target:this,getTargetEngine:()=>this.engines.get(this),engine:e,operation:n})}static async withCollection(e,n){return this.collection===e?n():this.exclusive(async()=>{const r=this.collection;this.collection=e||r;try{return await n()}finally{this.collection=r}})}static async withoutTimestamps(e){return this.ignoringTimestamps.set(this,!0),Be(await e(),()=>this.ignoringTimestamps.delete(this))}static async exclusive(e){return Ef.has(this)||Ef.set(this,new ad),On(Ef.get(this)).run(async()=>e())}static pureInstance(){return this.pureInstances.has(this)||this.pureInstances.set(this,new this({__pureInstance:!0})),this.pureInstances.get(this)}static bootModelName(e){const n=Object.getOwnPropertyDescriptor(this,"modelName");return(n==null?void 0:n.value)??e??this.name}static bootCollection(){let e=this;for(;e!==Qc&&(!e.hasOwnProperty("collection")||Uv.has(e));)e=Object.getPrototypeOf(e);return e===Qc&&Uv.add(this),e.collection??this.pureInstance().getDefaultCollection()}static bootTimestamps(e,n){if(typeof e!="boolean"&&typeof e<"u"&&!Array.isArray(e))throw new Si(this.modelName,"Invalid timestamps definition");if(e===!1)return[];Array.isArray(e)||(e=Fv);const r=e.find(s=>!Fv.includes(s));if(r)throw new Si(this.modelName,`Invalid timestamp field defined (${r})`);for(const s of e)n[s]={type:Ae.Date,required:!1};return e}static bootFields(e,n,r,s){if(typeof e>"u")return s[n]={type:Ae.Key,required:!1},{fields:s,fieldAliases:{}};const i={};for(const[o,a]of Object.entries(e)){if(!mu(e,o))continue;const l=s[o]=wp(this.modelName,o,a);if(l.alias&&(i[o]=l.alias,i[l.alias]=o),r.includes(o)&&(l.type!==Ae.Date||l.required))throw new Si(this.modelName,`Field ${o} definition must be type Date and not required because it is used an automatic timestamp. Learn more at https://soukai.js.org/guide/core-concepts/models.html#automatic-timestamps`)}return n in s||(s[n]={type:Ae.Key,required:!1}),{fields:s,fieldAliases:i}}static bootClassDefinitions(){const e=this.pureInstance(),n=["_engine","_recentlyDeletedPrimaryKey"],r=Object.getOwnPropertyNames(e).concat(n),s=[],i=new Map,o=new Map;let a=Object.getPrototypeOf(e);for(;a!==Qc.prototype;){a.constructor.classFields&&r.push(...a.constructor.classFields);for(const[l,c]of Object.entries(Object.getOwnPropertyDescriptors(a))){const u=l;typeof c.value=="function"&&(u.endsWith("Relationship")?s.push(u.slice(0,-12)):u.match(/get.+Attribute/)?i.set(ro(u.slice(3,-9)),e[u]):u.match(/set.+Attribute/)&&o.set(ro(u.slice(3,-9)),e[u]))}a=Object.getPrototypeOf(a)}return{classFields:dr(r),relations:dr(s),attributeGetters:i,attributeSetters:o}}static bootHooks(e){return e??{}}static async performSchemaUpdate(e){const n=e.primaryKey??"id",r={},s=this.bootTimestamps(e.timestamps,r),i=this.bootHooks(e.hooks),{fields:o,fieldAliases:a}=this.bootFields(e.fields,n,s,r);this.primaryKey=n,this.timestamps=s,this.hooks=i,this.fields=o,this.fieldAliases=a}constructor(e={},n=!1){var r;if(!("__pureInstance"in e))return this.static().ensureBooted(),this.initializeProxy(),this.initialize(e,n),(r=this.static("hooks").afterInitialize)==null||r.call(this._proxy),this._proxy}static(e){const n=this.constructor;return e?n[e]:n}newInstance(...e){const n=this.constructor;return new n(...e)}async fresh(){const e=this.getPrimaryKey(),n=e?await this.static().find(e):null;if(!n)throw new Ke(`Couldn't get fresh instance for ${this.static("modelName")} with id '${e}'`);return n}update(e={}){e=this.castAttributes(e,this.static("fields"));for(const n in e)this.setAttribute(n,e[n]);return this.save()}hasRelation(e){return this.static("relations").indexOf(e)!==-1}getRelation(e){return this._relations[e]||null}requireRelation(e){return this._relations[e]??Ye(Ke,`Attempting to use undefined ${e} relation.`)}getEngine(){return this._engine??this.static().getEngine()}getFinalEngine(){const e=this.getEngine();return e&&pc(e)}requireEngine(){return this._engine??this.static().requireEngine()}requireFinalEngine(){return pc(this.requireEngine())}getDefaultCollection(){return this.static("modelName").toLowerCase()+"s"}async loadRelation(e){const n=this.requireRelation(e),r=await n.relatedClass.withEngine(this.requireEngine(),()=>n.load());return this.emit("relation-loaded",n),r}async loadRelationIfUnloaded(e){const n=this.requireRelation(e);return n.loaded?n.getLoadedModels():this.loadRelation(e)}unloadRelation(e){this.requireRelation(e).unload()}getRelationModel(e){var n;const r=this.requireRelation(e);return r instanceof Ii?(console.warn(`You're getting a single model from the multi-model '${e}' relation in the '${this.static("modelName")}' model.`),((n=r.related)==null?void 0:n[0])??null):r.related??null}getRelationModels(e){const n=this.requireRelation(e);return n instanceof Ia?n.related?[n.related]:null:n.related??null}setRelationModel(e,n){const r=this.requireRelation(e);if(r instanceof Ii){console.warn(`You're setting a single model for the multi-model '${e}' relation in the '${this.static("modelName")}' model.`),r.related=[n];return}r.related=n}setRelationModels(e,n){const r=this.requireRelation(e),s=()=>{if(n===null||r instanceof Ii)return n;if(n.length>0)throw new Ke("Can't set multiple models for SingleModelRelation, use setRelationModel instead");return n[0]??null};r.related=s()}isRelationLoaded(e){return this.requireRelation(e).loaded}hasAttribute(e){const n=e.split(".");let r=Xc(this._attributes,this.static("fields"));for(const s of n){if(!pt(r)||!(s in r))return!1;r=r[s]}return r!==void 0}setAttribute(e,n){const r=this.static().fieldAliases[e],s=this.getAttribute(e);this.hasAttributeSetter(e)?this.callAttributeSetter(e,n):this.setAttributeValue(e,n),r&&this.attributeValueChanged(this.getAttribute(r),n)&&this.setAttribute(r,n),this.attributeValueChanged(s,n)&&this.emit("modified",e)}setAttributeValue(e,n){this._attributes[e]=n=this.castAttribute(n,{definition:this.static("fields")[e]}),this.markAttributeDirty(e,this._originalAttributes[e],n)?this._dirtyAttributes[e]=n:delete this._dirtyAttributes[e]}hasAttributeSetter(e){var n;return this.static("__attributeSetters").has(e)||!!((n=this.static("fields")[e])!=null&&n.set)}callAttributeSetter(e,n){var r;const s=this.static("__attributeSetters").get(e)??((r=this.static("fields")[e])==null?void 0:r.set);return s==null?void 0:s.call(this,n)}getOriginalAttribute(e){return this._originalAttributes[e]}getDeletedPrimaryKey(){return this._recentlyDeletedPrimaryKey??null}setOriginalAttribute(e,n){n=this.castAttribute(n,{definition:this.static("fields")[e]}),this._originalAttributes[e]=n,this._attributes[e]=n,delete this._dirtyAttributes[e]}setAttributes(e){for(const[n,r]of Object.entries(e))this.setAttribute(n,r)}getMalformedDocumentAttributes(){return this._malformedDocumentAttributes}setMalformedDocumentAttributes(e){this._malformedDocumentAttributes=e}setEngine(e){if(!e){delete this._engine;return}this._engine=e}withEngine(e,n){return Mv({target:this,getTargetEngine:()=>this._engine,operation:n&&(()=>n(this)),engine:e})}async withoutTimestamps(e){return this.static().ignoringTimestamps.set(this,!0),Be(await e(),()=>this.static().ignoringTimestamps.delete(this))}getAttribute(e,n=!1){return this.hasAttributeGetter(e)?this.callAttributeGetter(e):this.getAttributeValue(e,n)}getAttributeValue(e,n=!1){const r=e.split(".");let s=this.getAttributes(n);for(;r.length>0;){const i=s[r.shift()];if(!pt(i))return i;s=i}return s}getAttributes(e=!1){return e?Hr(this._attributes):Xc(this._attributes,this.static("fields"))}hasAttributeGetter(e){var n;return this.static("__attributeGetters").has(e)||!!((n=this.static("fields")[e])!=null&&n.get)}callAttributeGetter(e){var n;const r=this.static("__attributeGetters").get(e)??((n=this.static("fields")[e])==null?void 0:n.get);return r==null?void 0:r.call(this)}unsetAttribute(e){mu(this._attributes,e)&&(e in this.static("fields")?this._attributes[e]=void 0:delete this._attributes[e],this.markAttributeDirty(e,this._originalAttributes[e],void 0)?this._dirtyAttributes[e]=void 0:delete this._dirtyAttributes[e])}hasIncompleteAttributes(){try{return xp(this._attributes,this.static("fields")),!1}catch{return!0}}is(e){return this.getPrimaryKey()===e.getPrimaryKey()}isDirty(e){return e?e in this._dirtyAttributes:Object.values(this._dirtyAttributes).length>0}cleanDirty(){this._originalAttributes=Hr(this._attributes),this._dirtyAttributes={},this._exists=!0}reset(){delete this._attributes[this.static("primaryKey")],this._exists=!1,this._dirtyAttributes=Hr(this._attributes)}getPrimaryKey(){return this._attributes[this.static("primaryKey")]??null}getSerializedPrimaryKey(){const e=this.getPrimaryKey();return e?this.serializeKey(e):null}async delete(){return this._exists?(await this.performDelete(),await this.emit("deleted"),this):this}async save(){var e,n;xp(this._attributes,this.static("fields"));const r=this.exists();return r&&!this.isDirty()?this:(await((e=this.static("hooks").beforeSave)==null?void 0:e.call(this)),await this.beforeSave(),await this.performSave(),await((n=this.static("hooks").afterSave)==null?void 0:n.call(this)),await this.afterSave(),await this.emit(r?"updated":"created"),this)}fixMalformedAttributes(){this.performMalformedAttributeFixes(),this._malformedDocumentAttributes={}}touch(){this.setAttribute(Ct.UpdatedAt,new Date)}setExists(e){this._exists=e}exists(){return this._exists}wasRecentlyCreated(){return this._wasRecentlyCreated}wasRecentlyDeleted(){return!!this._recentlyDeletedPrimaryKey}clone(e={}){const n=e.clones??new WeakMap;if(n.has(this))return n.get(this);const r=e.constructors,s=Array.isArray(r)?Be(new WeakMap,a=>{r.forEach(([l,c])=>a.set(l,c))}):r??new WeakMap,i=s.get(this.static())??this.static(),o=new i(this.getAttributes());n.set(this,o);for(const[a,l]of Object.entries(this._relations))o._relations[a]=Be(l.clone({clones:n,constructors:s}),c=>c.parent=o);return e.clean&&o.cleanDirty(),o}initialize(e,n){this._exists=n,this._wasRecentlyCreated=!1,this.initializeAttributes(e,n),this.initializeRelations()}initializeProxy(){this._proxy=new Proxy(this,{get(e,n,r){if(typeof n!="string"||n in e||e.static("classFields").indexOf(n)!==-1)return Reflect.get(e,n,r);if(e.hasRelation(n))return e._proxy.isRelationLoaded(n)?e._proxy.requireRelation(n).related:void 0;if(n.startsWith("related")){const s=ro(n.substr(7));if(e._proxy.hasRelation(s))return e._relations[s]}return e._proxy.getAttribute(n)},set(e,n,r,s){return typeof n!="string"||n in e||e.static("classFields").indexOf(n)!==-1?Reflect.set(e,n,r,s):e._proxy.hasRelation(n)?(e._proxy.requireRelation(n).related=r,!0):(e._proxy.setAttribute(n,r),!0)},deleteProperty(e,n){return typeof n!="string"||n in e?Reflect.deleteProperty(e,n):e._proxy.hasRelation(n)?(e._proxy.unloadRelation(n),!0):!(n in e._attributes)||e.static("classFields").indexOf(n)!==-1?Reflect.deleteProperty(e,n):(e._proxy.unsetAttribute(n),!0)}})}initializeAttributes(e,n){try{const r=this.static("fields");this._malformedDocumentAttributes={},this._attributes=Hr(e),this._attributes=this.castAttributes(b1(this._attributes,r),r,this._malformedDocumentAttributes);for(const[s,i]of Object.entries(this.static().fieldAliases)){const o=this._attributes[s]??this._attributes[i];this._attributes[s]=o,this._attributes[i]=o}this._originalAttributes=n?Hr(this._attributes):{},this._dirtyAttributes=n?{}:Hr(this._attributes),delete this._malformedDocumentAttributes[this.static("primaryKey")]}catch(r){throw new y1(this.static("modelName"),e,{cause:r})}}initializeRelations(){this._relations=this.static("relations").reduce((e,n)=>{var r;const s=this._proxy,i=(r=s[ro(n)+"Relationship"])==null?void 0:r.call(s);return i.name=n,e[n]=i,e},{})}async createFromEngineDocument(e,n){const r=await this.parseEngineDocumentAttributes(e,n);r[this.static("primaryKey")]=e;for(const[s,i]of Object.entries(this.static("fields")))i.deserialize&&(r[s]=i.deserialize(r[s]));return this.newInstance(r,!0)}async createManyFromEngineDocuments(e){return Promise.all(Object.entries(e).map(([n,r])=>this.createFromEngineDocument(this.parseKey(n),r)))}async beforeSave(){const e=new Date,n=this.static().ignoringTimestamps;if(!n.has(this)&&!n.has(this.static())&&(this.static().hasAutomaticTimestamp(Ct.CreatedAt)&&this.setAttribute(Ct.CreatedAt,this.getAttribute(Ct.CreatedAt)??e),this.static().hasAutomaticTimestamp(Ct.UpdatedAt))){const r=this.isDirty(Ct.UpdatedAt)?this.getAttribute(Ct.UpdatedAt):e;this.setAttribute(Ct.UpdatedAt,r??e)}}async performSave(){const e=this.exists(),n=await this.syncDirty();this._wasRecentlyCreated=this._wasRecentlyCreated||!e,this._attributes[this.static("primaryKey")]=this.parseKey(n)}async afterSave(){this.cleanDirty(),await this.loadEmptyRelations()}async performDelete(){const e=this.getPrimaryKey(),n=await this.getCascadeModels();await this.deleteModelsFromEngine(n),n.forEach(r=>r.reset()),this._recentlyDeletedPrimaryKey=e}performMalformedAttributeFixes(){const e=Object.keys(this._malformedDocumentAttributes),n=(r,s)=>s.type===Ae.Array?e.some(i=>i.startsWith(`${r}.`)):r in this._malformedDocumentAttributes;for(const[r,s]of Object.entries(this.static("fields")))n(r,s)&&(this._dirtyAttributes[r]=this._attributes[r])}async emit(...e){return ls(this,...e)}async syncDirty(){if(!this.exists())return this.requireEngine().create(this.static("collection"),this.toEngineDocument(),this.getSerializedPrimaryKey()||void 0);const e=this.getDirtyEngineDocumentUpdates(),n=this.getSerializedPrimaryKey();return await this.requireEngine().update(this.static("collection"),n,e),n}async getCascadeModels(){const e=this.static("relations").map(r=>this.requireRelation(r)).filter(r=>r.enabled&&r.deleteStrategy==="cascade").map(async r=>(await r.getModels()).map(s=>s.getCascadeModels())),n=await Promise.all(e);return(await Promise.all(n.flat())).flat().concat([this]).filter(r=>r.exists())}async deleteModelsFromEngine(e){const n=e.map(r=>[r.static("collection"),r.getSerializedPrimaryKey()]);await Promise.all(n.map(([r,s])=>this.requireEngine().delete(r,s)))}resetEngineData(){this.reset()}hasOne(e,n,r){return new so(this,e,n,r)}belongsToOne(e,n,r){return new yl(this,e,n,r)}hasMany(e,n,r){return new ea(this,e,n,r)}belongsToMany(e,n,r){return new Zo(this,e,n,r)}async loadEmptyRelations(){const e=this.wasRecentlyCreated();for(const n of Object.values(this._relations))if(!(!n.enabled||n.loaded)){if(e&&n instanceof ea){n.related=[];continue}if(e&&n instanceof so){n.related=null;continue}n.isEmpty()&&await n.load()}}attributeValueChanged(e,n){return e instanceof Hn?Rt(e)!==Rt(n):!qm(e,n)}markAttributeDirty(e,n,r){return this.attributeValueChanged(n,r)}castAttributes(e,n,r,s=""){const i={};for(const o in e)i[o]=this.castAttribute(e[o],{field:s+o,malformedAttributes:r,definition:n[o]});return i}castAttribute(e,{field:n,definition:r,malformedAttributes:s}={}){if(yp(e))return e;if(r!=null&&r.cast)return r.cast(e);if(typeof r>"u")switch(typeof e){case"object":return Array.isArray(e)?e.map((i,o)=>this.castAttribute(i,{field:n&&`${n}.${o}`,malformedAttributes:s})):e instanceof Date||e instanceof Hn?e:Rt(e);case"symbol":case"function":case"undefined":return;default:return e}switch(r.type){case Ae.Date:if(!["string","number"].includes(typeof e)&&!(e instanceof Date))throw new Ke(`Invalid Date value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return new Date(e);case Ae.Object:if(!pt(e))throw new Ke(`Invalid Object value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return this.castAttributes(e,r.fields,s,n&&`${n}.`);case Ae.Array:if(!Array.isArray(e))throw new Ke(`Invalid Array value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return e.map((i,o)=>this.castAttribute(i,{field:n&&`${n}.${o}`,definition:r.items,malformedAttributes:s}));case Ae.Boolean:return!!e;case Ae.Number:{const i=parseFloat(e);if(isNaN(i))throw new Ke(`Invalid Number value (${e}) found in ${this.static("modelName")} ${this.getPrimaryKey()}.`);return i}case Ae.String:return Rt(e);case Ae.Key:{if(e instanceof Hn)return Rt(e);if(n&&s){const i=s[n]??[];s[n]=i.concat(["malformed-key"])}return e}default:return e}}toEngineDocument(){const e=this.static("fields"),n=Xc(this._attributes,e);for(const[r,s]of Object.entries(e))s.serialize&&(n[r]=s.serialize(n[r]));return n}getDirtyEngineDocumentUpdates(){const e=Hr(this._dirtyAttributes);for(const n in e)e[n]===void 0&&(e[n]={$unset:!0});return e}async parseEngineDocumentAttributes(e,n){return{...n}}serializeKey(e){return Rt(e)}parseKey(e){return e}};rt(mn,"collection"),rt(mn,"primaryKey","id"),rt(mn,"timestamps"),rt(mn,"fields"),rt(mn,"modelName"),rt(mn,"classFields",[]),rt(mn,"relations",[]),rt(mn,"hooks",{}),rt(mn,"__attributeGetters",new Map),rt(mn,"__attributeSetters",new Map),rt(mn,"instances",new WeakMap),rt(mn,"pureInstances",new WeakMap),rt(mn,"bootedModels",new WeakMap),rt(mn,"engines",new WeakMap),rt(mn,"ignoringTimestamps",new WeakMap),rt(mn,"fieldAliases",{});let io=mn;function AI(t,e){const n=e?t:io;return Be(class extends n{},r=>{Object.assign(r,e??t)})}const Qm=new Map;function _1(){return new Map(Qm)}function Xt(t){return Qm.get(t)??Ye(Ke,`Could not find Model with name '${t}', are you sure it's booted?`)}function Zm(t){for(const[e,n]of Object.entries(t))n.boot(e),Qm.set(e,n)}function $I(t){let e=Object.getPrototypeOf(t);for(;e;){if(e!==io){e=Object.getPrototypeOf(e);continue}return!0}return!1}function CI(t,e=[".schema",".test"]){const n={};for(const[r,s]of Object.entries(t)){const i=(r.match(/^(.*\/)?(.+)\.(j|t)s$/)||[])[2];if(typeof i>"u"||e.some(a=>i.endsWith(a)))continue;const o=s.default??s[Object.keys(s)[0]];!o||!$I(o)||(n[i]=o)}return n}function kI(t,e=[".schema"]){const n=CI(t,e);Zm(n)}var Bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function II(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function RI(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Sf={},Af,zv;function eg(){return zv||(zv=1,Af=class w1{constructor(e,n=new Map,r=0){this.prefix=e,this._existing=n,this.counter=r}clone(){const{prefix:e,_existing:n,counter:r}=this;return new w1(e,new Map(n),r)}getId(e){const n=e&&this._existing.get(e);if(n)return n;const r=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,r),r}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}}),Af}var $f={},Vv;function TI(){return Vv||(Vv=1,function(t,e){if(t.setImmediate)return;var n=1,r={},s=!1,i=t.document,o;function a(_){typeof _!="function"&&(_=new Function(""+_));for(var g=new Array(arguments.length-1),p=0;p<g.length;p++)g[p]=arguments[p+1];var v={callback:_,args:g};return r[n]=v,o(n),n++}function l(_){delete r[_]}function c(_){var g=_.callback,p=_.args;switch(p.length){case 0:g();break;case 1:g(p[0]);break;case 2:g(p[0],p[1]);break;case 3:g(p[0],p[1],p[2]);break;default:g.apply(e,p);break}}function u(_){if(s)setTimeout(u,0,_);else{var g=r[_];if(g){s=!0;try{c(g)}finally{l(_),s=!1}}}}function d(){o=function(_){process.nextTick(function(){u(_)})}}function f(){if(t.postMessage&&!t.importScripts){var _=!0,g=t.onmessage;return t.onmessage=function(){_=!1},t.postMessage("","*"),t.onmessage=g,_}}function h(){var _="setImmediate$"+Math.random()+"$",g=function(p){p.source===t&&typeof p.data=="string"&&p.data.indexOf(_)===0&&u(+p.data.slice(_.length))};t.addEventListener?t.addEventListener("message",g,!1):t.attachEvent("onmessage",g),o=function(p){t.postMessage(_+p,"*")}}function m(){var _=new MessageChannel;_.port1.onmessage=function(g){var p=g.data;u(p)},o=function(g){_.port2.postMessage(g)}}function y(){var _=i.documentElement;o=function(g){var p=i.createElement("script");p.onreadystatechange=function(){u(g),p.onreadystatechange=null,_.removeChild(p),p=null},_.appendChild(p)}}function S(){o=function(_){setTimeout(u,0,_)}}var x=Object.getPrototypeOf&&Object.getPrototypeOf(t);x=x&&x.setTimeout?x:t,{}.toString.call(t.process)==="[object process]"?d():f()?h():t.MessageChannel?m():i&&"onreadystatechange"in i.createElement("script")?y():S(),x.setImmediate=a,x.clearImmediate=l}(typeof self>"u"?typeof Bv>"u"?$f:Bv:self)),$f}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Cf,Hv;function pd(){if(Hv)return Cf;Hv=1,TI();const t=self.crypto||self.msCrypto;return Cf=class{constructor(n){if(!(t&&t.subtle))throw new Error("crypto.subtle not found.");if(n==="sha256")this.algorithm={name:"SHA-256"};else if(n==="sha1")this.algorithm={name:"SHA-1"};else throw new Error(`Unsupported algorithm "${n}".`);this._content=""}update(n){this._content+=n}async digest(){const n=new TextEncoder().encode(this._content),r=new Uint8Array(await t.subtle.digest(this.algorithm,n));let s="";for(let i=0;i<r.length;++i)s+=r[i].toString(16).padStart(2,"0");return s}},Cf}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var kf,qv;function x1(){return qv||(qv=1,kf=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let n=0;n<e.length;++n)this.dir.set(e[n],!0)}hasNext(){return!this.done}next(){const{current:e,dir:n}=this,r=e.slice();let s=null,i=0;const o=e.length;for(let a=0;a<o;++a){const l=e[a],c=n.get(l);(s===null||l>s)&&(c&&a>0&&l>e[a-1]||!c&&a<o-1&&l>e[a+1])&&(s=l,i=a)}if(s===null)this.done=!0;else{const a=n.get(s)?i-1:i+1;e[i]=e[a],e[a]=s;for(const l of e)l>s&&n.set(l,!n.get(l))}return r}}),kf}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var If,Kv;function tg(){if(Kv)return If;Kv=1;const e="http://www.w3.org/1999/02/22-rdf-syntax-ns#"+"langString",n="http://www.w3.org/2001/XMLSchema#string",r="NamedNode",s="BlankNode",i="Literal",o="DefaultGraph",a={};(()=>{const h="(?:<([^:]+:[^>]*)>)",y="A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�"+"_",S=y+"0-9-·̀-ͯ‿-⁀",_="(_:(?:["+y+"0-9])(?:(?:["+S+".])*(?:["+S+"]))?)",g='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',p="(?:\\^\\^"+h+")",E="(?:"+g+"(?:"+p+"|"+"(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))"+")?)",k="[ \\t]+",A="[ \\t]*",C="(?:"+h+"|"+_+")"+k,I=h+k,N="(?:"+h+"|"+_+"|"+E+")"+A,j="(?:\\.|(?:(?:"+h+"|"+_+")"+A+"\\.))";a.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,a.empty=new RegExp("^"+A+"$"),a.quad=new RegExp("^"+A+C+I+N+j+A+"$")})(),If=class Zc{static parse(m){const y=[],S={},x=m.split(a.eoln);let _=0;for(const g of x){if(_++,a.empty.test(g))continue;const p=g.match(a.quad);if(p===null)throw new Error("N-Quads parse error on line "+_+".");const v={subject:null,predicate:null,object:null,graph:null};if(p[1]!==void 0?v.subject={termType:r,value:p[1]}:v.subject={termType:s,value:p[2]},v.predicate={termType:r,value:p[3]},p[4]!==void 0?v.object={termType:r,value:p[4]}:p[5]!==void 0?v.object={termType:s,value:p[5]}:(v.object={termType:i,value:void 0,datatype:{termType:r}},p[7]!==void 0?v.object.datatype.value=p[7]:p[8]!==void 0?(v.object.datatype.value=e,v.object.language=p[8]):v.object.datatype.value=n,v.object.value=f(p[6])),p[9]!==void 0?v.graph={termType:r,value:p[9]}:p[10]!==void 0?v.graph={termType:s,value:p[10]}:v.graph={termType:o,value:""},!(v.graph.value in S))S[v.graph.value]=[v],y.push(v);else{let E=!0;const k=S[v.graph.value];for(const A of k)if(l(A,v)){E=!1;break}E&&(k.push(v),y.push(v))}}return y}static serialize(m){Array.isArray(m)||(m=Zc.legacyDatasetToQuads(m));const y=[];for(const S of m)y.push(Zc.serializeQuad(S));return y.sort().join("")}static serializeQuadComponents(m,y,S,x){let _="";return m.termType===r?_+=`<${m.value}>`:_+=`${m.value}`,_+=` <${y.value}> `,S.termType===r?_+=`<${S.value}>`:S.termType===s?_+=S.value:(_+=`"${u(S.value)}"`,S.datatype.value===e?S.language&&(_+=`@${S.language}`):S.datatype.value!==n&&(_+=`^^<${S.datatype.value}>`)),x.termType===r?_+=` <${x.value}>`:x.termType===s&&(_+=` ${x.value}`),_+=` .
`,_}static serializeQuad(m){return Zc.serializeQuadComponents(m.subject,m.predicate,m.object,m.graph)}static legacyDatasetToQuads(m){const y=[],S={"blank node":s,IRI:r,literal:i};for(const x in m)m[x].forEach(g=>{const p={};for(const v in g){const E=g[v],k={termType:S[E.type],value:E.value};k.termType===i&&(k.datatype={termType:r},"datatype"in E&&(k.datatype.value=E.datatype),"language"in E?("datatype"in E||(k.datatype.value=e),k.language=E.language):"datatype"in E||(k.datatype.value=n)),p[v]=k}x==="@default"?p.graph={termType:o,value:""}:p.graph={termType:x.startsWith("_:")?s:r,value:x},y.push(p)});return y}};function l(h,m){return!(h.subject.termType===m.subject.termType&&h.object.termType===m.object.termType)||!(h.subject.value===m.subject.value&&h.predicate.value===m.predicate.value&&h.object.value===m.object.value)?!1:h.object.termType!==i?!0:h.object.datatype.termType===m.object.datatype.termType&&h.object.language===m.object.language&&h.object.datatype.value===m.object.datatype.value}const c=/["\\\n\r]/g;function u(h){return h.replace(c,function(m){switch(m){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r"}})}const d=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function f(h){return h.replace(d,function(m,y,S,x){if(y)switch(y){case"t":return"	";case"b":return"\b";case"n":return`
`;case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(S)return String.fromCharCode(parseInt(S,16));if(x)throw new Error("Unsupported U escape")})}return If}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Rf,Wv;function E1(){if(Wv)return Rf;Wv=1;const t=eg(),e=pd(),n=x1(),r=tg();Rf=class{constructor({createMessageDigest:o=()=>new e("sha256"),canonicalIdMap:a=new Map,maxDeepIterations:l=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new t("_:c14n",a),this.createMessageDigest=o,this.maxDeepIterations=l,this.quads=null,this.deepIterations=null}async main(o){this.deepIterations=new Map,this.quads=o;for(const h of o)this._addBlankNodeQuadInfo({quad:h,component:h.subject}),this._addBlankNodeQuadInfo({quad:h,component:h.object}),this._addBlankNodeQuadInfo({quad:h,component:h.graph});const a=new Map,l=[...this.blankNodeInfo.keys()];let c=0;for(const h of l)++c%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id:h,hashToBlankNodes:a});const u=[...a.keys()].sort(),d=[];for(const h of u){const m=a.get(h);if(m.length>1){d.push(m);continue}const y=m[0];this.canonicalIssuer.getId(y)}for(const h of d){const m=[];for(const y of h){if(this.canonicalIssuer.hasId(y))continue;const S=new t("_:b");S.getId(y);const x=await this.hashNDegreeQuads(y,S);m.push(x)}m.sort(s);for(const y of m){const S=y.issuer.getOldIds();for(const x of S)this.canonicalIssuer.getId(x)}}const f=[];for(const h of this.quads){const m=r.serializeQuadComponents(this._componentWithCanonicalId(h.subject),h.predicate,this._componentWithCanonicalId(h.object),this._componentWithCanonicalId(h.graph));f.push(m)}return f.sort(),f.join("")}async hashFirstDegreeQuads(o){const a=[],l=this.blankNodeInfo.get(o),c=l.quads;for(const d of c){const f={subject:null,predicate:d.predicate,object:null,graph:null};f.subject=this.modifyFirstDegreeComponent(o,d.subject,"subject"),f.object=this.modifyFirstDegreeComponent(o,d.object,"object"),f.graph=this.modifyFirstDegreeComponent(o,d.graph,"graph"),a.push(r.serializeQuad(f))}a.sort();const u=this.createMessageDigest();for(const d of a)u.update(d);return l.hash=await u.digest(),l.hash}async hashRelatedBlankNode(o,a,l,c){let u;this.canonicalIssuer.hasId(o)?u=this.canonicalIssuer.getId(o):l.hasId(o)?u=l.getId(o):u=this.blankNodeInfo.get(o).hash;const d=this.createMessageDigest();return d.update(c),c!=="g"&&d.update(this.getRelatedPredicate(a)),d.update(u),d.digest()}async hashNDegreeQuads(o,a){const l=this.deepIterations.get(o)||0;if(l>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(o,l+1);const c=this.createMessageDigest(),u=await this.createHashToRelated(o,a),d=[...u.keys()].sort();for(const f of d){c.update(f);let h="",m;const y=new n(u.get(f));let S=0;for(;y.hasNext();){const x=y.next();++S%3===0&&await this._yield();let _=a.clone(),g="";const p=[];let v=!1;for(const E of x)if(this.canonicalIssuer.hasId(E)?g+=this.canonicalIssuer.getId(E):(_.hasId(E)||p.push(E),g+=_.getId(E)),h.length!==0&&g>h){v=!0;break}if(!v){for(const E of p){const k=await this.hashNDegreeQuads(E,_);if(g+=_.getId(E),g+=`<${k.hash}>`,_=k.issuer,h.length!==0&&g>h){v=!0;break}}v||(h.length===0||g<h)&&(h=g,m=_)}}c.update(h),a=m}return{hash:await c.digest(),issuer:a}}modifyFirstDegreeComponent(o,a){return a.termType!=="BlankNode"?a:{termType:"BlankNode",value:a.value===o?"_:a":"_:z"}}getRelatedPredicate(o){return`<${o.predicate.value}>`}async createHashToRelated(o,a){const l=new Map,c=this.blankNodeInfo.get(o).quads;let u=0;for(const d of c)++u%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:d,component:d.subject,position:"s",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:d,component:d.object,position:"o",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:d,component:d.graph,position:"g",id:o,issuer:a,hashToRelated:l})]);return l}async _hashAndTrackBlankNode({id:o,hashToBlankNodes:a}){const l=await this.hashFirstDegreeQuads(o),c=a.get(l);c?c.push(o):a.set(l,[o])}_addBlankNodeQuadInfo({quad:o,component:a}){if(a.termType!=="BlankNode")return;const l=a.value,c=this.blankNodeInfo.get(l);c?c.quads.add(o):this.blankNodeInfo.set(l,{quads:new Set([o]),hash:null})}async _addRelatedBlankNodeHash({quad:o,component:a,position:l,id:c,issuer:u,hashToRelated:d}){if(!(a.termType==="BlankNode"&&a.value!==c))return;const f=a.value,h=await this.hashRelatedBlankNode(f,o,u,l),m=d.get(h);m?m.push(f):d.set(h,[f])}_componentWithCanonicalId(o){return o.termType==="BlankNode"&&!o.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(o.value)}:o}async _yield(){return new Promise(o=>setImmediate(o))}};function s(i,o){return i.hash<o.hash?-1:i.hash>o.hash?1:0}return Rf}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Tf,Gv;function OI(){if(Gv)return Tf;Gv=1;const t=pd(),e=E1();return Tf=class extends e{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new t("sha1")}modifyFirstDegreeComponent(r,s,i){return s.termType!=="BlankNode"?s:i==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:s.value===r?"_:a":"_:z"}}getRelatedPredicate(r){return r.predicate.value}async createHashToRelated(r,s){const i=new Map,o=this.blankNodeInfo.get(r).quads;let a=0;for(const l of o){let c,u;if(l.subject.termType==="BlankNode"&&l.subject.value!==r)u=l.subject.value,c="p";else if(l.object.termType==="BlankNode"&&l.object.value!==r)u=l.object.value,c="r";else continue;++a%100===0&&await this._yield();const d=await this.hashRelatedBlankNode(u,l,s,c),f=i.get(d);f?f.push(u):i.set(d,[u])}return i}},Tf}/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */var Of,Jv;function S1(){if(Jv)return Of;Jv=1;const t=eg(),e=pd(),n=x1(),r=tg();Of=class{constructor({createMessageDigest:o=()=>new e("sha256"),canonicalIdMap:a=new Map,maxDeepIterations:l=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new t("_:c14n",a),this.createMessageDigest=o,this.maxDeepIterations=l,this.quads=null,this.deepIterations=null}main(o){this.deepIterations=new Map,this.quads=o;for(const f of o)this._addBlankNodeQuadInfo({quad:f,component:f.subject}),this._addBlankNodeQuadInfo({quad:f,component:f.object}),this._addBlankNodeQuadInfo({quad:f,component:f.graph});const a=new Map,l=[...this.blankNodeInfo.keys()];for(const f of l)this._hashAndTrackBlankNode({id:f,hashToBlankNodes:a});const c=[...a.keys()].sort(),u=[];for(const f of c){const h=a.get(f);if(h.length>1){u.push(h);continue}const m=h[0];this.canonicalIssuer.getId(m)}for(const f of u){const h=[];for(const m of f){if(this.canonicalIssuer.hasId(m))continue;const y=new t("_:b");y.getId(m);const S=this.hashNDegreeQuads(m,y);h.push(S)}h.sort(s);for(const m of h){const y=m.issuer.getOldIds();for(const S of y)this.canonicalIssuer.getId(S)}}const d=[];for(const f of this.quads){const h=r.serializeQuadComponents(this._componentWithCanonicalId({component:f.subject}),f.predicate,this._componentWithCanonicalId({component:f.object}),this._componentWithCanonicalId({component:f.graph}));d.push(h)}return d.sort(),d.join("")}hashFirstDegreeQuads(o){const a=[],l=this.blankNodeInfo.get(o),c=l.quads;for(const d of c){const f={subject:null,predicate:d.predicate,object:null,graph:null};f.subject=this.modifyFirstDegreeComponent(o,d.subject,"subject"),f.object=this.modifyFirstDegreeComponent(o,d.object,"object"),f.graph=this.modifyFirstDegreeComponent(o,d.graph,"graph"),a.push(r.serializeQuad(f))}a.sort();const u=this.createMessageDigest();for(const d of a)u.update(d);return l.hash=u.digest(),l.hash}hashRelatedBlankNode(o,a,l,c){let u;this.canonicalIssuer.hasId(o)?u=this.canonicalIssuer.getId(o):l.hasId(o)?u=l.getId(o):u=this.blankNodeInfo.get(o).hash;const d=this.createMessageDigest();return d.update(c),c!=="g"&&d.update(this.getRelatedPredicate(a)),d.update(u),d.digest()}hashNDegreeQuads(o,a){const l=this.deepIterations.get(o)||0;if(l>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(o,l+1);const c=this.createMessageDigest(),u=this.createHashToRelated(o,a),d=[...u.keys()].sort();for(const f of d){c.update(f);let h="",m;const y=new n(u.get(f));for(;y.hasNext();){const S=y.next();let x=a.clone(),_="";const g=[];let p=!1;for(const v of S)if(this.canonicalIssuer.hasId(v)?_+=this.canonicalIssuer.getId(v):(x.hasId(v)||g.push(v),_+=x.getId(v)),h.length!==0&&_>h){p=!0;break}if(!p){for(const v of g){const E=this.hashNDegreeQuads(v,x);if(_+=x.getId(v),_+=`<${E.hash}>`,x=E.issuer,h.length!==0&&_>h){p=!0;break}}p||(h.length===0||_<h)&&(h=_,m=x)}}c.update(h),a=m}return{hash:c.digest(),issuer:a}}modifyFirstDegreeComponent(o,a){return a.termType!=="BlankNode"?a:{termType:"BlankNode",value:a.value===o?"_:a":"_:z"}}getRelatedPredicate(o){return`<${o.predicate.value}>`}createHashToRelated(o,a){const l=new Map,c=this.blankNodeInfo.get(o).quads;for(const u of c)this._addRelatedBlankNodeHash({quad:u,component:u.subject,position:"s",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:u,component:u.object,position:"o",id:o,issuer:a,hashToRelated:l}),this._addRelatedBlankNodeHash({quad:u,component:u.graph,position:"g",id:o,issuer:a,hashToRelated:l});return l}_hashAndTrackBlankNode({id:o,hashToBlankNodes:a}){const l=this.hashFirstDegreeQuads(o),c=a.get(l);c?c.push(o):a.set(l,[o])}_addBlankNodeQuadInfo({quad:o,component:a}){if(a.termType!=="BlankNode")return;const l=a.value,c=this.blankNodeInfo.get(l);c?c.quads.add(o):this.blankNodeInfo.set(l,{quads:new Set([o]),hash:null})}_addRelatedBlankNodeHash({quad:o,component:a,position:l,id:c,issuer:u,hashToRelated:d}){if(!(a.termType==="BlankNode"&&a.value!==c))return;const f=a.value,h=this.hashRelatedBlankNode(f,o,u,l),m=d.get(h);m?m.push(f):d.set(h,[f])}_componentWithCanonicalId({component:o}){return o.termType==="BlankNode"&&!o.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(o.value)}:o}};function s(i,o){return i.hash<o.hash?-1:i.hash>o.hash?1:0}return Of}/*!
 * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
 */var Df,Yv;function DI(){if(Yv)return Df;Yv=1;const t=pd(),e=S1();return Df=class extends e{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new t("sha1")}modifyFirstDegreeComponent(r,s,i){return s.termType!=="BlankNode"?s:i==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:s.value===r?"_:a":"_:z"}}getRelatedPredicate(r){return r.predicate.value}createHashToRelated(r,s){const i=new Map,o=this.blankNodeInfo.get(r).quads;for(const a of o){let l,c;if(a.subject.termType==="BlankNode"&&a.subject.value!==r)c=a.subject.value,l="p";else if(a.object.termType==="BlankNode"&&a.object.value!==r)c=a.object.value,l="r";else continue;const u=this.hashRelatedBlankNode(c,a,s,l),d=i.get(u);d?d.push(c):i.set(u,[c])}return i}},Df}const PI={},LI=Object.freeze(Object.defineProperty({__proto__:null,default:PI},Symbol.toStringTag,{value:"Module"})),MI=RI(LI);var Xv;function NI(){return Xv||(Xv=1,function(t){const e=E1(),n=OI(),r=S1(),s=DI();let i;try{i=MI}catch{}function o(a){return Array.isArray(a)?a:t.NQuads.legacyDatasetToQuads(a)}t.NQuads=tg(),t.IdentifierIssuer=eg(),t._rdfCanonizeNative=function(a){return a&&(i=a),i},t.canonize=async function(a,l){const c=o(a);if(l.useNative){if(!i)throw new Error("rdf-canonize-native not available");if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((u,d)=>i.canonize(c,l,(f,h)=>f?d(f):u(h)))}if(l.algorithm==="URDNA2015")return new e(l).main(c);if(l.algorithm==="URGNA2012"){if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new n(l).main(c)}throw"algorithm"in l?new Error("Invalid RDF Dataset Canonicalization algorithm: "+l.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},t._canonizeSync=function(a,l){const c=o(a);if(l.useNative){if(!i)throw new Error("rdf-canonize-native not available");if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return i.canonizeSync(c,l)}if(l.algorithm==="URDNA2015")return new r(l).main(c);if(l.algorithm==="URGNA2012"){if(l.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new s(l).main(c)}throw"algorithm"in l?new Error("Invalid RDF Dataset Canonicalization algorithm: "+l.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}}(Sf)),Sf}var Pf,Qv;function ng(){return Qv||(Qv=1,Pf=NI()),Pf}var Lf,Zv;function br(){if(Zv)return Lf;Zv=1;const t={};return Lf=t,t.isArray=Array.isArray,t.isBoolean=e=>typeof e=="boolean"||Object.prototype.toString.call(e)==="[object Boolean]",t.isDouble=e=>t.isNumber(e)&&(String(e).indexOf(".")!==-1||Math.abs(e)>=1e21),t.isEmptyObject=e=>t.isObject(e)&&Object.keys(e).length===0,t.isNumber=e=>typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]",t.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),t.isObject=e=>Object.prototype.toString.call(e)==="[object Object]",t.isString=e=>typeof e=="string"||Object.prototype.toString.call(e)==="[object String]",t.isUndefined=e=>typeof e>"u",Lf}var Mf,eb;function ri(){if(eb)return Mf;eb=1;const t=br(),e={};return Mf=e,e.isSubject=n=>t.isObject(n)&&!("@value"in n||"@set"in n||"@list"in n)?Object.keys(n).length>1||!("@id"in n):!1,e.isSubjectReference=n=>t.isObject(n)&&Object.keys(n).length===1&&"@id"in n,e.isValue=n=>t.isObject(n)&&"@value"in n,e.isList=n=>t.isObject(n)&&"@list"in n,e.isGraph=n=>t.isObject(n)&&"@graph"in n&&Object.keys(n).filter(r=>r!=="@id"&&r!=="@index").length===1,e.isSimpleGraph=n=>e.isGraph(n)&&!("@id"in n),e.isBlankNode=n=>{if(t.isObject(n)){if("@id"in n){const r=n["@id"];return!t.isString(r)||r.indexOf("_:")===0}return Object.keys(n).length===0||!("@value"in n||"@set"in n||"@list"in n)}return!1},Mf}var Nf,tb;function Ur(){return tb||(tb=1,Nf=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",n="jsonld.Error",r={}){super(e),this.name=n,this.message=e,this.details=r}}),Nf}var jf,nb;function Lr(){if(nb)return jf;nb=1;const t=ri(),e=br(),n=ng().IdentifierIssuer,r=Ur(),s=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,i=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,o=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,a=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,l=/^@[a-zA-Z]+$/,c={headers:{accept:"application/ld+json, application/json"}},u={};jf=u,u.IdentifierIssuer=n,u.REGEX_BCP47=s,u.REGEX_KEYWORD=l,u.clone=function(f){if(f&&typeof f=="object"){let h;if(e.isArray(f)){h=[];for(let m=0;m<f.length;++m)h[m]=u.clone(f[m])}else if(f instanceof Map){h=new Map;for(const[m,y]of f)h.set(m,u.clone(y))}else if(f instanceof Set){h=new Set;for(const m of f)h.add(u.clone(m))}else if(e.isObject(f)){h={};for(const m in f)h[m]=u.clone(f[m])}else h=f.toString();return h}return f},u.asArray=function(f){return Array.isArray(f)?f:[f]},u.buildHeaders=(f={})=>{if(Object.keys(f).some(m=>m.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+c.headers.accept+'" is supported.');return Object.assign({Accept:c.headers.accept},f)},u.parseLinkHeader=f=>{const h={},m=f.match(i);for(let y=0;y<m.length;++y){let S=m[y].match(o);if(!S)continue;const x={target:S[1]},_=S[2];for(;S=a.exec(_);)x[S[1]]=S[2]===void 0?S[3]:S[2];const g=x.rel||"";Array.isArray(h[g])?h[g].push(x):h.hasOwnProperty(g)?h[g]=[h[g],x]:h[g]=x}return h},u.validateTypeValue=(f,h)=>{if(!e.isString(f)&&!(e.isArray(f)&&f.every(m=>e.isString(m)))){if(h&&e.isObject(f))switch(Object.keys(f).length){case 0:return;case 1:if("@default"in f&&u.asArray(f["@default"]).every(m=>e.isString(m)))return}throw new r('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:f})}},u.hasProperty=(f,h)=>{if(f.hasOwnProperty(h)){const m=f[h];return!e.isArray(m)||m.length>0}return!1},u.hasValue=(f,h,m)=>{if(u.hasProperty(f,h)){let y=f[h];const S=t.isList(y);if(e.isArray(y)||S){S&&(y=y["@list"]);for(let x=0;x<y.length;++x)if(u.compareValues(m,y[x]))return!0}else if(!e.isArray(m))return u.compareValues(m,y)}return!1},u.addValue=(f,h,m,y)=>{if(y=y||{},"propertyIsArray"in y||(y.propertyIsArray=!1),"valueIsArray"in y||(y.valueIsArray=!1),"allowDuplicate"in y||(y.allowDuplicate=!0),"prependValue"in y||(y.prependValue=!1),y.valueIsArray)f[h]=m;else if(e.isArray(m)){m.length===0&&y.propertyIsArray&&!f.hasOwnProperty(h)&&(f[h]=[]),y.prependValue&&(m=m.concat(f[h]),f[h]=[]);for(let S=0;S<m.length;++S)u.addValue(f,h,m[S],y)}else if(f.hasOwnProperty(h)){const S=!y.allowDuplicate&&u.hasValue(f,h,m);!e.isArray(f[h])&&(!S||y.propertyIsArray)&&(f[h]=[f[h]]),S||(y.prependValue?f[h].unshift(m):f[h].push(m))}else f[h]=y.propertyIsArray?[m]:m},u.getValues=(f,h)=>[].concat(f[h]||[]),u.removeProperty=(f,h)=>{delete f[h]},u.removeValue=(f,h,m,y)=>{y=y||{},"propertyIsArray"in y||(y.propertyIsArray=!1);const S=u.getValues(f,h).filter(x=>!u.compareValues(x,m));S.length===0?u.removeProperty(f,h):S.length===1&&!y.propertyIsArray?f[h]=S[0]:f[h]=S},u.relabelBlankNodes=(f,h)=>{h=h||{};const m=h.issuer||new n("_:b");return d(m,f)},u.compareValues=(f,h)=>f===h||t.isValue(f)&&t.isValue(h)&&f["@value"]===h["@value"]&&f["@type"]===h["@type"]&&f["@language"]===h["@language"]&&f["@index"]===h["@index"]?!0:e.isObject(f)&&"@id"in f&&e.isObject(h)&&"@id"in h?f["@id"]===h["@id"]:!1,u.compareShortestLeast=(f,h)=>f.length<h.length?-1:h.length<f.length?1:f===h?0:f<h?-1:1;function d(f,h){if(e.isArray(h))for(let m=0;m<h.length;++m)h[m]=d(f,h[m]);else if(t.isList(h))h["@list"]=d(f,h["@list"]);else if(e.isObject(h)){t.isBlankNode(h)&&(h["@id"]=f.getId(h["@id"]));const m=Object.keys(h).sort();for(let y=0;y<m.length;++y){const S=m[y];S!=="@id"&&(h[S]=d(f,h[S]))}}return h}return jf}var Ff,rb;function rg(){if(rb)return Ff;rb=1;const t="http://www.w3.org/1999/02/22-rdf-syntax-ns#",e="http://www.w3.org/2001/XMLSchema#";return Ff={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:t,RDF_LIST:t+"List",RDF_FIRST:t+"first",RDF_REST:t+"rest",RDF_NIL:t+"nil",RDF_TYPE:t+"type",RDF_PLAIN_LITERAL:t+"PlainLiteral",RDF_XML_LITERAL:t+"XMLLiteral",RDF_JSON_LITERAL:t+"JSON",RDF_OBJECT:t+"object",RDF_LANGSTRING:t+"langString",XSD:e,XSD_BOOLEAN:e+"boolean",XSD_DOUBLE:e+"double",XSD_INTEGER:e+"integer",XSD_STRING:e+"string"},Ff}var Uf,sb;function A1(){return sb||(sb=1,Uf=class{constructor(){this._requests={}}wrapLoader(e){const n=this;return n._loader=e,function(){return n.add.apply(n,arguments)}}async add(e){let n=this._requests[e];if(n)return Promise.resolve(n);n=this._requests[e]=this._loader(e);try{return await n}finally{delete this._requests[e]}}}),Uf}var Bf,ib;function Vi(){if(ib)return Bf;ib=1;const t=br(),e={};Bf=e,e.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},e.parse=(r,s)=>{const i={},o=e.parsers[s||"full"],a=o.regex.exec(r);let l=o.keys.length;for(;l--;)i[o.keys[l]]=a[l]===void 0?null:a[l];return(i.scheme==="https"&&i.port==="443"||i.scheme==="http"&&i.port==="80")&&(i.href=i.href.replace(":"+i.port,""),i.authority=i.authority.replace(":"+i.port,""),i.port=null),i.normalizedPath=e.removeDotSegments(i.path),i},e.prependBase=(r,s)=>{if(r===null||e.isAbsolute(s))return s;(!r||t.isString(r))&&(r=e.parse(r||""));const i=e.parse(s),o={protocol:r.protocol||""};if(i.authority!==null)o.authority=i.authority,o.path=i.path,o.query=i.query;else if(o.authority=r.authority,i.path==="")o.path=r.path,i.query!==null?o.query=i.query:o.query=r.query;else{if(i.path.indexOf("/")===0)o.path=i.path;else{let l=r.path;l=l.substr(0,l.lastIndexOf("/")+1),(l.length>0||r.authority)&&l.substr(-1)!=="/"&&(l+="/"),l+=i.path,o.path=l}o.query=i.query}i.path!==""&&(o.path=e.removeDotSegments(o.path));let a=o.protocol;return o.authority!==null&&(a+="//"+o.authority),a+=o.path,o.query!==null&&(a+="?"+o.query),i.fragment!==null&&(a+="#"+i.fragment),a===""&&(a="./"),a},e.removeBase=(r,s)=>{if(r===null)return s;(!r||t.isString(r))&&(r=e.parse(r||""));let i="";if(r.href!==""?i+=(r.protocol||"")+"//"+(r.authority||""):s.indexOf("//")&&(i+="//"),s.indexOf(i)!==0)return s;const o=e.parse(s.substr(i.length)),a=r.normalizedPath.split("/"),l=o.normalizedPath.split("/"),c=o.fragment||o.query?0:1;for(;a.length>0&&l.length>c&&a[0]===l[0];)a.shift(),l.shift();let u="";if(a.length>0){a.pop();for(let d=0;d<a.length;++d)u+="../"}return u+=l.join("/"),o.query!==null&&(u+="?"+o.query),o.fragment!==null&&(u+="#"+o.fragment),u===""&&(u="./"),u},e.removeDotSegments=r=>{if(r.length===0)return"";const s=r.split("/"),i=[];for(;s.length>0;){const o=s.shift(),a=s.length===0;if(o==="."){a&&i.push("");continue}if(o===".."){i.pop(),a&&i.push("");continue}i.push(o)}return r[0]==="/"&&i.length>0&&i[0]!==""&&i.unshift(""),i.length===1&&i[0]===""?"/":i.join("/")};const n=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;return e.isAbsolute=r=>t.isString(r)&&n.test(r),e.isRelative=r=>t.isString(r),Bf}var zf,ob;function jI(){if(ob)return zf;ob=1;const{parseLinkHeader:t,buildHeaders:e}=Lr(),{LINK_HEADER_CONTEXT:n}=rg(),r=Ur(),s=A1(),{prependBase:i}=Vi(),o=/(^|(\r\n))link:/i;zf=({secure:l,headers:c={},xhr:u}={headers:{}})=>{return c=e(c),new s().wrapLoader(f);async function f(h){if(h.indexOf("http:")!==0&&h.indexOf("https:")!==0)throw new r('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:h});if(l&&h.indexOf("https")!==0)throw new r(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:h});let m;try{m=await a(u,h,c)}catch(g){throw new r("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:h,cause:g})}if(m.status>=400)throw new r("URL could not be dereferenced: "+m.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:h,httpStatusCode:m.status});let y={contextUrl:null,documentUrl:h,document:m.response},S=null;const x=m.getResponseHeader("Content-Type");let _;if(o.test(m.getAllResponseHeaders())&&(_=m.getResponseHeader("Link")),_&&x!=="application/ld+json"){const g=t(_),p=g[n];if(Array.isArray(p))throw new r("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:h});p&&(y.contextUrl=p.target),S=g.alternate,S&&S.type=="application/ld+json"&&!(x||"").match(/^application\/(\w*\+)?json$/)&&(y=await f(i(h,S.target)))}return y}};function a(l,c,u){l=l||XMLHttpRequest;const d=new l;return new Promise((f,h)=>{d.onload=()=>f(d),d.onerror=m=>h(m),d.open("GET",c,!0);for(const m in u)d.setRequestHeader(m,u[m]);d.send()})}return zf}var Vf,ab;function FI(){if(ab)return Vf;ab=1;const t=jI(),e={};return Vf=e,e.setupDocumentLoaders=function(n){typeof XMLHttpRequest<"u"&&(n.documentLoaders.xhr=t,n.useDocumentLoader("xhr"))},e.setupGlobals=function(n){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:n.JsonLdProcessor})},Vf}var Hf,lb;function UI(){return lb||(lb=1,Hf=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),Hf}var qf,cb;function BI(){if(cb)return qf;cb=1,qf=t,t.Node=s,t.create=t;function t(i){var o=this;if(o instanceof t||(o=new t),o.tail=null,o.head=null,o.length=0,i&&typeof i.forEach=="function")i.forEach(function(c){o.push(c)});else if(arguments.length>0)for(var a=0,l=arguments.length;a<l;a++)o.push(arguments[a]);return o}t.prototype.removeNode=function(i){if(i.list!==this)throw new Error("removing node which does not belong to this list");var o=i.next,a=i.prev;return o&&(o.prev=a),a&&(a.next=o),i===this.head&&(this.head=o),i===this.tail&&(this.tail=a),i.list.length--,i.next=null,i.prev=null,i.list=null,o},t.prototype.unshiftNode=function(i){if(i!==this.head){i.list&&i.list.removeNode(i);var o=this.head;i.list=this,i.next=o,o&&(o.prev=i),this.head=i,this.tail||(this.tail=i),this.length++}},t.prototype.pushNode=function(i){if(i!==this.tail){i.list&&i.list.removeNode(i);var o=this.tail;i.list=this,i.prev=o,o&&(o.next=i),this.tail=i,this.head||(this.head=i),this.length++}},t.prototype.push=function(){for(var i=0,o=arguments.length;i<o;i++)n(this,arguments[i]);return this.length},t.prototype.unshift=function(){for(var i=0,o=arguments.length;i<o;i++)r(this,arguments[i]);return this.length},t.prototype.pop=function(){if(this.tail){var i=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,i}},t.prototype.shift=function(){if(this.head){var i=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,i}},t.prototype.forEach=function(i,o){o=o||this;for(var a=this.head,l=0;a!==null;l++)i.call(o,a.value,l,this),a=a.next},t.prototype.forEachReverse=function(i,o){o=o||this;for(var a=this.tail,l=this.length-1;a!==null;l--)i.call(o,a.value,l,this),a=a.prev},t.prototype.get=function(i){for(var o=0,a=this.head;a!==null&&o<i;o++)a=a.next;if(o===i&&a!==null)return a.value},t.prototype.getReverse=function(i){for(var o=0,a=this.tail;a!==null&&o<i;o++)a=a.prev;if(o===i&&a!==null)return a.value},t.prototype.map=function(i,o){o=o||this;for(var a=new t,l=this.head;l!==null;)a.push(i.call(o,l.value,this)),l=l.next;return a},t.prototype.mapReverse=function(i,o){o=o||this;for(var a=new t,l=this.tail;l!==null;)a.push(i.call(o,l.value,this)),l=l.prev;return a},t.prototype.reduce=function(i,o){var a,l=this.head;if(arguments.length>1)a=o;else if(this.head)l=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var c=0;l!==null;c++)a=i(a,l.value,c),l=l.next;return a},t.prototype.reduceReverse=function(i,o){var a,l=this.tail;if(arguments.length>1)a=o;else if(this.tail)l=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var c=this.length-1;l!==null;c--)a=i(a,l.value,c),l=l.prev;return a},t.prototype.toArray=function(){for(var i=new Array(this.length),o=0,a=this.head;a!==null;o++)i[o]=a.value,a=a.next;return i},t.prototype.toArrayReverse=function(){for(var i=new Array(this.length),o=0,a=this.tail;a!==null;o++)i[o]=a.value,a=a.prev;return i},t.prototype.slice=function(i,o){o=o||this.length,o<0&&(o+=this.length),i=i||0,i<0&&(i+=this.length);var a=new t;if(o<i||o<0)return a;i<0&&(i=0),o>this.length&&(o=this.length);for(var l=0,c=this.head;c!==null&&l<i;l++)c=c.next;for(;c!==null&&l<o;l++,c=c.next)a.push(c.value);return a},t.prototype.sliceReverse=function(i,o){o=o||this.length,o<0&&(o+=this.length),i=i||0,i<0&&(i+=this.length);var a=new t;if(o<i||o<0)return a;i<0&&(i=0),o>this.length&&(o=this.length);for(var l=this.length,c=this.tail;c!==null&&l>o;l--)c=c.prev;for(;c!==null&&l>i;l--,c=c.prev)a.push(c.value);return a},t.prototype.splice=function(i,o,...a){i>this.length&&(i=this.length-1),i<0&&(i=this.length+i);for(var l=0,c=this.head;c!==null&&l<i;l++)c=c.next;for(var u=[],l=0;c&&l<o;l++)u.push(c.value),c=this.removeNode(c);c===null&&(c=this.tail),c!==this.head&&c!==this.tail&&(c=c.prev);for(var l=0;l<a.length;l++)c=e(this,c,a[l]);return u},t.prototype.reverse=function(){for(var i=this.head,o=this.tail,a=i;a!==null;a=a.prev){var l=a.prev;a.prev=a.next,a.next=l}return this.head=o,this.tail=i,this};function e(i,o,a){var l=o===i.head?new s(a,null,o,i):new s(a,o,o.next,i);return l.next===null&&(i.tail=l),l.prev===null&&(i.head=l),i.length++,l}function n(i,o){i.tail=new s(o,i.tail,null,i),i.head||(i.head=i.tail),i.length++}function r(i,o){i.head=new s(o,null,i.head,i),i.tail||(i.tail=i.head),i.length++}function s(i,o,a,l){if(!(this instanceof s))return new s(i,o,a,l);this.list=l,this.value=i,o?(o.next=this,this.prev=o):this.prev=null,a?(a.prev=this,this.next=a):this.next=null}try{UI()(t)}catch{}return qf}var Kf,ub;function $1(){if(ub)return Kf;ub=1;const t=BI(),e=Symbol("max"),n=Symbol("length"),r=Symbol("lengthCalculator"),s=Symbol("allowStale"),i=Symbol("maxAge"),o=Symbol("dispose"),a=Symbol("noDisposeOnSet"),l=Symbol("lruList"),c=Symbol("cache"),u=Symbol("updateAgeOnGet"),d=()=>1;class f{constructor(p){if(typeof p=="number"&&(p={max:p}),p||(p={}),p.max&&(typeof p.max!="number"||p.max<0))throw new TypeError("max must be a non-negative number");this[e]=p.max||1/0;const v=p.length||d;if(this[r]=typeof v!="function"?d:v,this[s]=p.stale||!1,p.maxAge&&typeof p.maxAge!="number")throw new TypeError("maxAge must be a number");this[i]=p.maxAge||0,this[o]=p.dispose,this[a]=p.noDisposeOnSet||!1,this[u]=p.updateAgeOnGet||!1,this.reset()}set max(p){if(typeof p!="number"||p<0)throw new TypeError("max must be a non-negative number");this[e]=p||1/0,y(this)}get max(){return this[e]}set allowStale(p){this[s]=!!p}get allowStale(){return this[s]}set maxAge(p){if(typeof p!="number")throw new TypeError("maxAge must be a non-negative number");this[i]=p,y(this)}get maxAge(){return this[i]}set lengthCalculator(p){typeof p!="function"&&(p=d),p!==this[r]&&(this[r]=p,this[n]=0,this[l].forEach(v=>{v.length=this[r](v.value,v.key),this[n]+=v.length})),y(this)}get lengthCalculator(){return this[r]}get length(){return this[n]}get itemCount(){return this[l].length}rforEach(p,v){v=v||this;for(let E=this[l].tail;E!==null;){const k=E.prev;_(this,p,E,v),E=k}}forEach(p,v){v=v||this;for(let E=this[l].head;E!==null;){const k=E.next;_(this,p,E,v),E=k}}keys(){return this[l].toArray().map(p=>p.key)}values(){return this[l].toArray().map(p=>p.value)}reset(){this[o]&&this[l]&&this[l].length&&this[l].forEach(p=>this[o](p.key,p.value)),this[c]=new Map,this[l]=new t,this[n]=0}dump(){return this[l].map(p=>m(this,p)?!1:{k:p.key,v:p.value,e:p.now+(p.maxAge||0)}).toArray().filter(p=>p)}dumpLru(){return this[l]}set(p,v,E){if(E=E||this[i],E&&typeof E!="number")throw new TypeError("maxAge must be a number");const k=E?Date.now():0,A=this[r](v,p);if(this[c].has(p)){if(A>this[e])return S(this,this[c].get(p)),!1;const N=this[c].get(p).value;return this[o]&&(this[a]||this[o](p,N.value)),N.now=k,N.maxAge=E,N.value=v,this[n]+=A-N.length,N.length=A,this.get(p),y(this),!0}const C=new x(p,v,A,k,E);return C.length>this[e]?(this[o]&&this[o](p,v),!1):(this[n]+=C.length,this[l].unshift(C),this[c].set(p,this[l].head),y(this),!0)}has(p){if(!this[c].has(p))return!1;const v=this[c].get(p).value;return!m(this,v)}get(p){return h(this,p,!0)}peek(p){return h(this,p,!1)}pop(){const p=this[l].tail;return p?(S(this,p),p.value):null}del(p){S(this,this[c].get(p))}load(p){this.reset();const v=Date.now();for(let E=p.length-1;E>=0;E--){const k=p[E],A=k.e||0;if(A===0)this.set(k.k,k.v);else{const C=A-v;C>0&&this.set(k.k,k.v,C)}}}prune(){this[c].forEach((p,v)=>h(this,v,!1))}}const h=(g,p,v)=>{const E=g[c].get(p);if(E){const k=E.value;if(m(g,k)){if(S(g,E),!g[s])return}else v&&(g[u]&&(E.value.now=Date.now()),g[l].unshiftNode(E));return k.value}},m=(g,p)=>{if(!p||!p.maxAge&&!g[i])return!1;const v=Date.now()-p.now;return p.maxAge?v>p.maxAge:g[i]&&v>g[i]},y=g=>{if(g[n]>g[e])for(let p=g[l].tail;g[n]>g[e]&&p!==null;){const v=p.prev;S(g,p),p=v}},S=(g,p)=>{if(p){const v=p.value;g[o]&&g[o](v.key,v.value),g[n]-=v.length,g[c].delete(v.key),g[l].removeNode(p)}};class x{constructor(p,v,E,k,A){this.key=p,this.value=v,this.length=E,this.now=k,this.maxAge=A||0}}const _=(g,p,v,E)=>{let k=v.value;m(g,k)&&(S(g,v),g[s]||(k=void 0)),k&&p.call(E,k.value,k.key,g)};return Kf=f,Kf}var Wf,db;function zI(){if(db)return Wf;db=1;const t=$1(),e=10;return Wf=class{constructor({document:r}){this.document=r,this.cache=new t({max:e})}getProcessed(r){return this.cache.get(r)}setProcessed(r,s){this.cache.set(r,s)}},Wf}var Gf,fb;function VI(){if(fb)return Gf;fb=1;const{isArray:t,isObject:e,isString:n}=br(),{asArray:r}=Lr(),{prependBase:s}=Vi(),i=Ur(),o=zI(),a=10;Gf=class{constructor({sharedCache:d}){this.perOpCache=new Map,this.sharedCache=d}async resolve({activeCtx:d,context:f,documentLoader:h,base:m,cycles:y=new Set}){f&&e(f)&&f["@context"]&&(f=f["@context"]),f=r(f);const S=[];for(const x of f){if(n(x)){let p=this._get(x);p||(p=await this._resolveRemoteContext({activeCtx:d,url:x,documentLoader:h,base:m,cycles:y})),t(p)?S.push(...p):S.push(p);continue}if(x===null){S.push(new o({document:null}));continue}e(x)||l(f);const _=JSON.stringify(x);let g=this._get(_);g||(g=new o({document:x}),this._cacheResolvedContext({key:_,resolved:g,tag:"static"})),S.push(g)}return S}_get(d){let f=this.perOpCache.get(d);if(!f){const h=this.sharedCache.get(d);h&&(f=h.get("static"),f&&this.perOpCache.set(d,f))}return f}_cacheResolvedContext({key:d,resolved:f,tag:h}){if(this.perOpCache.set(d,f),h!==void 0){let m=this.sharedCache.get(d);m||(m=new Map,this.sharedCache.set(d,m)),m.set(h,f)}return f}async _resolveRemoteContext({activeCtx:d,url:f,documentLoader:h,base:m,cycles:y}){f=s(m,f);const{context:S,remoteDoc:x}=await this._fetchContext({activeCtx:d,url:f,documentLoader:h,cycles:y});m=x.documentUrl||f,c({context:S,base:m});const _=await this.resolve({activeCtx:d,context:S,documentLoader:h,base:m,cycles:y});return this._cacheResolvedContext({key:f,resolved:_,tag:x.tag}),_}async _fetchContext({activeCtx:d,url:f,documentLoader:h,cycles:m}){if(m.size>a)throw new i("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:d.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:a});if(m.has(f))throw new i("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:d.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:f});m.add(f);let y,S;try{S=await h(f),y=S.document||null,n(y)&&(y=JSON.parse(y))}catch(x){throw new i(`Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context. URL: "${f}".`,"jsonld.InvalidUrl",{code:"loading remote context failed",url:f,cause:x})}if(!e(y))throw new i(`Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object. URL: "${f}".`,"jsonld.InvalidUrl",{code:"invalid remote context",url:f});return"@context"in y?y={"@context":y["@context"]}:y={"@context":{}},S.contextUrl&&(t(y["@context"])||(y["@context"]=[y["@context"]]),y["@context"].push(S.contextUrl)),{context:y,remoteDoc:S}}};function l(u){throw new i("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:u})}function c({context:u,base:d}){if(!u)return;const f=u["@context"];if(n(f)){u["@context"]=s(d,f);return}if(t(f)){for(let h=0;h<f.length;++h){const m=f[h];if(n(m)){f[h]=s(d,m);continue}e(m)&&c({context:{"@context":m},base:d})}return}if(e(f))for(const h in f)c({context:f[h],base:d})}return Gf}var Jf,hb;function HI(){return hb||(hb=1,Jf=ng().NQuads),Jf}var Yf,pb;function Yl(){if(pb)return Yf;pb=1;const t=Ur(),{isArray:e}=br(),{asArray:n}=Lr(),r={};Yf=r,r.defaultEventHandler=null,r.setupEventHandler=({options:o={}})=>{const a=[].concat(o.safe?r.safeEventHandler:[],o.eventHandler?n(o.eventHandler):[],r.defaultEventHandler?r.defaultEventHandler:[]);return a.length===0?null:a},r.handleEvent=({event:o,options:a})=>{s({event:o,handlers:a.eventHandler})};function s({event:o,handlers:a}){let l=!0;for(let c=0;l&&c<a.length;++c){l=!1;const u=a[c];if(e(u))l=s({event:o,handlers:u});else if(typeof u=="function")u({event:o,next:()=>{l=!0}});else if(typeof u=="object")o.code in u?u[o.code]({event:o,next:()=>{l=!0}}):l=!0;else throw new t("Invalid event handler.","jsonld.InvalidEventHandler",{event:o})}return l}const i=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);return r.safeEventHandler=function({event:a,next:l}){if(a.level==="warning"&&i.has(a.code))throw new t("Safe mode validation error.","jsonld.ValidationError",{event:a});l()},r.logEventHandler=function({event:a,next:l}){console.log(`EVENT: ${a.message}`,{event:a}),l()},r.logWarningEventHandler=function({event:a,next:l}){a.level==="warning"&&console.warn(`WARNING: ${a.message}`,{event:a}),l()},r.unhandledEventHandler=function({event:a}){throw new t("No handler for event.","jsonld.UnhandledEvent",{event:a})},r.setDefaultEventHandler=function({eventHandler:o}={}){r.defaultEventHandler=o?n(o):null},Yf}var Xf,mb;function po(){if(mb)return Xf;mb=1;const t=Lr(),e=Ur(),{isArray:n,isObject:r,isString:s,isUndefined:i}=br(),{isAbsolute:o,isRelative:a,prependBase:l}=Vi(),{handleEvent:c}=Yl(),{REGEX_BCP47:u,REGEX_KEYWORD:d,asArray:f,compareShortestLeast:h}=Lr(),m=new Map,y=1e4,S={};Xf=S,S.process=async({activeCtx:g,localCtx:p,options:v,propagate:E=!0,overrideProtected:k=!1,cycles:A=new Set})=>{if(r(p)&&"@context"in p&&n(p["@context"])&&(p=p["@context"]),f(p).length===0)return g;const I=[],N=[({event:Z,next:T})=>{I.push(Z),T()}];v.eventHandler&&N.push(v.eventHandler);const j=v;v={...v,eventHandler:N};const V=await v.contextResolver.resolve({activeCtx:g,context:p,documentLoader:v.documentLoader,base:v.base});r(V[0].document)&&typeof V[0].document["@propagate"]=="boolean"&&(E=V[0].document["@propagate"]);let L=g;!E&&!L.previousContext&&(L=L.clone(),L.previousContext=g);for(const Z of V){let{document:T}=Z;if(g=L,T===null){if(!k&&Object.keys(g.protected).length!==0)throw new e("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});L=g=S.getInitialContext(v).clone();continue}const q=Z.getProcessed(g);if(q){if(j.eventHandler)for(const se of q.events)c({event:se,options:j});L=g=q.context;continue}if(r(T)&&"@context"in T&&(T=T["@context"]),!r(T))throw new e("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:T});L=L.clone();const z=new Map;if("@version"in T){if(T["@version"]!==1.1)throw new e("Unsupported JSON-LD version: "+T["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:T});if(g.processingMode&&g.processingMode==="json-ld-1.0")throw new e("@version: "+T["@version"]+" not compatible with "+g.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:T});L.processingMode="json-ld-1.1",L["@version"]=T["@version"],z.set("@version",!0)}if(L.processingMode=L.processingMode||g.processingMode,"@base"in T){let se=T["@base"];if(!(se===null||o(se)))if(a(se))se=l(L["@base"],se);else throw new e('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:T});L["@base"]=se,z.set("@base",!0)}if("@vocab"in T){const se=T["@vocab"];if(se===null)delete L["@vocab"];else if(s(se)){if(!o(se)&&S.processingMode(L,1))throw new e('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:T});{const W=x(L,se,{vocab:!0,base:!0},void 0,void 0,v);o(W)||v.eventHandler&&c({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:W}},options:v}),L["@vocab"]=W}}else throw new e('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:T});z.set("@vocab",!0)}if("@language"in T){const se=T["@language"];if(se===null)delete L["@language"];else if(s(se))se.match(u)||v.eventHandler&&c({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:se}},options:v}),L["@language"]=se.toLowerCase();else throw new e('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:T});z.set("@language",!0)}if("@direction"in T){const se=T["@direction"];if(g.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @direction not compatible with "+g.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:T});if(se===null)delete L["@direction"];else{if(se!=="ltr"&&se!=="rtl")throw new e('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:T});L["@direction"]=se}z.set("@direction",!0)}if("@propagate"in T){const se=T["@propagate"];if(g.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @propagate not compatible with "+g.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:T});if(typeof se!="boolean")throw new e("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:p});z.set("@propagate",!0)}if("@import"in T){const se=T["@import"];if(g.processingMode==="json-ld-1.0")throw new e("Invalid JSON-LD syntax; @import not compatible with "+g.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:T});if(!s(se))throw new e("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:p});const W=await v.contextResolver.resolve({activeCtx:g,context:se,documentLoader:v.documentLoader,base:v.base});if(W.length!==1)throw new e("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:p});const he=W[0].getProcessed(g);if(he)T=he;else{const me=W[0].document;if("@import"in me)throw new e("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:p});for(const ve in me)T.hasOwnProperty(ve)||(T[ve]=me[ve]);W[0].setProcessed(g,T)}z.set("@import",!0)}z.set("@protected",T["@protected"]||!1);for(const se in T)if(S.createTermDefinition({activeCtx:L,localCtx:T,term:se,defined:z,options:v,overrideProtected:k}),r(T[se])&&"@context"in T[se]){const W=T[se]["@context"];let he=!0;if(s(W)){const me=l(v.base,W);A.has(me)?he=!1:A.add(me)}if(he)try{await S.process({activeCtx:L.clone(),localCtx:T[se]["@context"],overrideProtected:!0,options:v,cycles:A})}catch{throw new e("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:T[se]["@context"],term:se})}}Z.setProcessed(g,{context:L,events:I})}return L},S.createTermDefinition=({activeCtx:g,localCtx:p,term:v,defined:E,options:k,overrideProtected:A=!1})=>{if(E.has(v)){if(E.get(v))return;throw new e("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:p,term:v})}E.set(v,!1);let C;if(p.hasOwnProperty(v)&&(C=p[v]),v==="@type"&&r(C)&&(C["@container"]||"@set")==="@set"&&S.processingMode(g,1.1)){const T=["@container","@id","@protected"],q=Object.keys(C);if(q.length===0||q.some(z=>!T.includes(z)))throw new e("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:p,term:v})}else{if(S.isKeyword(v))throw new e("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:p,term:v});if(v.match(d)){k.eventHandler&&c({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:v}},options:k});return}else if(v==="")throw new e("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:p})}const I=g.mappings.get(v);g.mappings.has(v)&&g.mappings.delete(v);let N=!1;if((s(C)||C===null)&&(N=!0,C={"@id":C}),!r(C))throw new e("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:p});const j={};g.mappings.set(v,j),j.reverse=!1;const V=["@container","@id","@language","@reverse","@type"];S.processingMode(g,1.1)&&V.push("@context","@direction","@index","@nest","@prefix","@protected");for(const T in C)if(!V.includes(T))throw new e("Invalid JSON-LD syntax; a term definition must not contain "+T,"jsonld.SyntaxError",{code:"invalid term definition",context:p});const L=v.indexOf(":");if(j._termHasColon=L>0,"@reverse"in C){if("@id"in C)throw new e("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:p});if("@nest"in C)throw new e("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:p});const T=C["@reverse"];if(!s(T))throw new e("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p});if(T.match(d)){k.eventHandler&&c({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:T}},options:k}),I?g.mappings.set(v,I):g.mappings.delete(v);return}const q=x(g,T,{vocab:!0,base:!1},p,E,k);if(!o(q))throw new e("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p});j["@id"]=q,j.reverse=!0}else if("@id"in C){let T=C["@id"];if(T&&!s(T))throw new e("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p});if(T===null)j["@id"]=null;else if(!S.isKeyword(T)&&T.match(d)){k.eventHandler&&c({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:T}},options:k}),I?g.mappings.set(v,I):g.mappings.delete(v);return}else if(T!==v){if(T=x(g,T,{vocab:!0,base:!1},p,E,k),!o(T)&&!S.isKeyword(T))throw new e("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p});if(v.match(/(?::[^:])|\//)){const q=new Map(E).set(v,!0);if(x(g,v,{vocab:!0,base:!1},p,q,k)!==T)throw new e("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p})}j["@id"]=T,j._prefix=N&&!j._termHasColon&&T.match(/[:\/\?#\[\]@]$/)!==null}}if(!("@id"in j))if(j._termHasColon){const T=v.substr(0,L);if(p.hasOwnProperty(T)&&S.createTermDefinition({activeCtx:g,localCtx:p,term:T,defined:E,options:k}),g.mappings.has(T)){const q=v.substr(L+1);j["@id"]=g.mappings.get(T)["@id"]+q}else j["@id"]=v}else if(v==="@type")j["@id"]=v;else{if(!("@vocab"in g))throw new e("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:p,term:v});j["@id"]=g["@vocab"]+v}if((C["@protected"]===!0||E.get("@protected")===!0&&C["@protected"]!==!1)&&(g.protected[v]=!0,j.protected=!0),E.set(v,!0),"@type"in C){let T=C["@type"];if(!s(T))throw new e("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:p});if(T==="@json"||T==="@none"){if(S.processingMode(g,1))throw new e(`Invalid JSON-LD syntax; an @context @type value must not be "${T}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:p})}else if(T!=="@id"&&T!=="@vocab"){if(T=x(g,T,{vocab:!0,base:!1},p,E,k),!o(T))throw new e("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:p});if(T.indexOf("_:")===0)throw new e("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:p})}j["@type"]=T}if("@container"in C){const T=s(C["@container"])?[C["@container"]]:C["@container"]||[],q=["@list","@set","@index","@language"];let z=!0;const se=T.includes("@set");if(S.processingMode(g,1.1)){if(q.push("@graph","@id","@type"),T.includes("@list")){if(T.length!==1)throw new e("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:p})}else if(T.includes("@graph")){if(T.some(W=>W!=="@graph"&&W!=="@id"&&W!=="@index"&&W!=="@set"))throw new e("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:p})}else z&=T.length<=(se?2:1);if(T.includes("@type")&&(j["@type"]=j["@type"]||"@id",!["@id","@vocab"].includes(j["@type"])))throw new e("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:p})}else z&=!n(C["@container"]),z&=T.length<=1;if(z&=T.every(W=>q.includes(W)),z&=!(se&&T.includes("@list")),!z)throw new e("Invalid JSON-LD syntax; @context @container value must be one of the following: "+q.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:p});if(j.reverse&&!T.every(W=>["@index","@set"].includes(W)))throw new e("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:p});j["@container"]=T}if("@index"in C){if(!("@container"in C)||!j["@container"].includes("@index"))throw new e(`Invalid JSON-LD syntax; @index without @index in @container: "${C["@index"]}" on term "${v}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:p});if(!s(C["@index"])||C["@index"].indexOf("@")===0)throw new e(`Invalid JSON-LD syntax; @index must expand to an IRI: "${C["@index"]}" on term "${v}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:p});j["@index"]=C["@index"]}if("@context"in C&&(j["@context"]=C["@context"]),"@language"in C&&!("@type"in C)){let T=C["@language"];if(T!==null&&!s(T))throw new e("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:p});T!==null&&(T=T.toLowerCase()),j["@language"]=T}if("@prefix"in C){if(v.match(/:|\//))throw new e("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:p});if(S.isKeyword(j["@id"]))throw new e("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:p});if(typeof C["@prefix"]=="boolean")j._prefix=C["@prefix"]===!0;else throw new e("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:p})}if("@direction"in C){const T=C["@direction"];if(T!==null&&T!=="ltr"&&T!=="rtl")throw new e('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:p});j["@direction"]=T}if("@nest"in C){const T=C["@nest"];if(!s(T)||T!=="@nest"&&T.indexOf("@")===0)throw new e("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:p});j["@nest"]=T}// disallow aliasing @context and @preserve
const Z=j["@id"];if(Z==="@context"||Z==="@preserve")throw new e("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:p});if(I&&I.protected&&!A&&(g.protected[v]=!0,j.protected=!0,!_(I,j)))throw new e("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:p,term:v})},S.expandIri=(g,p,v,E)=>x(g,p,v,void 0,void 0,E);function x(g,p,v,E,k,A){if(p===null||!s(p)||S.isKeyword(p))return p;if(p.match(d))return null;if(E&&E.hasOwnProperty(p)&&k.get(p)!==!0&&S.createTermDefinition({activeCtx:g,localCtx:E,term:p,defined:k,options:A}),v=v||{},v.vocab){const I=g.mappings.get(p);if(I===null)return null;if(r(I)&&"@id"in I)return I["@id"]}const C=p.indexOf(":");if(C>0){const I=p.substr(0,C),N=p.substr(C+1);if(I==="_"||N.indexOf("//")===0)return p;E&&E.hasOwnProperty(I)&&S.createTermDefinition({activeCtx:g,localCtx:E,term:I,defined:k,options:A});const j=g.mappings.get(I);if(j&&j._prefix)return j["@id"]+N;if(o(p))return p}if(v.vocab&&"@vocab"in g)p=g["@vocab"]+p;else if(v.base){let I,N;"@base"in g?g["@base"]?(N=l(A.base,g["@base"]),I=l(N,p)):(N=g["@base"],I=p):(N=A.base,I=l(A.base,p)),p=I}return p}S.getInitialContext=g=>{const p=JSON.stringify({processingMode:g.processingMode}),v=m.get(p);if(v)return v;const E={processingMode:g.processingMode,mappings:new Map,inverse:null,getInverse:k,clone:I,revertToPreviousContext:N,protected:{}};return m.size===y&&m.clear(),m.set(p,E),E;function k(){const j=this;if(j.inverse)return j.inverse;const V=j.inverse={},L=j.fastCurieMap={},Z={},T=(j["@language"]||"@none").toLowerCase(),q=j["@direction"],z=j.mappings,se=[...z.keys()].sort(h);for(const W of se){const he=z.get(W);if(he===null)continue;let me=he["@container"]||"@none";if(me=[].concat(me).sort().join(""),he["@id"]===null)continue;const ve=f(he["@id"]);for(const Ce of ve){let J=V[Ce];const G=S.isKeyword(Ce);if(J)!G&&!he._termHasColon&&Z[Ce].push(W);else if(V[Ce]=J={},!G&&!he._termHasColon){Z[Ce]=[W];const P={iri:Ce,terms:Z[Ce]};Ce[0]in L?L[Ce[0]].push(P):L[Ce[0]]=[P]}if(J[me]||(J[me]={"@language":{},"@type":{},"@any":{}}),J=J[me],C(W,J["@any"],"@none"),he.reverse)C(W,J["@type"],"@reverse");else if(he["@type"]==="@none")C(W,J["@any"],"@none"),C(W,J["@language"],"@none"),C(W,J["@type"],"@none");else if("@type"in he)C(W,J["@type"],he["@type"]);else if("@language"in he&&"@direction"in he){const P=he["@language"],ee=he["@direction"];P&&ee?C(W,J["@language"],`${P}_${ee}`.toLowerCase()):P?C(W,J["@language"],P.toLowerCase()):ee?C(W,J["@language"],`_${ee}`):C(W,J["@language"],"@null")}else"@language"in he?C(W,J["@language"],(he["@language"]||"@null").toLowerCase()):"@direction"in he?he["@direction"]?C(W,J["@language"],`_${he["@direction"]}`):C(W,J["@language"],"@none"):q?(C(W,J["@language"],`_${q}`),C(W,J["@language"],"@none"),C(W,J["@type"],"@none")):(C(W,J["@language"],T),C(W,J["@language"],"@none"),C(W,J["@type"],"@none"))}}for(const W in L)A(L,W,1);return V}function A(j,V,L){const Z=j[V],T=j[V]={};let q,z;for(const se of Z)q=se.iri,L>=q.length?z="":z=q[L],z in T?T[z].push(se):T[z]=[se];for(const se in T)se!==""&&A(T,se,L+1)}function C(j,V,L){V.hasOwnProperty(L)||(V[L]=j)}function I(){const j={};return j.mappings=t.clone(this.mappings),j.clone=this.clone,j.inverse=null,j.getInverse=this.getInverse,j.protected=t.clone(this.protected),this.previousContext&&(j.previousContext=this.previousContext.clone()),j.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(j["@base"]=this["@base"]),"@language"in this&&(j["@language"]=this["@language"]),"@vocab"in this&&(j["@vocab"]=this["@vocab"]),j}function N(){return this.previousContext?this.previousContext.clone():this}},S.getContextValue=(g,p,v)=>{if(p===null)return v==="@context"?void 0:null;if(g.mappings.has(p)){const E=g.mappings.get(p);if(i(v))return E;if(E.hasOwnProperty(v))return E[v]}if(v==="@language"&&v in g||v==="@direction"&&v in g)return g[v];if(v!=="@context")return null},S.processingMode=(g,p)=>p.toString()>="1.1"?!g.processingMode||g.processingMode>="json-ld-"+p.toString():g.processingMode==="json-ld-1.0",S.isKeyword=g=>{if(!s(g)||g[0]!=="@")return!1;switch(g){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function _(g,p){if(!(g&&typeof g=="object")||!(p&&typeof p=="object"))return g===p;const v=Array.isArray(g);if(v!==Array.isArray(p))return!1;if(v){if(g.length!==p.length)return!1;for(let A=0;A<g.length;++A)if(!_(g[A],p[A]))return!1;return!0}const E=Object.keys(g),k=Object.keys(p);if(E.length!==k.length)return!1;for(const A in g){let C=g[A],I=p[A];if(A==="@container"&&Array.isArray(C)&&Array.isArray(I)&&(C=C.slice().sort(),I=I.slice().sort()),!_(C,I))return!1}return!0}return Xf}var Qf,gb;function qI(){if(gb)return Qf;gb=1;const t=Ur(),{isArray:e,isObject:n,isEmptyObject:r,isString:s,isUndefined:i}=br(),{isList:o,isValue:a,isGraph:l,isSubject:c}=ri(),{expandIri:u,getContextValue:d,isKeyword:f,process:h,processingMode:m}=po(),{isAbsolute:y}=Vi(),{REGEX_BCP47:S,REGEX_KEYWORD:x,addValue:_,asArray:g,getValues:p,validateTypeValue:v}=Lr(),{handleEvent:E}=Yl(),k={};Qf=k,k.expand=async({activeCtx:V,activeProperty:L=null,element:Z,options:T={},insideList:q=!1,insideIndex:z=!1,typeScopedContext:se=null})=>{if(Z==null)return null;if(L==="@default"&&(T=Object.assign({},T,{isFrame:!1})),!e(Z)&&!n(Z))return!q&&(L===null||u(V,L,{vocab:!0},T)==="@graph")?(T.eventHandler&&E({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:Z}},options:T}),null):I({activeCtx:V,activeProperty:L,value:Z,options:T});if(e(Z)){let P=[];const ee=d(V,L,"@container")||[];q=q||ee.includes("@list");for(let ce=0;ce<Z.length;++ce){let ie=await k.expand({activeCtx:V,activeProperty:L,element:Z[ce],options:T,insideIndex:z,typeScopedContext:se});q&&e(ie)&&(ie={"@list":ie}),ie!==null&&(e(ie)?P=P.concat(ie):P.push(ie))}return P}const W=u(V,L,{vocab:!0},T),he=d(V,L,"@context");se=se||(V.previousContext?V:null);let me=Object.keys(Z).sort(),ve=!z;if(ve&&se&&me.length<=2&&!me.includes("@context"))for(const P of me){const ee=u(se,P,{vocab:!0},T);if(ee==="@value"){ve=!1,V=se;break}if(ee==="@id"&&me.length===1){ve=!1;break}}ve&&(V=V.revertToPreviousContext()),i(he)||(V=await h({activeCtx:V,localCtx:he,propagate:!0,overrideProtected:!0,options:T})),"@context"in Z&&(V=await h({activeCtx:V,localCtx:Z["@context"],options:T})),se=V;let Ce=null;for(const P of me)if(u(V,P,{vocab:!0},T)==="@type"){Ce=Ce||P;const ce=Z[P],ie=Array.isArray(ce)?ce.length>1?ce.slice().sort():ce:[ce];for(const Ee of ie){const ke=d(se,Ee,"@context");i(ke)||(V=await h({activeCtx:V,localCtx:ke,options:T,propagate:!1}))}}let J={};await C({activeCtx:V,activeProperty:L,expandedActiveProperty:W,element:Z,expandedParent:J,options:T,insideList:q,typeKey:Ce,typeScopedContext:se}),me=Object.keys(J);let G=me.length;if("@value"in J){if("@type"in J&&("@language"in J||"@direction"in J))throw new t('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:J});let P=G-1;if("@type"in J&&(P-=1),"@index"in J&&(P-=1),"@language"in J&&(P-=1),"@direction"in J&&(P-=1),P!==0)throw new t('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:J});const ee=J["@value"]===null?[]:g(J["@value"]),ce=p(J,"@type");if(!(m(V,1.1)&&ce.includes("@json")&&ce.length===1))if(ee.length===0)T.eventHandler&&E({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:J}},options:T}),J=null;else{if(!ee.every(ie=>s(ie)||r(ie))&&"@language"in J)throw new t("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:J});if(!ce.every(ie=>y(ie)&&!(s(ie)&&ie.indexOf("_:")===0)||r(ie)))throw new t('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:J})}}else if("@type"in J&&!e(J["@type"]))J["@type"]=[J["@type"]];else if("@set"in J||"@list"in J){if(G>1&&!(G===2&&"@index"in J))throw new t('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:J});"@set"in J&&(J=J["@set"],me=Object.keys(J),G=me.length)}else G===1&&"@language"in J&&(T.eventHandler&&E({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:J}},options:T}),J=null);return n(J)&&!T.keepFreeFloatingNodes&&!q&&(L===null||W==="@graph"||(d(V,L,"@container")||[]).includes("@graph"))&&(J=A({value:J,count:G,options:T})),J};function A({value:V,count:L,options:Z}){if(L===0||"@value"in V||"@list"in V||L===1&&"@id"in V){if(Z.eventHandler){let T,q;L===0?(T="empty object",q="Dropping empty object."):"@value"in V?(T="object with only @value",q="Dropping object with only @value."):"@list"in V?(T="object with only @list",q="Dropping object with only @list."):L===1&&"@id"in V&&(T="object with only @id",q="Dropping object with only @id."),E({event:{type:["JsonLdEvent"],code:T,level:"warning",message:q,details:{value:V}},options:Z})}return null}return V}async function C({activeCtx:V,activeProperty:L,expandedActiveProperty:Z,element:T,expandedParent:q,options:z={},insideList:se,typeKey:W,typeScopedContext:he}){const me=Object.keys(T).sort(),ve=[];let Ce;const J=T[W]&&u(V,e(T[W])?T[W][0]:T[W],{vocab:!0},{...z,typeExpansion:!0})==="@json";for(const G of me){let P=T[G],ee;if(G==="@context")continue;const ce=u(V,G,{vocab:!0},z);if(ce===null||!(y(ce)||f(ce))){z.eventHandler&&E({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:G,expandedProperty:ce}},options:z});continue}if(f(ce)){if(Z==="@reverse")throw new t("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:P});if(ce in q&&ce!=="@included"&&ce!=="@type")throw new t("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:ce})}if(ce==="@id"){if(!s(P)){if(!z.isFrame)throw new t('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:P});if(n(P)){if(!r(P))throw new t('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:P})}else if(e(P)){if(!P.every(D=>s(D)))throw new t('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:P})}else throw new t('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:P})}_(q,"@id",g(P).map(D=>{if(s(D)){const F=u(V,D,{base:!0},z);return z.eventHandler&&(F===null?E(D===null?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:D}},options:z}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:D}},options:z}):y(F)||E({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:D,expandedId:F}},options:z})),F}return D}),{propertyIsArray:z.isFrame});continue}if(ce==="@type"){n(P)&&(P=Object.fromEntries(Object.entries(P).map(([D,F])=>[u(he,D,{vocab:!0}),g(F).map(le=>u(he,le,{base:!0,vocab:!0},{...z,typeExpansion:!0}))]))),v(P,z.isFrame),_(q,"@type",g(P).map(D=>{if(s(D)){const F=u(he,D,{base:!0,vocab:!0},{...z,typeExpansion:!0});return F!=="@json"&&!y(F)&&z.eventHandler&&E({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:D}},options:z}),F}return D}),{propertyIsArray:!!z.isFrame});continue}if(ce==="@included"&&m(V,1.1)){const D=g(await k.expand({activeCtx:V,activeProperty:L,element:P,options:z}));if(!D.every(F=>c(F)))throw new t("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:P});_(q,"@included",D,{propertyIsArray:!0});continue}if(ce==="@graph"&&!(n(P)||e(P)))throw new t('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:P});if(ce==="@value"){Ce=P,J&&m(V,1.1)?q["@value"]=P:_(q,"@value",P,{propertyIsArray:z.isFrame});continue}if(ce==="@language"){if(P===null)continue;if(!s(P)&&!z.isFrame)throw new t('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:P});P=g(P).map(D=>s(D)?D.toLowerCase():D);for(const D of P)s(D)&&!D.match(S)&&z.eventHandler&&E({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:D}},options:z});_(q,"@language",P,{propertyIsArray:z.isFrame});continue}if(ce==="@direction"){if(!s(P)&&!z.isFrame)throw new t('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:P});P=g(P);for(const D of P)if(s(D)&&D!=="ltr"&&D!=="rtl")throw new t('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:P});_(q,"@direction",P,{propertyIsArray:z.isFrame});continue}if(ce==="@index"){if(!s(P))throw new t('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:P});_(q,"@index",P);continue}if(ce==="@reverse"){if(!n(P))throw new t('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:P});if(ee=await k.expand({activeCtx:V,activeProperty:"@reverse",element:P,options:z}),"@reverse"in ee)for(const F in ee["@reverse"])_(q,F,ee["@reverse"][F],{propertyIsArray:!0});let D=q["@reverse"]||null;for(const F in ee){if(F==="@reverse")continue;D===null&&(D=q["@reverse"]={}),_(D,F,[],{propertyIsArray:!0});const le=ee[F];for(let be=0;be<le.length;++be){const ge=le[be];if(a(ge)||o(ge))throw new t('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:ee});_(D,F,ge,{propertyIsArray:!0})}}continue}if(ce==="@nest"){ve.push(G);continue}let ie=V;const Ee=d(V,G,"@context");i(Ee)||(ie=await h({activeCtx:V,localCtx:Ee,propagate:!0,overrideProtected:!0,options:z}));const ke=d(V,G,"@container")||[];if(ke.includes("@language")&&n(P)){const D=d(ie,G,"@direction");ee=N(ie,P,D,z)}else if(ke.includes("@index")&&n(P)){const D=ke.includes("@graph"),F=d(ie,G,"@index")||"@index",le=F!=="@index"&&u(V,F,{vocab:!0},z);ee=await j({activeCtx:ie,options:z,activeProperty:G,value:P,asGraph:D,indexKey:F,propertyIndex:le})}else if(ke.includes("@id")&&n(P)){const D=ke.includes("@graph");ee=await j({activeCtx:ie,options:z,activeProperty:G,value:P,asGraph:D,indexKey:"@id"})}else if(ke.includes("@type")&&n(P))ee=await j({activeCtx:ie.revertToPreviousContext(),options:z,activeProperty:G,value:P,asGraph:!1,indexKey:"@type"});else{const D=ce==="@list";if(D||ce==="@set"){let F=L;D&&Z==="@graph"&&(F=null),ee=await k.expand({activeCtx:ie,activeProperty:F,element:P,options:z,insideList:D})}else d(V,G,"@type")==="@json"?ee={"@type":"@json","@value":P}:ee=await k.expand({activeCtx:ie,activeProperty:G,element:P,options:z,insideList:!1})}if(!(ee===null&&ce!=="@value")){if(ce!=="@list"&&!o(ee)&&ke.includes("@list")&&(ee={"@list":g(ee)}),ke.includes("@graph")&&!ke.some(D=>D==="@id"||D==="@index")){if(ee=g(ee),z.isFrame||(ee=ee.filter(D=>{const F=Object.keys(D).length;return A({value:D,count:F,options:z})!==null})),ee.length===0)continue;ee=ee.map(D=>({"@graph":g(D)}))}if(ie.mappings.has(G)&&ie.mappings.get(G).reverse){const D=q["@reverse"]=q["@reverse"]||{};ee=g(ee);for(let F=0;F<ee.length;++F){const le=ee[F];if(a(le)||o(le))throw new t('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:ee});_(D,ce,le,{propertyIsArray:!0})}continue}_(q,ce,ee,{propertyIsArray:!0})}}if("@value"in q&&!(q["@type"]==="@json"&&m(V,1.1))){if((n(Ce)||e(Ce))&&!z.isFrame)throw new t('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Ce})}for(const G of ve){const P=e(T[G])?T[G]:[T[G]];for(const ee of P){if(!n(ee)||Object.keys(ee).some(ce=>u(V,ce,{vocab:!0},z)==="@value"))throw new t("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:ee});await C({activeCtx:V,activeProperty:L,expandedActiveProperty:Z,element:ee,expandedParent:q,options:z,insideList:se,typeScopedContext:he,typeKey:W})}}}function I({activeCtx:V,activeProperty:L,value:Z,options:T}){if(Z==null)return null;const q=u(V,L,{vocab:!0},T);if(q==="@id")return u(V,Z,{base:!0},T);if(q==="@type")return u(V,Z,{vocab:!0,base:!0},{...T,typeExpansion:!0});const z=d(V,L,"@type");if((z==="@id"||q==="@graph")&&s(Z)){const W=u(V,Z,{base:!0},T);return W===null&&Z.match(x)&&T.eventHandler&&E({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:L}},options:T}),{"@id":W}}if(z==="@vocab"&&s(Z))return{"@id":u(V,Z,{vocab:!0,base:!0},T)};if(f(q))return Z;const se={};if(z&&!["@id","@vocab","@none"].includes(z))se["@type"]=z;else if(s(Z)){const W=d(V,L,"@language");W!==null&&(se["@language"]=W);const he=d(V,L,"@direction");he!==null&&(se["@direction"]=he)}return["boolean","number","string"].includes(typeof Z)||(Z=Z.toString()),se["@value"]=Z,se}function N(V,L,Z,T){const q=[],z=Object.keys(L).sort();for(const se of z){const W=u(V,se,{vocab:!0},T);let he=L[se];e(he)||(he=[he]);for(const me of he){if(me===null)continue;if(!s(me))throw new t("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:L});const ve={"@value":me};W!=="@none"&&(se.match(S)||T.eventHandler&&E({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:se}},options:T}),ve["@language"]=se.toLowerCase()),Z&&(ve["@direction"]=Z),q.push(ve)}}return q}async function j({activeCtx:V,options:L,activeProperty:Z,value:T,asGraph:q,indexKey:z,propertyIndex:se}){const W=[],he=Object.keys(T).sort(),me=z==="@type";for(let ve of he){if(me){const G=d(V,ve,"@context");i(G)||(V=await h({activeCtx:V,localCtx:G,propagate:!1,options:L}))}let Ce=T[ve];e(Ce)||(Ce=[Ce]),Ce=await k.expand({activeCtx:V,activeProperty:Z,element:Ce,options:L,insideList:!1,insideIndex:!0});let J;se?ve==="@none"?J="@none":J=I({activeCtx:V,activeProperty:z,value:ve,options:L}):J=u(V,ve,{vocab:!0},L),z==="@id"?ve=u(V,ve,{base:!0},L):me&&(ve=J);for(let G of Ce){if(q&&!l(G)&&(G={"@graph":[G]}),z==="@type")J==="@none"||(G["@type"]?G["@type"]=[ve].concat(G["@type"]):G["@type"]=[ve]);else{if(a(G)&&!["@language","@type","@index"].includes(z))throw new t(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${z}".`,"jsonld.SyntaxError",{code:"invalid value object",value:G});se?J!=="@none"&&_(G,se,J,{propertyIsArray:!0,prependValue:!0}):J!=="@none"&&!(z in G)&&(G[z]=ve)}W.push(G)}}return W}return Qf}var Zf,yb;function md(){if(yb)return Zf;yb=1;const{isKeyword:t}=po(),e=ri(),n=br(),r=Lr(),s=Ur(),i={};return Zf=i,i.createMergedNodeMap=(o,a)=>{a=a||{};const l=a.issuer||new r.IdentifierIssuer("_:b"),c={"@default":{}};return i.createNodeMap(o,c,"@default",l),i.mergeNodeMaps(c)},i.createNodeMap=(o,a,l,c,u,d)=>{if(n.isArray(o)){for(const y of o)i.createNodeMap(y,a,l,c,void 0,d);return}if(!n.isObject(o)){d&&d.push(o);return}if(e.isValue(o)){if("@type"in o){let y=o["@type"];y.indexOf("_:")===0&&(o["@type"]=y=c.getId(y))}d&&d.push(o);return}else if(d&&e.isList(o)){const y=[];i.createNodeMap(o["@list"],a,l,c,u,y),d.push({"@list":y});return}if("@type"in o){const y=o["@type"];for(const S of y)S.indexOf("_:")===0&&c.getId(S)}n.isUndefined(u)&&(u=e.isBlankNode(o)?c.getId(o["@id"]):o["@id"]),d&&d.push({"@id":u});const f=a[l],h=f[u]=f[u]||{};h["@id"]=u;const m=Object.keys(o).sort();for(let y of m){if(y==="@id")continue;if(y==="@reverse"){const x={"@id":u},_=o["@reverse"];for(const g in _){const p=_[g];for(const v of p){let E=v["@id"];e.isBlankNode(v)&&(E=c.getId(E)),i.createNodeMap(v,a,l,c,E),r.addValue(f[E],g,x,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(y==="@graph"){u in a||(a[u]={}),i.createNodeMap(o[y],a,u,c);continue}if(y==="@included"){i.createNodeMap(o[y],a,l,c);continue}if(y!=="@type"&&t(y)){if(y==="@index"&&y in h&&(o[y]!==h[y]||o[y]["@id"]!==h[y]["@id"]))throw new s("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:h});h[y]=o[y];continue}const S=o[y];if(y.indexOf("_:")===0&&(y=c.getId(y)),S.length===0){r.addValue(h,y,[],{propertyIsArray:!0});continue}for(let x of S)if(y==="@type"&&(x=x.indexOf("_:")===0?c.getId(x):x),e.isSubject(x)||e.isSubjectReference(x)){if("@id"in x&&!x["@id"])continue;const _=e.isBlankNode(x)?c.getId(x["@id"]):x["@id"];r.addValue(h,y,{"@id":_},{propertyIsArray:!0,allowDuplicate:!1}),i.createNodeMap(x,a,l,c,_)}else if(e.isValue(x))r.addValue(h,y,x,{propertyIsArray:!0,allowDuplicate:!1});else if(e.isList(x)){const _=[];i.createNodeMap(x["@list"],a,l,c,u,_),x={"@list":_},r.addValue(h,y,x,{propertyIsArray:!0,allowDuplicate:!1})}else i.createNodeMap(x,a,l,c,u),r.addValue(h,y,x,{propertyIsArray:!0,allowDuplicate:!1})}},i.mergeNodeMapGraphs=o=>{const a={};for(const l of Object.keys(o).sort())for(const c of Object.keys(o[l]).sort()){const u=o[l][c];c in a||(a[c]={"@id":c});const d=a[c];for(const f of Object.keys(u).sort())if(t(f)&&f!=="@type")d[f]=r.clone(u[f]);else for(const h of u[f])r.addValue(d,f,r.clone(h),{propertyIsArray:!0,allowDuplicate:!1})}return a},i.mergeNodeMaps=o=>{const a=o["@default"],l=Object.keys(o).sort();for(const c of l){if(c==="@default")continue;const u=o[c];let d=a[c];d?"@graph"in d||(d["@graph"]=[]):a[c]=d={"@id":c,"@graph":[]};const f=d["@graph"];for(const h of Object.keys(u).sort()){const m=u[h];e.isSubjectReference(m)||f.push(m)}}return a},Zf}var eh,vb;function KI(){if(vb)return eh;vb=1;const{isSubjectReference:t}=ri(),{createMergedNodeMap:e}=md(),n={};return eh=n,n.flatten=r=>{const s=e(r),i=[],o=Object.keys(s).sort();for(let a=0;a<o.length;++a){const l=s[o[a]];t(l)||i.push(l)}return i},eh}var th,bb;function WI(){if(bb)return th;bb=1;const t=Ur(),e=ri(),n=br(),{REGEX_BCP47:r,addValue:s}=Lr(),{handleEvent:i}=Yl(),{RDF_LIST:o,RDF_FIRST:a,RDF_REST:l,RDF_NIL:c,RDF_TYPE:u,RDF_JSON_LITERAL:d,XSD_BOOLEAN:f,XSD_DOUBLE:h,XSD_INTEGER:m,XSD_STRING:y}=rg(),S={};th=S,S.fromRDF=async(_,g)=>{const{useRdfType:p=!1,useNativeTypes:v=!1,rdfDirection:E=null}=g,k={},A={"@default":k},C={};if(E){if(E==="compound-literal")throw new t("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:E});if(E!=="i18n-datatype")throw new t("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:E})}for(const j of _){const V=j.graph.termType==="DefaultGraph"?"@default":j.graph.value;V in A||(A[V]={}),V!=="@default"&&!(V in k)&&(k[V]={"@id":V});const L=A[V],Z=j.subject.value,T=j.predicate.value,q=j.object;Z in L||(L[Z]={"@id":Z});const z=L[Z],se=q.termType.endsWith("Node");if(se&&!(q.value in L)&&(L[q.value]={"@id":q.value}),T===u&&!p&&se){s(z,"@type",q.value,{propertyIsArray:!0});continue}const W=x(q,v,E,g);if(s(z,T,W,{propertyIsArray:!0}),se)if(q.value===c){const he=L[q.value];"usages"in he||(he.usages=[]),he.usages.push({node:z,property:T,value:W})}else q.value in C?C[q.value]=!1:C[q.value]={node:z,property:T,value:W}}for(const j in A){const V=A[j];if(!(c in V))continue;const L=V[c];if(L.usages){for(let Z of L.usages){let T=Z.node,q=Z.property,z=Z.value;const se=[],W=[];let he=Object.keys(T).length;for(;q===l&&n.isObject(C[T["@id"]])&&n.isArray(T[a])&&T[a].length===1&&n.isArray(T[l])&&T[l].length===1&&(he===3||he===4&&n.isArray(T["@type"])&&T["@type"].length===1&&T["@type"][0]===o)&&(se.push(T[a][0]),W.push(T["@id"]),Z=C[T["@id"]],T=Z.node,q=Z.property,z=Z.value,he=Object.keys(T).length,!!e.isBlankNode(T)););delete z["@id"],z["@list"]=se.reverse();for(const me of W)delete V[me]}delete L.usages}}const I=[],N=Object.keys(k).sort();for(const j of N){const V=k[j];if(j in A){const L=V["@graph"]=[],Z=A[j],T=Object.keys(Z).sort();for(const q of T){const z=Z[q];e.isSubjectReference(z)||L.push(z)}}e.isSubjectReference(V)||I.push(V)}return I};function x(_,g,p,v){if(_.termType.endsWith("Node"))return{"@id":_.value};const E={"@value":_.value};if(_.language)_.language.match(r)||v.eventHandler&&i({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:_.language}},options:v}),E["@language"]=_.language;else{let k=_.datatype.value;if(k||(k=y),k===d){k="@json";try{E["@value"]=JSON.parse(E["@value"])}catch(A){throw new t("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:E["@value"],cause:A})}}if(g){if(k===f)E["@value"]==="true"?E["@value"]=!0:E["@value"]==="false"&&(E["@value"]=!1);else if(n.isNumeric(E["@value"]))if(k===m){const A=parseInt(E["@value"],10);A.toFixed(0)===E["@value"]&&(E["@value"]=A)}else k===h&&(E["@value"]=parseFloat(E["@value"]));[f,m,h,y].includes(k)||(E["@type"]=k)}else if(p==="i18n-datatype"&&k.startsWith("https://www.w3.org/ns/i18n#")){const[,A,C]=k.split(/[#_]/);A.length>0&&(E["@language"]=A,A.match(r)||v.eventHandler&&i({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:A}},options:v})),E["@direction"]=C}else k!==y&&(E["@type"]=k)}return E}return th}var nh,_b;function GI(){return _b||(_b=1,nh=function t(e){return e===null||typeof e!="object"||e.toJSON!=null?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((n,r,s)=>{const i=s===0?"":",",o=r===void 0||typeof r=="symbol"?null:r;return n+i+t(o)},"")+"]":"{"+Object.keys(e).sort().reduce((n,r,s)=>{if(e[r]===void 0||typeof e[r]=="symbol")return n;const i=n.length===0?"":",";return n+i+t(r)+":"+t(e[r])},"")+"}"}),nh}var rh,wb;function JI(){if(wb)return rh;wb=1;const{createNodeMap:t}=md(),{isKeyword:e}=po(),n=ri(),r=GI(),s=Ur(),i=br(),o=Lr(),{handleEvent:a}=Yl(),{RDF_FIRST:l,RDF_REST:c,RDF_NIL:u,RDF_TYPE:d,RDF_JSON_LITERAL:f,RDF_LANGSTRING:h,XSD_BOOLEAN:m,XSD_DOUBLE:y,XSD_INTEGER:S,XSD_STRING:x}=rg(),{isAbsolute:_}=Vi(),g={};rh=g,g.toRDF=(k,A)=>{const C=new o.IdentifierIssuer("_:b"),I={"@default":{}};t(k,I,"@default",C);const N=[],j=Object.keys(I).sort();for(const V of j){let L;if(V==="@default")L={termType:"DefaultGraph",value:""};else if(_(V))V.startsWith("_:")?L={termType:"BlankNode"}:L={termType:"NamedNode"},L.value=V;else{A.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:V}},options:A});continue}p(N,I[V],L,C,A)}return N};function p(k,A,C,I,N){const j=Object.keys(A).sort();for(const V of j){const L=A[V],Z=Object.keys(L).sort();for(let T of Z){const q=L[T];if(T==="@type")T=d;else if(e(T))continue;for(const z of q){const se={termType:V.startsWith("_:")?"BlankNode":"NamedNode",value:V};if(!_(V)){N.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:V}},options:N});continue}const W={termType:T.startsWith("_:")?"BlankNode":"NamedNode",value:T};if(!_(T)){N.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:T}},options:N});continue}if(W.termType==="BlankNode"&&!N.produceGeneralizedRdf){N.eventHandler&&a({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:I.getOldIds().find(me=>I.getId(me)===T)}},options:N});continue}const he=E(z,I,k,C,N.rdfDirection,N);he&&k.push({subject:se,predicate:W,object:he,graph:C})}}}}function v(k,A,C,I,N,j){const V={termType:"NamedNode",value:l},L={termType:"NamedNode",value:c},Z={termType:"NamedNode",value:u},T=k.pop(),q=T?{termType:"BlankNode",value:A.getId()}:Z;let z=q;for(const se of k){const W=E(se,A,C,I,N,j),he={termType:"BlankNode",value:A.getId()};C.push({subject:z,predicate:V,object:W,graph:I}),C.push({subject:z,predicate:L,object:he,graph:I}),z=he}if(T){const se=E(T,A,C,I,N,j);C.push({subject:z,predicate:V,object:se,graph:I}),C.push({subject:z,predicate:L,object:Z,graph:I})}return q}function E(k,A,C,I,N,j){const V={};if(n.isValue(k)){V.termType="Literal",V.value=void 0,V.datatype={termType:"NamedNode"};let L=k["@value"];const Z=k["@type"]||null;if(Z==="@json")V.value=r(L),V.datatype.value=f;else if(i.isBoolean(L))V.value=L.toString(),V.datatype.value=Z||m;else if(i.isDouble(L)||Z===y)i.isDouble(L)||(L=parseFloat(L)),V.value=L.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),V.datatype.value=Z||y;else if(i.isNumber(L))V.value=L.toFixed(0),V.datatype.value=Z||S;else if("@direction"in k&&N==="i18n-datatype"){const T=(k["@language"]||"").toLowerCase(),q=k["@direction"],z=`https://www.w3.org/ns/i18n#${T}_${q}`;V.datatype.value=z,V.value=L}else{if("@direction"in k&&N==="compound-literal")throw new s("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:N});if("@direction"in k&&N)throw new s("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:N});"@language"in k?("@direction"in k&&!N&&j.eventHandler&&a({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:V.value}},options:j}),V.value=L,V.datatype.value=Z||h,V.language=k["@language"]):("@direction"in k&&!N&&j.eventHandler&&a({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:V.value}},options:j}),V.value=L,V.datatype.value=Z||x)}}else if(n.isList(k)){const L=v(k["@list"],A,C,I,N,j);V.termType=L.termType,V.value=L.value}else{const L=i.isObject(k)?k["@id"]:k;V.termType=L.startsWith("_:")?"BlankNode":"NamedNode",V.value=L}return V.termType==="NamedNode"&&!_(V.value)?(j.eventHandler&&a({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:V.value}},options:j}),null):V}return rh}var sh,xb;function YI(){if(xb)return sh;xb=1;const{isKeyword:t}=po(),e=ri(),n=br(),r=Lr(),s=Vi(),i=Ur(),{createNodeMap:o,mergeNodeMapGraphs:a}=md(),l={};sh=l,l.frameMergedOrDefault=(p,v,E)=>{const k={options:E,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},A=new r.IdentifierIssuer("_:b");o(p,k.graphMap,"@default",A),E.merged&&(k.graphMap["@merged"]=a(k.graphMap),k.graph="@merged"),k.subjects=k.graphMap[k.graph];const C=[];l.frame(k,Object.keys(k.subjects).sort(),v,C),E.pruneBlankNodeIdentifiers&&(E.bnodesToClear=Object.keys(k.bnodeMap).filter(I=>k.bnodeMap[I].length===1));// remove @preserve from results
return E.link={},S(C,E)},l.frame=(p,v,E,k,A=null)=>{f(E),E=E[0];const C=p.options,I={embed:d(E,C,"embed"),explicit:d(E,C,"explicit"),requireAll:d(E,C,"requireAll")};p.link.hasOwnProperty(p.graph)||(p.link[p.graph]={});const N=p.link[p.graph],j=h(p,v,E,I),V=Object.keys(j).sort();for(const L of V){const Z=j[L];if(A===null?p.uniqueEmbeds={[p.graph]:{}}:p.uniqueEmbeds[p.graph]=p.uniqueEmbeds[p.graph]||{},I.embed==="@link"&&L in N){x(k,A,N[L]);continue}const T={"@id":L};if(L.indexOf("_:")===0&&r.addValue(p.bnodeMap,L,T,{propertyIsArray:!0}),N[L]=T,(I.embed==="@first"||I.embed==="@last")&&p.is11)throw new i("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:E});if(!(!p.embedded&&p.uniqueEmbeds[p.graph].hasOwnProperty(L))){if(p.embedded&&(I.embed==="@never"||u(Z,p.graph,p.subjectStack))){x(k,A,T);continue}if(p.embedded&&(I.embed=="@first"||I.embed=="@once")&&p.uniqueEmbeds[p.graph].hasOwnProperty(L)){x(k,A,T);continue}if(I.embed==="@last"&&L in p.uniqueEmbeds[p.graph]&&y(p,L),p.uniqueEmbeds[p.graph][L]={parent:k,property:A},p.subjectStack.push({subject:Z,graph:p.graph}),L in p.graphMap){let q=!1,z=null;"@graph"in E?(z=E["@graph"][0],q=!(L==="@merged"||L==="@default"),n.isObject(z)||(z={})):(q=p.graph!=="@merged",z={}),q&&l.frame({...p,graph:L,embedded:!1},Object.keys(p.graphMap[L]).sort(),[z],T,"@graph")}"@included"in E&&l.frame({...p,embedded:!1},v,E["@included"],T,"@included");for(const q of Object.keys(Z).sort()){if(t(q)){if(T[q]=r.clone(Z[q]),q==="@type")for(const z of Z["@type"])z.indexOf("_:")===0&&r.addValue(p.bnodeMap,z,T,{propertyIsArray:!0});continue}if(!(I.explicit&&!(q in E)))for(const z of Z[q]){const se=q in E?E[q]:c(I);if(e.isList(z)){const W=E[q]&&E[q][0]&&E[q][0]["@list"]?E[q][0]["@list"]:c(I),he={"@list":[]};x(T,q,he);const me=z["@list"];for(const ve of me)e.isSubjectReference(ve)?l.frame({...p,embedded:!0},[ve["@id"]],W,he,"@list"):x(he,"@list",r.clone(ve))}else e.isSubjectReference(z)?l.frame({...p,embedded:!0},[z["@id"]],se,T,q):g(se[0],z)&&x(T,q,r.clone(z))}}for(const q of Object.keys(E).sort()){if(q==="@type"){if(!n.isObject(E[q][0])||!("@default"in E[q][0]))continue}else if(t(q))continue;const z=E[q][0]||{};if(!d(z,C,"omitDefault")&&!(q in T)){let W="@null";"@default"in z&&(W=r.clone(z["@default"])),n.isArray(W)||(W=[W]),T[q]=[{"@preserve":W}]}}for(const q of Object.keys(E["@reverse"]||{}).sort()){const z=E["@reverse"][q];for(const se of Object.keys(p.subjects))r.getValues(p.subjects[se],q).some(he=>he["@id"]===L)&&(T["@reverse"]=T["@reverse"]||{},r.addValue(T["@reverse"],q,[],{propertyIsArray:!0}),l.frame({...p,embedded:!0},[se],z,T["@reverse"][q],A))}x(k,A,T),p.subjectStack.pop()}}},l.cleanupNull=(p,v)=>{if(n.isArray(p))return p.map(k=>l.cleanupNull(k,v)).filter(k=>k);if(p==="@null")return null;if(n.isObject(p)){if("@id"in p){const E=p["@id"];if(v.link.hasOwnProperty(E)){const k=v.link[E].indexOf(p);if(k!==-1)return v.link[E][k];v.link[E].push(p)}else v.link[E]=[p]}for(const E in p)p[E]=l.cleanupNull(p[E],v)}return p};function c(p){const v={};for(const E in p)p[E]!==void 0&&(v["@"+E]=[p[E]]);return[v]}function u(p,v,E){for(let k=E.length-1;k>=0;--k){const A=E[k];if(A.graph===v&&A.subject["@id"]===p["@id"])return!0}return!1}function d(p,v,E){const k="@"+E;let A=k in p?p[k][0]:v[E];if(E==="embed"){if(A===!0)A="@once";else if(A===!1)A="@never";else if(A!=="@always"&&A!=="@never"&&A!=="@link"&&A!=="@first"&&A!=="@last"&&A!=="@once")throw new i("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:p})}return A}function f(p){if(!n.isArray(p)||p.length!==1||!n.isObject(p[0]))throw new i("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:p});if("@id"in p[0]){for(const v of r.asArray(p[0]["@id"]))if(!(n.isObject(v)||s.isAbsolute(v))||n.isString(v)&&v.indexOf("_:")===0)throw new i("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:p})}if("@type"in p[0]){for(const v of r.asArray(p[0]["@type"]))if(!(n.isObject(v)||s.isAbsolute(v)||v==="@json")||n.isString(v)&&v.indexOf("_:")===0)throw new i("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:p})}}function h(p,v,E,k){const A={};for(const C of v){const I=p.graphMap[p.graph][C];m(p,I,E,k)&&(A[C]=I)}return A}function m(p,v,E,k){let A=!0,C=!1;for(const I in E){let N=!1;const j=r.getValues(v,I),V=r.getValues(E,I).length===0;if(I==="@id"){if(n.isEmptyObject(E["@id"][0]||{})?N=!0:E["@id"].length>=0&&(N=E["@id"].includes(j[0])),!k.requireAll)return N}else if(I==="@type"){if(A=!1,V){if(j.length>0)return!1;N=!0}else if(E["@type"].length===1&&n.isEmptyObject(E["@type"][0]))N=j.length>0;else for(const L of E["@type"])n.isObject(L)&&"@default"in L?N=!0:N=N||j.some(Z=>Z===L);if(!k.requireAll)return N}else{if(t(I))continue;{const L=r.getValues(E,I)[0];let Z=!1;if(L&&(f([L]),Z="@default"in L),A=!1,j.length===0&&Z)continue;if(j.length>0&&V)return!1;if(L===void 0){if(j.length>0)return!1;N=!0}else if(e.isList(L)){const T=L["@list"][0];if(e.isList(j[0])){const q=j[0]["@list"];e.isValue(T)?N=q.some(z=>g(T,z)):(e.isSubject(T)||e.isSubjectReference(T))&&(N=q.some(z=>_(p,T,z,k)))}}else e.isValue(L)?N=j.some(T=>g(L,T)):e.isSubjectReference(L)?N=j.some(T=>_(p,L,T,k)):n.isObject(L)?N=j.length>0:N=!1}}if(!N&&k.requireAll)return!1;C=C||N}return A||C}function y(p,v){const E=p.uniqueEmbeds[p.graph],k=E[v],A=k.parent,C=k.property,I={"@id":v};if(n.isArray(A)){for(let j=0;j<A.length;++j)if(r.compareValues(A[j],I)){A[j]=I;break}}else{const j=n.isArray(A[C]);r.removeValue(A,C,I,{propertyIsArray:j}),r.addValue(A,C,I,{propertyIsArray:j})}const N=j=>{const V=Object.keys(E);for(const L of V)L in E&&n.isObject(E[L].parent)&&E[L].parent["@id"]===j&&(delete E[L],N(L))};N(v)}/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function S(p,v){if(n.isArray(p))return p.map(E=>S(E,v));if(n.isObject(p)){// remove @preserve
if("@preserve"in p)return p["@preserve"][0];if(e.isValue(p))return p;if(e.isList(p))return p["@list"]=S(p["@list"],v),p;if("@id"in p){const E=p["@id"];if(v.link.hasOwnProperty(E)){const k=v.link[E].indexOf(p);if(k!==-1)return v.link[E][k];v.link[E].push(p)}else v.link[E]=[p]}for(const E in p){if(E==="@id"&&v.bnodesToClear.includes(p[E])){delete p["@id"];continue}p[E]=S(p[E],v)}}return p}function x(p,v,E){n.isObject(p)?r.addValue(p,v,E,{propertyIsArray:!0}):p.push(E)}function _(p,v,E,k){if(!("@id"in E))return!1;const A=p.subjects[E["@id"]];return A&&m(p,A,v,k)}function g(p,v){const E=v["@value"],k=v["@type"],A=v["@language"],C=p["@value"]?n.isArray(p["@value"])?p["@value"]:[p["@value"]]:[],I=p["@type"]?n.isArray(p["@type"])?p["@type"]:[p["@type"]]:[],N=p["@language"]?n.isArray(p["@language"])?p["@language"]:[p["@language"]]:[];return C.length===0&&I.length===0&&N.length===0?!0:!(!(C.includes(E)||n.isEmptyObject(C[0]))||!(!k&&I.length===0||I.includes(k)||k&&n.isEmptyObject(I[0]))||!(!A&&N.length===0||N.includes(A)||A&&n.isEmptyObject(N[0])))}return sh}var ih,Eb;function XI(){if(Eb)return ih;Eb=1;const t=Ur(),{isArray:e,isObject:n,isString:r,isUndefined:s}=br(),{isList:i,isValue:o,isGraph:a,isSimpleGraph:l,isSubjectReference:c}=ri(),{expandIri:u,getContextValue:d,isKeyword:f,process:h,processingMode:m}=po(),{removeBase:y,prependBase:S}=Vi(),{REGEX_KEYWORD:x,addValue:_,asArray:g,compareShortestLeast:p}=Lr(),v={};ih=v,v.compact=async({activeCtx:A,activeProperty:C=null,element:I,options:N={}})=>{if(e(I)){let V=[];for(let L=0;L<I.length;++L){const Z=await v.compact({activeCtx:A,activeProperty:C,element:I[L],options:N});Z!==null&&V.push(Z)}return N.compactArrays&&V.length===1&&(d(A,C,"@container")||[]).length===0&&(V=V[0]),V}const j=d(A,C,"@context");if(s(j)||(A=await h({activeCtx:A,localCtx:j,propagate:!0,overrideProtected:!0,options:N})),n(I)){if(N.link&&"@id"in I&&N.link.hasOwnProperty(I["@id"])){const W=N.link[I["@id"]];for(let he=0;he<W.length;++he)if(W[he].expanded===I)return W[he].compacted}if(o(I)||c(I)){const W=v.compactValue({activeCtx:A,activeProperty:C,value:I,options:N});return N.link&&c(I)&&(N.link.hasOwnProperty(I["@id"])||(N.link[I["@id"]]=[]),N.link[I["@id"]].push({expanded:I,compacted:W})),W}if(i(I)&&(d(A,C,"@container")||[]).includes("@list"))return v.compact({activeCtx:A,activeProperty:C,element:I["@list"],options:N});const V=C==="@reverse",L={},Z=A;!o(I)&&!c(I)&&(A=A.revertToPreviousContext());const T=d(Z,C,"@context");s(T)||(A=await h({activeCtx:A,localCtx:T,propagate:!0,overrideProtected:!0,options:N})),N.link&&"@id"in I&&(N.link.hasOwnProperty(I["@id"])||(N.link[I["@id"]]=[]),N.link[I["@id"]].push({expanded:I,compacted:L}));let q=I["@type"]||[];q.length>1&&(q=Array.from(q).sort());const z=A;for(const W of q){const he=v.compactIri({activeCtx:z,iri:W,relativeTo:{vocab:!0}}),me=d(Z,he,"@context");s(me)||(A=await h({activeCtx:A,localCtx:me,options:N,propagate:!1}))}const se=Object.keys(I).sort();for(const W of se){const he=I[W];if(W==="@id"){let me=g(he).map(Ce=>v.compactIri({activeCtx:A,iri:Ce,relativeTo:{vocab:!1},base:N.base}));me.length===1&&(me=me[0]);const ve=v.compactIri({activeCtx:A,iri:"@id",relativeTo:{vocab:!0}});L[ve]=me;continue}if(W==="@type"){let me=g(he).map(P=>v.compactIri({activeCtx:Z,iri:P,relativeTo:{vocab:!0}}));me.length===1&&(me=me[0]);const ve=v.compactIri({activeCtx:A,iri:"@type",relativeTo:{vocab:!0}}),G=(d(A,ve,"@container")||[]).includes("@set")&&m(A,1.1)||e(me)&&he.length===0;_(L,ve,me,{propertyIsArray:G});continue}if(W==="@reverse"){const me=await v.compact({activeCtx:A,activeProperty:"@reverse",element:he,options:N});for(const ve in me)if(A.mappings.has(ve)&&A.mappings.get(ve).reverse){const Ce=me[ve],G=(d(A,ve,"@container")||[]).includes("@set")||!N.compactArrays;_(L,ve,Ce,{propertyIsArray:G}),delete me[ve]}if(Object.keys(me).length>0){const ve=v.compactIri({activeCtx:A,iri:W,relativeTo:{vocab:!0}});_(L,ve,me)}continue}if(W==="@preserve"){const me=await v.compact({activeCtx:A,activeProperty:C,element:he,options:N});e(me)&&me.length===0||_(L,W,me);continue}if(W==="@index"){if((d(A,C,"@container")||[]).includes("@index"))continue;const ve=v.compactIri({activeCtx:A,iri:W,relativeTo:{vocab:!0}});_(L,ve,he);continue}if(W!=="@graph"&&W!=="@list"&&W!=="@included"&&f(W)){const me=v.compactIri({activeCtx:A,iri:W,relativeTo:{vocab:!0}});_(L,me,he);continue}if(!e(he))throw new t("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(he.length===0){const me=v.compactIri({activeCtx:A,iri:W,value:he,relativeTo:{vocab:!0},reverse:V}),ve=A.mappings.has(me)?A.mappings.get(me)["@nest"]:null;let Ce=L;ve&&(k(A,ve,N),n(L[ve])||(L[ve]={}),Ce=L[ve]),_(Ce,me,he,{propertyIsArray:!0})}for(const me of he){const ve=v.compactIri({activeCtx:A,iri:W,value:me,relativeTo:{vocab:!0},reverse:V}),Ce=A.mappings.has(ve)?A.mappings.get(ve)["@nest"]:null;let J=L;Ce&&(k(A,Ce,N),n(L[Ce])||(L[Ce]={}),J=L[Ce]);const G=d(A,ve,"@container")||[],P=a(me),ee=i(me);let ce;ee?ce=me["@list"]:P&&(ce=me["@graph"]);let ie=await v.compact({activeCtx:A,activeProperty:ve,element:ee||P?ce:me,options:N});if(ee)if(e(ie)||(ie=[ie]),!G.includes("@list"))ie={[v.compactIri({activeCtx:A,iri:"@list",relativeTo:{vocab:!0}})]:ie},"@index"in me&&(ie[v.compactIri({activeCtx:A,iri:"@index",relativeTo:{vocab:!0}})]=me["@index"]);else{_(J,ve,ie,{valueIsArray:!0,allowDuplicate:!0});continue}if(P)if(G.includes("@graph")&&(G.includes("@id")||G.includes("@index")&&l(me))){let Ee;J.hasOwnProperty(ve)?Ee=J[ve]:J[ve]=Ee={};const ke=(G.includes("@id")?me["@id"]:me["@index"])||v.compactIri({activeCtx:A,iri:"@none",relativeTo:{vocab:!0}});_(Ee,ke,ie,{propertyIsArray:!N.compactArrays||G.includes("@set")})}else G.includes("@graph")&&l(me)?(e(ie)&&ie.length>1&&(ie={"@included":ie}),_(J,ve,ie,{propertyIsArray:!N.compactArrays||G.includes("@set")})):(e(ie)&&ie.length===1&&N.compactArrays&&(ie=ie[0]),ie={[v.compactIri({activeCtx:A,iri:"@graph",relativeTo:{vocab:!0}})]:ie},"@id"in me&&(ie[v.compactIri({activeCtx:A,iri:"@id",relativeTo:{vocab:!0}})]=me["@id"]),"@index"in me&&(ie[v.compactIri({activeCtx:A,iri:"@index",relativeTo:{vocab:!0}})]=me["@index"]),_(J,ve,ie,{propertyIsArray:!N.compactArrays||G.includes("@set")}));else if(G.includes("@language")||G.includes("@index")||G.includes("@id")||G.includes("@type")){let Ee;J.hasOwnProperty(ve)?Ee=J[ve]:J[ve]=Ee={};let ke;if(G.includes("@language"))o(ie)&&(ie=ie["@value"]),ke=me["@language"];else if(G.includes("@index")){const D=d(A,ve,"@index")||"@index",F=v.compactIri({activeCtx:A,iri:D,relativeTo:{vocab:!0}});if(D==="@index")ke=me["@index"],delete ie[F];else{let le;if([ke,...le]=g(ie[D]||[]),!r(ke))ke=null;else switch(le.length){case 0:delete ie[D];break;case 1:ie[D]=le[0];break;default:ie[D]=le;break}}}else if(G.includes("@id")){const D=v.compactIri({activeCtx:A,iri:"@id",relativeTo:{vocab:!0}});ke=ie[D],delete ie[D]}else if(G.includes("@type")){const D=v.compactIri({activeCtx:A,iri:"@type",relativeTo:{vocab:!0}});let F;switch([ke,...F]=g(ie[D]||[]),F.length){case 0:delete ie[D];break;case 1:ie[D]=F[0];break;default:ie[D]=F;break}Object.keys(ie).length===1&&"@id"in me&&(ie=await v.compact({activeCtx:A,activeProperty:ve,element:{"@id":me["@id"]},options:N}))}ke||(ke=v.compactIri({activeCtx:A,iri:"@none",relativeTo:{vocab:!0}})),_(Ee,ke,ie,{propertyIsArray:G.includes("@set")})}else{const Ee=!N.compactArrays||G.includes("@set")||G.includes("@list")||e(ie)&&ie.length===0||W==="@list"||W==="@graph";_(J,ve,ie,{propertyIsArray:Ee})}}}return L}return I},v.compactIri=({activeCtx:A,iri:C,value:I=null,relativeTo:N={vocab:!1},reverse:j=!1,base:V=null})=>{if(C===null)return C;A.isPropertyTermScoped&&A.previousContext&&(A=A.previousContext);const L=A.getInverse();if(f(C)&&C in L&&"@none"in L[C]&&"@type"in L[C]["@none"]&&"@none"in L[C]["@none"]["@type"])return L[C]["@none"]["@type"]["@none"];if(N.vocab&&C in L){const se=A["@language"]||"@none",W=[];n(I)&&"@index"in I&&!("@graph"in I)&&W.push("@index","@index@set"),n(I)&&"@preserve"in I&&(I=I["@preserve"][0]),a(I)?("@index"in I&&W.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in I&&W.push("@graph@id","@graph@id@set"),W.push("@graph","@graph@set","@set"),"@index"in I||W.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in I||W.push("@graph@id","@graph@id@set")):n(I)&&!o(I)&&W.push("@id","@id@set","@type","@set@type");let he="@language",me="@null";if(j)he="@type",me="@reverse",W.push("@set");else if(i(I)){"@index"in I||W.push("@list");const Ce=I["@list"];if(Ce.length===0)he="@any",me="@none";else{let J=Ce.length===0?se:null,G=null;for(let P=0;P<Ce.length;++P){const ee=Ce[P];let ce="@none",ie="@none";if(o(ee))if("@direction"in ee){const Ee=(ee["@language"]||"").toLowerCase(),ke=ee["@direction"];ce=`${Ee}_${ke}`}else"@language"in ee?ce=ee["@language"].toLowerCase():"@type"in ee?ie=ee["@type"]:ce="@null";else ie="@id";if(J===null?J=ce:ce!==J&&o(ee)&&(J="@none"),G===null?G=ie:ie!==G&&(G="@none"),J==="@none"&&G==="@none")break}J=J||"@none",G=G||"@none",G!=="@none"?(he="@type",me=G):me=J}}else{if(o(I))if("@language"in I&&!("@index"in I)){W.push("@language","@language@set"),me=I["@language"];const Ce=I["@direction"];Ce&&(me=`${me}_${Ce}`)}else"@direction"in I&&!("@index"in I)?me=`_${I["@direction"]}`:"@type"in I&&(he="@type",me=I["@type"]);else he="@type",me="@id";W.push("@set")}W.push("@none"),n(I)&&!("@index"in I)&&W.push("@index","@index@set"),o(I)&&Object.keys(I).length===1&&W.push("@language","@language@set");const ve=E(A,C,I,W,he,me);if(ve!==null)return ve}if(N.vocab&&"@vocab"in A){const se=A["@vocab"];if(C.indexOf(se)===0&&C!==se){const W=C.substr(se.length);if(!A.mappings.has(W))return W}}let Z=null;const T=[];let q=A.fastCurieMap;const z=C.length-1;for(let se=0;se<z&&C[se]in q;++se)q=q[C[se]],""in q&&T.push(q[""][0]);for(let se=T.length-1;se>=0;--se){const W=T[se],he=W.terms;for(const me of he){const ve=me+":"+C.substr(W.iri.length);A.mappings.get(me)._prefix&&(!A.mappings.has(ve)||I===null&&A.mappings.get(ve)["@id"]===C)&&(Z===null||p(ve,Z)<0)&&(Z=ve)}}if(Z!==null)return Z;for(const[se,W]of A.mappings)if(W&&W._prefix&&C.startsWith(se+":"))throw new t(`Absolute IRI "${C}" confused with prefix "${se}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:A});if(!N.vocab)if("@base"in A)if(A["@base"]){const se=y(S(V,A["@base"]),C);return x.test(se)?`./${se}`:se}else return C;else return y(V,C);return C},v.compactValue=({activeCtx:A,activeProperty:C,value:I,options:N})=>{if(o(I)){const Z=d(A,C,"@type"),T=d(A,C,"@language"),q=d(A,C,"@direction"),z=d(A,C,"@container")||[],se="@index"in I&&!z.includes("@index");if(!se&&Z!=="@none"&&(I["@type"]===Z||"@language"in I&&I["@language"]===T&&"@direction"in I&&I["@direction"]===q||"@language"in I&&I["@language"]===T||"@direction"in I&&I["@direction"]===q))return I["@value"];const W=Object.keys(I).length,he=W===1||W===2&&"@index"in I&&!se,me="@language"in A,ve=r(I["@value"]),Ce=A.mappings.has(C)&&A.mappings.get(C)["@language"]===null;if(he&&Z!=="@none"&&(!me||!ve||Ce))return I["@value"];const J={};return se&&(J[v.compactIri({activeCtx:A,iri:"@index",relativeTo:{vocab:!0}})]=I["@index"]),"@type"in I?J[v.compactIri({activeCtx:A,iri:"@type",relativeTo:{vocab:!0}})]=v.compactIri({activeCtx:A,iri:I["@type"],relativeTo:{vocab:!0}}):"@language"in I&&(J[v.compactIri({activeCtx:A,iri:"@language",relativeTo:{vocab:!0}})]=I["@language"]),"@direction"in I&&(J[v.compactIri({activeCtx:A,iri:"@direction",relativeTo:{vocab:!0}})]=I["@direction"]),J[v.compactIri({activeCtx:A,iri:"@value",relativeTo:{vocab:!0}})]=I["@value"],J}const j=u(A,C,{vocab:!0},N),V=d(A,C,"@type"),L=v.compactIri({activeCtx:A,iri:I["@id"],relativeTo:{vocab:V==="@vocab"},base:N.base});return V==="@id"||V==="@vocab"||j==="@graph"?L:{[v.compactIri({activeCtx:A,iri:"@id",relativeTo:{vocab:!0}})]:L}};function E(A,C,I,N,j,V){V===null&&(V="@null");const L=[];if((V==="@id"||V==="@reverse")&&n(I)&&"@id"in I){V==="@reverse"&&L.push("@reverse");const T=v.compactIri({activeCtx:A,iri:I["@id"],relativeTo:{vocab:!0}});A.mappings.has(T)&&A.mappings.get(T)&&A.mappings.get(T)["@id"]===I["@id"]?L.push.apply(L,["@vocab","@id"]):L.push.apply(L,["@id","@vocab"])}else{L.push(V);const T=L.find(q=>q.includes("_"));T&&L.push(T.replace(/^[^_]+_/,"_"))}L.push("@none");const Z=A.inverse[C];for(const T of N){if(!(T in Z))continue;const q=Z[T][j];for(const z of L)if(z in q)return q[z]}return null}function k(A,C,I){if(u(A,C,{vocab:!0},I)!=="@nest")throw new t("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}return ih}var oh,Sb;function QI(){return Sb||(Sb=1,oh=t=>{class e{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(e,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(e.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:e}),e.compact=function(n,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):t.compact(n,r)},e.expand=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):t.expand(n)},e.flatten=function(n){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):t.flatten(n)},e}),oh}/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2022 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */var ah,Ab;function ZI(){if(Ab)return ah;Ab=1;const t=ng(),e=FI(),n=Lr(),r=VI(),s=n.IdentifierIssuer,i=Ur(),o=$1(),a=HI(),{expand:l}=qI(),{flatten:c}=KI(),{fromRDF:u}=WI(),{toRDF:d}=JI(),{frameMergedOrDefault:f,cleanupNull:h}=YI(),{isArray:m,isObject:y,isString:S}=br(),{isSubjectReference:x}=ri(),{expandIri:_,getInitialContext:g,process:p,processingMode:v}=po(),{compact:E,compactIri:k}=XI(),{createNodeMap:A,createMergedNodeMap:C,mergeNodeMaps:I}=md(),{logEventHandler:N,logWarningEventHandler:j,safeEventHandler:V,setDefaultEventHandler:L,setupEventHandler:Z,strictEventHandler:T,unhandledEventHandler:q}=Yl(),z=function(W){const he={},ve=new o({max:100});W.compact=async function(J,G,P){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(G===null)throw new i("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(J===null)return null;P=Ce(P,{base:S(J)?J:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new s("_:b"),contextResolver:new r({sharedCache:ve})}),P.link&&(P.skipExpansion=!0),P.compactToRelative||delete P.base;let ee;P.skipExpansion?ee=J:ee=await W.expand(J,P);const ce=await W.processContext(g(P),G,P);let ie=await E({activeCtx:ce,element:ee,options:P});P.compactArrays&&!P.graph&&m(ie)?ie.length===1?ie=ie[0]:ie.length===0&&(ie={}):P.graph&&y(ie)&&(ie=[ie]),y(G)&&"@context"in G&&(G=G["@context"]),G=n.clone(G),m(G)||(G=[G]);const Ee=G;G=[];for(let D=0;D<Ee.length;++D)(!y(Ee[D])||Object.keys(Ee[D]).length>0)&&G.push(Ee[D]);const ke=G.length>0;if(G.length===1&&(G=G[0]),m(ie)){const D=k({activeCtx:ce,iri:"@graph",relativeTo:{vocab:!0}}),F=ie;ie={},ke&&(ie["@context"]=G),ie[D]=F}else if(y(ie)&&ke){const D=ie;ie={"@context":G};for(const F in D)ie[F]=D[F]}return ie},W.expand=async function(J,G){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");G=Ce(G,{keepFreeFloatingNodes:!1,contextResolver:new r({sharedCache:ve})});const P={},ee=[];if("expandContext"in G){const ke=n.clone(G.expandContext);y(ke)&&"@context"in ke?P.expandContext=ke:P.expandContext={"@context":ke},ee.push(P.expandContext)}let ce;if(!S(J))P.input=n.clone(J);else{const ke=await W.get(J,G);ce=ke.documentUrl,P.input=ke.document,ke.contextUrl&&(P.remoteContext={"@context":ke.contextUrl},ee.push(P.remoteContext))}"base"in G||(G.base=ce||"");let ie=g(G);for(const ke of ee)ie=await p({activeCtx:ie,localCtx:ke,options:G});let Ee=await l({activeCtx:ie,element:P.input,options:G});return y(Ee)&&"@graph"in Ee&&Object.keys(Ee).length===1?Ee=Ee["@graph"]:Ee===null&&(Ee=[]),m(Ee)||(Ee=[Ee]),Ee},W.flatten=async function(J,G,P){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof G=="function"?G=null:G=G||null,P=Ce(P,{base:S(J)?J:"",contextResolver:new r({sharedCache:ve})});const ee=await W.expand(J,P),ce=c(ee);return G===null?ce:(P.graph=!0,P.skipExpansion=!0,await W.compact(ce,G,P))},W.frame=async function(J,G,P){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(P=Ce(P,{base:S(J)?J:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new r({sharedCache:ve})}),S(G)){const be=await W.get(G,P);if(G=be.document,be.contextUrl){let ge=G["@context"];ge?m(ge)?ge.push(be.contextUrl):ge=[ge,be.contextUrl]:ge=be.contextUrl,G["@context"]=ge}}const ee=G?G["@context"]||{}:{},ce=await W.processContext(g(P),ee,P);P.hasOwnProperty("omitGraph")||(P.omitGraph=v(ce,1.1)),P.hasOwnProperty("pruneBlankNodeIdentifiers")||(P.pruneBlankNodeIdentifiers=v(ce,1.1));const ie=await W.expand(J,P),Ee={...P};Ee.isFrame=!0,Ee.keepFreeFloatingNodes=!0;const ke=await W.expand(G,Ee),D=Object.keys(G).map(be=>_(ce,be,{vocab:!0}));Ee.merged=!D.includes("@graph"),Ee.is11=v(ce,1.1);const F=f(ie,ke,Ee);Ee.graph=!P.omitGraph,Ee.skipExpansion=!0,Ee.link={},Ee.framing=!0;let le=await W.compact(F,ee,Ee);return Ee.link={},le=h(le,Ee),le},W.link=async function(J,G,P){const ee={};return G&&(ee["@context"]=G),ee["@embed"]="@link",W.frame(J,ee,P)},W.normalize=W.canonize=async function(J,G){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(G=Ce(G,{base:S(J)?J:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new r({sharedCache:ve})}),"inputFormat"in G){if(G.inputFormat!=="application/n-quads"&&G.inputFormat!=="application/nquads")throw new i("Unknown canonicalization input format.","jsonld.CanonizeError");const ce=a.parse(J);return t.canonize(ce,G)}const P={...G};delete P.format,P.produceGeneralizedRdf=!1;const ee=await W.toRDF(J,P);return t.canonize(ee,G)},W.fromRDF=async function(J,G){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");G=Ce(G,{format:S(J)?"application/n-quads":void 0});const{format:P}=G;let{rdfParser:ee}=G;if(P){if(ee=ee||he[P],!ee)throw new i("Unknown input format.","jsonld.UnknownFormat",{format:P})}else ee=()=>J;const ce=await ee(J);return u(ce,G)},W.toRDF=async function(J,G){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");G=Ce(G,{base:S(J)?J:"",skipExpansion:!1,contextResolver:new r({sharedCache:ve})});let P;G.skipExpansion?P=J:P=await W.expand(J,G);const ee=d(P,G);if(G.format){if(G.format==="application/n-quads"||G.format==="application/nquads")return a.serialize(ee);throw new i("Unknown output format.","jsonld.UnknownFormat",{format:G.format})}return ee},W.createNodeMap=async function(J,G){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");G=Ce(G,{base:S(J)?J:"",contextResolver:new r({sharedCache:ve})});const P=await W.expand(J,G);return C(P,G)},W.merge=async function(J,G,P){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!m(J))throw new TypeError('Could not merge, "docs" must be an array.');typeof G=="function"?G=null:G=G||null,P=Ce(P,{contextResolver:new r({sharedCache:ve})});const ee=await Promise.all(J.map(be=>{const ge={...P};return W.expand(be,ge)}));let ce=!0;"mergeNodes"in P&&(ce=P.mergeNodes);const ie=P.issuer||new s("_:b"),Ee={"@default":{}};for(let be=0;be<ee.length;++be){const ge=n.relabelBlankNodes(ee[be],{issuer:new s("_:b"+be+"-")}),M=ce||be===0?Ee:{"@default":{}};if(A(ge,M,"@default",ie),M!==Ee)for(const H in M){const oe=M[H];if(!(H in Ee)){Ee[H]=oe;continue}const ye=Ee[H];for(const we in oe)we in ye||(ye[we]=oe[we])}}const ke=I(Ee),D=[],F=Object.keys(ke).sort();for(let be=0;be<F.length;++be){const ge=ke[F[be]];x(ge)||D.push(ge)}return G===null?D:(P.graph=!0,P.skipExpansion=!0,await W.compact(D,G,P))},Object.defineProperty(W,"documentLoader",{get:()=>W._documentLoader,set:J=>W._documentLoader=J}),W.documentLoader=async J=>{throw new i("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:J})},W.get=async function(J,G){let P;typeof G.documentLoader=="function"?P=G.documentLoader:P=W.documentLoader;const ee=await P(J);try{if(!ee.document)throw new i("No remote document found at the given URL.","jsonld.NullRemoteDocument");S(ee.document)&&(ee.document=JSON.parse(ee.document))}catch(ce){throw new i("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:ce,remoteDoc:ee})}return ee},W.processContext=async function(J,G,P){return P=Ce(P,{base:"",contextResolver:new r({sharedCache:ve})}),G===null?g(P):(G=n.clone(G),y(G)&&"@context"in G||(G={"@context":G}),p({activeCtx:J,localCtx:G,options:P}))},W.getContextValue=po().getContextValue,W.documentLoaders={},W.useDocumentLoader=function(J){if(!(J in W.documentLoaders))throw new i('Unknown document loader type: "'+J+'"',"jsonld.UnknownDocumentLoader",{type:J});W.documentLoader=W.documentLoaders[J].apply(W,Array.prototype.slice.call(arguments,1))},W.registerRDFParser=function(J,G){he[J]=G},W.unregisterRDFParser=function(J){delete he[J]},W.registerRDFParser("application/n-quads",a.parse),W.registerRDFParser("application/nquads",a.parse),W.url=Vi(),W.logEventHandler=N,W.logWarningEventHandler=j,W.safeEventHandler=V,W.setDefaultEventHandler=L,W.strictEventHandler=T,W.unhandledEventHandler=q,W.util=n,Object.assign(W,n),W.promises=W,W.RequestQueue=A1(),W.JsonLdProcessor=QI()(W),e.setupGlobals(W),e.setupDocumentLoaders(W);function Ce(J,{documentLoader:G=W.documentLoader,...P}){if(J&&"compactionMap"in J)throw new i('"compactionMap" not supported.',"jsonld.OptionsError");if(J&&"expansionMap"in J)throw new i('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:G},P,J,{eventHandler:Z({options:J})})}return W},se=function(){return z(function(){return se()})};return z(se),ah=se,ah}var eR=ZI();const sg=II(eR);var lh={exports:{}},ch={exports:{}},$b;function tR(){return $b||($b=1,function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(n,r){return n<<r|n>>>32-r},rotr:function(n,r){return n<<32-r|n>>>r},endian:function(n){if(n.constructor==Number)return e.rotl(n,8)&16711935|e.rotl(n,24)&4278255360;for(var r=0;r<n.length;r++)n[r]=e.endian(n[r]);return n},randomBytes:function(n){for(var r=[];n>0;n--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(n){for(var r=[],s=0,i=0;s<n.length;s++,i+=8)r[i>>>5]|=n[s]<<24-i%32;return r},wordsToBytes:function(n){for(var r=[],s=0;s<n.length*32;s+=8)r.push(n[s>>>5]>>>24-s%32&255);return r},bytesToHex:function(n){for(var r=[],s=0;s<n.length;s++)r.push((n[s]>>>4).toString(16)),r.push((n[s]&15).toString(16));return r.join("")},hexToBytes:function(n){for(var r=[],s=0;s<n.length;s+=2)r.push(parseInt(n.substr(s,2),16));return r},bytesToBase64:function(n){for(var r=[],s=0;s<n.length;s+=3)for(var i=n[s]<<16|n[s+1]<<8|n[s+2],o=0;o<4;o++)s*8+o*6<=n.length*8?r.push(t.charAt(i>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],s=0,i=0;s<n.length;i=++s%4)i!=0&&r.push((t.indexOf(n.charAt(s-1))&Math.pow(2,-2*i+8)-1)<<i*2|t.indexOf(n.charAt(s))>>>6-i*2);return r}};ch.exports=e}()),ch.exports}var uh,Cb;function kb(){if(Cb)return uh;Cb=1;var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var n=[],r=0;r<e.length;r++)n.push(e.charCodeAt(r)&255);return n},bytesToString:function(e){for(var n=[],r=0;r<e.length;r++)n.push(String.fromCharCode(e[r]));return n.join("")}}};return uh=t,uh}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var dh,Ib;function nR(){if(Ib)return dh;Ib=1,dh=function(n){return n!=null&&(t(n)||e(n)||!!n._isBuffer)};function t(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function e(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&t(n.slice(0,0))}return dh}var Rb;function rR(){return Rb||(Rb=1,function(){var t=tR(),e=kb().utf8,n=nR(),r=kb().bin,s=function(i,o){i.constructor==String?o&&o.encoding==="binary"?i=r.stringToBytes(i):i=e.stringToBytes(i):n(i)?i=Array.prototype.slice.call(i,0):!Array.isArray(i)&&i.constructor!==Uint8Array&&(i=i.toString());for(var a=t.bytesToWords(i),l=i.length*8,c=1732584193,u=-271733879,d=-1732584194,f=271733878,h=0;h<a.length;h++)a[h]=(a[h]<<8|a[h]>>>24)&16711935|(a[h]<<24|a[h]>>>8)&4278255360;a[l>>>5]|=128<<l%32,a[(l+64>>>9<<4)+14]=l;for(var m=s._ff,y=s._gg,S=s._hh,x=s._ii,h=0;h<a.length;h+=16){var _=c,g=u,p=d,v=f;c=m(c,u,d,f,a[h+0],7,-680876936),f=m(f,c,u,d,a[h+1],12,-389564586),d=m(d,f,c,u,a[h+2],17,606105819),u=m(u,d,f,c,a[h+3],22,-1044525330),c=m(c,u,d,f,a[h+4],7,-176418897),f=m(f,c,u,d,a[h+5],12,1200080426),d=m(d,f,c,u,a[h+6],17,-1473231341),u=m(u,d,f,c,a[h+7],22,-45705983),c=m(c,u,d,f,a[h+8],7,1770035416),f=m(f,c,u,d,a[h+9],12,-1958414417),d=m(d,f,c,u,a[h+10],17,-42063),u=m(u,d,f,c,a[h+11],22,-1990404162),c=m(c,u,d,f,a[h+12],7,1804603682),f=m(f,c,u,d,a[h+13],12,-40341101),d=m(d,f,c,u,a[h+14],17,-1502002290),u=m(u,d,f,c,a[h+15],22,1236535329),c=y(c,u,d,f,a[h+1],5,-165796510),f=y(f,c,u,d,a[h+6],9,-1069501632),d=y(d,f,c,u,a[h+11],14,643717713),u=y(u,d,f,c,a[h+0],20,-373897302),c=y(c,u,d,f,a[h+5],5,-701558691),f=y(f,c,u,d,a[h+10],9,38016083),d=y(d,f,c,u,a[h+15],14,-660478335),u=y(u,d,f,c,a[h+4],20,-405537848),c=y(c,u,d,f,a[h+9],5,568446438),f=y(f,c,u,d,a[h+14],9,-1019803690),d=y(d,f,c,u,a[h+3],14,-187363961),u=y(u,d,f,c,a[h+8],20,1163531501),c=y(c,u,d,f,a[h+13],5,-1444681467),f=y(f,c,u,d,a[h+2],9,-51403784),d=y(d,f,c,u,a[h+7],14,1735328473),u=y(u,d,f,c,a[h+12],20,-1926607734),c=S(c,u,d,f,a[h+5],4,-378558),f=S(f,c,u,d,a[h+8],11,-2022574463),d=S(d,f,c,u,a[h+11],16,1839030562),u=S(u,d,f,c,a[h+14],23,-35309556),c=S(c,u,d,f,a[h+1],4,-1530992060),f=S(f,c,u,d,a[h+4],11,1272893353),d=S(d,f,c,u,a[h+7],16,-155497632),u=S(u,d,f,c,a[h+10],23,-1094730640),c=S(c,u,d,f,a[h+13],4,681279174),f=S(f,c,u,d,a[h+0],11,-358537222),d=S(d,f,c,u,a[h+3],16,-722521979),u=S(u,d,f,c,a[h+6],23,76029189),c=S(c,u,d,f,a[h+9],4,-640364487),f=S(f,c,u,d,a[h+12],11,-421815835),d=S(d,f,c,u,a[h+15],16,530742520),u=S(u,d,f,c,a[h+2],23,-995338651),c=x(c,u,d,f,a[h+0],6,-198630844),f=x(f,c,u,d,a[h+7],10,1126891415),d=x(d,f,c,u,a[h+14],15,-1416354905),u=x(u,d,f,c,a[h+5],21,-57434055),c=x(c,u,d,f,a[h+12],6,1700485571),f=x(f,c,u,d,a[h+3],10,-1894986606),d=x(d,f,c,u,a[h+10],15,-1051523),u=x(u,d,f,c,a[h+1],21,-2054922799),c=x(c,u,d,f,a[h+8],6,1873313359),f=x(f,c,u,d,a[h+15],10,-30611744),d=x(d,f,c,u,a[h+6],15,-1560198380),u=x(u,d,f,c,a[h+13],21,1309151649),c=x(c,u,d,f,a[h+4],6,-145523070),f=x(f,c,u,d,a[h+11],10,-1120210379),d=x(d,f,c,u,a[h+2],15,718787259),u=x(u,d,f,c,a[h+9],21,-343485551),c=c+_>>>0,u=u+g>>>0,d=d+p>>>0,f=f+v>>>0}return t.endian([c,u,d,f])};s._ff=function(i,o,a,l,c,u,d){var f=i+(o&a|~o&l)+(c>>>0)+d;return(f<<u|f>>>32-u)+o},s._gg=function(i,o,a,l,c,u,d){var f=i+(o&l|a&~l)+(c>>>0)+d;return(f<<u|f>>>32-u)+o},s._hh=function(i,o,a,l,c,u,d){var f=i+(o^a^l)+(c>>>0)+d;return(f<<u|f>>>32-u)+o},s._ii=function(i,o,a,l,c,u,d){var f=i+(a^(o|~l))+(c>>>0)+d;return(f<<u|f>>>32-u)+o},s._blocksize=16,s._digestsize=16,lh.exports=function(i,o){if(i==null)throw new Error("Illegal argument "+i);var a=t.wordsToBytes(s(i,o));return o&&o.asBytes?a:o&&o.asString?r.bytesToString(a):t.bytesToHex(a)}}()),lh.exports}rR();var fh={},Ha={},Tb;function sR(){if(Tb)return Ha;Tb=1,Ha.byteLength=a,Ha.toByteArray=c,Ha.fromByteArray=f;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)t[s]=r[s],e[r.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(h){var m=h.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=h.indexOf("=");y===-1&&(y=m);var S=y===m?0:4-y%4;return[y,S]}function a(h){var m=o(h),y=m[0],S=m[1];return(y+S)*3/4-S}function l(h,m,y){return(m+y)*3/4-y}function c(h){var m,y=o(h),S=y[0],x=y[1],_=new n(l(h,S,x)),g=0,p=x>0?S-4:S,v;for(v=0;v<p;v+=4)m=e[h.charCodeAt(v)]<<18|e[h.charCodeAt(v+1)]<<12|e[h.charCodeAt(v+2)]<<6|e[h.charCodeAt(v+3)],_[g++]=m>>16&255,_[g++]=m>>8&255,_[g++]=m&255;return x===2&&(m=e[h.charCodeAt(v)]<<2|e[h.charCodeAt(v+1)]>>4,_[g++]=m&255),x===1&&(m=e[h.charCodeAt(v)]<<10|e[h.charCodeAt(v+1)]<<4|e[h.charCodeAt(v+2)]>>2,_[g++]=m>>8&255,_[g++]=m&255),_}function u(h){return t[h>>18&63]+t[h>>12&63]+t[h>>6&63]+t[h&63]}function d(h,m,y){for(var S,x=[],_=m;_<y;_+=3)S=(h[_]<<16&16711680)+(h[_+1]<<8&65280)+(h[_+2]&255),x.push(u(S));return x.join("")}function f(h){for(var m,y=h.length,S=y%3,x=[],_=16383,g=0,p=y-S;g<p;g+=_)x.push(d(h,g,g+_>p?p:g+_));return S===1?(m=h[y-1],x.push(t[m>>2]+t[m<<4&63]+"==")):S===2&&(m=(h[y-2]<<8)+h[y-1],x.push(t[m>>10]+t[m>>4&63]+t[m<<2&63]+"=")),x.join("")}return Ha}var mc={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ob;function iR(){return Ob||(Ob=1,mc.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?s-1:0,f=n?-1:1,h=t[e+d];for(d+=f,i=h&(1<<-u)-1,h>>=-u,u+=a;u>0;i=i*256+t[e+d],d+=f,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=r;u>0;o=o*256+t[e+d],d+=f,u-=8);if(i===0)i=1-c;else{if(i===l)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(h?-1:1)*o*Math.pow(2,i-r)},mc.write=function(t,e,n,r,s,i){var o,a,l,c=i*8-s-1,u=(1<<c)-1,d=u>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,m=r?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+d>=1?e+=f/l:e+=f*Math.pow(2,1-d),e*l>=2&&(o++,l/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*l-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[n+h]=a&255,h+=m,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;t[n+h]=o&255,h+=m,o/=256,c-=8);t[n+h-m]|=y*128}),mc}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Db;function oR(){return Db||(Db=1,function(t){const e=sR(),n=iR(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const R=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(R,b),R.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(R){if(R>s)throw new RangeError('The value "'+R+'" is invalid for option "size"');const b=new Uint8Array(R);return Object.setPrototypeOf(b,a.prototype),b}function a(R,b,w){if(typeof R=="number"){if(typeof b=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(R)}return l(R,b,w)}a.poolSize=8192;function l(R,b,w){if(typeof R=="string")return f(R,b);if(ArrayBuffer.isView(R))return m(R);if(R==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R);if(we(R,ArrayBuffer)||R&&we(R.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(we(R,SharedArrayBuffer)||R&&we(R.buffer,SharedArrayBuffer)))return y(R,b,w);if(typeof R=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const B=R.valueOf&&R.valueOf();if(B!=null&&B!==R)return a.from(B,b,w);const Q=S(R);if(Q)return Q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof R[Symbol.toPrimitive]=="function")return a.from(R[Symbol.toPrimitive]("string"),b,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R)}a.from=function(R,b,w){return l(R,b,w)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(R){if(typeof R!="number")throw new TypeError('"size" argument must be of type number');if(R<0)throw new RangeError('The value "'+R+'" is invalid for option "size"')}function u(R,b,w){return c(R),R<=0?o(R):b!==void 0?typeof w=="string"?o(R).fill(b,w):o(R).fill(b):o(R)}a.alloc=function(R,b,w){return u(R,b,w)};function d(R){return c(R),o(R<0?0:x(R)|0)}a.allocUnsafe=function(R){return d(R)},a.allocUnsafeSlow=function(R){return d(R)};function f(R,b){if((typeof b!="string"||b==="")&&(b="utf8"),!a.isEncoding(b))throw new TypeError("Unknown encoding: "+b);const w=g(R,b)|0;let B=o(w);const Q=B.write(R,b);return Q!==w&&(B=B.slice(0,Q)),B}function h(R){const b=R.length<0?0:x(R.length)|0,w=o(b);for(let B=0;B<b;B+=1)w[B]=R[B]&255;return w}function m(R){if(we(R,Uint8Array)){const b=new Uint8Array(R);return y(b.buffer,b.byteOffset,b.byteLength)}return h(R)}function y(R,b,w){if(b<0||R.byteLength<b)throw new RangeError('"offset" is outside of buffer bounds');if(R.byteLength<b+(w||0))throw new RangeError('"length" is outside of buffer bounds');let B;return b===void 0&&w===void 0?B=new Uint8Array(R):w===void 0?B=new Uint8Array(R,b):B=new Uint8Array(R,b,w),Object.setPrototypeOf(B,a.prototype),B}function S(R){if(a.isBuffer(R)){const b=x(R.length)|0,w=o(b);return w.length===0||R.copy(w,0,0,b),w}if(R.length!==void 0)return typeof R.length!="number"||Se(R.length)?o(0):h(R);if(R.type==="Buffer"&&Array.isArray(R.data))return h(R.data)}function x(R){if(R>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return R|0}function _(R){return+R!=R&&(R=0),a.alloc(+R)}a.isBuffer=function(b){return b!=null&&b._isBuffer===!0&&b!==a.prototype},a.compare=function(b,w){if(we(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength)),we(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),!a.isBuffer(b)||!a.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===w)return 0;let B=b.length,Q=w.length;for(let fe=0,_e=Math.min(B,Q);fe<_e;++fe)if(b[fe]!==w[fe]){B=b[fe],Q=w[fe];break}return B<Q?-1:Q<B?1:0},a.isEncoding=function(b){switch(String(b).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(b,w){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(b.length===0)return a.alloc(0);let B;if(w===void 0)for(w=0,B=0;B<b.length;++B)w+=b[B].length;const Q=a.allocUnsafe(w);let fe=0;for(B=0;B<b.length;++B){let _e=b[B];if(we(_e,Uint8Array))fe+_e.length>Q.length?(a.isBuffer(_e)||(_e=a.from(_e)),_e.copy(Q,fe)):Uint8Array.prototype.set.call(Q,_e,fe);else if(a.isBuffer(_e))_e.copy(Q,fe);else throw new TypeError('"list" argument must be an Array of Buffers');fe+=_e.length}return Q};function g(R,b){if(a.isBuffer(R))return R.length;if(ArrayBuffer.isView(R)||we(R,ArrayBuffer))return R.byteLength;if(typeof R!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof R);const w=R.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&w===0)return 0;let Q=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return ge(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w*2;case"hex":return w>>>1;case"base64":return oe(R).length;default:if(Q)return B?-1:ge(R).length;b=(""+b).toLowerCase(),Q=!0}}a.byteLength=g;function p(R,b,w){let B=!1;if((b===void 0||b<0)&&(b=0),b>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0,b>>>=0,w<=b))return"";for(R||(R="utf8");;)switch(R){case"hex":return se(this,b,w);case"utf8":case"utf-8":return L(this,b,w);case"ascii":return q(this,b,w);case"latin1":case"binary":return z(this,b,w);case"base64":return V(this,b,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,b,w);default:if(B)throw new TypeError("Unknown encoding: "+R);R=(R+"").toLowerCase(),B=!0}}a.prototype._isBuffer=!0;function v(R,b,w){const B=R[b];R[b]=R[w],R[w]=B}a.prototype.swap16=function(){const b=this.length;if(b%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let w=0;w<b;w+=2)v(this,w,w+1);return this},a.prototype.swap32=function(){const b=this.length;if(b%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let w=0;w<b;w+=4)v(this,w,w+3),v(this,w+1,w+2);return this},a.prototype.swap64=function(){const b=this.length;if(b%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let w=0;w<b;w+=8)v(this,w,w+7),v(this,w+1,w+6),v(this,w+2,w+5),v(this,w+3,w+4);return this},a.prototype.toString=function(){const b=this.length;return b===0?"":arguments.length===0?L(this,0,b):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(b){if(!a.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:a.compare(this,b)===0},a.prototype.inspect=function(){let b="";const w=t.INSPECT_MAX_BYTES;return b=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(b+=" ... "),"<Buffer "+b+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(b,w,B,Q,fe){if(we(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength)),!a.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);if(w===void 0&&(w=0),B===void 0&&(B=b?b.length:0),Q===void 0&&(Q=0),fe===void 0&&(fe=this.length),w<0||B>b.length||Q<0||fe>this.length)throw new RangeError("out of range index");if(Q>=fe&&w>=B)return 0;if(Q>=fe)return-1;if(w>=B)return 1;if(w>>>=0,B>>>=0,Q>>>=0,fe>>>=0,this===b)return 0;let _e=fe-Q,He=B-w;const ct=Math.min(_e,He),Xe=this.slice(Q,fe),et=b.slice(w,B);for(let ut=0;ut<ct;++ut)if(Xe[ut]!==et[ut]){_e=Xe[ut],He=et[ut];break}return _e<He?-1:He<_e?1:0};function E(R,b,w,B,Q){if(R.length===0)return-1;if(typeof w=="string"?(B=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,Se(w)&&(w=Q?0:R.length-1),w<0&&(w=R.length+w),w>=R.length){if(Q)return-1;w=R.length-1}else if(w<0)if(Q)w=0;else return-1;if(typeof b=="string"&&(b=a.from(b,B)),a.isBuffer(b))return b.length===0?-1:k(R,b,w,B,Q);if(typeof b=="number")return b=b&255,typeof Uint8Array.prototype.indexOf=="function"?Q?Uint8Array.prototype.indexOf.call(R,b,w):Uint8Array.prototype.lastIndexOf.call(R,b,w):k(R,[b],w,B,Q);throw new TypeError("val must be string, number or Buffer")}function k(R,b,w,B,Q){let fe=1,_e=R.length,He=b.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(R.length<2||b.length<2)return-1;fe=2,_e/=2,He/=2,w/=2}function ct(et,ut){return fe===1?et[ut]:et.readUInt16BE(ut*fe)}let Xe;if(Q){let et=-1;for(Xe=w;Xe<_e;Xe++)if(ct(R,Xe)===ct(b,et===-1?0:Xe-et)){if(et===-1&&(et=Xe),Xe-et+1===He)return et*fe}else et!==-1&&(Xe-=Xe-et),et=-1}else for(w+He>_e&&(w=_e-He),Xe=w;Xe>=0;Xe--){let et=!0;for(let ut=0;ut<He;ut++)if(ct(R,Xe+ut)!==ct(b,ut)){et=!1;break}if(et)return Xe}return-1}a.prototype.includes=function(b,w,B){return this.indexOf(b,w,B)!==-1},a.prototype.indexOf=function(b,w,B){return E(this,b,w,B,!0)},a.prototype.lastIndexOf=function(b,w,B){return E(this,b,w,B,!1)};function A(R,b,w,B){w=Number(w)||0;const Q=R.length-w;B?(B=Number(B),B>Q&&(B=Q)):B=Q;const fe=b.length;B>fe/2&&(B=fe/2);let _e;for(_e=0;_e<B;++_e){const He=parseInt(b.substr(_e*2,2),16);if(Se(He))return _e;R[w+_e]=He}return _e}function C(R,b,w,B){return ye(ge(b,R.length-w),R,w,B)}function I(R,b,w,B){return ye(M(b),R,w,B)}function N(R,b,w,B){return ye(oe(b),R,w,B)}function j(R,b,w,B){return ye(H(b,R.length-w),R,w,B)}a.prototype.write=function(b,w,B,Q){if(w===void 0)Q="utf8",B=this.length,w=0;else if(B===void 0&&typeof w=="string")Q=w,B=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(B)?(B=B>>>0,Q===void 0&&(Q="utf8")):(Q=B,B=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const fe=this.length-w;if((B===void 0||B>fe)&&(B=fe),b.length>0&&(B<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");let _e=!1;for(;;)switch(Q){case"hex":return A(this,b,w,B);case"utf8":case"utf-8":return C(this,b,w,B);case"ascii":case"latin1":case"binary":return I(this,b,w,B);case"base64":return N(this,b,w,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,b,w,B);default:if(_e)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),_e=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(R,b,w){return b===0&&w===R.length?e.fromByteArray(R):e.fromByteArray(R.slice(b,w))}function L(R,b,w){w=Math.min(R.length,w);const B=[];let Q=b;for(;Q<w;){const fe=R[Q];let _e=null,He=fe>239?4:fe>223?3:fe>191?2:1;if(Q+He<=w){let ct,Xe,et,ut;switch(He){case 1:fe<128&&(_e=fe);break;case 2:ct=R[Q+1],(ct&192)===128&&(ut=(fe&31)<<6|ct&63,ut>127&&(_e=ut));break;case 3:ct=R[Q+1],Xe=R[Q+2],(ct&192)===128&&(Xe&192)===128&&(ut=(fe&15)<<12|(ct&63)<<6|Xe&63,ut>2047&&(ut<55296||ut>57343)&&(_e=ut));break;case 4:ct=R[Q+1],Xe=R[Q+2],et=R[Q+3],(ct&192)===128&&(Xe&192)===128&&(et&192)===128&&(ut=(fe&15)<<18|(ct&63)<<12|(Xe&63)<<6|et&63,ut>65535&&ut<1114112&&(_e=ut))}}_e===null?(_e=65533,He=1):_e>65535&&(_e-=65536,B.push(_e>>>10&1023|55296),_e=56320|_e&1023),B.push(_e),Q+=He}return T(B)}const Z=4096;function T(R){const b=R.length;if(b<=Z)return String.fromCharCode.apply(String,R);let w="",B=0;for(;B<b;)w+=String.fromCharCode.apply(String,R.slice(B,B+=Z));return w}function q(R,b,w){let B="";w=Math.min(R.length,w);for(let Q=b;Q<w;++Q)B+=String.fromCharCode(R[Q]&127);return B}function z(R,b,w){let B="";w=Math.min(R.length,w);for(let Q=b;Q<w;++Q)B+=String.fromCharCode(R[Q]);return B}function se(R,b,w){const B=R.length;(!b||b<0)&&(b=0),(!w||w<0||w>B)&&(w=B);let Q="";for(let fe=b;fe<w;++fe)Q+=X[R[fe]];return Q}function W(R,b,w){const B=R.slice(b,w);let Q="";for(let fe=0;fe<B.length-1;fe+=2)Q+=String.fromCharCode(B[fe]+B[fe+1]*256);return Q}a.prototype.slice=function(b,w){const B=this.length;b=~~b,w=w===void 0?B:~~w,b<0?(b+=B,b<0&&(b=0)):b>B&&(b=B),w<0?(w+=B,w<0&&(w=0)):w>B&&(w=B),w<b&&(w=b);const Q=this.subarray(b,w);return Object.setPrototypeOf(Q,a.prototype),Q};function he(R,b,w){if(R%1!==0||R<0)throw new RangeError("offset is not uint");if(R+b>w)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(b,w,B){b=b>>>0,w=w>>>0,B||he(b,w,this.length);let Q=this[b],fe=1,_e=0;for(;++_e<w&&(fe*=256);)Q+=this[b+_e]*fe;return Q},a.prototype.readUintBE=a.prototype.readUIntBE=function(b,w,B){b=b>>>0,w=w>>>0,B||he(b,w,this.length);let Q=this[b+--w],fe=1;for(;w>0&&(fe*=256);)Q+=this[b+--w]*fe;return Q},a.prototype.readUint8=a.prototype.readUInt8=function(b,w){return b=b>>>0,w||he(b,1,this.length),this[b]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(b,w){return b=b>>>0,w||he(b,2,this.length),this[b]|this[b+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(b,w){return b=b>>>0,w||he(b,2,this.length),this[b]<<8|this[b+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(b,w){return b=b>>>0,w||he(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+this[b+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(b,w){return b=b>>>0,w||he(b,4,this.length),this[b]*16777216+(this[b+1]<<16|this[b+2]<<8|this[b+3])},a.prototype.readBigUInt64LE=de(function(b){b=b>>>0,D(b,"offset");const w=this[b],B=this[b+7];(w===void 0||B===void 0)&&F(b,this.length-8);const Q=w+this[++b]*2**8+this[++b]*2**16+this[++b]*2**24,fe=this[++b]+this[++b]*2**8+this[++b]*2**16+B*2**24;return BigInt(Q)+(BigInt(fe)<<BigInt(32))}),a.prototype.readBigUInt64BE=de(function(b){b=b>>>0,D(b,"offset");const w=this[b],B=this[b+7];(w===void 0||B===void 0)&&F(b,this.length-8);const Q=w*2**24+this[++b]*2**16+this[++b]*2**8+this[++b],fe=this[++b]*2**24+this[++b]*2**16+this[++b]*2**8+B;return(BigInt(Q)<<BigInt(32))+BigInt(fe)}),a.prototype.readIntLE=function(b,w,B){b=b>>>0,w=w>>>0,B||he(b,w,this.length);let Q=this[b],fe=1,_e=0;for(;++_e<w&&(fe*=256);)Q+=this[b+_e]*fe;return fe*=128,Q>=fe&&(Q-=Math.pow(2,8*w)),Q},a.prototype.readIntBE=function(b,w,B){b=b>>>0,w=w>>>0,B||he(b,w,this.length);let Q=w,fe=1,_e=this[b+--Q];for(;Q>0&&(fe*=256);)_e+=this[b+--Q]*fe;return fe*=128,_e>=fe&&(_e-=Math.pow(2,8*w)),_e},a.prototype.readInt8=function(b,w){return b=b>>>0,w||he(b,1,this.length),this[b]&128?(255-this[b]+1)*-1:this[b]},a.prototype.readInt16LE=function(b,w){b=b>>>0,w||he(b,2,this.length);const B=this[b]|this[b+1]<<8;return B&32768?B|4294901760:B},a.prototype.readInt16BE=function(b,w){b=b>>>0,w||he(b,2,this.length);const B=this[b+1]|this[b]<<8;return B&32768?B|4294901760:B},a.prototype.readInt32LE=function(b,w){return b=b>>>0,w||he(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24},a.prototype.readInt32BE=function(b,w){return b=b>>>0,w||he(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]},a.prototype.readBigInt64LE=de(function(b){b=b>>>0,D(b,"offset");const w=this[b],B=this[b+7];(w===void 0||B===void 0)&&F(b,this.length-8);const Q=this[b+4]+this[b+5]*2**8+this[b+6]*2**16+(B<<24);return(BigInt(Q)<<BigInt(32))+BigInt(w+this[++b]*2**8+this[++b]*2**16+this[++b]*2**24)}),a.prototype.readBigInt64BE=de(function(b){b=b>>>0,D(b,"offset");const w=this[b],B=this[b+7];(w===void 0||B===void 0)&&F(b,this.length-8);const Q=(w<<24)+this[++b]*2**16+this[++b]*2**8+this[++b];return(BigInt(Q)<<BigInt(32))+BigInt(this[++b]*2**24+this[++b]*2**16+this[++b]*2**8+B)}),a.prototype.readFloatLE=function(b,w){return b=b>>>0,w||he(b,4,this.length),n.read(this,b,!0,23,4)},a.prototype.readFloatBE=function(b,w){return b=b>>>0,w||he(b,4,this.length),n.read(this,b,!1,23,4)},a.prototype.readDoubleLE=function(b,w){return b=b>>>0,w||he(b,8,this.length),n.read(this,b,!0,52,8)},a.prototype.readDoubleBE=function(b,w){return b=b>>>0,w||he(b,8,this.length),n.read(this,b,!1,52,8)};function me(R,b,w,B,Q,fe){if(!a.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>Q||b<fe)throw new RangeError('"value" argument is out of bounds');if(w+B>R.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(b,w,B,Q){if(b=+b,w=w>>>0,B=B>>>0,!Q){const He=Math.pow(2,8*B)-1;me(this,b,w,B,He,0)}let fe=1,_e=0;for(this[w]=b&255;++_e<B&&(fe*=256);)this[w+_e]=b/fe&255;return w+B},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(b,w,B,Q){if(b=+b,w=w>>>0,B=B>>>0,!Q){const He=Math.pow(2,8*B)-1;me(this,b,w,B,He,0)}let fe=B-1,_e=1;for(this[w+fe]=b&255;--fe>=0&&(_e*=256);)this[w+fe]=b/_e&255;return w+B},a.prototype.writeUint8=a.prototype.writeUInt8=function(b,w,B){return b=+b,w=w>>>0,B||me(this,b,w,1,255,0),this[w]=b&255,w+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(b,w,B){return b=+b,w=w>>>0,B||me(this,b,w,2,65535,0),this[w]=b&255,this[w+1]=b>>>8,w+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(b,w,B){return b=+b,w=w>>>0,B||me(this,b,w,2,65535,0),this[w]=b>>>8,this[w+1]=b&255,w+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(b,w,B){return b=+b,w=w>>>0,B||me(this,b,w,4,4294967295,0),this[w+3]=b>>>24,this[w+2]=b>>>16,this[w+1]=b>>>8,this[w]=b&255,w+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(b,w,B){return b=+b,w=w>>>0,B||me(this,b,w,4,4294967295,0),this[w]=b>>>24,this[w+1]=b>>>16,this[w+2]=b>>>8,this[w+3]=b&255,w+4};function ve(R,b,w,B,Q){ke(b,B,Q,R,w,7);let fe=Number(b&BigInt(4294967295));R[w++]=fe,fe=fe>>8,R[w++]=fe,fe=fe>>8,R[w++]=fe,fe=fe>>8,R[w++]=fe;let _e=Number(b>>BigInt(32)&BigInt(4294967295));return R[w++]=_e,_e=_e>>8,R[w++]=_e,_e=_e>>8,R[w++]=_e,_e=_e>>8,R[w++]=_e,w}function Ce(R,b,w,B,Q){ke(b,B,Q,R,w,7);let fe=Number(b&BigInt(4294967295));R[w+7]=fe,fe=fe>>8,R[w+6]=fe,fe=fe>>8,R[w+5]=fe,fe=fe>>8,R[w+4]=fe;let _e=Number(b>>BigInt(32)&BigInt(4294967295));return R[w+3]=_e,_e=_e>>8,R[w+2]=_e,_e=_e>>8,R[w+1]=_e,_e=_e>>8,R[w]=_e,w+8}a.prototype.writeBigUInt64LE=de(function(b,w=0){return ve(this,b,w,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=de(function(b,w=0){return Ce(this,b,w,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(b,w,B,Q){if(b=+b,w=w>>>0,!Q){const ct=Math.pow(2,8*B-1);me(this,b,w,B,ct-1,-ct)}let fe=0,_e=1,He=0;for(this[w]=b&255;++fe<B&&(_e*=256);)b<0&&He===0&&this[w+fe-1]!==0&&(He=1),this[w+fe]=(b/_e>>0)-He&255;return w+B},a.prototype.writeIntBE=function(b,w,B,Q){if(b=+b,w=w>>>0,!Q){const ct=Math.pow(2,8*B-1);me(this,b,w,B,ct-1,-ct)}let fe=B-1,_e=1,He=0;for(this[w+fe]=b&255;--fe>=0&&(_e*=256);)b<0&&He===0&&this[w+fe+1]!==0&&(He=1),this[w+fe]=(b/_e>>0)-He&255;return w+B},a.prototype.writeInt8=function(b,w,B){return b=+b,w=w>>>0,B||me(this,b,w,1,127,-128),b<0&&(b=255+b+1),this[w]=b&255,w+1},a.prototype.writeInt16LE=function(b,w,B){return b=+b,w=w>>>0,B||me(this,b,w,2,32767,-32768),this[w]=b&255,this[w+1]=b>>>8,w+2},a.prototype.writeInt16BE=function(b,w,B){return b=+b,w=w>>>0,B||me(this,b,w,2,32767,-32768),this[w]=b>>>8,this[w+1]=b&255,w+2},a.prototype.writeInt32LE=function(b,w,B){return b=+b,w=w>>>0,B||me(this,b,w,4,2147483647,-2147483648),this[w]=b&255,this[w+1]=b>>>8,this[w+2]=b>>>16,this[w+3]=b>>>24,w+4},a.prototype.writeInt32BE=function(b,w,B){return b=+b,w=w>>>0,B||me(this,b,w,4,2147483647,-2147483648),b<0&&(b=4294967295+b+1),this[w]=b>>>24,this[w+1]=b>>>16,this[w+2]=b>>>8,this[w+3]=b&255,w+4},a.prototype.writeBigInt64LE=de(function(b,w=0){return ve(this,b,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=de(function(b,w=0){return Ce(this,b,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function J(R,b,w,B,Q,fe){if(w+B>R.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function G(R,b,w,B,Q){return b=+b,w=w>>>0,Q||J(R,b,w,4),n.write(R,b,w,B,23,4),w+4}a.prototype.writeFloatLE=function(b,w,B){return G(this,b,w,!0,B)},a.prototype.writeFloatBE=function(b,w,B){return G(this,b,w,!1,B)};function P(R,b,w,B,Q){return b=+b,w=w>>>0,Q||J(R,b,w,8),n.write(R,b,w,B,52,8),w+8}a.prototype.writeDoubleLE=function(b,w,B){return P(this,b,w,!0,B)},a.prototype.writeDoubleBE=function(b,w,B){return P(this,b,w,!1,B)},a.prototype.copy=function(b,w,B,Q){if(!a.isBuffer(b))throw new TypeError("argument should be a Buffer");if(B||(B=0),!Q&&Q!==0&&(Q=this.length),w>=b.length&&(w=b.length),w||(w=0),Q>0&&Q<B&&(Q=B),Q===B||b.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),b.length-w<Q-B&&(Q=b.length-w+B);const fe=Q-B;return this===b&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(w,B,Q):Uint8Array.prototype.set.call(b,this.subarray(B,Q),w),fe},a.prototype.fill=function(b,w,B,Q){if(typeof b=="string"){if(typeof w=="string"?(Q=w,w=0,B=this.length):typeof B=="string"&&(Q=B,B=this.length),Q!==void 0&&typeof Q!="string")throw new TypeError("encoding must be a string");if(typeof Q=="string"&&!a.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(b.length===1){const _e=b.charCodeAt(0);(Q==="utf8"&&_e<128||Q==="latin1")&&(b=_e)}}else typeof b=="number"?b=b&255:typeof b=="boolean"&&(b=Number(b));if(w<0||this.length<w||this.length<B)throw new RangeError("Out of range index");if(B<=w)return this;w=w>>>0,B=B===void 0?this.length:B>>>0,b||(b=0);let fe;if(typeof b=="number")for(fe=w;fe<B;++fe)this[fe]=b;else{const _e=a.isBuffer(b)?b:a.from(b,Q),He=_e.length;if(He===0)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(fe=0;fe<B-w;++fe)this[fe+w]=_e[fe%He]}return this};const ee={};function ce(R,b,w){ee[R]=class extends w{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${R}]`,this.stack,delete this.name}get code(){return R}set code(Q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Q,writable:!0})}toString(){return`${this.name} [${R}]: ${this.message}`}}}ce("ERR_BUFFER_OUT_OF_BOUNDS",function(R){return R?`${R} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ce("ERR_INVALID_ARG_TYPE",function(R,b){return`The "${R}" argument must be of type number. Received type ${typeof b}`},TypeError),ce("ERR_OUT_OF_RANGE",function(R,b,w){let B=`The value of "${R}" is out of range.`,Q=w;return Number.isInteger(w)&&Math.abs(w)>2**32?Q=ie(String(w)):typeof w=="bigint"&&(Q=String(w),(w>BigInt(2)**BigInt(32)||w<-(BigInt(2)**BigInt(32)))&&(Q=ie(Q)),Q+="n"),B+=` It must be ${b}. Received ${Q}`,B},RangeError);function ie(R){let b="",w=R.length;const B=R[0]==="-"?1:0;for(;w>=B+4;w-=3)b=`_${R.slice(w-3,w)}${b}`;return`${R.slice(0,w)}${b}`}function Ee(R,b,w){D(b,"offset"),(R[b]===void 0||R[b+w]===void 0)&&F(b,R.length-(w+1))}function ke(R,b,w,B,Q,fe){if(R>w||R<b){const _e=typeof b=="bigint"?"n":"";let He;throw b===0||b===BigInt(0)?He=`>= 0${_e} and < 2${_e} ** ${(fe+1)*8}${_e}`:He=`>= -(2${_e} ** ${(fe+1)*8-1}${_e}) and < 2 ** ${(fe+1)*8-1}${_e}`,new ee.ERR_OUT_OF_RANGE("value",He,R)}Ee(B,Q,fe)}function D(R,b){if(typeof R!="number")throw new ee.ERR_INVALID_ARG_TYPE(b,"number",R)}function F(R,b,w){throw Math.floor(R)!==R?(D(R,w),new ee.ERR_OUT_OF_RANGE("offset","an integer",R)):b<0?new ee.ERR_BUFFER_OUT_OF_BOUNDS:new ee.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${b}`,R)}const le=/[^+/0-9A-Za-z-_]/g;function be(R){if(R=R.split("=")[0],R=R.trim().replace(le,""),R.length<2)return"";for(;R.length%4!==0;)R=R+"=";return R}function ge(R,b){b=b||1/0;let w;const B=R.length;let Q=null;const fe=[];for(let _e=0;_e<B;++_e){if(w=R.charCodeAt(_e),w>55295&&w<57344){if(!Q){if(w>56319){(b-=3)>-1&&fe.push(239,191,189);continue}else if(_e+1===B){(b-=3)>-1&&fe.push(239,191,189);continue}Q=w;continue}if(w<56320){(b-=3)>-1&&fe.push(239,191,189),Q=w;continue}w=(Q-55296<<10|w-56320)+65536}else Q&&(b-=3)>-1&&fe.push(239,191,189);if(Q=null,w<128){if((b-=1)<0)break;fe.push(w)}else if(w<2048){if((b-=2)<0)break;fe.push(w>>6|192,w&63|128)}else if(w<65536){if((b-=3)<0)break;fe.push(w>>12|224,w>>6&63|128,w&63|128)}else if(w<1114112){if((b-=4)<0)break;fe.push(w>>18|240,w>>12&63|128,w>>6&63|128,w&63|128)}else throw new Error("Invalid code point")}return fe}function M(R){const b=[];for(let w=0;w<R.length;++w)b.push(R.charCodeAt(w)&255);return b}function H(R,b){let w,B,Q;const fe=[];for(let _e=0;_e<R.length&&!((b-=2)<0);++_e)w=R.charCodeAt(_e),B=w>>8,Q=w%256,fe.push(Q),fe.push(B);return fe}function oe(R){return e.toByteArray(be(R))}function ye(R,b,w,B){let Q;for(Q=0;Q<B&&!(Q+w>=b.length||Q>=R.length);++Q)b[Q+w]=R[Q];return Q}function we(R,b){return R instanceof b||R!=null&&R.constructor!=null&&R.constructor.name!=null&&R.constructor.name===b.name}function Se(R){return R!==R}const X=function(){const R="0123456789abcdef",b=new Array(256);for(let w=0;w<16;++w){const B=w*16;for(let Q=0;Q<16;++Q)b[B+Q]=R[w]+R[Q]}return b}();function de(R){return typeof BigInt>"u"?Re:R}function Re(){throw new Error("BigInt not supported")}}(fh)),fh}var aR=oR();const qa="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Ka="http://www.w3.org/2001/XMLSchema#",gc="http://www.w3.org/2000/10/swap/",xr={xsd:{decimal:`${Ka}decimal`,boolean:`${Ka}boolean`,double:`${Ka}double`,integer:`${Ka}integer`,string:`${Ka}string`},rdf:{type:`${qa}type`,nil:`${qa}nil`,first:`${qa}first`,rest:`${qa}rest`,langString:`${qa}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${gc}reify#forSome`,forAll:`${gc}reify#forAll`},log:{implies:`${gc}log#implies`,isImpliedBy:`${gc}log#isImpliedBy`}},{xsd:yc}=xr,lR=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Pb={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},cR=/[\x00-\x20<>\\"\{\}\|\^\`]/,uR={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},dR=/$0^/;class fR{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const n in this)!(n in uR)&&this[n]instanceof RegExp&&(this[n]=dR)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let r=this._input,s=r.length;for(;;){let a,l;for(;a=this._newline.exec(r);)this.comments&&(l=this._comment.exec(a[0]))&&i("comment",l[1],"",this._line,a[0].length),r=r.substr(a[0].length,r.length),s=r.length,this._line++;if(!a&&(a=this._whitespace.exec(r))&&(r=r.substr(a[0].length,r.length)),this._endOfFile.test(r))return n&&(this.comments&&(l=this._comment.exec(r))&&i("comment",l[1],"",this._line,r.length),r=null,i("eof","","",this._line,0)),this._input=r;const c=this._line,u=r[0];let d="",f="",h="",m=null,y=0,S=!1;switch(u){case"^":if(r.length<3)break;if(r[1]==="^"){if(this._previousMarker="^^",r=r.substr(2),r[0]!=="<"){S=!0;break}}else{this._n3Mode&&(y=1,d="^");break}case"<":if(m=this._unescapedIri.exec(r))d="IRI",f=m[1];else if(m=this._iri.exec(r)){if(f=this._unescape(m[1]),f===null||cR.test(f))return o(this);d="IRI"}else r.length>1&&r[1]==="<"?(d="<<",y=2):this._n3Mode&&r.length>1&&r[1]==="="&&(y=2,this._isImpliedBy?(d="abbreviation",f="<"):(d="inverse",f=">"));break;case">":r.length>1&&r[1]===">"&&(d=">>",y=2);break;case"_":((m=this._blank.exec(r))||n&&(m=this._blank.exec(`${r} `)))&&(d="blank",h="_",f=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(r))f=m[1];else if({value:f,matchLength:y}=this._parseLiteral(r),f===null)return o(this);(m!==null||y!==0)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(r))f=m[1];else if({value:f,matchLength:y}=this._parseLiteral(r),f===null)return o(this);(m!==null||y!==0)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(r))&&(d="var",f=m[0]);break;case"@":this._previousMarker==="literal"&&(m=this._langcode.exec(r))?(d="langcode",f=m[1]):(m=this._keyword.exec(r))&&(d=m[0]);break;case".":if(r.length===1?n:r[1]<"0"||r[1]>"9"){d=".",y=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(r)||n&&(m=this._number.exec(`${r} `)))&&(d="literal",f=m[0],h=typeof m[1]=="string"?yc.double:typeof m[2]=="string"?yc.decimal:yc.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(r))?d=m[0].toUpperCase():S=!0;break;case"f":case"t":(m=this._boolean.exec(r))?(d="literal",f=m[0],h=yc.boolean):S=!0;break;case"a":(m=this._shortPredicates.exec(r))?(d="abbreviation",f="a"):S=!0;break;case"=":this._n3Mode&&r.length>1&&(d="abbreviation",r[1]!==">"?(y=1,f="="):(y=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(y=1,d=u);break;case"{":!this._lineMode&&r.length>=2&&(r[1]==="|"?(d="{|",y=2):(d=u,y=1));break;case"|":r.length>=2&&r[1]==="}"&&(d="|}",y=2);break;default:S=!0}if(S&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(m=this._prefix.exec(r))?(d="prefix",f=m[1]||""):((m=this._prefixed.exec(r))||n&&(m=this._prefixed.exec(`${r} `)))&&(d="prefixed",h=m[1]||"",f=this._unescape(m[2]))),this._previousMarker==="^^")switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return n||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?o(this):this._input=r;const x=y||m[0].length,_=i(d,f,h,c,x);this.previousToken=_,this._previousMarker=d,r=r.substr(x,r.length)}function i(a,l,c,u,d){const f=r?s-r.length:s,h=f+d,m={type:a,value:l,prefix:c,line:u,start:f,end:h};return e(null,m),m}function o(a){e(a._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let n=!1;const r=e.replace(lR,(s,i,o,a)=>{if(typeof i=="string")return String.fromCharCode(Number.parseInt(i,16));if(typeof o=="string"){let l=Number.parseInt(o,16);return l<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((l-=65536)>>10),56320+(l&1023))}return a in Pb?Pb[a]:(n=!0,"")});return n?null:r}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],r=n.length;let s=Math.max(this._literalClosingPos,r);for(;(s=e.indexOf(n,s))>0;){let i=0;for(;e[s-i-1]==="\\";)i++;if(i%2===0){const o=e.substring(r,s),a=o.split(/\r\n|\r|\n/).length-1,l=s+r;if(r===1&&a!==0||r===3&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:l}}s++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,n){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof n=="function")queueMicrotask(()=>this._tokenizeToEnd(n,!0));else{const r=[];let s;if(this._tokenizeToEnd((i,o)=>i?s=i:r.push(o),!0),s)throw s;return r}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",r=>{this._input!==null&&r.length!==0&&(this._pendingBuffer&&(r=aR.Buffer.concat([this._pendingBuffer,r]),this._pendingBuffer=null),r[r.length-1]&128?this._pendingBuffer=r:(typeof this._input>"u"?this._input=this._readStartingBom(typeof r=="string"?r:r.toString()):this._input+=r,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}const{rdf:hR,xsd:Vo}=xr;let Xl,pR=0;const C1={namedNode:R1,blankNode:T1,variable:D1,literal:O1,defaultGraph:vR,quad:Ep,triple:Ep,fromTerm:ul,fromQuad:P1};class ws{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof ws?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class k1 extends ws{get termType(){return"NamedNode"}}class vl extends ws{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&e[n++]==="@"?e.substr(n).toLowerCase():""}get datatype(){return new k1(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,r=n<e.length?e[n]:"";return r==="^"?e.substr(n+2):r!=="@"?Vo.string:hR.langString}equals(e){return e instanceof vl?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class mR extends ws{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class gR extends ws{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class yR extends ws{constructor(){return super(""),Xl||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}Xl=new yR;class I1 extends ws{constructor(e,n,r,s){super(""),this._subject=e,this._predicate=n,this._object=r,this._graph=s||Xl}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function R1(t){return new k1(t)}function T1(t){return new mR(t||`n3-${pR++}`)}function O1(t,e){if(typeof e=="string")return new vl(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return n===""&&(typeof t=="boolean"?n=Vo.boolean:typeof t=="number"&&(Number.isFinite(t)?n=Number.isInteger(t)?Vo.integer:Vo.double:(n=Vo.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),n===""||n===Vo.string?new vl(`"${t}"`):new vl(`"${t}"^^${n}`)}function D1(t){return new gR(t)}function vR(){return Xl}function Ep(t,e,n,r){return new I1(t,e,n,r)}function ul(t){if(t instanceof ws)return t;switch(t.termType){case"NamedNode":return R1(t.value);case"BlankNode":return T1(t.value);case"Variable":return D1(t.value);case"DefaultGraph":return Xl;case"Literal":return O1(t.value,t.language||t.datatype);case"Quad":return P1(t);default:throw new Error(`Unexpected termType: ${t.termType}`)}}function P1(t){if(t instanceof I1)return t;if(t.termType!=="Quad")throw new Error(`Unexpected termType: ${t.termType}`);return Ep(ul(t.subject),ul(t.predicate),ul(t.object),ul(t.graph))}let Lb=0;class L1{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&M1(this,e.factory);const n=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(n),s=/trig/.test(n),i=/triple/.test(n),o=/quad/.test(n),a=this._n3Mode=/n3/.test(n),l=i||o;(this._supportsNamedGraphs=!(r||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||s||i||a),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=n===""||/star|\*$/.test(n),l&&(this._resolveRelativeIRI=c=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new fR({lineMode:l,n3:a,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){Lb=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,n,r,s,i){const o=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:s,object:i,graph:n,inverse:o?this._inversePredicate:!1,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let r;switch(e.type){case"IRI":case"typeIRI":const s=this._resolveIRI(e.value);if(s===null)return this._error("Invalid IRI",e);r=this._factory.namedNode(s);break;case"type":case"prefixed":const i=this._prefixes[e.prefix];if(i===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._factory.namedNode(i+e.value);break;case"blank":r=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${n}`,e):(this._subject=null,n==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,r=null,s=this._readListItem;const i=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this._subject=n=this._factory.blankNode()),s=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),o.length!==0&&o[o.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(s=this._readPredicate,this._subject===this.RDF_NIL)return s}else if(s=this._getContextEndReader(),this._object===this.RDF_NIL)return s;r=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,s=this._readListItemDataTypeOrLang):(n=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),s=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((n=this._readEntity(e))===void 0)return}if(r===null&&(this._subject=r=this._factory.blankNode()),i===null?a.predicate===null?a.subject=r:a.object=r:this._emit(i,this.RDF_REST,r,this._graph),n!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,r,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,n,this._graph)}return s}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const r=this._readEntity(e);if(r===void 0)return;n=this._factory.literal(this._literalValue,r),e=null;break;case"langcode":n=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const r=this._completeLiteral(e);if(r)return this._object=r.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),r.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,r=this._graph;const s=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const o=this._predicate,a=this._object;this._subject=this._factory.quad(s,o,a,this.DEFAULTGRAPH),n=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,n=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(r=this._readEntity(e))!==void 0){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(s!==null){const o=this._predicate,a=this._object;i?this._emit(a,o,s,r):this._emit(s,o,a,r)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n=e.type==="IRI"&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if((n=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,r=n.length&&n[n.length-1];if(r&&r.type==="item"){const s=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,s,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,r;const s=this._factory.blankNode();if((r=this._readEntity(e))!==void 0)return this._predicate===null?(n=this._subject,this._subject=s):(n=this._object,this._object=s),this._emit(n,r,s,this._graph),this._readPath}_readBackwardPath(e){const n=this._factory.blankNode();let r,s;if((r=this._readEntity(e))!==void 0)return this._predicate===null?(s=this._subject,this._subject=n):(s=this._object,this._object=n),this._emit(n,r,s,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const n=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,r,s){this._callback(null,this._factory.quad(e,n,r,s||this.DEFAULTGRAPH))}_error(e,n){const r=new Error(`${e} on line ${n.line}.`);r.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=vc}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let r="",s=-1,i=-1,o=0,a="/";for(;s<n;){switch(a){case":":if(i<0&&e[++s]==="/"&&e[++s]==="/")for(;(i=s+1)<n&&e[i]!=="/";)s=i;break;case"?":case"#":s=n;break;case"/":if(e[s+1]===".")switch(a=e[++s+1],a){case"/":r+=e.substring(o,s-1),o=s+1;break;case void 0:case"?":case"#":return r+e.substring(o,s)+e.substr(s+1);case".":if(a=e[++s+1],a===void 0||a==="/"||a==="?"||a==="#"){if(r+=e.substring(o,s-2),(o=r.lastIndexOf("/"))>=i&&(r=r.substr(0,o)),a!=="/")return`${r}/${e.substr(s+1)}`;o=s+1}}}a=e[++s]}return r+e.substring(o)}parse(e,n,r){let s,i,o;if(n&&(n.onQuad||n.onPrefix||n.onComment)?(s=n.onQuad,i=n.onPrefix,o=n.onComment):(s=n,i=r),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Lb++}_`,this._prefixCallback=i||vc,this._inversePredicate=!1,this._quantified=Object.create(null),!s){const l=[];let c;if(this._callback=(u,d)=>{u?c=u:d&&l.push(d)},this._lexer.tokenize(e).every(u=>this._readCallback=this._readCallback(u)),c)throw c;return l}let a=(l,c)=>{l!==null?(this._callback(l),this._callback=vc):this._readCallback&&(this._readCallback=this._readCallback(c))};o&&(this._lexer.comments=!0,a=(l,c)=>{l!==null?(this._callback(l),this._callback=vc):this._readCallback&&(c.type==="comment"?o(c.value):this._readCallback=this._readCallback(c))}),this._callback=s,this._lexer.tokenize(e,a)}}function vc(){}function M1(t,e){t._factory=e,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=e.namedNode(xr.rdf.first),t.RDF_REST=e.namedNode(xr.rdf.rest),t.RDF_NIL=e.namedNode(xr.rdf.nil),t.N3_FORALL=e.namedNode(xr.r.forAll),t.N3_FORSOME=e.namedNode(xr.r.forSome),t.ABBREVIATIONS={a:e.namedNode(xr.rdf.type),"=":e.namedNode(xr.owl.sameAs),">":e.namedNode(xr.log.implies),"<":e.namedNode(xr.log.isImpliedBy)},t.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}M1(L1.prototype,C1);function bR(t){return!!t&&t.termType==="DefaultGraph"}function eu(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const _R=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,wR=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,Mb="./",xR="../",hh="?",Nb="#";class ig{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!_R.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!ig.supports(this.base))return this._baseMatcher=/.^/;const e=/^[^:]*:\/*/.exec(this.base)[0],n=["^",eu(e)],r=[],s=[],i=/[^/?#]*([/?#])/y;let o,a=0,l=0,c=i.lastIndex=e.length;for(;!a&&!l&&(o=i.exec(this.base));)o[1]===Nb?l=i.lastIndex-1:(n.push(eu(o[0]),"(?:"),r.push(")?"),o[1]!==hh?s.push(c=i.lastIndex):(a=c=i.lastIndex,l=this.base.indexOf(Nb,a),this._pathReplacements[a]=hh));for(let u=0;u<s.length;u++)this._pathReplacements[s[u]]=xR.repeat(s.length-u-1);return this._pathReplacements[s[s.length-1]]=Mb,this._baseLength=l>0?l:this.base.length,n.push(eu(this.base.substring(c,this._baseLength)),a?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...n,...r].join(""))}toRelative(e){const n=this._getBaseMatcher().exec(e);if(!n)return e;const r=n[0].length;if(r===this._baseLength&&r===e.length)return"";const s=this._pathReplacements[r];if(s){const i=e.substring(r);return s!==hh&&!wR.test(i)?e:s===Mb&&/^[^?#]/.test(i)?i:s+i}return e.substring(r-1)}}const Wa=C1.defaultGraph(),{rdf:ER,xsd:Po}=xr,jb=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,Fb=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,SR={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class Ga extends ws{equals(e){return e===this}}class AR{constructor(e,n){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(n=e,e=null),n=n||{},this._lists=n.lists,e)this._outputStream=e,this._endStream=n.end===void 0?!0:!!n.end;else{let r="";this._outputStream={write(s,i,o){r+=s,o&&o()},end:s=>{s&&s(null,r)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(n.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Wa,this._prefixIRIs=Object.create(null),n.prefixes&&this.addPrefixes(n.prefixes),n.baseIRI&&(this._baseIri=new ig(n.baseIRI)))}get _inDefaultGraph(){return Wa.equals(this._graph)}_write(e,n){this._outputStream.write(e,"utf8",n)}_writeQuad(e,n,r,s,i){try{s.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(Wa.equals(s)?"":`${this._encodeIriOrBlank(s)} {
`)),this._graph=s,this._subject=null),e.equals(this._subject)?n.equals(this._predicate)?this._write(`, ${this._encodeObject(r)}`,i):this._write(`;
    ${this._encodePredicate(this._predicate=n)} ${this._encodeObject(r)}`,i):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=n)} ${this._encodeObject(r)}`,i)}catch(o){i&&i(o)}}_writeQuadLine(e,n,r,s,i){delete this._prefixMatch,this._write(this.quadToString(e,n,r,s),i)}quadToString(e,n,r,s){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(n)} ${this._encodeObject(r)}${s&&s.value?` ${this._encodeIriOrBlank(s)} .
`:` .
`}`}quadsToString(e){let n="";for(const r of e)n+=this.quadToString(r.subject,r.predicate,r.object,r.graph);return n}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let n=e.value;this._baseIri&&(n=this._baseIri.toRelative(n)),jb.test(n)&&(n=n.replace(Fb,Ub));const r=this._prefixRegex.exec(n);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:n:`<${n}>`}_encodeLiteral(e){let n=e.value;if(jb.test(n)&&(n=n.replace(Fb,Ub)),e.language)return`"${n}"@${e.language}`;if(this._lineMode){if(e.datatype.value===Po.string)return`"${n}"`}else switch(e.datatype.value){case Po.string:return`"${n}"`;case Po.boolean:if(n==="true"||n==="false")return n;break;case Po.integer:if(/^[+-]?\d+$/.test(n))return n;break;case Po.decimal:if(/^[+-]?\d*\.\d+$/.test(n))return n;break;case Po.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(n))return n;break}return`"${n}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===ER.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:n,object:r,graph:s}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(n)} ${this._encodeObject(r)}${bR(s)?"":` ${this._encodeIriOrBlank(s)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,n,r,s,i){r===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,n):typeof s=="function"?this._writeQuad(e,n,r,Wa,s):this._writeQuad(e,n,r,s||Wa,i)}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}addPrefix(e,n,r){const s={};s[e]=n,this.addPrefixes(s,r)}addPrefixes(e,n){if(!this._prefixIRIs)return n&&n();let r=!1;for(let s in e){let i=e[s];typeof i!="string"&&(i=i.value),r=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[i]=s+=":",this._write(`@prefix ${s} <${i}>.
`)}if(r){let s="",i="";for(const o in this._prefixIRIs)s+=s?`|${o}`:o,i+=(i?"|":"")+this._prefixIRIs[o];s=eu(s),this._prefixRegex=new RegExp(`^(?:${i})[^/]*$|^(${s})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(r?`
`:"",n)}blank(e,n){let r=e,s,i;switch(e===void 0?r=[]:e.termType?r=[{predicate:e,object:n}]:"length"in e||(r=[e]),i=r.length){case 0:return new Ga("[]");case 1:if(s=r[0],!(s.object instanceof Ga))return new Ga(`[ ${this._encodePredicate(s.predicate)} ${this._encodeObject(s.object)} ]`);default:let o="[";for(let a=0;a<i;a++)s=r[a],s.predicate.equals(e)?o+=`, ${this._encodeObject(s.object)}`:(o+=`${(a?`;
  `:`
  `)+this._encodePredicate(s.predicate)} ${this._encodeObject(s.object)}`,e=s.predicate);return new Ga(`${o}
]`)}}list(e){const n=e&&e.length||0,r=new Array(n);for(let s=0;s<n;s++)r[s]=this._encodeObject(e[s]);return new Ga(`(${r.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let n=e&&((r,s)=>{n=null,e(r,s)});if(this._endStream)try{return this._outputStream.end(n)}catch{}n&&n()}}function Ub(t){let e=SR[t];return e===void 0&&(t.length===1?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((t.charCodeAt(0)-55296)*1024+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}var $R=Object.defineProperty,CR=(t,e,n)=>e in t?$R(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rr=(t,e,n)=>CR(t,typeof e!="symbol"?e+"":e,n);function kR(t,e,n){return t?`Malformed ${e} document found at ${t} - ${n}`:`Malformed ${e} document - ${n}`}var N1=(t=>(t.Turtle="Turtle",t))(N1||{});let j1=class extends vr{constructor(e,n,r){super(kR(e,n,r)),Rr(this,"documentUrl"),Rr(this,"documentFormat"),Rr(this,"malformationDetails"),this.documentUrl=e,this.documentFormat=n,this.malformationDetails=r}},F1=class extends vr{constructor(e,n){super(`Request failed trying to fetch ${e}`,n),Rr(this,"url"),this.url=e}},Sp=class extends vr{constructor(e){super(`Document with '${e}' url not found`),Rr(this,"url"),this.url=e}};function IR(t,e){return`Unauthorized${e===403?" (Forbidden)":""}: ${t}`}let Ap=class extends vr{constructor(e,n){super(IR(e,n)),Rr(this,"url"),Rr(this,"responseStatus"),this.url=e,this.responseStatus=n}get forbidden(){return typeof this.responseStatus<"u"?this.responseStatus===403:void 0}};const RR={acl:"http://www.w3.org/ns/auth/acl#",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",vcard:"http://www.w3.org/2006/vcard/ns#"};function Ri(t,e={}){var n;if(t.startsWith("http"))return t;const[r,s]=t.split(":");if(r&&s){const i=RR[r]??((n=e.extraContext)==null?void 0:n[r])??null;if(!i)throw new Error(`Can't expand IRI with unknown prefix: '${t}'`);return i+s}if(!e.defaultPrefix)throw new Error(`Can't expand IRI without a default prefix: '${t}'`);return e.defaultPrefix+r}let TR=class{constructor(e,n){Rr(this,"url"),Rr(this,"quads"),this.url=e,this.quads=n}value(e){var n;return(n=this.quads.find(r=>r.predicate.value===Ri(e)))==null?void 0:n.object.value}values(e){return this.quads.filter(n=>n.predicate.value===Ri(e)).map(n=>n.object.value)}},U1=class{constructor(e=[]){Rr(this,"quads"),this.quads=e}isEmpty(){return this.statements.length===0}getQuads(){return this.quads.slice(0)}addQuads(e){this.quads.push(...e)}statements(e,n,r){return this.quads.filter(s=>(!r||this.termMatches(s.object,r))&&(!e||this.termMatches(s.subject,e))&&(!n||this.termMatches(s.predicate,n)))}statement(e,n,r){return this.quads.find(s=>(!r||this.termMatches(s.object,r))&&(!e||this.termMatches(s.subject,e))&&(!n||this.termMatches(s.predicate,n)))??null}contains(e,n,r){return this.statement(e,n,r)!==null}getThing(e){const n=this.statements(e);return new TR(e,n)}expandIRI(e){return Ri(e)}termMatches(e,n){return typeof n=="string"?this.expandIRI(n)===e.value:e.termType===e.termType&&e.value===n.value}};var Ai=(t=>(t.Read="read",t.Write="write",t.Append="append",t.Control="control",t))(Ai||{});let _u=class extends U1{constructor(e,n,r){super(n),Rr(this,"url"),Rr(this,"headers"),this.url=e,this.headers=r}isACPResource(){var e;return!!((e=this.headers.get("Link"))!=null&&e.match(/<http:\/\/www\.w3\.org\/ns\/solid\/acp#AccessControlResource>;[^,]+rel="type"/))}isPersonalProfile(){return!!this.statement(this.url,Ri("rdf:type"),Ri("foaf:PersonalProfileDocument"))}isStorage(){var e;return!!((e=this.headers.get("Link"))!=null&&e.match(/<http:\/\/www\.w3\.org\/ns\/pim\/space#Storage>;[^,]+rel="type"/))}isUserWritable(){return this.getUserPermissions().includes("write")}getUserPermissions(){return this.getPermissionsFromWAC("user")}getPublicPermissions(){return this.getPermissionsFromWAC("public")}getLastModified(){var e;return _f(this.headers.get("last-modified"))??_f((e=this.statement(this.url,"purl:modified"))==null?void 0:e.object.value)??this.getLatestDocumentDate()??null}expandIRI(e){return Ri(e,{defaultPrefix:this.url})}getLatestDocumentDate(){const e=[...this.statements(void 0,"purl:modified"),...this.statements(void 0,"purl:created")].map(n=>_f(n.object.value)).filter(n=>n!==null);return e.length>0?e.reduce((n,r)=>n>r?n:r):null}getPermissionsFromWAC(e){var n;const r=this.headers.get("WAC-Allow")??"",s=((n=o1(r,new RegExp(`${e}="([^"]+)"`)))==null?void 0:n[1])??"";return un([s.includes("read")&&"read",s.includes("write")&&"write",s.includes("append")&&"append",s.includes("control")&&"control"])}};async function OR(t){const e=await sg.compact(t,{});return"@graph"in e?e:"@id"in e?{"@graph":[e]}:{"@graph":[]}}function DR(t){return"@graph"in t}const wu="anonymous://",Bb=wu.length;async function PR(t,e){const n={headers:{Accept:"text/turtle"}};e!=null&&e.cache&&(n.cache=e.cache);try{const r=await((e==null?void 0:e.fetch)??window.fetch)(t,n);if(r.status===404)throw new Sp(t);if([401,403].includes(r.status))throw new Ap(t,r.status);return{body:await r.text(),headers:r.headers}}catch(r){throw r instanceof Ap||r instanceof Sp?r:new F1(t,{cause:r})}}function B1(t){var e;if((e=t["@id"])!=null&&e.startsWith("#")){t["@id"]=wu+t["@id"];for(const[n,r]of Object.entries(t))typeof r!="object"||r===null||!("@id"in r)||B1(t[n])}}function LR(t){for(const e of t)e.subject.value.startsWith(wu)&&(e.subject.value=e.subject.value.slice(Bb)),e.object.value.startsWith(wu)&&(e.object.value=e.object.value.slice(Bb))}async function MR(t,e,n){n=n??window.fetch.bind(window);const r=await ag(e);return await n(t,{method:"PUT",headers:{"Content-Type":"text/turtle"},body:e}),new _u(t,r,new Headers({}))}async function ma(t,e){const{body:n,headers:r}=await PR(t,e),s=await ag(n,{baseIRI:t});return new _u(t,s,r)}async function NR(t,e){try{return await ma(t,e)}catch(n){if(!(n instanceof Sp))throw n;return null}}async function og(t,e){if(DR(t))return(await Promise.all(t["@graph"].map(r=>og(r,e)))).flat();B1(t);const n=await sg.toRDF(t,{base:e});return LR(n),n}function z1(t,e={}){const n=Gn({baseIRI:e.baseIRI}),r=new L1(n),s={quads:[],containsRelativeIRIs:!1};return new Promise((i,o)=>{const a=r._resolveRelativeIRI;r._resolveRelativeIRI=(...l)=>(s.containsRelativeIRIs=!0,r._resolveRelativeIRI=a,r._resolveRelativeIRI(...l)),r.parse(t,(l,c)=>{if(l){o(new j1(e.baseIRI??null,N1.Turtle,l.message));return}if(!c){i(s);return}s.quads.push(c)})})}async function gd(t){return{"@graph":await sg.fromRDF(t)}}function jR(t){return new AR().quadsToString(t)}async function FR(t,e){try{return!(await ma(t,e)).isEmpty()}catch{return!1}}async function ag(t,e={}){const{quads:n}=await z1(t,e);return n}async function UR(t,e,n){n=n??window.fetch.bind(window),await n(t,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:e})}var BR=Object.defineProperty,zR=(t,e,n)=>e in t?BR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$p=(t,e,n)=>zR(t,typeof e!="symbol"?e+"":e,n);function VR(t,e){return e=e??t,typeof t=="string"?`${t} (returned ${e.status} status code)`:`Request to ${e.url} returned ${e.status} status code`}let HR=class extends vr{constructor(e,n){super(VR(e,n)),$p(this,"response"),this.response=n??e}},qR=class extends vr{constructor(e,n,r){super(`The resource at ${e} is using an unsupported authorization protocol (${n})`,r),$p(this,"url"),$p(this,"protocol"),this.url=e,this.protocol=n}};async function KR(t,e){var n;const r=new U1(t.getQuads()),s={[t.url]:t},i=a=>{a.statements(void 0,"foaf:isPrimaryTopicOf").map(l=>l.object.value).forEach(l=>s[l]=s[l]??null),a.statements(void 0,"foaf:primaryTopic").map(l=>l.subject.value).forEach(l=>s[l]=s[l]??null)},o=async()=>{for(const[a,l]of Object.entries(s))if(l===null)try{const c=await ma(a,e);s[a]=c,r.addQuads(c.getQuads()),i(c)}catch(c){if(c instanceof Ap){s[a]=!1;continue}throw c}};i(t);do await o();while(Object.values(s).some(a=>a===null));return{store:r,cloaked:Object.values(s).some(a=>a===!1),writableProfileUrl:t.isUserWritable()?t.url:((n=Object.values(s).find(a=>!!a&&a.isUserWritable()))==null?void 0:n.url)??null}}async function zb(t,e={}){var n,r,s,i,o,a;const l={fetch:e.fetch,cache:"no-store"},c=kr(t),u=await ma(c,l);if(!u.isPersonalProfile()&&!u.contains(t,"solid:oidcIssuer"))throw new Error(`${t} is not a valid webId.`);const{store:d,writableProfileUrl:f,cloaked:h}=await KR(u,e),m=d.statements(t,"pim:storage").map(_=>_.object.value),y=d.statement(t,"solid:publicTypeIndex"),S=d.statement(t,"solid:privateTypeIndex");let x=Cr(c);for(;x&&m.length===0;){const _=await i1(ma(x,l));if(_!=null&&_.isStorage()){m.push(x);break}x=Cr(x)}if(m.length===0)throw new Error(`Could not find any storage for ${t}.`);return await((n=e.onLoaded)==null?void 0:n.call(e,d)),{webId:t,cloaked:h,writableProfileUrl:f,storageUrls:dr(m),...Gn({name:((r=d.statement(t,"vcard:fn"))==null?void 0:r.object.value)??((s=d.statement(t,"foaf:name"))==null?void 0:s.object.value),avatarUrl:((i=d.statement(t,"vcard:hasPhoto"))==null?void 0:i.object.value)??((o=d.statement(t,"foaf:img"))==null?void 0:o.object.value),oidcIssuerUrl:(a=d.statement(t,"solid:oidcIssuer"))==null?void 0:a.object.value,publicTypeIndexUrl:y==null?void 0:y.object.value,privateTypeIndexUrl:S==null?void 0:S.object.value})}}async function WR(t,e={}){if(e.required)return zb(t,e);const n=i1(r=>zb(r,e));return await n(t)??await n(t.replace(/\/$/,"").concat("/profile/card#me"))??await n(_s(t).concat("/profile/card#me"))}function GR(t){return!t.path||!t.path.startsWith("/")?null:t.path.match(/^\/[^/]*$/)?"/":`/${m1(t.path.split("/")).filter().slice(0,-1).join("/")}/`.replace("//","/")}function JR(t){const e=GR(t);return t.protocol&&t.domain?`${t.protocol}://${t.domain}${e??"/"}`:e}function Cp(t){if(!(!("@type"in t)||"@value"in t)){t["@id"]=t["@id"]??Qn();for(const e of Object.values(t))pt(e)&&Cp(e),Tl(e)&&e.forEach(n=>pt(n)&&Cp(n))}}function YR(t){return Be(Hr(t),e=>Cp(e))}function XR(t){const e=Jl(t);return e?Gn({containerUrl:JR(e),documentName:e.path?e.path.split("/").pop():null,resourceHash:e.fragment}):{}}async function QR(t,e,n){n=n??window.fetch.bind(n);const r=t.storageUrls[0],s=`${r}settings/${e}TypeIndex`;return await FR(s,{fetch:n})?`${r}settings/${e}TypeIndex-${Qn()}`:s}async function V1(t,e,n){if(t.writableProfileUrl===null)throw new Error("Can't create type index without a writable profile document");n=n??window.fetch.bind(n);const r=await QR(t,e,n),s=e==="public"?"<> a <http://www.w3.org/ns/solid/terms#TypeIndex> .":`
            <> a
                <http://www.w3.org/ns/solid/terms#TypeIndex>,
                <http://www.w3.org/ns/solid/terms#UnlistedDocument> .
        `,i=`
        INSERT DATA {
            <${t.webId}> <http://www.w3.org/ns/solid/terms#${e}TypeIndex> <${r}> .
        }
    `;return await MR(r,s,n),await UR(t.writableProfileUrl,i,n),r}async function H1(t,e,n,r){const s=await ma(t,{fetch:r});return(Array.isArray(e)?e:[e]).map(i=>s.statements(void 0,"rdf:type","solid:TypeRegistration").filter(o=>s.contains(o.subject.value,"solid:forClass",i)).map(o=>s.statements(o.subject.value,n)).flat().map(o=>o.object.value).filter(o=>!!o)).flat()}async function ZR(t,e){return V1(t,"public",e)}async function eT(t,e){return V1(t,"private",e)}async function tT(t,e,n){return H1(t,e,"solid:instanceContainer",n)}async function nT(t,e,n){return H1(t,e,"solid:instance",n)}async function q1(t,e){var n;e=e??window.fetch.bind(window);const r=((n=((await e(t,{method:"HEAD"})).headers.get("Link")??"").match(/<([^>]+)>;\s*rel="acl"/))==null?void 0:n[1])??null;if(!r)throw new Error(`Could not find ACL Resource for '${t}'`);return pa(Zt(t),r)}async function K1(t,e,n){n=n??await q1(t,e);const r=await NR(n??"",{fetch:e});if(!r)return K1(Zt(t),e);if(r.isACPResource())throw new qR(t,"ACP");return r}async function rT(t,e){const n=await q1(t,e),r=await K1(t,e,n);return Gn({url:n,effectiveUrl:r.url,document:r})}var sT=Object.defineProperty,iT=(t,e,n)=>e in t?sT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Oe=(t,e,n)=>iT(t,typeof e!="symbol"?e+"":e,n);const Rn={ChangeUrl:"change",RemoveProperty:"remove",ShieldProperty:"shield",UpdateProperty:"update"};let oT=class{constructor(e,n){Oe(this,"type",Rn.ChangeUrl),this.resourceUrl=e,this.newResourceUrl=n}};const aT={crdt:"https://vocab.noeldemartin.com/crdt/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",posix:"http://www.w3.org/ns/posix/stat#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",xsd:"http://www.w3.org/2001/XMLSchema#"};function wt(t,e={},n=""){if(/^https?:\/\//.test(t))return t;const r=t.indexOf(":");if(r===-1)return n+t;e={...aT,...e};const s=t.slice(0,r);return s in e?e[s]+t.slice(s.length+1):t}const lT=wt("crdt:property"),Vb=wt("crdt:resource"),lo=wt("ldp:Container"),lg=wt("ldp:contains"),W1=wt("rdf:type"),cT=wt("purl:modified");var wi=(t=>(t[t.Type=0]="Type",t[t.Reference=1]="Reference",t[t.Literal=2]="Literal",t))(wi||{});let G1=class{constructor(e){Oe(this,"name"),this.name=e}};const Lo={dateTime:wt("xsd:dateTime"),integer:wt("xsd:integer"),boolean:wt("xsd:boolean"),decimal:wt("xsd:decimal"),float:wt("xsd:float"),double:wt("xsd:double")};let Bn=class tu{constructor(e,n,r){Oe(this,"resourceUrl"),Oe(this,"name"),Oe(this,"value"),this.resourceUrl=e,this.name=n,this.value=r}static fromStatement(e){const n=e.subject.termType==="NamedNode"?e.subject.value:null;if(e.predicate.value===W1)return this.type(n,e.object.value);if(e.object.termType==="NamedNode")return this.reference(n,e.predicate.value,decodeURI(e.object.value));if(e.object.termType==="BlankNode")return this.reference(n,e.predicate.value,null);if(e.object.termType==="Variable")return this.reference(n,e.predicate.value,new G1(e.object.value));const r=e.object;return this.literal(n,e.predicate.value,this.castLiteralValue(e.object.value,r.datatype.value),r.value)}static literal(e,n,r,s){return new uT(e,n,r,s)}static reference(e,n,r){return new dT(e,n,r)}static type(e,n){return new fT(e,n)}static toTurtle(e,n=null){return e.map(r=>r.toTurtle(n)+" .").join(`
`)}static castLiteralValue(e,n){switch(n){case Lo.dateTime:return new Date(e);case Lo.integer:case Lo.decimal:return parseInt(e);case Lo.boolean:return e==="true"||e==="1";case Lo.float:case Lo.double:return parseFloat(e)}return e}toTurtle(e=null){const n=this.getTurtleSubject(e),r=this.getTurtlePredicate(),s=this.getTurtleObject(e);return`${n} ${r} ${s}`}clone(e){switch(e=e??this.resourceUrl,this.type){case 2:{const n=this;return tu.literal(e,n.name,n.value,n.originalValue)}case 0:return tu.type(e,this.value);case 1:return tu.reference(e,this.name,this.value)}}valueEquals(e){const n=this.value instanceof Date?this.value.getTime():this.value,r=e.value instanceof Date?e.value.getTime():e.value;return n===r}getTurtleReference(e,n){const r=(e==null?void 0:e.indexOf("#"))??-1;return!e||e===n?"<>":n===null||!e.startsWith(n)||r===-1?`<${encodeURI(e)}>`:`<#${e.slice(r+1)}>`}getTurtleSubject(e){return this.getTurtleReference(this.resourceUrl,e)}getTurtlePredicate(){return`<${encodeURI(this.name)}>`}};class uT extends Bn{constructor(e,n,r,s){super(e,n,r),Oe(this,"type",2),this.originalValue=s}getTurtleObject(){if(this.originalValue&&this.value instanceof Date)return`"${this.originalValue}"^^<${wt("xsd:dateTime")}>`;if(this.value instanceof Date){const e=(...i)=>i.map(o=>o.toString().padStart(2,"0")),n=e(this.value.getUTCFullYear(),this.value.getUTCMonth()+1,this.value.getUTCDate()).join("-"),r=e(this.value.getUTCHours(),this.value.getUTCMinutes(),this.value.getUTCSeconds()).join(":"),s=this.value.getUTCMilliseconds().toString().padStart(3,"0");return`"${n}T${r}.${s}Z"^^<${wt("xsd:dateTime")}>`}return JSON.stringify(this.value)}}let dT=class extends Bn{constructor(e,n,r){super(e,n,r),Oe(this,"type",1)}getTurtleObject(e){return this.value instanceof G1?this.value.name:this.getTurtleReference(this.value,e)}};class fT extends Bn{constructor(e,n){super(e,W1,n),Oe(this,"type",0)}getTurtlePredicate(){return"a"}getTurtleObject(){return`<${encodeURI(this.value)}>`}}let hT=class{constructor(e){Oe(this,"url"),Oe(this,"types"),Oe(this,"properties"),Oe(this,"propertiesIndex"),Oe(this,"statements"),this.url=e,this.statements=[],this.types=[],this.properties=[],this.propertiesIndex={}}get name(){return this.getPropertyValue(wt("foaf:name"))}get label(){return this.getPropertyValue(wt("rdfs:label"))}isType(e){return this.types.indexOf(wt(e))!==-1}getPropertyValue(e,n=null){const[r]=this.propertiesIndex[wt(e)]||[];return r?r.value:n}getPropertyValues(e){return(this.propertiesIndex[wt(e)]||[]).map(n=>n.value)}addStatement(e){if(e.subject.value!==this.url)return;const n=Bn.fromStatement(e);n.type===wi.Type&&this.types.push(n.value),this.statements.push(e),this.properties.push(n),this.propertiesIndex[n.name]=(this.propertiesIndex[n.name]||[]).concat([n])}};class cg extends Ke{constructor(e,n){super(n?`Couldn't find resource with id '${e}' in '${n}' document.`:`Couldn't find resource with id '${e}' in document.`)}}const J1=class nu{constructor(e,n=[],r={}){Oe(this,"url"),Oe(this,"metadata"),Oe(this,"statements"),Oe(this,"resourcesIndex"),Oe(this,"properties"),Oe(this,"resources"),this.url=e,this.statements=n,this.metadata=r,this.resourcesIndex=this.statements.reduce((s,i)=>{const o=i.subject.value;return(s[o]=s[o]??new hT(o)).addStatement(i),s},{}),this.resources=Object.values(this.resourcesIndex),this.properties=this.resources.reduce((s,i)=>s.concat(i.properties),[])}static async fromTurtle(e,n={}){const r=await z1(e,{baseIRI:n.baseIRI});return new nu(n.baseIRI||"",r.quads,{containsRelativeIRIs:r.containsRelativeIRIs,describedBy:pT(n),headers:n.headers})}static async resourceFromJsonLDGraph(e,n,r){const s=()=>r??e["@graph"].find(i=>i["@id"]===n)??Ye(cg,n);return(this.documentsCache.get(e)??await this.fromJsonLD(s())).requireResource(n)}static async fromJsonLD(e,n){return this.documentsCache.get(e)??await this.getFromJsonLD(e,n)}static reduceJsonLDGraph(e,n){return Be({"@graph":e["@graph"].filter(r=>r["@id"]!==n)},r=>{const s=this.documentsCache.get(e);s&&this.cacheJsonLD(r,s.clone({removeResourceUrls:[n]}))})}static cacheJsonLD(e,n){this.documentsCache.set(e,n)}static async getFromJsonLD(e,n){const r=await og(e,n);return Be(new nu(e["@id"]?kr(e["@id"]):null,r),s=>{this.documentsCache.set(e,s)})}isEmpty(){return this.statements.length===0}hasProperty(e,n){const r=this.resourcesIndex[e];return!!r&&n in r.propertiesIndex}async toJsonLD(){return gd(this.statements)}resource(e){return this.resourcesIndex[e]??null}requireResource(e){const n=this.resource(e);if(!n)throw new Ke(`Resource '${e}' not found`);return n}clone(e={}){return Be(new nu(e.changeUrl??this.url,[],this.metadata),n=>{const r=e.removeResourceUrls;if(!r){n.statements=this.statements.slice(0),n.properties=this.properties.slice(0),n.resources=this.resources.slice(0),n.resourcesIndex={...this.resourcesIndex};return}n.statements=this.statements.filter(s=>!r.includes(s.subject.value)),n.properties=this.properties.filter(s=>!s.resourceUrl||!r.includes(s.resourceUrl)),n.resources=this.resources.filter(s=>!r.includes(s.url)),n.resourcesIndex=K0(n.resources,"url")})}};Oe(J1,"documentsCache",new WeakMap);let qn=J1;function pT(t={}){var e,n;if(!((e=t.headers)!=null&&e.has("Link")))return;const r=(n=t.headers.get("Link"))==null?void 0:n.match(/<([^>]+)>;\s*rel="describedBy"/i);if(r)return pa(t.baseIRI||"",r[1])}let ta=class{constructor(e,n,r){Oe(this,"type",Rn.RemoveProperty),this.resourceUrl=e,this.property=n,this.value=r}},mT=class{constructor(e,n){Oe(this,"type",Rn.ShieldProperty),this.resourceUrl=e,this.property=n}},na=class{constructor(e){if(Oe(this,"type",Rn.UpdateProperty),Oe(this,"propertyOrProperties"),this.propertyOrProperties=e,!Array.isArray(e))return;const[n,...r]=e;if(!n)throw new Error("Cannot create an UpdatePropertyOperation with an empty array");const{resourceUrl:s,name:i,type:o}=n;if(r.some(a=>a.resourceUrl!==s||a.name!==i||a.type!==o))throw new Error("All properties in an UpdatePropertyOperation must have the same resourceUrl, name and type")}get propertyResourceUrl(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].resourceUrl:this.propertyOrProperties.resourceUrl}get propertyName(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].name:this.propertyOrProperties.name}get propertyType(){return Array.isArray(this.propertyOrProperties)?this.propertyOrProperties[0].type:this.propertyOrProperties.type}};function gT(t){return t.reduce((e,n)=>(e[n.type].push(n),e),{[Rn.ChangeUrl]:[],[Rn.RemoveProperty]:[],[Rn.ShieldProperty]:[],[Rn.UpdateProperty]:[]})}function Hb(t){const e=t.filter(n=>n.type===Rn.ShieldProperty).reduce((n,r)=>{var s,i;const o=r;return n[s=o.resourceUrl]??(n[s]=[]),(i=n[o.resourceUrl])==null||i.push(o.property),n},{});return t.reduce((n,r)=>{var s;switch(r.type){case Rn.UpdateProperty:n[0].push(r.propertyOrProperties);break;case Rn.RemoveProperty:if(!e[r.resourceUrl]){n[1].push(un([r.resourceUrl,r.property,r.value]));break}if(!r.property){n[1].push(un([r.resourceUrl,e[r.resourceUrl]]));break}if((s=e[r.resourceUrl])!=null&&s.includes(r.property))break;n[1].push(un([r.resourceUrl,r.property,r.value]));break}return n},[[],[]])}const yT=[lg,wt("posix:mtime"),wt("posix:size"),wt("purl:modified")],vT=[lo,wt("ldp:BasicContainer")],qb=new Map;class bT{constructor(e){Oe(this,"fetch"),Oe(this,"config");const n=e??(globalThis==null?void 0:globalThis.fetch);this.fetch=async(r,s)=>{try{return await n(r,s)}catch(i){const o=typeof r=="object"?r.url:r;throw new F1(o,{cause:i})}},this.config={concurrentFetchBatchSize:5}}getFetch(){return this.fetch}setConfig(e){Object.assign(this.config,e)}async createDocument(e,n=null,r=[],s={}){return n&&r.some(i=>i.resourceUrl===n&&i.type===wi.Type&&i.value===lo)?this.createContainerDocument(e,n,r):this.createNonContainerDocument(e,n,r,s)}async getDocument(e){const n=await this.fetch(e,{headers:{Accept:"text/turtle"}});if(n.status!==200)return null;const r=await n.text();return await qn.fromTurtle(r,{headers:n.headers,baseIRI:e})}async getDocuments(e){const n=await(await this.fetch(e,{headers:{Accept:"text/turtle"}})).text(),r=await qn.fromTurtle(n,{baseIRI:e});return this.getDocumentsFromContainer(e,r)}async updateDocument(e,n,r={}){var s;if(n.length===0)return;e=qb.get(e)??e;const i=await this.getDocument(e);if(i===null)throw new cs(e);return this.processChangeUrlOperations(i,n),this.processUpdatePropertyOperations(i,n),n.length===0?void 0:(s=i.resource(e))!=null&&s.isType(lo)?await this.updateContainerDocument(i,n):await this.updateNonContainerDocument(i,n,r)}async overwriteDocument(e,n){const r=await this.getDocument(e);if(r===null)throw new cs(e);const s=await this.fetch(e,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:`
                DELETE DATA { ${Bn.toTurtle(r.properties,e)} } ;
                INSERT DATA { ${Bn.toTurtle(n,e)} }
            `});return this.assertSuccessfulResponse(s,`Error overwriting document at ${r.url}`),{headers:s.headers}}async deleteDocument(e,n){var r;const s=n??await this.getDocument(e);if(s===null)return;if((r=s.resource(e))!=null&&r.isType(lo)){const o=await this.getDocumentsFromContainer(e,s);await Promise.all(o.map(a=>this.deleteDocument(a.url,a)))}const i=await this.fetch(e,{method:"DELETE"});return this.assertSuccessfulResponse(i,`Error deleting document at ${e}`),{headers:i.headers}}async documentExists(e){const n=await this.fetch(e,{headers:{Accept:"text/turtle"}});if(n.status===200)return(await n.text()).length>0;if(n.status===404)return!1;throw new Ke(`Couldn't determine if document at ${e} exists, got ${n.status} response`)}async createContainerDocument(e,n,r){let s=await this.createContainerFolder(e,n);if(r.length!==0){const i=this.withoutReservedContainerProperties(n,r).map(o=>new na(o));s=await this.updateDocument(n,i)??s}return{url:n,metadata:s}}async createContainerFolder(e,n){if(!n.startsWith(e))throw new Ke("Explicit document url should start with the parent url");if(!n.endsWith("/"))throw new Ke(`Container urls must end with a trailing slash, given ${n}`);const r=await this.fetch(n,{method:"PUT",headers:{Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',"If-None-Match":"*"}});return this.isInternalErrorResponse(r)?this.createContainerDocumentUsingPOST(n):(this.assertSuccessfulResponse(r,`Error creating container folder at ${n}`),{headers:r.headers})}async createContainerDocumentUsingPOST(e,n=!0){const r=Zt(e),s=await this.fetch(r,{method:"POST",headers:{Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',Slug:sI(e),"If-None-Match":"*"}});return s.status===404&&n?(await this.createContainerDocumentUsingPOST(r),this.createContainerDocumentUsingPOST(e,!1)):(this.assertSuccessfulResponse(s,`Error creating container at ${e}`),{headers:s.headers})}async createNonContainerDocument(e,n,r,s={}){var i;if(!n||((i=s.method)==null?void 0:i.toLowerCase())==="post"){const a=s.format??"text/turtle",l=await this.renderProperties(n,r,a),c={"Content-Type":a};n&&(c.Slug=c1(n));const u=await this.fetch(e,{method:s.method??"POST",headers:c,body:l});return this.assertSuccessfulResponse(u,`Error creating document under ${e}`),{url:pa(e,u.headers.get("Location")||""),metadata:{headers:u.headers}}}if(!n.startsWith(e))throw new Ke("A minted document url should start with the parent url");const o=await this.fetch(n,{method:"PATCH",headers:{"Content-Type":"application/sparql-update","If-None-Match":"*"},body:`INSERT DATA { ${Bn.toTurtle(r,n)} }`});return this.assertSuccessfulResponse(o,`Error creating document at ${n}`),{url:n,metadata:{headers:o.headers}}}async getDocumentsFromContainer(e,n){var r;const s=[],i=((r=n.resource(e))==null?void 0:r.getPropertyValues("ldp:contains"))??[];for(;i.length>0;){const o=i.splice(0,this.config.concurrentFetchBatchSize||i.length),a=await Promise.all(o.map(l=>this.getDocument(l)));s.push(...a)}return s.filter(o=>!!o)}async updateContainerDocument(e,n){const r=e.metadata.describedBy||`${e.url}.meta`;return e.url&&qb.set(e.url,r),await this.updateNonContainerDocument(e.clone({changeUrl:r}),n)}async updateNonContainerDocument(e,n,r={}){const s=r.format??"application/sparql-update";switch(s){case"application/sparql-update":return this.updateNonContainerDocumentWithSparql(e,n);case"application/ld+json":return this.updateNonContainerDocumentWithJsonLD(e,n)}throw new Error(`Unsupported update format: '${s}'`)}async updateNonContainerDocumentWithSparql(e,n){const[r,s]=Hb(n),i=r.flat().map(l=>l.toTurtle(e.url)+" ."),o=e.properties.filter(l=>s.some(([c,u,d])=>c===l.resourceUrl&&(!u||typeof u=="string"&&u===l.name||Array.isArray(u)&&!u.includes(l.name))&&(!d||d===l.value))).map(l=>l.toTurtle(e.url)+" .");if(i.length===0&&o.length===0)return;const a=await this.fetch(e.url,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:un([o.length>0&&`DELETE DATA { ${o.join(`
`)} }`,i.length>0&&`INSERT DATA { ${i.join(`
`)} }`]).join(" ; ")});return this.assertSuccessfulResponse(a,`Error updating document at ${e.url}`),{headers:a.headers}}async updateNonContainerDocumentWithJsonLD(e,n){if(!e.url)throw new Error("Missing document url for JsonLD update");const[r,s]=Hb(n),i=e.properties.filter(a=>!s.some(([l,c,u])=>l===a.resourceUrl&&(!c||typeof c=="string"&&c===a.name||Array.isArray(c)&&!c.includes(a.name))&&(!u||u===a.value))).concat(r.flat()),o=await this.fetch(e.url,{headers:{"Content-Type":"application/ld+json"},method:"PUT",body:await this.renderProperties(e.url,i,"application/ld+json")});return this.assertSuccessfulResponse(o,`Error updating document at ${e.url}`),{headers:o.headers}}withoutReservedContainerProperties(e,n){const r=i=>yT.includes(i.name),s=i=>i.type===wi.Type&&vT.includes(i.value);return n.filter(i=>i.resourceUrl!==e||!r(i)&&!s(i))}processChangeUrlOperations(e,n){const r=gT(n);for(const s of r[Rn.ChangeUrl]){const i=e.resource(s.resourceUrl);if(!i)continue;const o=r[Rn.UpdateProperty].filter(l=>l.propertyResourceUrl===s.resourceUrl),a=r[Rn.RemoveProperty].filter(l=>l.resourceUrl===s.resourceUrl);o.forEach(l=>{l.propertyOrProperties=Array.isArray(l.propertyOrProperties)?l.propertyOrProperties.map(c=>c.clone(s.newResourceUrl)):l.propertyOrProperties.clone(s.newResourceUrl)}),a.forEach(l=>l.resourceUrl=s.newResourceUrl),n.push(new ta(s.resourceUrl)),n.push(...i.properties.filter(l=>!o.some(c=>c.propertyName===l.name)&&!a.some(c=>!c.property||c.property===l.name)).map(l=>new na(l.clone(s.newResourceUrl)))),ar(n,s)}}processUpdatePropertyOperations(e,n){var r;const s=[],i=[],o=[];for(let l=0;l<n.length;l++){const c=n[l];if(c.type!==Rn.UpdateProperty||c.propertyResourceUrl===null)continue;if(!Array.isArray(c.propertyOrProperties)){const y=c.propertyOrProperties,S=y.resourceUrl,[x,..._]=((r=e.resource(S??""))==null?void 0:r.propertiesIndex[y.name])??[];S&&x&&_.length===0&&y.type===x.type&&y.valueEquals(x)&&(i.push(c),n.push(new mT(S,y.name)));continue}const u=e.statements.filter(y=>y.subject.value===c.propertyResourceUrl&&y.predicate.value===c.propertyName).map(y=>y.object),d=c.propertyOrProperties[0].type===wi.Literal,f=y=>"type"in y?y.type===wi.Reference:y.termType==="NamedNode",{added:h,removed:m}=ka(u,c.propertyOrProperties,(y,S)=>y.value===S.value&&f(y)===f(S));h.forEach(y=>n.push(new na(d?Bn.literal(c.propertyResourceUrl,c.propertyName,y.value):Bn.reference(c.propertyResourceUrl,c.propertyName,y.value)))),m.forEach(y=>n.push(new ta(c.propertyResourceUrl,c.propertyName,y.value))),s.push(c),o.push(`${c.propertyResourceUrl}-${c.propertyName}`)}s.forEach(l=>ar(n,l)),i.forEach(l=>ar(n,l));const a=n.filter(l=>l.type===Rn.UpdateProperty&&l.propertyType!==wi.Type&&e.hasProperty(l.propertyResourceUrl,l.propertyName));for(const l of a)o.includes(`${l.propertyResourceUrl}-${l.propertyName}`)||n.push(new ta(l.propertyResourceUrl,l.propertyName))}async renderProperties(e,n,r){switch(r){case"text/turtle":return Bn.toTurtle(n,e);case"application/ld+json":{const s=await ag(Bn.toTurtle(n,e)),i=await gd(s);if(i["@graph"].length!==1)throw new Error("Cannot render JSONLD with multiple or no subjects");const o=i["@graph"][0];return pl(o["@id"])&&delete o["@id"],JSON.stringify(o)}}throw new Error(`Unsupported render format: '${r}'`)}assertSuccessfulResponse(e,n){if(Math.floor(e.status/100)!==2)throw new HR(n,e)}isInternalErrorResponse(e){return Math.floor(e.status/100)===5}}const _T={activityPods:!1};function wT(t){return _T[t]}function nn(){return wT("activityPods")}function xT(t){const e=new Date(t);return isNaN(e.getTime())?null:e}let ug=class{constructor(e,n={}){Oe(this,"__isSolidEngine",!0),Oe(this,"config"),Oe(this,"helper"),Oe(this,"client"),Oe(this,"cache",new Map),Oe(this,"_listeners",new J0),this.helper=new hd,this.config={concurrentFetchBatchSize:10,cachesDocuments:!1,...n},this.client=new bT(e),this.client.setConfig({concurrentFetchBatchSize:this.config.concurrentFetchBatchSize})}get listeners(){return this._listeners}setConfig(e){Object.assign(this.config,e)}getFetch(){return this.client.getFetch()}async create(e,n,r){if(this.validateJsonLDGraph(n),r&&await this.client.documentExists(r))throw new Ym(r);const s=await this.getJsonLDGraphProperties(n),{url:i,metadata:o}=await this.client.createDocument(e,r,s,nn()?{method:"post",format:"application/ld+json"}:{});return await this._listeners.emit("onDocumentCreated",i,o),i}async readOne(e,n){var r,s,i,o,a;if((r=this.config.persistentCache)!=null&&r.has(e,n))return await this.config.persistentCache.get(e,n)??Ye(cs,n);const l=await this.getDocument(n);if(l===null)throw new cs(n);const c=await this.convertToEngineDocument(l);if(await this._listeners.emit("onRDFDocumentLoaded",l.url,l.metadata),await this._listeners.emit("onDocumentRead",l.url,l.metadata),this.config.persistentCache&&(s=l.resource(n))!=null&&s.isType(lo))for(const u of((i=l.resource(n))==null?void 0:i.getPropertyValues(lg))??[]){const d=String(u),f=(o=l.resource(d))==null?void 0:o.isType(lo),h=xT((a=l.resource(d))==null?void 0:a.getPropertyValue(cT));f||!h||await this.config.persistentCache.activate(n,d,h.getTime())}return c}async readMany(e,n={}){const r=await this.getDocumentsForFilters(e,n),s={};return await Promise.all(Object.entries(r).map(async([i,o])=>{if(!cn(o,qn)){s[i]=o;return}s[i]=await this.convertToEngineDocument(o),await this._listeners.emit("onRDFDocumentLoaded",o.url,o.metadata),await this._listeners.emit("onDocumentRead",o.url,o.metadata)})),this.helper.filterDocuments(s,n)}async update(e,n,r){if("$overwrite"in r){const o=await this.getJsonLDGraphProperties(r.$overwrite),a=await this.client.overwriteDocument(n,o);await this._listeners.emit("onDocumentUpdated",n,a);return}const s=await this.extractJsonLDGraphUpdate(r),i=await this.client.updateDocument(n,s,nn()?{format:"application/ld+json"}:{});this.cache.delete(n),i&&await this._listeners.emit("onDocumentUpdated",n,i)}async delete(e,n){const r=await this.client.deleteDocument(n);this.cache.delete(n),r&&await this._listeners.emit("onDocumentDeleted",n,r)}addListener(e){return this.listeners.add(e)}removeListener(e){this.listeners.remove(e)}clearCache(){this.cache=new Map}async getDocument(e){var n;if(this.config.cachesDocuments&&this.cache.has(e))return((n=this.cache.get(e))==null?void 0:n.clone())??null;const r=await this.client.getDocument(e);return this.config.cachesDocuments&&this.cache.set(e,r),r}async getDocumentsForFilters(e,n){if(n.$in)return this.getDocumentsFromUrls(n.$in.map(Rt));const r=await this.client.getDocuments(e);return Object.fromEntries(r.map(s=>[s.url,s]))}async getDocumentsFromUrls(e){const n=e.reduce((i,o)=>{const a=Cr(o)??_s(o);return{...i,[a]:(i[a]||[]).concat([o])}},{}),r=Object.entries(n).map(async([i,o])=>{const a=o.map(l=>{var c;return(c=this.config.persistentCache)!=null&&c.has(i,l)?this.config.persistentCache.get(i,l):this.getDocument(l)});return(await Promise.all(a)).map((l,c)=>[o[c],l]).filter(([l,c])=>c!==null)}),s=await Promise.all(r);return Object.fromEntries(s.flat())}async convertToEngineDocument(e){const n=await gd(e.statements);return await OR(n)}validateJsonLDGraph(e){if(!Array.isArray(e["@graph"]))throw new Ke("Invalid JSON-LD graph provided for SolidEngine. Are you using a model that isn't a SolidModel?")}async extractJsonLDGraphUpdate(e){if(!this.isJsonLDGraphUpdate(e))throw new Ke("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");const n=new Map,r=[],s="$apply"in e["@graph"]?e["@graph"].$apply:[e["@graph"]];for(const i of s){if(i.$updateItems){const o=[];for(const a of vn(i.$updateItems)){const l=await this.extractJsonLDGraphItemsUpdate(a,n);o.push(...l)}r.push(...o.flat())}if(i.$push){const o=await this.extractJsonLDGraphItemPush(i.$push);r.push(...o)}}return r}async extractJsonLDGraphItemsUpdate({$where:e,$update:n,$override:r,$unset:s},i){if(!e||!("@id"in e))throw new Ke("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");if(s){const c=e["@id"];return(typeof c=="string"?[c]:c.$in).map(u=>new ta(u))}if(r){const c=e["@id"],u=typeof c=="string"?[c]:c.$in;return(await Promise.all(u.map(async d=>{const f=i.get(d)??d,h=[new ta(f)],m=await this.getJsonLDGraphProperties(r);for(const y of m)h.push(new na(y));return h}))).flat()}if(typeof e["@id"]!="string")throw new Ke("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");const o=i.get(e["@id"])??e["@id"],a=n,l=[];for(const[c,u]of Object.entries(a)){if(u===null)throw new Ke("SolidEngine doesn't support setting properties to null, delete");if(typeof u=="object"&&"$unset"in u){l.push(new ta(o,c));continue}if(c==="@id"&&o!==u){l.push(new oT(o,u)),i.set(u,o);continue}l.push(new na(this.getUpdatePropertyOperationProperty(o,c,u)))}return l}getUpdatePropertyOperationProperty(e,n,r,s=!0){return n==="@type"?Bn.type(e,r):Array.isArray(r)?s?r.map(i=>this.getUpdatePropertyOperationProperty(e,n,i,!1)):Ye("Cannot have nested array values"):pt(r)&&"@id"in r?Bn.reference(e,n,r["@id"]):pt(r)&&"@type"in r&&r["@type"]==="http://www.w3.org/2001/XMLSchema#dateTime"?Bn.literal(e,n,new Date(r["@value"])):Bn.literal(e,n,r)}async extractJsonLDGraphItemPush(e){return(await this.getJsonLDGraphProperties(e)).map(n=>new na(n))}extractJsonLDGraphTypes(e){if(!this.isJsonLDGraphTypesFilter(e))return[];const n=e["@graph"].$contains["@type"].$or.reduce((r,s)=>("$contains"in s&&r.push(...s.$contains),"$eq"in s&&r.push(s.$eq),r),[]);return dr(n.filter(r=>r.startsWith("http")))}async getJsonLDGraphProperties(e){return(await qn.fromJsonLD(e)).properties}isJsonLDGraphUpdate(e){const n=e["@graph"];return pt(n)?!(n.$apply??[n]).some(r=>{const s=Object.keys(r);return s.length!==1||!["$updateItems","$push"].includes(s[0]??"")}):!1}isJsonLDGraphTypesFilter(e){const n=e["@graph"];return pt(n)&&pt(n.$contains)&&pt(n.$contains["@type"])&&Array.isArray(n.$contains["@type"].$or)}},ph=class extends Ke{constructor(e){super(`Some required attributes were missing from '${e}' document.`)}};const xu=new WeakMap,mh=new WeakMap;function Kb(t){var e;return((e=Object.getPrototypeOf(t))==null?void 0:e.constructor)!==Object}function ET(t,e){if(xu.has(t))throw new Ke(`${t.modelName} schema update already in progress!`);xu.set(t,e)}function ST(t){return xu.get(t)??null}function AT(t){xu.delete(t)}function $T(t,e,n){const r=t;if(Kb(r))return r.ensureBooted(),r;if(!mh.has(r)){const s=Kb(t)?t:e,i=Y1(r,s);i.ensureBooted(),mh.set(r,i)}return mh.get(r)??Ye("Couldn't boot schema")}function Y1(t,e,n){const r=AI(n?t:e,n??t);return r.__isSchema=!0,r}class CT{async deleteModels(e){const n=this.decantDocumentModelsByContainer(e);await Promise.all(Object.entries(n).map(([r,s])=>this.deleteContainerDocumentsModels(r,s)))}decantDocumentModelsByContainer(e){const n=this.decantModelsByDocument(e);return Object.entries(n).reduce((r,[s,i])=>{const o=Cr(s)??_s(s);return(r[o]=r[o]??[]).push({documentUrl:s,models:i}),r},{})}decantModelsByDocument(e){return e.reduce((n,r)=>{const s=r.requireDocumentUrl();return(n[s]=n[s]??[]).push(r),n},{})}async deleteContainerDocumentsModels(e,n){const r=await this.requireEngine().readMany(e,{$in:n.map(({documentUrl:s})=>s)});await Promise.all(n.map(({documentUrl:s,models:i})=>this.deleteDocumentModels(r,e,s,i)))}async deleteDocumentModels(e,n,r,s){const i=e[r];if(!i)return;const o=this.requireEngine(),a=s.filter(l=>l.exists()).map(l=>l.url);if(!i["@graph"].some(l=>!a.some(c=>c===l["@id"]))){const l=s.filter(c=>c.isRelationLoaded("tombstone")).map(c=>c.tombstone);l.length===0?await o.delete(n,r):await o.update(n,r,{$overwrite:{"@graph":l.map(c=>c.serializeToJsonLD({includeRelations:!1}))}}),s.forEach(c=>c.setDocumentExists(!1));return}await o.update(n,r,{"@graph":{$updateItems:{$where:{"@id":{$in:a}},$unset:!0}}})}}let ru=class extends Ii{constructor(e,n){super(e,n)}setForeignAttributes(){}clearForeignAttributes(){}async load(){return this.related??(this.related=[]),this.related}create(e){return Be(this.attach(e??{}),()=>this.parent.save())}async __loadDocumentModels(e,n){const r=await qn.fromJsonLD(n),s=qn.reduceJsonLDGraph(n,this.parent.url);this.related=un(await Promise.all(this.relatedClass.findMatchingResourceIds(r.statements).map(i=>{const o=s["@graph"].find(a=>a["@id"]===i);return o&&this.relatedClass.createFromEngineDocument(e,s,o["@id"])})))}};class kT{get isPublic(){var e;return((e=this._publicPermissions)==null?void 0:e.includes(Ai.Read))??null}get isPrivate(){return this._publicPermissions?!this._publicPermissions.includes(Ai.Read):null}async fetchPublicPermissionsIfMissing(){this._publicPermissions||await this.fetchPublicPermissions()}async fetchPublicPermissions(){const e=Xt("SolidACLAuthorization"),n=this.requireDocumentUrl(),r=await e.requireFetch()(n,{method:"HEAD"}),s=new _u(n,[],r.headers);this._publicPermissions=s.getPublicPermissions()}async updatePublicPermissions(e){const n=Xt("SolidACLAuthorization");await this.withEngine(n.requireEngine(),()=>this.updateAuthorizations(e)),this._publicPermissions=e}trackPublicPermissions(){if(!this.static().usingSolidEngine())return{documentPermissions:{},stopTracking(){}};const e={},n=this.static().requireFinalEngine().listeners.add({onDocumentRead(r,s){if(!s.headers)return;const i=new _u(r,[],s.headers);e[r]=i.getPublicPermissions()}});return{documentPermissions:e,stopTracking:n}}async updateAuthorizations(e){this.relatedAuthorizations.enable();const n=await this.loadRelationIfUnloaded("authorizations"),r=Xt("SolidACLAuthorization"),s=e.map(a=>r.modeFromSolidDocumentPermission(a)),i=n.filter(a=>a.agentClasses.includes(Ri("foaf:Agent"))),o=i.map(a=>a.modes).flat();if(!(s.length===o.length&&!s.some(a=>o.includes(a)))){if(!this.relatedAuthorizations.isDocumentACL()){await this.createDocumentACLResource(s);return}if(s.length===0){for(const a of i)await a.delete();this.relatedAuthorizations.related=gr(n,i);return}if(i.length===0){await this.createPublicAuthorization(s);return}for(const a of i)await a.update({modes:s})}}async createDocumentACLResource(e){this.relatedAuthorizations.enable();const n=Xt("SolidACLAuthorization"),r=this.authorizations.filter(s=>s.modes.includes(n.rdfTerm("acl:Control"))).map(s=>Be(new n(s.getAttributes()),i=>{var o;i.accessTo=[this.requireDocumentUrl()],i.accessToClasses=[],i.default=[],i.mintUrl(this.relatedAuthorizations.requireACLUrl(),!1,((o=Jl(s.url))==null?void 0:o.fragment)??Qn())}));for(const s of r)await s.save();this.relatedAuthorizations.related=r,this.relatedAuthorizations.effectiveACLUrl=this.relatedAuthorizations.aclUrl,await this.createPublicAuthorization(e)}async createPublicAuthorization(e){var n;this.relatedAuthorizations.enable();const r=Xt("SolidACLAuthorization"),s=await r.createInDocument({agentClasses:[r.rdfTerm("foaf:Agent")],accessTo:[this.requireDocumentUrl()],modes:e},this.relatedAuthorizations.requireACLUrl(),"public");(n=this.relatedAuthorizations.related)==null||n.push(s)}}let Wb;function Ti(t){return dg()[t]}function dg(){return Wb??(Wb={Operation:Xt("Operation"),PropertyOperation:Xt("PropertyOperation"),AddPropertyOperation:Xt("AddPropertyOperation"),RemovePropertyOperation:Xt("RemovePropertyOperation"),SetPropertyOperation:Xt("SetPropertyOperation"),UnsetPropertyOperation:Xt("UnsetPropertyOperation"),DeleteOperation:Xt("DeleteOperation")})}let IT=class{async migrateSchema(e,n={}){if(this.isDirty())throw new Ke("Can't migrate dirty model, call save() before proceeding.");const r=$T(e,this.static()),{model:s,updates:i}=await this.getSchemaUpdates(r,n);return await this.updateEngineDocumentSchema(i),s}async getSchemaUpdates(e,n){const{removed:r,added:s}=ka(Object.keys(this.static().fields),Object.keys(e.fields)),i=await this.newInstanceForSchema(e,s,r),o=i.url!==this.url?i.url:null,a=(await this.getOperationSchemaUpdates(i,r,o,n)).concat(this.getMetadataSchemaUpdates(o)).concat(this.getUrlSchemaUpdates(o)).concat([this.getResourceSchemaUpdate(i,o)]);return{model:i,updates:a}}async newInstanceForSchema(e,n,r){var s,i;const o=Ti("PropertyOperation"),a=e.newInstance(Be(this.getAttributes(),l=>{l.url=`${this.requireDocumentUrl()}#${e.defaultResourceHash}`;for(const c of r)delete l[c]}),!0);return a.setRelationModels("operations",this.operations.filter(l=>{if(!cn(l,o))return!0;const c=this.static().getRdfPropertyField(l.property);return!c||!r.includes(c)})),n.forEach(l=>{a.hasAttribute(l)&&(a._dirtyAttributes[l]=a.getAttributeValue(l))}),await((i=(s=a.static().hooks)==null?void 0:s.beforeSave)==null?void 0:i.call(a)),a.operations.length>0&&await a.addDirtyHistoryOperations(),a}async getOperationSchemaUpdates(e,n,r,s){var i;const o=[],a=[],l=Ti("PropertyOperation"),c=this.usingSolidEngine()?Vb:"resource",u=this.usingSolidEngine()?lT:"property";await e.loadRelationIfUnloaded("operations");for(const d of e.operations){if(o.push(d.url),!d.exists()){d.date=this.getUpdatedAtAttribute(),d.resourceUrl=e.url;const y=(i=s.mintOperationUrl)==null?void 0:i.call(s,d);y?d.url=y:d.mintUrl(),a.push({$push:d.serializeToJsonLD({includeRelations:!1,includeAnonymousHashes:!0})});continue}if(!cn(d,l)){r&&a.push({$updateItems:{$where:{"@id":d.url},$update:{[c]:{"@id":r}}}});continue}const f=this.static().getRdfPropertyField(d.property),h=f&&e.static().getFieldRdfProperty(f),m=Gn({[c]:r?{"@id":r}:null,[u]:h&&h!==d.property?{"@id":h}:null});Object.keys(m).length!==0&&a.push({$updateItems:{$where:{"@id":d.url},$update:m}})}for(const d of this.operations)o.includes(d.url)||a.push({$updateItems:{$where:{"@id":d.url},$unset:!0}});return a}getMetadataSchemaUpdates(e){if(!e||!this.metadata)return[];const n=this.usingSolidEngine()?Vb:"resource";return[{$updateItems:{$where:{"@id":this.metadata.url},$update:{[n]:{"@id":e}}}}]}getUrlSchemaUpdates(e){return e?[{$updateItems:{$where:{"@id":this.url},$update:{"@id":e}}}]:[]}getResourceSchemaUpdate(e,n){return{$updateItems:{$where:{"@id":n??this.url},$override:e.serializeToJsonLD({includeRelations:!1,includeAnonymousHashes:!0})}}}async updateEngineDocumentSchema(e){const n=this.requireDocumentUrl();await this.requireEngine().update(Zt(n),n,e.length===1?{"@graph":e[0]}:{"@graph":{$apply:e}})}};function Eu(t,e,n,r){const s=i=>Gn({type:i,rdfProperty:e,rdfPropertyAliases:n,required:r});switch(typeof t){case"string":return s(Ae.String);case"number":case"bigint":return s(Ae.Number);case"boolean":return s(Ae.Boolean);case"object":return t===null?s(Ae.Any):t instanceof Hn?s(Ae.Key):t instanceof Date?s(Ae.Date):Array.isArray(t)?Gn({required:r,rdfProperty:e,type:Ae.Array,items:t.length>0?Eu(t[0]):s(Ae.Any)}):Gn({required:r,rdfProperty:e,type:Ae.Object,fields:Object.entries(t).reduce((i,[o,a])=>(i[o]=Eu(a),i),{})});default:return s(Ae.Any)}}function RT(t){return v1(t)}let fg=class{get protectedSolidBelongsTo(){return this}async __loadDocumentModels(e,n){const r=new hd,s=this.parent.getAttribute(this.foreignKeyName),i=Array.isArray(s)?s:s?[s]:[],o=this.relatedClass.prepareEngineFilters(),a=qn.reduceJsonLDGraph(n,this.parent.url),l=n["@graph"].filter(d=>i.indexOf(d["@id"])!==-1).reduce((d,f)=>(d[f["@id"]]={"@graph":[f]},d),{}),c=await Promise.all(Object.keys(r.filterDocuments(l,o)).map(d=>this.relatedClass.createFromEngineDocument(e,a,d))),u=i.filter(d=>!c.some(f=>f.url===d)&&kr(d)!==e);this.protectedSolidBelongsTo.loadDocumentModels(c,u)}},TT=class{getJsonLDProperty(e,n){if(n=wt(n),n in e)return this.getJsonLDPropertyValue(e[n]);if(!("@context"in e))return null;const r=e["@context"],s=Object.entries(r).find(([a,l])=>n.startsWith(l));if(!s)return null;const i=s[0]==="@vocab"?"":`${s[0]}:`,o=e[i+n.slice(s[1].length)];return this.getJsonLDPropertyValue(o)}getJsonLDPropertyValue(e){return e===void 0?null:Array.isArray(e)&&e.length===1?e[0]:e}};const X1=new TT;let hg=class{get protectedSolidHas(){return this}async __loadDocumentModels(e,n){var r;const s=new hd,i=((r=this.relatedClass.fields[this.foreignKeyName])==null?void 0:r.rdfProperty)??Ye(Ke,`Field '${this.foreignKeyName}' does not exist in ${this.relatedClass.modelName} model.`),o=this.relatedClass.prepareEngineFilters(),a=qn.reduceJsonLDGraph(n,this.parent.url),l=n["@graph"].filter(d=>{const f=X1.getJsonLDProperty(d,i);return typeof f=="object"&&f!==null&&"@id"in f&&f["@id"]===this.parent.url}).reduce((d,f)=>(d[f["@id"]]={"@graph":[f]},d),{}),c=await Promise.all(Object.keys(s.filterDocuments(l,o)).map(d=>this.relatedClass.createFromEngineDocument(e,a,d))),u=Object.keys(l).filter(d=>!c.some(f=>f.url===d)&&kr(d)!==e);this.protectedSolidHas.loadDocumentModels(c,u)}};function OT(t){return"__beforeParentCreate"in t}function DT(t){return"__afterParentSave"in t}function to(t){return"useSameDocument"in t}function PT(t){return fd(t,fg)}function pg(t){return fd(t,hg)}function Gb(t){return"__synchronizeRelated"in t}let gh=class{},LT=class Q1{constructor(e){Oe(this,"terms"),Oe(this,"reverseProperties"),this.terms=e,this.reverseProperties=new Map}static fromRdfClasses(e,n){const[r,...s]=Object.entries(e),i={name:"@vocab",compactingPrefix:"",value:r==null?void 0:r[1],used:!0},o=s.reduce((a,[l,c])=>(c!==i.value&&a.push({name:l,value:c,compactingPrefix:`${l}:`,used:n.some(u=>u.startsWith(c))}),a),[i]);return new Q1(o)}addReverseProperty(e,n){this.reverseProperties.set(e,n)}addTerms(e,n){for(const[r,s]of Object.entries(e)){const i=this.terms.find(l=>l.value===s);if(i){i.used||(i.used=n.some(l=>l.startsWith(s)));continue}let o=r,a=1;for(;this.terms.some(l=>l.name===o);)o=`${r}${++a}`;this.terms.push({name:r,value:s,compactingPrefix:`${r}`,used:n.some(l=>l.startsWith(s))})}}getTermForExpandedIRI(e){return this.terms.find(n=>e.startsWith(n.value))??null}render(){const e=this.terms.reduce((n,r)=>(r.used&&(n[r.name]=r.value),n),{});return this.reverseProperties.forEach((n,r)=>{e[r]={"@reverse":n}}),e}},su=class Z1{constructor(e,n){Oe(this,"context"),Oe(this,"iriFormat"),this.context=e,this.iriFormat=n}static forModel(e,n=!0){const r=e.fields,s=un(Object.values(r).map(o=>o.rdfProperty)),i=LT.fromRdfClasses(e.rdfContexts,s);return new Z1(i,n?"compacted":"expanded")}serialize(e,n={}){const r=n.attributes??e.getAttributes(),s=new Set(n.ignoreModels??[]),i={"@context":{},"@type":null};s.add(e);for(const[o,a]of Object.entries(r))this.setJsonLDField(i,e,o,a,n);if(!(e.static("primaryKey")in r)&&n.includeAnonymousHashes){const o=e.static("defaultResourceHash");o&&!nn()&&(i["@id"]=`#${o}`)}return(n.includeRelations??!0)&&this.setJsonLDRelations(i,e,s),n.includeTypes??!0?this.setJsonLDTypes(i,e):delete i["@type"],n.includeContext??!0?this.setJsonLDContext(i):delete i["@context"],i}processExpandedIRI(e){return this.iriFormat==="expanded"?e:this.compactExpandedIRI(e)}compactExpandedIRI(e){const n=this.context.getTermForExpandedIRI(e);return n?Be(n.compactingPrefix+e.slice(n.value.length),()=>n.used=!0):e}setJsonLDField(e,n,r,s,i){if(r===n.static("primaryKey")){e["@id"]=Rt(s);return}const o=n.static().getFieldRdfProperty(r);o&&this.setJsonLDProperty(e,n,this.processExpandedIRI(o),r,s,i)}setJsonLDRelations(e,n,r){for(const s of n.static("relations")){const i=n.requireRelation(s),o=i.getLoadedModels()[0];if(!i.enabled||!i.loaded||!to(i)||i.isEmpty()||o&&r.has(o))continue;const a=i.relatedClass.fields,l=un(Object.values(a).map(c=>c.rdfProperty));this.context.addTerms(i.relatedClass.rdfContexts,l),this.setJsonLDRelation(e,i,r)}}setJsonLDRelation(e,n,r){const s=n.relatedClass.instance(),i=n.related,o=pg(n),a=o?s.static().getFieldRdfProperty(n.foreignKeyName):n.parent.static().getFieldRdfProperty(n.foreignKeyName),l=this.processExpandedIRI(a),c={ignoreModels:r,includeRelations:!0,includeContext:!1},u=o?d=>Be(this.serialize(d,c),f=>{delete f[l]}):d=>this.serialize(d,c);i&&(o&&this.context.addReverseProperty(n.name,l),e[o?n.name:l]=Array.isArray(i)?i.map(d=>u(d)):u(i))}setJsonLDTypes(e,n){const r=n.static("rdfsClasses").map(s=>this.processExpandedIRI(s));e["@type"]=r.length===1?r[0]:r}setJsonLDContext(e){e["@context"]=this.context.render()}setJsonLDProperty(e,n,r,s,i,o){const a=n.static().getFieldDefinition(s,i);if(i=this.castJsonLDValue(i,a),a.serialize&&(i=a.serialize(i)),i instanceof gh){o.keepEmptyValues&&(e[r]=null);return}e[r]=i}castJsonLDValue(e,n){switch(n.type){case Ae.Any:{if(e==null)return new gh;const r=Eu(e,n.rdfProperty,n.rdfPropertyAliases,n.required);if(r.type===Ae.Any)throw new Ke("Couldn't infer field definition for a field declared as any");return this.castJsonLDValue(e,r)}case Ae.Key:return{"@id":Rt(e)};case Ae.Date:return typeof e=="object"&&e!==null&&"$unset"in e?e:{"@type":"http://www.w3.org/2001/XMLSchema#dateTime","@value":new Date(e).toISOString()};case Ae.Array:{const r=e,s=n.items;switch(r.length){case 0:return new gh;case 1:return this.castJsonLDValue(r[0],s);default:return r.map(i=>this.castJsonLDValue(i,s))}}default:return JSON.parse(JSON.stringify(e))}}};function dn(t){const e=t&&Rv("related-models",t),n=t&&Rv("document-models",t);e==null||e.forEach(r=>Ov("related-models",r)),n==null||n.forEach(r=>Ov("document-models",r))}let ex=class{constructor(){Oe(this,"useSameDocument",!1),Oe(this,"documentModelsLoaded",!1)}usingSameDocument(e=!0){return this.useSameDocument=e,this}};class yd extends ex{constructor(){super(...arguments),Oe(this,"__removedDocumentModels",[])}get protectedSolidMulti(){return this}get super(){return new Proxy(this,{get:(e,n)=>(...r)=>Ii.prototype[n].call(this,...r)})}get __newModels(){return this.__newModelsValue??(this.__newModelsValue=[])}set __newModels(e){var n;dn(this.parent),(n=this.__newModelsValue)==null||n.forEach(r=>dn(r)),e==null||e.forEach(r=>dn(r)),this.__newModelsValue=e}isEmpty(){var e,n,r;return!this.documentModelsLoaded&&this.parent.exists()?null:(((e=this.__modelsInSameDocument)==null?void 0:e.length)||0)+(((n=this.__modelsInOtherDocumentIds)==null?void 0:n.length)||0)+this.__newModels.length+(((r=this.related)==null?void 0:r.length)||0)===0}async create(e={}){this.protectedSolidMulti.assertLoaded("create");const n=this.relatedClass.newInstance(e);return await this.save(n),n}async save(e){return this.protectedSolidMulti.assertLoaded("save"),this.attach(e),!this.useSameDocument||nn()?(await e.save(),this.setForeignAttributes(e)):this.parent.exists()&&await this.parent.save(),e}async remove(e){this.detach(e),await this.parent.save()}detach(e){var n,r,s,i;const o=typeof e=="string"?e:e.getAttribute(this.localKeyName),a=(n=this.related)==null?void 0:n.find(l=>l.getAttribute(this.localKeyName)===o);a&&(this.related=(r=this.related)==null?void 0:r.filter(l=>l.getAttribute(this.localKeyName)!==o),this.__newModels=this.__newModels.filter(l=>l.getAttribute(this.localKeyName)!==o),this.__modelsInSameDocument=(s=this.__modelsInSameDocument)==null?void 0:s.filter(l=>l.getAttribute(this.localKeyName)!==o),this.__modelsInOtherDocumentIds=(i=this.__modelsInOtherDocumentIds)==null?void 0:i.filter(l=>l!==o),a.getDocumentUrl()===this.parent.getDocumentUrl()&&!this.parent.tracksHistory()&&this.__removedDocumentModels.push(a),pg(this)&&a.setAttribute(this.foreignKeyName,null),PT(this)&&this.parent.setAttribute(this.foreignKeyName,this.parent.getAttribute(this.foreignKeyName).filter(l=>l!==o)))}addRelated(e){var n;(n=this.related)!=null&&n.includes(e)||(this.super.addRelated(e),e.exists()||(this.__newModels=this.__newModels.concat([e])))}isRelated(e){return this.super.isRelated(e)||this.__newModels.includes(e)}__afterParentSave(){this.__removedDocumentModels=[]}cloneSolidData(e){const n=e.related??[];e.useSameDocument=this.useSameDocument,e.documentModelsLoaded=this.documentModelsLoaded,e.__newModels=[],e.__removedDocumentModels=[];for(const r of this.__newModels)e.__newModels.push(n.find(s=>s.is(r))??Be(r.clone(),s=>n.push(s)));for(const r of this.__removedDocumentModels)e.__removedDocumentModels.push(n.find(s=>s.is(r))??Be(r.clone(),s=>n.push(s)));this.__modelsInSameDocument&&(e.__modelsInSameDocument=this.__modelsInSameDocument.map(r=>n.find(s=>s.is(r))??r.clone())),this.__modelsInOtherDocumentIds&&(e.__modelsInOtherDocumentIds=this.__modelsInOtherDocumentIds)}loadDocumentModels(e,n){this.__modelsInSameDocument=e,this.__modelsInOtherDocumentIds=n,this.__modelsInOtherDocumentIds.length===0&&(this.related=dr(this.related??[]).concat(this.__modelsInSameDocument)),this.documentModelsLoaded=!0}}W0(yd,"onRelatedUpdated",function(t,e){if(this!==this.parent.requireRelation(this.name))return;const{added:n,removed:r}=ka(t??[],e??[]);dn(this.parent),t==null||t.forEach(s=>dn(s)),e==null||e.forEach(s=>dn(s)),r.forEach(s=>this.clearInverseRelations(s)),n.forEach(s=>this.initializeInverseRelations(s))});const MT=dd(ea,[yd,hg]);let tx=class extends MT{async load(){if(this.isEmpty())return this.related=[];if(!this.__modelsInSameDocument||!this.__modelsInOtherDocumentIds)return this.related=[];const e=await this.loadRelatedModels(this.__modelsInOtherDocumentIds);return this.related=this.__modelsInSameDocument.concat(e)}reset(e=[]){this.related=[],this.__newModels=[],this.__modelsInSameDocument=[],e.forEach(n=>{var r;n.unsetAttribute(this.foreignKeyName),(r=this.related)==null||r.push(n),this.__newModels.push(n)})}clone(e={}){return Be(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){this.documentModelsLoaded||this.loadDocumentModels([],[])}async __synchronizeRelated(e,n){const{models:r,...s}=n,i=kn(this.related??[],"url"),o=kn(e.related??[],"url"),a=o.getItems().filter(c=>!i.hasKey(c.url)),l=[];for(const c of i.items()){const u=o.get(c.url);if(!u){l.push(c);continue}await c.static().synchronize(c,u,{__models:r,...s})}this.related=Array.from(i.items()).concat(a.map(c=>c.clone({clones:Be(new WeakMap,u=>u.set(e.parent,this.parent)),...s}))),e.related=Array.from(o.items()).concat(l.map(c=>c.clone({clones:Be(new WeakMap,u=>u.set(e.parent,this.parent)),...s})))}loadRelatedModels(e){return this.relatedClass.all({$in:e})}};const nx=class kp extends tx{constructor(e){super(e,Ti("Operation"),"resourceUrl")}attach(e={},n){const r=Ti("Operation"),s=e instanceof r?e:Ti(n??"SetPropertyOperation").newInstance(e);if(s.constructor===r)throw new Error("Creating base operations is meaningless, you should create a specific operation instead (add property, remove property, etc.)");return super.attach(s)}attachAddOperation(e){return this.attach(e,"AddPropertyOperation")}attachRemoveOperation(e){return this.attach(e,"RemovePropertyOperation")}attachSetOperation(e){return this.attach(e,"SetPropertyOperation")}attachUnsetOperation(e){return this.attach(e,"UnsetPropertyOperation")}attachDeleteOperation(e){return this.attach(e,"DeleteOperation")}async __loadDocumentModels(e,n){var r;const s=((r=this.relatedClass.fields[this.foreignKeyName])==null?void 0:r.rdfProperty)??Ye(Ke,`Field '${this.foreignKeyName}' does not exist in ${this.relatedClass.modelName} model.`),i=qn.reduceJsonLDGraph(n,this.parent.url),o=n["@graph"].filter(c=>{const u=X1.getJsonLDProperty(c,s);return typeof u=="object"&&u!==null&&"@id"in u&&u["@id"]===this.parent.url}),a=un(await Promise.all(o.map(async c=>{var u;return(u=this.getOperationClass(c))==null?void 0:u.createFromEngineDocument(e,i,c["@id"])}))),l=o.map(c=>c["@id"]).filter(c=>!a.some(u=>u.url===c)&&kr(c)!==e);this.protectedSolidHas.loadDocumentModels(a,l)}async loadRelatedModels(){throw new Error("loading operations from different documents has not been implemented yet")}getOperationClass(e){const n=this.getOperationMatchers(),r=vn(e["@type"]??[]),s=n.find(i=>i.match(r));return s==null?void 0:s.operation}getOperationMatchers(){return kp.operationMatchers??(kp.operationMatchers=Object.values(dg()).map(e=>{const n=su.forModel(e),r=e.rdfsClasses,s=r.map(o=>n.processExpandedIRI(o)),i=r.concat(s);return{operation:e,match:o=>i.some(a=>o.includes(a))}}))}};Oe(nx,"operationMatchers");let NT=nx,jT=class{serializeToJsonLD(e={}){return e.includeRelations??(e.includeRelations=!0),su.forModel(this.static()).serialize(this,e)}async parseEngineDocumentAttributesFromJsonLD(e,n){const r=e,s=r["@graph"].find(l=>l["@id"]===n)??Ye(cg,n,e.url),i=await qn.resourceFromJsonLDGraph(r,n,s),o=this.static("fields"),a={};a[this.static("primaryKey")]=n;for(const[l,c]of Object.entries(o)){if(!c.rdfProperty)continue;const u=(i.propertiesIndex[c.rdfProperty]??c.rdfPropertyAliases.reduce((h,m)=>h.concat(i.propertiesIndex[m]??[]),[])).map(h=>h.type===wi.Reference?new Hn(h.value):h.value),[d,...f]=u;typeof d>"u"||(a[l]=f.length>0?[d].concat(f):d)}return a}convertEngineFiltersToJsonLD(e,n){const r={},s=su.forModel(this.static()),i=this.static("rdfsClasses"),o=i.map(c=>s.processExpandedIRI(c)),a=[];i.length>0&&(a.push({$contains:o}),a.push({$contains:i})),i.length===1&&(a.push({$eq:o[0]}),a.push({$eq:i[0]})),this.static("rdfsClassesAliases").forEach(c=>{c.length>0&&a.push({$contains:c}),c.length===1&&a.push({$eq:c[0]})}),e.$in&&(r.$in=e.$in,delete e.$in);const l=this.convertAttributeValuesToJsonLD(e,{compactIRIs:n,keepEmptyValues:!1});return a.length>0&&(l["@type"]={$or:a}),Object.keys(l).length>0&&(r["@graph"]={$contains:l}),r}convertEngineUpdatesToJsonLD(e,n){const r=this.convertAttributeValuesToJsonLD(e,{compactIRIs:n,keepEmptyValues:!0});for(const[s,i]of Object.entries(r))i===null&&(r[s]={$unset:!0});return r}convertAttributeValuesToJsonLD(e,n){return su.forModel(this.static(),n.compactIRIs).serialize(this,{includeContext:!1,includeTypes:!1,includeRelations:!1,keepEmptyValues:n.keepEmptyValues,attributes:e})}};class FT extends Ii{constructor(e){const n=Xt("SolidACLAuthorization");super(e,n)}requireACLUrl(){return this.aclUrl??Ye("Could not get ACL Url")}isDocumentACL(){return!this.aclUrl||!this.effectiveACLUrl?null:this.aclUrl===this.effectiveACLUrl}setForeignAttributes(){}clearForeignAttributes(){}async load(){const e=Xt("SolidACLAuthorization"),n=await rT(this.parent.requireDocumentUrl(),e.requireFetch()),r=await gd(n.document.statements()),s=await Promise.all(n.document.statements(void 0,"rdf:type","acl:Authorization").map(({subject:i})=>e.createFromEngineDocument(n.effectiveUrl,r,i.value)));return this.aclUrl=n.url,this.effectiveACLUrl=n.effectiveUrl,this.related=s,s}}const UT=dd(Zo,[yd,fg]);class rx extends UT{async load(){var e;if((!this.__modelsInSameDocument||!this.__modelsInOtherDocumentIds)&&(this.__modelsInSameDocument=[],this.__modelsInOtherDocumentIds=this.parent.getAttribute(this.foreignKeyName)),this.isEmpty())return this.related=[];const n={};for(const s of this.__modelsInOtherDocumentIds??[]){const i=Cr(s)??_s(s);i in n||(n[i]=new Set),(e=n[i])==null||e.add(kr(s))}const r=(await Promise.all(Object.entries(n).map(([s,i])=>this.relatedClass.from(s).all({$in:Array.from(i)})))).reduce((s,i)=>(s.push(...i),s),[]);return this.related=this.__modelsInSameDocument.concat(this.__newModels).concat(r)}associate(e){const n=this.parent.getAttribute(this.foreignKeyName),r=Hn.from(e);this.parent.setAttribute(this.foreignKeyName,n.concat(r))}disassociate(e){const n=this.parent.getAttribute(this.foreignKeyName),r=Hn.from(e);this.parent.setAttribute(this.foreignKeyName,n.filter(s=>!r.equals(Hn.from(s))))}reset(e=[]){this.related=[],this.__newModels=[],this.__modelsInSameDocument=[];const n=this.parent.getAttribute(this.foreignKeyName);e.forEach(r=>{var s;ar(n,r.getAttribute(this.localKeyName)),(s=this.related)==null||s.push(r),this.__newModels.push(r)}),this.parent.setAttribute(this.foreignKeyName,n)}clone(e={}){return Be(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){if(this.documentModelsLoaded)return;const e=this.parent.getAttribute(this.foreignKeyName);if(!Array.isArray(e))throw new Error(`Foreign key (${this.foreignKeyName}) for '${this.name}' relation in '${this.parent.static("modelName")}' model is missing.`);this.loadDocumentModels([],e)}async __synchronizeRelated(e,n){const{models:r,...s}=n,{SetPropertyOperation:i,AddPropertyOperation:o,RemovePropertyOperation:a}=dg(),l=this.parent.static().getFieldRdfProperty(this.foreignKeyName),c=this.localKeyName,u=kn(this.related??[],c),d=kn(e.related??[],c),f=Be(new WeakMap,m=>m.set(e.parent,this.parent));this.parent.operations.filter(m=>!m.exists()&&(m instanceof i||m instanceof o||m instanceof a)&&m.property===l).map(m=>vn(m.value)).flat().map(m=>d.get(m instanceof Hn?m.toString():m)).filter(m=>!!m).forEach(m=>{var y;if(u.hasKey(m.getAttribute(c)))return;const S=m.clone({clones:f,...s});(y=this.related)==null||y.push(S),u.add(S)});const h=await Promise.all(this.parent.getAttribute(this.foreignKeyName).map(async m=>{const y=u.get(m),S=d.get(m);return!y||!S||await y.static().synchronize(y,S,{__models:r,...s}),y}));this.related=un(h).concat(this.__newModels)}}let vd=class extends ex{get super(){return new Proxy(this,{get:(e,n)=>(...r)=>Ia.prototype[n].call(this,...r)})}get __newModel(){return this.__newModelValue}set __newModel(e){dn(this.parent),dn(this.__newModelValue),dn(e),this.__newModelValue=e}isEmpty(){return!this.documentModelsLoaded&&this.parent.exists()?null:!(this.__modelInSameDocument||this.__modelInOtherDocumentId||this.__newModel||this.related)}async create(e={}){this.assertNotLoadedOrEmpty("create");const n=this.relatedClass.newInstance(e);return await this.save(n),n}async save(e){return this.assertNotLoadedOrEmpty("save"),this.attach(e),!this.useSameDocument||nn()?await e.save():this.parent.exists()&&await this.parent.save(),e}addRelated(e){this.related!==e&&(this.super.addRelated(e),e.exists()||(this.__newModel=e))}isRelated(e){return this.super.isRelated(e)||this.__newModel===e}cloneSolidData(e){let n=e.related??null;e.useSameDocument=this.useSameDocument,e.documentModelsLoaded=this.documentModelsLoaded,this.__newModel&&(this.__newModel=n??Be(this.__newModel.clone(),r=>n=r)),this.__modelInSameDocument&&(e.__modelInSameDocument=n??this.__modelInSameDocument.clone()),this.__modelInOtherDocumentId&&(e.__modelInOtherDocumentId=this.__modelInOtherDocumentId)}loadDocumentModels(e,n){var r;if(e.length+n.length>1&&console.warn(`The ${this.name} relationship in ${this.parent.static("modelName")} has been declared as hasOne, but more than one related model were found.`),e.length>0){if(this.__modelInSameDocument=e[0],this.documentModelsLoaded=!0,this.related=this.__modelInSameDocument,!((r=this.__modelInSameDocument)!=null&&r.exists())){this.__newModel=this.__modelInSameDocument;return}this.__newModel=void 0;return}if(n.length>0){this.__modelInOtherDocumentId=n[0],this.documentModelsLoaded=!0;return}this.documentModelsLoaded=!0}async __synchronizeRelated(e,n){const{models:r,...s}=n;if(!this.related&&e.related){this.related=e.related.clone({clones:Be(new WeakMap,o=>o.set(e.parent,this.parent)),...s});return}if(!e.related||!this.related)return;const i=this.parent.getAttribute(this.foreignKeyName);if(await this.related.static().synchronize(this.related,e.related,{__models:r,...s}),this.__newModel||this.related.url===i){this.related=this.__newModel??this.related;return}e.related.url===i&&(this.related=e.related.clone({clones:Be(new WeakMap,o=>o.set(e.parent,this.parent)),...s}))}assertNotLoadedOrEmpty(e){if(!(!this.loaded||!this.related))throw new Ke(`The "${e}" method can't be called because a related model already exists, use a hasMany relationship if you want to support multiple related models.`)}};W0(vd,"onRelatedUpdated",function(t,e){this===this.parent.requireRelation(this.name)&&(dn(this.parent),dn(t),dn(e),t&&this.clearInverseRelations(t),e&&this.initializeInverseRelations(e))});const BT=dd(yl,[vd,fg]);let zT=class extends BT{async load(){if(this.__modelInSameDocument)return this.related=this.__modelInSameDocument;const e=this.__modelInOtherDocumentId??this.parent.getAttribute(this.foreignKeyName);if(!e)return this.related=null;const n=await this.relatedClass.find(e);return this.related=n}reset(e=[]){const n=e[0];delete this.related,delete this.__modelInSameDocument,delete this.__modelInSameDocument,n&&(this.parent.unsetAttribute(this.foreignKeyName),this.related=n,this.__newModel=n)}clone(e={}){return Be(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){if(this.documentModelsLoaded)return;const e=this.parent.getAttribute(this.foreignKeyName);this.loadDocumentModels([],e?[e]:[])}async __synchronizeRelated(e,n){if(!this.related||!e.related||this.related.url!==e.related.url)return;const{models:r,...s}=n,i=this.parent.getAttribute(this.foreignKeyName);if(await this.related.static().synchronize(this.related,e.related,{__models:r,...s}),this.__newModel||this.related.url===i){this.related=this.__newModel??this.related;return}e.related.url===i&&(this.related=e.related.clone({clones:Be(new WeakMap,o=>o.set(e.parent,this.parent)),...s}))}};const VT=dd(so,[vd,hg]);let HT=class extends VT{async load(){if(this.isEmpty())return this.related=null;if(!(this.__modelInSameDocument||this.__modelInOtherDocumentId))return this.related=null;const e=await(async()=>this.__modelInSameDocument?this.__modelInSameDocument:this.__modelInOtherDocumentId?this.relatedClass.find(this.__modelInOtherDocumentId):null)();return this.related=e}async remove(){if(!this.related)return;const e=this.related;this.related=null,await e.delete()}reset(e=[]){const n=e[0];this.related=void 0,this.__newModel=void 0,delete this.__modelInSameDocument,n&&(n.unsetAttribute(this.foreignKeyName),this.related=n,this.__newModel=n)}clone(e={}){return Be(super.clone(e),n=>{this.cloneSolidData(n)})}__beforeParentCreate(){this.documentModelsLoaded||this.loadDocumentModels([],[])}async __synchronizeRelated(e,n){const{models:r,...s}=n;if(this.related&&e.related&&this.related.url===e.related.url){await this.related.static().synchronize(this.related,e.related,{__models:r,...s});return}if(!(!e.related||this.related&&this.related.url!==e.related.url)&&!this.related){this.related=e.related.clone({clones:Be(new WeakMap,i=>i.set(e.parent,this.parent)),...s});return}}},sx=class extends Ia{constructor(e,n){super(e,n,"resourceUrls","url")}isEmpty(){return!1}setForeignAttributes(e){const n=this.parent.getDocumentUrl();if(!n||!this.parent.url||e.resourceUrls.includes(n))return;const r=e.resourceUrls.concat([n]);this.parent.usingSolidEngine()?e.setOriginalAttribute("resourceUrls",r):e.setAttribute("resourceUrls",r)}clearForeignAttributes(e){const n=this.parent.getDocumentUrl();if(!n||!this.parent.url||!e.resourceUrls.includes(n))return;const r=gr(e.resourceUrls,n);this.parent.usingSolidEngine()?e.setOriginalAttribute("resourceUrls",r):e.setAttribute("resourceUrls",r)}async load(){const e=this.relatedClass.collection,n=Zt(this.parent.url);return this.related=await this.relatedClass.from(Cr(n)??_s(n)).find(n),this.relatedClass.collection=e,this.related}onRelatedUpdated(e,n){this===this.parent.requireRelation(this.name)&&(dn(this.parent),dn(e),dn(n),e&&this.clearInverseRelations(e),n&&this.initializeInverseRelations(n))}},qT=class extends Ia{constructor(e){super(e,Xt("Tombstone"))}create(){const e=Xt("Tombstone");this.related=new e({url:this.parent.metadata.url,resourceUrl:this.parent.url,deletedAt:new Date})}async load(){return null}setForeignAttributes(){}clearForeignAttributes(){}};const yh=new WeakMap;function _r(t,e){return t[e]}async function KT(t,e,n){if(t.getPrimaryKey()!==e.getPrimaryKey())throw new Ke("Can't synchronize different models");if(!(n.models.has(t)||n.models.has(e))){n.models.add(t),n.models.add(e),await t.loadRelationIfUnloaded("operations"),await e.loadRelationIfUnloaded("operations"),(t.operations.length>0||e.operations.length>0)&&(t.addHistoryOperations(e.operations),e.addHistoryOperations(t.operations));for(const r of gr(t.static().relations,t.static().reservedRelations)){const s=t.requireRelation(r),i=e.requireRelation(r);!s.enabled||!i.enabled||(await bp(s,Gb).__synchronizeRelated(i,n),await bp(i,Gb).__synchronizeRelated(s,n))}}}let WT=class{tracksHistory(){return yh.has(this)?!1:this._history??this.static("history")}withoutTrackingHistory(e){if(!this.tracksHistory())return e();const n=()=>(yh.delete(this),!0);yh.set(this);const r=e();return Zk(r)?r.then(s=>n()&&s):n()&&r}enableHistory(){this._history=!0}disableHistory(){this._history=!1}disableTombstone(){this._tombstone=!1}enableTombstone(){this._tombstone=!0}leavesTombstone(){return this._tombstone??this.static("tombstone")}getHistoryHash(){const e=this.getRelatedModels().map(n=>n.operations??[]).flat();return e.length===0?null:jk(ml(e,"url").reduce((n,r)=>n+r.url,""))}rebuildAttributesFromHistory(){var e,n;if(!this.hasRelation("operations")||!this.isRelationLoaded("operations"))throw new Ke("Can't rebuild attributes from history if 'operations'  relation isn't loaded");if(this.operations.length===0)return;const r=Ti("PropertyOperation"),s=ml(this.operations,"date"),i=new Set(Object.keys(_r(this,"_attributes"))),o=Object.entries(this.static("fields")).filter(([a,l])=>l.type===Ae.Array);i.delete(this.static("primaryKey")),i.delete(Ct.CreatedAt),i.delete(Ct.UpdatedAt),o.forEach(([a,l])=>{this.ignoreRdfPropertyHistory(l.rdfProperty)||this.setAttribute(a,[])}),s.forEach(a=>{if(a instanceof r){const l=this.static().getRdfPropertyField(a.property);l&&i.delete(l)}a.apply(this)}),i.forEach(a=>{const l=this.static().getFieldRdfProperty(a);l&&this.ignoreRdfPropertyHistory(l)||this.unsetAttribute(a)}),this.setAttribute("createdAt",(e=s[0])==null?void 0:e.date),this.setAttribute("updatedAt",(n=s[s.length-1])==null?void 0:n.date)}addHistoryOperations(e){const n=Ti("PropertyOperation"),r=new Set(this.operations.map(a=>a.url)),s=[],i=new Set,o=Object.keys(this.static("fields")).reduce((a,l)=>{const c=this.static().getFieldRdfProperty(l);return c&&(a[c]=l),a},{});for(const a of e){if(r.has(a.url)||a instanceof n&&this.ignoreRdfPropertyHistory(a.property))continue;const l=a.clone();l.reset(),l.url=a.url,s.push(l),a instanceof n&&a.property in o&&i.add(a.property)}if(s.some(a=>!a.isInception(this))){this.setRelationModels("operations",ml(this.operations.concat(s),["date","url"])),this.removeDuplicatedHistoryOperations(),this.rebuildAttributesFromHistory();for(const a of i){const l=o[a];_r(this,"_trackedDirtyAttributes")[l]=_r(this,"_dirtyAttributes")[l]}}}async addDirtyHistoryOperations(){const e=_r(this,"_trackedDirtyAttributes");if(await this.loadRelationIfUnloaded("operations"),"url"in _r(this,"_dirtyAttributes"))throw new Ke(`It wasn't possible to generate the changes history for a model because its primary key was modified from '${this.url}' to '${_r(this,"_originalAttributes").url}'.`);if(this.operations.length===0){const n=Gn(Ws(_r(this,"_originalAttributes"),[this.static("primaryKey")]));for(const[r,s]of Object.entries(n)){if(s===null||Array.isArray(s)&&s.length===0||r in e&&e[r]===s)continue;const i=this.static().getFieldRdfProperty(r);i&&this.ignoreRdfPropertyHistory(i)||this.relatedOperations.attachSetOperation({property:this.static().requireFieldRdfProperty(r),date:this.metadata.createdAt,value:this.getOperationValue(r,s)})}}for(const[n,r]of Object.entries(_r(this,"_dirtyAttributes"))){if(n in e&&e[n]===r)continue;const s=this.static().getFieldRdfProperty(n);if(!(s&&this.ignoreRdfPropertyHistory(s))){if(Array.isArray(r)){this.addArrayHistoryOperations(n,r,_r(this,"_originalAttributes")[n]);continue}if(r==null){this.relatedOperations.attachUnsetOperation({property:this.static().requireFieldRdfProperty(n),date:this.metadata.updatedAt});continue}this.relatedOperations.attachSetOperation({property:this.static().requireFieldRdfProperty(n),date:this.metadata.updatedAt,value:this.getOperationValue(n,r)})}}this.metadata.isDirty("deletedAt")&&this.metadata.deletedAt&&this.relatedOperations.attachDeleteOperation({date:this.metadata.deletedAt})}removeDuplicatedHistoryOperations(){const e=Ti("PropertyOperation"),n=[],r=[],s=this.operations.filter(o=>o.isInception(this)),i=o=>!r.includes(o.url);for(const o of s)if(o instanceof e){if(!n.includes(o.property)){n.push(o.property);continue}r.push(o.url),o.exists()&&_r(this,"_removedResourceUrls").push(o.url)}this.setRelationModels("operations",this.operations.filter(i))}getOperationValue(e,n){const r=this.static().getFieldDefinition(e,n);return v1(r)?un(vn(n,!0).map(s=>this.getOperationValue(`${e}.*`,s))):(n&&r.type===Ae.Key&&(n=new Hn(n)),r.serialize&&(n=r.serialize(n)),n)}addArrayHistoryOperations(e,n,r){const s=vn(this.getOperationValue(e,r),!0),i=vn(this.getOperationValue(e,n),!0),{added:o,removed:a}=ka(s,i,(l,c)=>l instanceof Hn&&c instanceof Hn?l.equals(c):l===c);o.length>0&&this.relatedOperations.attachAddOperation({property:this.static().getFieldRdfProperty(e),date:this.metadata.updatedAt,value:un(o)}),a.length>0&&this.relatedOperations.attachRemoveOperation({property:this.static().getFieldRdfProperty(e),date:this.metadata.updatedAt,value:un(a)})}reconcileModelTimestamps(e){var n;const[r,...s]=this.operations??[];if(r){this.setAttribute(Ct.UpdatedAt,s.reduce((a,l)=>a>l.date?a:l.date,r.date));return}if(e)return;const i=_r(this,"_originalAttributes")[Ct.UpdatedAt]??((n=this.metadata)==null?void 0:n.getOriginalAttribute(Ct.UpdatedAt));if(!i)return;const o=Object.keys(_r(this,"_dirtyAttributes"));o[1]||o[0]&&o[0]!==Ct.UpdatedAt||this.setAttribute(Ct.UpdatedAt,i)}};function bc(t){return fd(t,yd)}function vh(t){return fd(t,vd)}const GT=ud(io,[CT,kT,IT,jT,WT]);let jt=class extends GT{constructor(){super(...arguments),Oe(this,"_sourceSubject",{}),Oe(this,"_lock",new ad)}static getFieldDefinition(e,n){if(e.endsWith(".*")){const r=this.getFieldDefinition(e.slice(0,-2),Array.isArray(n)&&n.length>0?n[0]:void 0);if(!RT(r))throw new Ke("Can't get item field definition for non-array field");return{type:r.items.type,rdfProperty:r.rdfProperty,rdfPropertyAliases:r.rdfPropertyAliases,required:!1}}return this.fields[e]??Eu(n,this.getDefaultRdfContext()+e,[],!1)}static getFieldRdfProperty(e){const n=this.fields[e];return n&&!n.rdfProperty?null:(n==null?void 0:n.rdfProperty)??this.getDefaultRdfContext()+e}static getRdfPropertyField(e){return(this.rdfPropertyFields??(this.rdfPropertyFields=gk(kn(Object.keys(this.fields),n=>this.getFieldRdfProperty(n)))))[e]??null}static async updateSchema(e){await super.updateSchema(e),delete this.rdfPropertyFields}static requireFetch(){if(!this.usingSolidEngine())throw new Ke(`Could not get fetch from ${this.modelName} model`);return this.requireFinalEngine().getFetch()}static requireFieldRdfProperty(e){return this.getFieldRdfProperty(e)??Ye(`Couldn't get required property for rdf field '${e}'`)}static usingSolidEngine(){return!!this.requireFinalEngine().__isSolidEngine}static useSoftDeletes(e){this.softDeletesEnabled=e}static from(e){return this.collection=e,this}static at(e){return this.from(e)}static boot(e){var n,r,s,i;this.modelName=this.bootModelName(e),this.rdfContexts=this.bootRdfContexts(((n=Object.getOwnPropertyDescriptor(this,"rdfContext"))==null?void 0:n.value)??null,((r=Object.getOwnPropertyDescriptor(this,"rdfContexts"))==null?void 0:r.value)??{},this.rdfsClass),this.rdfsClasses=this.bootRdfsClasses(((s=Object.getOwnPropertyDescriptor(this,"rdfsClass"))==null?void 0:s.value)??null,((i=Object.getOwnPropertyDescriptor(this,"rdfsClasses"))==null?void 0:i.value)??null,this.rdfContexts),this.rdfsClassesAliases=this.bootRdfsClassesAliases(this.rdfsClassesAliases,this.rdfContexts),super.boot(e)}static aliasRdfPrefixes(e){var n;this.ensureBooted();for(const[r,s]of Object.entries(e)){const i=this.rdfsClasses.reduce((o,a)=>(a.startsWith(r)&&o.push(a.replace(r,s)),o),[]);i.length>0&&this.rdfsClassesAliases.push(i);for(const o of Object.values(this.fields))(n=o.rdfProperty)!=null&&n.startsWith(r)&&o.rdfPropertyAliases.push(o.rdfProperty.replace(r,s))}}static resetRdfAliases(){this.rdfsClassesAliases=[];for(const e of Object.values(this.fields))e.rdfPropertyAliases&&(e.rdfPropertyAliases=[])}static replaceRdfPrefixes(e){var n;this.ensureBooted();for(const[r,s]of Object.entries(e)){this.rdfsClasses=this.rdfsClasses.map(i=>i.replace(r,s));for(const i of Object.values(this.fields))(n=i.rdfProperty)!=null&&n.startsWith(r)&&(i.rdfProperty=i.rdfProperty.replace(r,s))}}static createFromEngineDocument(e,n,r){return this.instance().createFromEngineDocument(e,n,r)}static async find(e){const n=dr([this.rdfsClasses,...this.rdfsClassesAliases].flat()),r=this.instance().serializeKey(e),s=kr(r),i=Cr(s)??_s(s);this.ensureBooted();try{const{documentPermissions:o,stopTracking:a}=this.instance().trackPublicPermissions(),l=await this.requireEngine().readOne(i,s),c=await qn.resourceFromJsonLDGraph(l,r);if(!n.some(d=>c.isType(d)))return null;const u=await this.instance().createFromEngineDocument(s,l,r);return a(),u._publicPermissions=o[s],u}catch(o){if(Nk()&&!cn(o,cs)&&!cn(o,cg)&&!cn(o,ph))throw o;return null}}static async all(e={}){e=this.prepareEngineFilters(e);const{documentPermissions:n,stopTracking:r}=this.instance().trackPublicPermissions(),s=await super.all(e);return r(),s.forEach(i=>i._publicPermissions=n[i.requireDocumentUrl()]),s}static prepareEngineFilters(e={}){const n=!this.usingSolidEngine();return this.instance().convertEngineFiltersToJsonLD(e,n)}static rdfTerm(e,n){return n??(n=this.rdfContexts),Ri(e,Gn({extraContext:n,defaultPrefix:Object.values(n).shift()}))}static async newFromJsonLD(e,n,r){const s=YR(e),i=await qn.fromJsonLD(s,n??this.collection),o=await i.toJsonLD(),a=r??this.findMatchingResourceIds(i.statements,n)[0]??Ye(Ke,"Couldn't find matching resource in JSON-LD"),l=i.resource(a),c=n||kr(a),u=await this.instance().parseEngineDocumentAttributes(c,o,a);return this.hasAutomaticTimestamp(Ct.CreatedAt)&&(u.createdAt=l==null?void 0:l.getPropertyValue(wt("purl:created"))),this.hasAutomaticTimestamp(Ct.UpdatedAt)&&(u.updatedAt=l==null?void 0:l.getPropertyValue(wt("purl:modified"))),Be(this.newInstance(Gn(u)),async d=>{await d.loadDocumentModels(c,o),d.reset(),d._sourceSubject=e["@id"]?XR(e["@id"]):{};for(const f of this.relations){const h=d.requireRelation(f),m=h.getLoadedModels();h.enabled&&(bp(h,to).reset(m),m.forEach(y=>y.reset()))}})}static async createFromJsonLD(e,n,r){return Be(await this.newFromJsonLD(e,n,r),s=>s.save(n))}static async createInDocument(e,n,r){return Be(new this(e),s=>s.saveInDocument(n,r))}static async synchronize(e,n,r={}){if(this!==e.static())return e.static().synchronize(e,n,{...r,__models:r.__models??new WeakSet});await KT(e,n,{...r,models:r.__models??new WeakSet})}static findMatchingResourceIds(e,n){const r=e.reduce((s,i)=>{var o;return i.predicate.value==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"&&(s[i.subject.value]=s[i.subject.value]??[],(o=s[i.subject.value])==null||o.push(i.object.value)),s},{});return Object.entries(r).filter(([s,i])=>i.some(o=>this.rdfsClasses.includes(o))).map(([s])=>n?pa(n,s):s)}static bootRdfContexts(e,n,r,s={}){var i,o;const a=s.modelClass??this,l={crdt:"https://vocab.noeldemartin.com/crdt/",foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",posix:"http://www.w3.org/ns/posix/stat#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",xsd:"http://www.w3.org/2001/XMLSchema#"},c=()=>{var d;return(d=Object.entries({...n,...l}).find(([f,h])=>(r==null?void 0:r.startsWith(`${f}:`))||(r==null?void 0:r.startsWith(Rt(h)))))==null?void 0:d[1]};n.default??(n.default=e??c()??Object.values(n).find(d=>!!d));let u=Object.getPrototypeOf(a);return s.skipParentSchema&&u.__isSchema&&(u=Object.getPrototypeOf(u)),u?this.bootRdfContexts(((i=Object.getOwnPropertyDescriptor(u,"rdfContext"))==null?void 0:i.value)??null,{...n,...((o=Object.getOwnPropertyDescriptor(u,"rdfContexts"))==null?void 0:o.value)??{}},u.rdfsClass,{modelClass:u}):{...n,...l,default:n.default??"http://www.w3.org/ns/solid/terms#"}}static bootRdfsClasses(e,n,r,s){var i,o,a;const l=s??this;if(n&&n.length>0)return dr((n==null?void 0:n.map(u=>this.rdfTerm(u,r)))??[]);if(e)return[this.rdfTerm(e,r)];const c=Object.getPrototypeOf(l);return c?this.bootRdfsClasses(((i=Object.getOwnPropertyDescriptor(c,"rdfsClass"))==null?void 0:i.value)??null,((o=Object.getOwnPropertyDescriptor(c,"rdfsClasses"))==null?void 0:o.value)??null,{...r,...((a=Object.getOwnPropertyDescriptor(c,"rdfContexts"))==null?void 0:a.value)??{}},c):[this.rdfTerm(this.getDefaultRdfContext(r)+this.modelName,r)]}static bootRdfsClassesAliases(e,n){return e.map(r=>dr(r.map(s=>wt(s,this.rdfContexts,this.getDefaultRdfContext(n)))??[]))}static bootCollection(){const e=super.bootCollection();if(!e.match(/^\w+:\/\/.*\/$/))throw new Si(this.modelName,`SolidModel collections must be valid container urls (ending with a trailing slash), '${e}' isn't.`);return e}static bootFields(e,n,r,s){var i,o,a;const l=ST(this)??this.rdfContexts,c=this.getDefaultRdfContext(l),{fieldAliases:u}=super.bootFields(e,n,r,s);r.includes(Ct.CreatedAt)&&delete s[Ct.CreatedAt],r.includes(Ct.UpdatedAt)&&delete s[Ct.UpdatedAt];for(const[d,f]of Object.entries(s))f.rdfProperty=wt(f.rdfProperty??`${c}${d}`,l,c),f.rdfPropertyAliases=((i=f.rdfPropertyAliases)==null?void 0:i.map(h=>wt(h,l,c)))??[];return(o=s[n])==null||delete o.rdfProperty,(a=s[n])==null||delete a.rdfPropertyAliases,{fields:s,fieldAliases:u}}static getDefaultRdfContext(e){return e??(e=this.rdfContexts),e.default??""}static async performSchemaUpdate(e){try{e.primaryKey??(e.primaryKey="url");const n=this.bootRdfContexts(e.rdfContext??null,{...e.rdfContexts},e.rdfsClass,{skipParentSchema:!0}),r=this.bootRdfsClasses(e.rdfsClass??null,e.rdfsClasses??null,n),s=this.bootRdfsClassesAliases(e.rdfsClassesAliases??[],n);ET(this,n),await super.performSchemaUpdate(e),this.rdfContexts=n,this.rdfsClasses=r,this.rdfsClassesAliases=s,this.rdfsClass=e.rdfsClass,this.rdfContext=e.rdfContext,this.defaultResourceHash=e.defaultResourceHash??"it",this.slugField=e.slugField,this.history=e.history??!1,this.tombstone=e.tombstone??!0}finally{AT(this)}}initialize(e,n){this._documentExists=n,this._sourceDocumentUrl=this._sourceDocumentUrl??null,this._trackedDirtyAttributes={},this._removedResourceUrls=[],this._usesRdfAliases=!1,super.initialize(e,n)}initializeRelations(){super.initializeRelations(),this.initializeRelationsEnabling(),this.initializeMetadataRelation()}initializeRelationsEnabling(){this.static().hasAutomaticTimestamps()||this._proxy.relatedMetadata.disable(),this._proxy.tracksHistory()||(this._proxy.relatedOperations.disable(),this._proxy.relatedTombstone.disable()),this._proxy.relatedAuthorizations.disable()}initializeMetadataRelation(){if(!this._proxy.relatedMetadata.enabled)return;const e=this._proxy.relatedMetadata.relatedClass.newInstance(Gn({resourceUrl:this._attributes[this.static("primaryKey")],createdAt:this._attributes.createdAt,updatedAt:this._attributes.updatedAt}),!1);e.resourceUrl&&e.mintUrl(this.getDocumentUrl()||void 0,this._documentExists),this._proxy.relatedMetadata.attach(e),delete this._attributes.createdAt,delete this._attributes.updatedAt,delete this._originalAttributes.createdAt,delete this._originalAttributes.updatedAt}static(e){return super.static(e)}update(e){return this._lock.run(()=>super.update(e))}save(e){return this.static().withCollection(e||this.guessCollection(),()=>super.save())}async saveInDocument(e,n){return this.exists()?dk(this.getDocumentUrl()===e,Ke,"Model already exists and is not stored in the given document"):this.mintUrl(e,!0,n),await this.save(),this}delete(){return this.static().softDeletesEnabled?this.softDelete():this.forceDelete()}forceDelete(){return this.static().withCollection(this.guessCollection(),()=>super.delete())}async softDelete(){if(!this.static().hasAutomaticTimestamps())throw new Ke("Cannot soft delete a model without automatic timestamps");if(this.isSoftDeleted())return this;const e=new Date;return this.metadata.setAttribute(Ct.UpdatedAt,e),this.metadata.setAttribute("deletedAt",e),await this.save(),this}async registerInTypeIndex(e){const n=Xt("SolidDocument");await new n({url:this.getDocumentUrl()}).register(e,this.static())}mintUrl(e,n,r){this.setAttribute(this.static("primaryKey"),this.newUrl(e,r)),e&&(this._documentExists=n??!0)}toJsonLD(e={}){e={ids:!0,timestamps:!0,history:!0,...e};const n=this.clone();return e.ids||n.getRelatedModels().forEach(r=>r.setAttribute("url",null)),e.timestamps||n.getRelatedModels().forEach(r=>{r.relatedMetadata.related=null,delete r.relatedMetadata.__modelInSameDocument,delete r.relatedMetadata.__modelInOtherDocumentId,delete r.relatedMetadata.__newModel}),e.history||n.getRelatedModels().forEach(r=>{r.relatedOperations.related=[],r.relatedOperations.__newModels=[],delete r.relatedOperations.__modelsInSameDocument,delete r.relatedOperations.__modelsInOtherDocumentIds}),n.serializeToJsonLD()}async toTurtle(e={}){const n=await og(this.toJsonLD(e));return jR(n)}getIdAttribute(){return this.getAttribute("url")}setExists(e){this._documentExists=e&&this._documentExists,super.setExists(e)}documentExists(){return this._documentExists}setDocumentExists(e){this._documentExists=e,Object.values(this._relations).filter(to).filter(n=>n.enabled&&n.useSameDocument&&!nn()).map(n=>n.getLoadedModels()).flat().forEach(n=>n.setDocumentExists(e))}isDirty(e,n){var r,s;if(e)return this.static("timestamps").includes(e)?((r=this.metadata)==null?void 0:r.isDirty(e))||super.isDirty(e):super.isDirty(e);if(super.isDirty())return!0;if(n)return!!((s=this.metadata)!=null&&s.isDirty("deletedAt"));const i=this.getDocumentModels().filter(a=>a.isDirty(void 0,!0)),o=this.getRemovedDocumentModels();return i.length+o.length>0}isSoftDeleted(){var e;return!!((e=this.metadata)!=null&&e.deletedAt)}cleanDirty(e){super.cleanDirty(),this._documentExists=!0,this._trackedDirtyAttributes={},this._removedResourceUrls=[],Object.values(this._relations).filter(bc).filter(n=>n.enabled&&!nn()).forEach(n=>{if(n.useSameDocument){n.__modelsInSameDocument=n.__modelsInSameDocument||[],n.__modelsInSameDocument.push(...n.__newModels),n.__newModels=[];return}n.__newModels=n.__newModels.filter(r=>!r.exists())}),Object.values(this._relations).filter(vh).filter(n=>n.enabled&&!!n.__newModel&&!nn()).forEach(n=>{var r;if(n.useSameDocument){n.__modelInSameDocument=n.__newModel,n.__newModel=void 0;return}n.__newModel=(r=n.__newModel)!=null&&r.exists()?void 0:n.__newModel}),e||this.getDocumentModels().forEach(n=>n.cleanDirty(!0))}fixMalformedAttributes(){super.fixMalformedAttributes(),this.relatedMetadata.enabled&&(this.static().hasAutomaticTimestamp(Ct.CreatedAt)&&(this.metadata.createdAt=this.getAttribute("createdAt")??new Date),this.static().hasAutomaticTimestamp(Ct.UpdatedAt)&&(this.metadata.updatedAt=this.getAttribute("updatedAt")??this.getAttribute("createdAt")??new Date))}ignoreRdfPropertyHistory(e,n){return!1}getDocumentUrl(){return this.url?kr(this.url):null}requireDocumentUrl(){return this.getDocumentUrl()??Ye(Ke,"Failed getting required document url")}usesRdfAliases(){return this._usesRdfAliases}getSourceDocumentUrl(){return this._sourceDocumentUrl}setSourceDocumentUrl(e){this._sourceDocumentUrl=e}requireContainerUrl(){return this.getContainerUrl()??Ye(Ke,"Failed getting required container url")}getContainerUrl(){const e=this.getDocumentUrl();return e?Cr(e):null}getSourceContainerUrl(){const e=this.getSourceDocumentUrl();return e?Cr(e):null}setAttribute(e,n){const r=this.getPrimaryKey();super.setAttribute(e,n);const s=this.getPrimaryKey();r!==s&&this.onPrimaryKeyUpdated(s,r)}unsetAttribute(e){var n,r;return((r=(n=this.static("fields"))==null?void 0:n[e])==null?void 0:r.type)===Ae.Array?this.setAttributeValue(e,[]):super.unsetAttribute(e)}setCreatedAtAttribute(e){(this.metadata??this).setAttributeValue("createdAt",e)}setUpdatedAtAttribute(e){(this.metadata??this).setAttributeValue("updatedAt",e)}getCreatedAtAttribute(){var e;return((e=this.metadata)==null?void 0:e.getAttributeValue("createdAt"))??super.getAttributeValue("createdAt")}getUpdatedAtAttribute(){var e;return((e=this.metadata)==null?void 0:e.getAttributeValue("updatedAt"))??super.getAttributeValue("updatedAt")}getDeletedAtAttribute(){var e;return((e=this.metadata)==null?void 0:e.getAttributeValue("deletedAt"))??super.getAttributeValue("deletedAt")}getDocumentModels(){return nn()?[]:Iv("document-models",this,()=>{const e=new Set;return this.populateDocumentModels(e),Be(Array.from(e),n=>{n.forEach(r=>e1("document-models",r,n))})})}getRemovedDocumentModels(){const e=new Set;for(const n of Object.values(this._relations))!n.enabled||!n.loaded||!to(n)||!bc(n)||n.__removedDocumentModels.forEach(r=>e.add(r));return Array.from(e)}getDirtyDocumentModels(){return this.getDocumentModels().filter(e=>e.isDirty(void 0,!0))}requireRelation(e){return super.requireRelation(e)}getRelationModel(e){return super.getRelationModel(e)}getRelationModels(e){return super.getRelationModels(e)}setRelationModel(e,n){return super.setRelationModel(e,n)}setRelationModels(e,n){return super.setRelationModels(e,n)}getRelatedModels(){return Iv("related-models",this,()=>{const e=new Set;return this.populateRelatedModels(e),Array.from(e)})}getDefaultCollection(){return`solid://${super.getDefaultCollection()}/`}usingSolidEngine(){return!!this.requireFinalEngine().__isSolidEngine}metadataRelationship(){const e=Xt("Metadata");return this.hasOne(e,"resourceUrl").usingSameDocument(!nn()).onDelete("cascade")}operationsRelationship(){return new NT(this).usingSameDocument(!nn()).onDelete("cascade")}tombstoneRelationship(){return new qT(this)}authorizationsRelationship(){return new FT(this)}onMoved(e,n){n&&this.setSourceDocumentUrl(n)}async createFromEngineDocument(e,n,r){const s=async()=>{const l=await this.parseEngineDocumentAttributes(e,n,r);l[this.static("primaryKey")]=new Hn(r||e);for(const[c,u]of Object.entries(this.static("fields")))u.deserialize&&(l[c]=u.deserialize(l[c]));return this.newInstance(l,!0)},i=Rt(e),o=await qn.resourceFromJsonLDGraph(n,r||i),a=await s();if(await a.loadDocumentModels(i,n),a.hasIncompleteAttributes())throw new ph(i);return Be(a,l=>{l._sourceDocumentUrl=u1(i,{fragment:!1}),l._usesRdfAliases=this.static("rdfsClassesAliases").some(c=>!c.some(u=>!o.isType(u)))})}async createManyFromEngineDocuments(e){const n=dr([this.static("rdfsClasses"),...this.static("rdfsClassesAliases")].flat()),r=await Promise.all(Object.entries(e).map(async([s,i])=>{const o=await qn.fromJsonLD(i);return Promise.all(o.resources.filter(a=>!!a.url&&n.some(l=>a.isType(l))).map(async a=>{try{return await this.createFromEngineDocument(s,i,a.url)}catch(l){if(l instanceof ph)return null;throw l}}))}));return un(r.flat())}async loadDocumentModels(e,n){const r=this.requireEngine();await Promise.all(Object.values(this._relations).filter(s=>s.enabled&&(to(s)||s instanceof ru)).map(async s=>s.relatedClass.withEngine(r,()=>s.__loadDocumentModels(e,n))))}async beforeSave(e){var n;const r=this.isDirty(Ct.UpdatedAt)||!!((n=this.metadata)!=null&&n.isDirty(Ct.UpdatedAt));await super.beforeSave(),!this.url&&this.static("mintsUrls")&&!nn()&&this.mintUrl(),!e&&(await Promise.all(this.getDirtyDocumentModels().map(async s=>s.exists()||s.beforeCreate())),await this.beforeDocumentSave(),await Promise.all(this.getDirtyDocumentModels().map(async s=>s.exists()&&s.beforeUpdate())),this.reconcileModelTimestamps(r))}async beforeDocumentSave(){let e=[];const n=new Set,r=()=>(e=this.getDocumentModels().filter(s=>!n.has(s)),e.length>0);for(;r();)this.static("mintsUrls")&&!nn()&&this.mintDocumentModelsKeys(e),await Promise.all(e.map(async s=>{s!==this&&s.isDirty(void 0,!0)&&await s.beforeSave(!0),n.add(s)}))}async beforeCreate(){for(const e of Object.values(this._relations))!e.enabled||!OT(e)||e.__beforeParentCreate();this.metadata&&!this.metadata.resourceUrl&&this.static("defaultResourceHash")&&!nn()&&(this.metadata.resourceUrl=this.url??`#${this.static("defaultResourceHash")}`,this.metadata.mintUrl(this.getDocumentUrl()||void 0,this._documentExists))}async beforeUpdate(){this.tracksHistory()&&this.isDirty(void 0,!0)&&(await this.addDirtyHistoryOperations(),await Promise.all(this.operations.map(async e=>{e.exists()||(await e.beforeCreate(),await e.beforeSave(!0),this.mintDocumentModelsKeys([e]))})))}async performSave(){const e=this.getDirtyDocumentModels().map(n=>[n,n.exists()]);try{await super.performSave()}catch(n){if(!(n instanceof Ym))throw n;this.url=this.newUniqueUrl(this.url),await super.performSave()}e.forEach(([n,r])=>{n._wasRecentlyCreated=n._wasRecentlyCreated||!r})}async performDelete(){this.tracksHistory()&&this.leavesTombstone()&&this.relatedTombstone.create(),await super.performDelete()}async afterSave(e){if(await super.afterSave(),!e){this.metadata&&this.metadata.resourceUrl!==this.url&&(this.metadata.resourceUrl=this.url,nn()||this.metadata.mintUrl(this.getDocumentUrl()||void 0,this._documentExists)),await Promise.all(this.getDirtyDocumentModels().map(n=>n.afterSave(!0)));for(const n of Object.values(this._relations))!n.enabled||!DT(n)||n.__afterParentSave()}}onPrimaryKeyUpdated(e,n){var r,s;const i=this.getDocumentUrl()||void 0,o=this.documentExists(),a=Object.values(this._relations).filter(l=>l.enabled&&pg(l));for(const l of a)l.getLoadedModels().forEach(c=>{const u=c.getAttribute(l.foreignKeyName);c.setAttribute(l.foreignKeyName,Array.isArray(u)?Be(u.slice(0),d=>G0(d,n,e)):e)});nn()||((r=this.metadata)==null||r.mintUrl(i,o),(s=this.operations)==null||s.map(l=>l.mintUrl(i,o)))}async syncDirty(){const e=this.getDocumentUrl(),n=()=>this.requireEngine().create(e?Zt(e):this.static("collection"),this.toEngineDocument(),e||void 0),r=()=>this.requireEngine().update(Zt(e),e,{"@graph":{$push:this.serializeToJsonLD()}}),s=()=>this.requireEngine().update(Zt(e),e,this.getDirtyEngineDocumentUpdates());return await(async()=>{if(!this._documentExists){const i=this.static("defaultResourceHash"),o=await n();return this.getSerializedPrimaryKey()??(i&&!nn()?`${o}#${i}`:o)}return this._exists?(await s(),this.getSerializedPrimaryKey()):(await r(),this.getSerializedPrimaryKey())})()??Ye(Ke,"Missing primary key")}async deleteModelsFromEngine(e){await this.deleteModels(e)}hasOne(e,n,r){return new HT(this,e,n,r)}hasMany(e,n,r){return new tx(this,e,n,r)}belongsToOne(e,n,r){return new zT(this,e,n,r)}belongsToMany(e,n,r){return new rx(this,e,n,r)}isContainedBy(e){return new sx(this,e)}documentContainsMany(e){return new ru(this,e)}toEngineDocument(){return{"@graph":this.getDirtyDocumentModels().map(e=>e.serializeToJsonLD({includeRelations:!1,includeAnonymousHashes:!0}))}}getDirtyEngineDocumentUpdates(e){const n=[],r=this.requireEngine(),s=this.getDirtyDocumentModels(),i=this.getRemovedDocumentModels();if(!e){for(const o of s){if(o===this)continue;if(!o.exists()){n.push({$push:o.serializeToJsonLD({includeRelations:!1})});continue}const a=o.withEngine(r,l=>l.getDirtyEngineDocumentUpdates(!0))["@graph"];"$apply"in a?n.push(...a.$apply):n.push(a)}for(const o of i)o.getDocumentModels().forEach(a=>n.push({$updateItems:{$where:{"@id":a.url},$unset:!0}}))}if(super.isDirty()&&this.url){const o=super.getDirtyEngineDocumentUpdates(),a=!this.usingSolidEngine();n.push({$updateItems:{$where:{"@id":this.url},$update:this.convertEngineUpdatesToJsonLD(o,a)}})}return this._removedResourceUrls.forEach(o=>n.push({$updateItems:{$where:{"@id":o},$unset:!0}})),n.length===1?{"@graph":n[0]}:{"@graph":{$apply:n}}}async parseEngineDocumentAttributes(e,n,r){return this.parseEngineDocumentAttributesFromJsonLD(n,r||e)}castAttribute(e,n={}){const r=()=>{var s;const i=typeof e>"u"||e===null;switch((s=n.definition)==null?void 0:s.type){case Ae.Array:{const o=i?[]:vn(e),a=dr(o);return o.length!==a.length&&console.warn("An array field had duplicate values, this is not supported in Solid models."),a}case Ae.Any:if(!Array.isArray(e))return e;if(e.length===0)return;if(e.length===1)return e[0];break}return i?void 0:e};return super.castAttribute(r(),n)}newUrl(e,n){return e=e??this.newUrlDocumentUrl(),n=n??this.newUrlResourceHash(),n?`${e}#${n}`:e}newUrlDocumentUrl(){var e;const n=((e=this._sourceSubject)==null?void 0:e.documentName)??this.newUrlDocumentUrlSlug()??Qn();return pa(this.static("collection"),n)}newUrlDocumentUrlSlug(){const e=this.static("slugField"),n=e&&this.getAttribute(e);return(n&&Gm(n))??null}newUrlResourceHash(){var e;return((e=this._sourceSubject)==null?void 0:e.resourceHash)??this.static("defaultResourceHash")}newUniqueUrl(e){var n;e=e??this.newUrl();const r=(n=Jl(e))==null?void 0:n.fragment;return`${kr(e)}-${r1()}${r?`#${r}`:""}`}guessCollection(){if(this.url)return Cr(this.url)??void 0}mintDocumentModelsKeys(e){const n=this.requireDocumentUrl(),r=this._documentExists;for(const s of e)s.url||s.mintUrl(n,r,Qn());for(const s of e)for(const i of Object.values(s._relations))i.enabled&&i.getLoadedModels().forEach(o=>i.setForeignAttributes(o))}populateRelatedModels(e){if(!e.has(this)){e.add(this);for(const n of Object.values(this._relations))n.enabled&&(vh(n)&&n.__newModel&&n.__newModel.populateRelatedModels(e),bc(n)&&n.__newModels.map(r=>r.populateRelatedModels(e)),n.getLoadedModels().forEach(r=>r.populateRelatedModels(e)))}}populateDocumentModels(e){if(e.has(this))return;const n=this.getDocumentUrl(),r=(s,i)=>n&&i.getDocumentUrl()===n||to(s)&&s.useSameDocument;e.add(this);for(const s of Object.values(this._relations)){const i=s instanceof ru;if(!(!s.enabled||!s.loaded||!i&&!to(s))){if(vh(s)&&s.__newModel&&r(s,s.__newModel)&&s.__newModel.populateDocumentModels(e),bc(s))for(const o of s.__newModels)r(s,o)&&o.populateDocumentModels(e);s.getLoadedModels().filter(o=>i||r(s,o)).forEach(o=>o.populateDocumentModels(e))}}}};Oe(jt,"primaryKey","url"),Oe(jt,"fields"),Oe(jt,"classFields",["_history","_publicPermissions","_tombstone"]),Oe(jt,"rdfContext"),Oe(jt,"rdfContexts",{}),Oe(jt,"rdfsClass"),Oe(jt,"rdfsClasses",[]),Oe(jt,"rdfsClassesAliases",[]),Oe(jt,"reservedRelations",["metadata","operations","tombstone","authorizations"]),Oe(jt,"defaultResourceHash","it"),Oe(jt,"slugField"),Oe(jt,"mintsUrls",!0),Oe(jt,"history",!1),Oe(jt,"tombstone",!0),Oe(jt,"rdfPropertyFields"),Oe(jt,"historyDisabled",new WeakMap),Oe(jt,"softDeletesEnabled",!1);function bn(t,e){return Y1(t,jt,e)}const ix={resourceUrl:{type:Ae.Key,required:!0,rdfProperty:"resource"},date:{type:Ae.Date,required:!0}},JT=bn({rdfContexts:{crdt:"https://vocab.noeldemartin.com/crdt/"},rdfsClass:"Operation",timestamps:!1,fields:ix});let bd=class extends JT{apply(e){}isInception(e){var n,r;return((r=(n=e.metadata)==null?void 0:n.createdAt)==null?void 0:r.getTime())===this.date.getTime()}newUrl(e,n){if(!this.resourceUrl)return super.newUrl(e,n);const r=n??Qn();return this.resourceUrl.includes("#")?`${this.resourceUrl}-operation-${r}`:`${this.resourceUrl}#operation-${r}`}};const _d={...ix,property:{type:Ae.Key,required:!0}},YT=bn(bd,{rdfsClass:"PropertyOperation",fields:_d});let Gs=class extends YT{apply(e){const n=e.static().getRdfPropertyField(this.property);n&&this.applyPropertyUpdate(e,n)}applyPropertyUpdate(e,n){}};const XT=bn(Gs,{rdfsClass:"AddPropertyOperation",fields:{..._d,value:{type:Ae.Any,required:!0}}});let QT=class extends XT{applyPropertyUpdate(e,n){const r=e.getAttributeValue(n);if(!Array.isArray(r))throw new Ke("Can't apply Add operation to non-array field (should be Set instead)");e.setAttributeValue(n,r.concat(vn(this.value)))}};const ZT=bn(bd,{rdfsClass:"DeleteOperation"});let e2=class extends ZT{apply(e){e.metadata.setAttribute("deletedAt",this.date)}};const t2=bn({rdfContexts:{crdt:"https://vocab.noeldemartin.com/crdt/"},rdfsClass:"Metadata",timestamps:!1,fields:{resourceUrl:{type:Ae.Key,required:!0,rdfProperty:"resource"},createdAt:Ae.Date,updatedAt:Ae.Date,deletedAt:Ae.Date}});let mg=class extends t2{getCreatedAtAttribute(){return this.getAttributeValue("createdAt")}getUpdatedAtAttribute(){return this.getAttributeValue("updatedAt")}newUrl(e,n){return this.resourceUrl?this.resourceUrl.includes("#")?`${this.resourceUrl}-metadata`:`${this.resourceUrl}#metadata`:super.newUrl(e,n)}};const n2=bn(Gs,{rdfsClass:"RemovePropertyOperation",fields:{..._d,value:{type:Ae.Any,required:!0}}}),ox=class Ip extends n2{applyPropertyUpdate(e,n){const r=e.static().getFieldDefinition(n),s=e.getAttributeValue(n),i=r.deserialize?r.deserialize(s):s;if(!Array.isArray(i))throw new Ke("Can't apply Remove operation to non-array field (use Unset instead)");e.setAttributeValue(n,gr(i,this.castModelAttribute(e,n,vn(this.value))))}castModelAttribute(e,n,r){const s=e.constructor;return(Ip.attributeCasters.get(s)??this.createAttributeCaster(s))(n,r)}createAttributeCaster(e){const n=(class extends e{castAttribute(r,s={}){return super.castAttribute(r,s)}}).pureInstance();return Be((r,s)=>n.castAttribute(s,{definition:n.static().getFieldDefinition(r)}),r=>Ip.attributeCasters.set(e,r))}};Oe(ox,"attributeCasters",new WeakMap);let r2=ox;const s2=bn(Gs,{rdfsClass:"SetPropertyOperation",fields:{..._d,value:{type:Ae.Any,required:!0}}});let i2=class extends s2{applyPropertyUpdate(e,n){const r=e.static().getFieldDefinition(n),s=r.deserialize?r.deserialize(this.value):this.value;e.setAttributeValue(n,s)}},Oi=class extends mg{};Oe(Oi,"rdfsClass","Tombstone");const o2=bn(Gs,{rdfsClass:"UnsetPropertyOperation"});let a2=class extends o2{applyPropertyUpdate(e,n){e.unsetAttribute(n)}};const l2={AddPropertyOperation:QT,DeleteOperation:e2,Metadata:mg,Operation:bd,PropertyOperation:Gs,RemovePropertyOperation:r2,SetPropertyOperation:i2,Tombstone:Oi,UnsetPropertyOperation:a2},c2=bn({rdfContexts:{acl:"http://www.w3.org/ns/auth/acl#"},rdfsClass:"Authorization",timestamps:!1,fields:{agents:{rdfProperty:"agent",type:Ae.Array,items:Ae.Key},agentClasses:{rdfProperty:"agentClass",type:Ae.Array,items:Ae.Key},agentGroups:{rdfProperty:"agentGroup",type:Ae.Array,items:Ae.Key},accessTo:{type:Ae.Array,items:Ae.Key},accessToClasses:{rdfProperty:"accessToClass",type:Ae.Array,items:Ae.Key},default:{type:Ae.Array,items:Ae.Key},modes:{rdfProperty:"mode",type:Ae.Array,items:Ae.Key}}}),u2={[Ai.Read]:"http://www.w3.org/ns/auth/acl#Read",[Ai.Write]:"http://www.w3.org/ns/auth/acl#Write",[Ai.Append]:"http://www.w3.org/ns/auth/acl#Append",[Ai.Control]:"http://www.w3.org/ns/auth/acl#Control"};let gg=class extends c2{static get fetch(){return this.requireFetch()}static modeFromSolidDocumentPermission(e){return u2[e]}};const d2=bn({rdfsClass:"ldp:Resource",timestamps:!1,fields:{updatedAt:{type:Ae.Date,rdfProperty:"purl:modified"}}}),f2=bn({rdfContexts:{solid:"http://www.w3.org/ns/solid/terms#"},rdfsClass:"TypeRegistration",timestamps:!1,fields:{forClass:{type:Ae.Array,items:Ae.Key},instance:Ae.Key,instanceContainer:Ae.Key}});let Dl=class extends f2{},oo=class extends d2{static async fromTypeIndex(e,n){const r=this.requireFinalEngine(),s=r instanceof ug?r.getFetch():void 0;return(await nT(e,n.rdfsClasses,s)).map(i=>this.newInstance({url:i},!0))}async register(e,n){const r=new Dl({forClass:n.rdfsClasses[0],instance:this.url});if(typeof e=="string"){r.mintUrl(e,!0,Qn()),await r.withEngine(this.requireEngine(),()=>r.save(Zt(e)));return}await e.withEngine(this.requireEngine(),async()=>{await e.loadRelationIfUnloaded("registrations"),await e.relatedRegistrations.create(r)})}};const h2=["http://www.w3.org/ns/iana/media-types/text/turtle#Resource","http://www.w3.org/ns/iana/media-types/application/rdf+xml#Resource","http://www.w3.org/ns/iana/media-types/application/ld+json#Resource","http://www.w3.org/ns/ldp#Container","http://www.w3.org/ns/ldp#BasicContainer"];let p2=class extends rx{constructor(e){super(e,oo,"resourceUrls")}get container(){return this.parent}async load(){if(this.isEmpty())return this.related=[];if(this.parent.usingSolidEngine())return super.load();const e=await this.parent.requireEngine().readMany(this.container.requireDocumentUrl());return this.related=Object.entries(e).map(([n,r])=>new oo({url:n,updatedAt:this.getLatestUpdateDate(r["@graph"])})),this.related}async __loadDocumentModels(e,n){if(!oo.usingSolidEngine())return super.__loadDocumentModels(e,n);const r=this.parent.resourceUrls,s=qn.reduceJsonLDGraph(n,this.parent.url),i=n["@graph"].filter(a=>{if(r.indexOf(a["@id"])===-1)return!1;const l=vn(a["@type"]??[]);return h2.some(c=>l.includes(c))}).map(a=>a["@id"]),o=await Promise.all(i.map(a=>oo.createFromEngineDocument(e,s,a)));this.protectedSolidBelongsTo.loadDocumentModels(o,[])}getLatestUpdateDate(e){const n=e.reduce((r,s)=>{const{"@value":i}=s["purl:modified"]??s["http://purl.org/dc/terms/modified"]??s["purl:created"]??s["http://purl.org/dc/terms/created"]??{"@value":0},o=new Date(i).getTime();return Math.max(r,o)},0);return new Date(n)}},ax=class extends Zo{constructor(e,n){super(e,n,"resourceUrls","url")}setForeignAttributes(e){const n=e.getDocumentUrl();if(!n||!e.url||this.parent.resourceUrls.includes(n))return;const r=this.parent.resourceUrls.concat([n]);this.parent.usingSolidEngine()?this.parent.setOriginalAttribute("resourceUrls",r):this.parent.setAttribute("resourceUrls",r)}clearForeignAttributes(e){const n=e.getDocumentUrl();if(!n||!e.url||!this.parent.resourceUrls.includes(n))return;const r=gr(this.parent.resourceUrls,n);this.parent.usingSolidEngine()?this.parent.setOriginalAttribute("resourceUrls",r):this.parent.setAttribute("resourceUrls",r)}async load(){return this.related=this.isEmpty()?[]:await this.relatedClass.from(this.parent.url).all({$in:this.parent.resourceUrls}),this.related}async create(e={}){this.assertParentExists();const n=this.relatedClass.newInstance(e);return!n.url&&n.static("mintsUrls")&&!nn()&&await this.relatedClass.withCollection(this.parent.url,()=>n.mintUrl()),Be(this.attach(n),r=>this.save(r))}async save(e){return this.assertParentExists(),Be(e,async()=>{await e.save(this.parent.url),this.setForeignAttributes(e),await this.parent.save()})}async delete(e){var n;const r=e instanceof this.relatedClass?e:(n=this.related)==null?void 0:n.find(s=>s.url===e);r&&(await r.delete(),this.related&&(this.related=gr(this.related,r)))}assertParentExists(){if(!this.parent.exists())throw new Ke("Cannot save a model because the container doesn't exist")}onRelatedUpdated(e,n){if(this!==this.parent.requireRelation(this.name))return;const{added:r,removed:s}=ka(e??[],n??[]);dn(this.parent),e==null||e.forEach(i=>dn(i)),n==null||n.forEach(i=>dn(i)),s.forEach(i=>this.clearInverseRelations(i)),r.forEach(i=>this.initializeInverseRelations(i))}};const m2={name:{type:Ae.String,rdfProperty:"rdfs:label"},description:{type:Ae.String,rdfProperty:"rdfs:comment"},resourceUrls:{type:Ae.Array,rdfProperty:"ldp:contains",items:Ae.Key},createdAt:{type:Ae.Date,rdfProperty:"purl:created"},updatedAt:{type:Ae.Date,rdfProperty:"purl:modified"}},g2=bn({rdfsClass:"ldp:Container",timestamps:!1,fields:m2});let Tr=class extends g2{static boot(e){super.boot(e),this.slugField=this.slugField??"name"}static async fromTypeIndex(e,n){const r=this.requireFinalEngine(),s=r instanceof ug?r.getFetch():void 0;return(await tT(e,n.rdfsClasses,s)).map(i=>this.newInstance({url:i},!0))}documentsRelationship(){return new p2(this)}markAttributeDirty(e,n,r){return e==="resourceUrls"&&this.usingSolidEngine()?!1:super.markAttributeDirty(e,n,r)}async register(e,n){const r=new Dl({forClass:vn(n).map(s=>s.rdfsClasses).flat(),instanceContainer:this.url});if(typeof e=="string"){r.mintUrl(e,!0,Qn()),await r.withEngine(this.requireEngine(),()=>r.save(Zt(e)));return}await e.withEngine(this.requireEngine(),async()=>{await e.loadRelationIfUnloaded("registrations"),!e.registrations.some(s=>r.instanceContainer===s.instanceContainer&&!r.forClass.some(i=>!s.forClass.includes(i)))&&await e.relatedRegistrations.create(r)})}static(e){return super.static(e)}ignoreRdfPropertyHistory(e,n){return n??(n=this.usingSolidEngine()),n&&e===lg}contains(e){return new ax(this,e)}newUrl(){return vp(this.newUrlDocumentUrl())}newUniqueUrl(e){e=e??this.newUrl();const n=l1(e);return vp(Zt(e),`${n}-${r1()}`)}};Oe(Tr,"defaultResourceHash",null);const y2=bn({rdfContext:"http://www.w3.org/ns/solid/terms#",rdfsClass:"TypeIndex",timestamps:!1,fields:{registrationUrls:{type:Ae.Array,items:Ae.Key,rdfProperty:"hasTypeRegistration"}}});let Ho=class Rp extends y2{static async createPublic(e){const n=await ZR(e,Rp.requireFetch()),r=await this.findOrFail(n);return await r.updatePublicPermissions([Ai.Read]),r}static async createPrivate(e){const n=await eT(e,Rp.requireFetch());return await this.findOrFail(n)}registrationsRelationship(){return nn()?this.belongsToMany(Dl,"registrationUrls"):new ru(this,Dl)}async findContainer(e,n){await this.loadRelationIfUnloaded("registrations");const r=this.registrations.filter(s=>s.instanceContainer&&Ek(s.forClass,e.rdfsClasses));return Qk(r,async s=>s!=null&&s.instanceContainer?(n??Tr).find(s.instanceContainer):null)}};function lx(t){return"rdfContexts"in t}function js(t){return t instanceof Tr}function ga(t){return t.rdfsClasses.includes(lo)}const cx={...l2,SolidACLAuthorization:gg,SolidContainer:Tr,SolidDocument:oo,SolidTypeIndex:Ho,SolidTypeRegistration:Dl};new Set(Object.values(cx));function v2(){Zm(cx)}let b2=class{constructor(e,n){Oe(this,"engine"),Oe(this,"metadata"),Oe(this,"active",{}),this.engine=n,this.metadata=new fk(`${e}-documents-cache`)}has(e,n){return!!this.active[this.getDocumentKey(e,n)]}get(e,n){return this.engine.readOne(e,n)}async remember(e,n,r){await this.metadata.set(this.getDocumentKey(e,n),{modifiedAt:typeof r=="number"?r:r.getTime()})}async forget(e,n){await this.metadata.delete(this.getDocumentKey(e,n))}async activate(e,n,r){const s=await this.metadata.get(this.getDocumentKey(e,n));this.active[this.getDocumentKey(e,n)]=!!(s!=null&&s.modifiedAt)&&s.modifiedAt>=r}async clear(){await this.metadata.clear(),this.metadata.close()}getDocumentKey(e,n){return`${e}-${n}`}};const ux=bn({rdfContext:"https://schema.org/",rdfsClass:"TVEpisode",fields:{name:Ae.String,description:Ae.String,duration:Ae.String,number:{type:Ae.Number,rdfProperty:"episodeNumber"},publishedAt:{type:Ae.Date,rdfProperty:"datePublished"}}}),_2=Object.freeze(Object.defineProperty({__proto__:null,default:ux},Symbol.toStringTag,{value:"Module"}));var w2=Object.defineProperty,x2=(t,e,n)=>e in t?w2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tp=(t,e,n)=>x2(t,typeof e!="symbol"?e+"":e,n);function E2(t,e){return t==null&&e==null?[t===null?1:0,e===null?1:0]:[t??null,e??null]}function bh(t,e){const[n,r]=E2(t,e);return n>r?1:r>n?-1:0}function S2(t){return Object.entries(t).reduce((e,[n,r])=>(e[r]=n,e),{})}Array.isArray.bind(Array);function A2(t){return t==null?!0:Array.isArray(t)||typeof t=="string"?t.length===0:typeof t=="object"?Object.keys(t).length===0:!1}function $2(t){return typeof t=="object"&&t!==null}function _c(t,e){let n=t;const r=e.split(".");for(const s of r){if(!$2(n))return;n=n[s]}return n}Object.entries.bind(Object);function C2(t,e){if(typeof e=="function"){const s=e,i={};for(const[o,a]of Object.entries(t))s(a)||(i[o]=a);return i}const n={...t},r=Array.isArray(e)?e:[e];for(const s of r)delete n[s];return n}function k2(t){return C2(t,e=>e==null)}function I2(t){return String(t)}function R2(t){t.splice(0,t.length)}function T2(t,e,n){const r=t.slice(0),s=[],i=n?(o,a)=>a.findIndex(l=>n(o,l)):(o,a)=>a.indexOf(o);for(const o of e){const a=i(o,r);a!==-1?r.splice(a,1):s.push(o)}return{added:s,removed:r}}function ya(t,e){return e?t.filter(e):t.filter(n=>!!n)}function O2(t,e){for(const n of t)if(e(n))return n;return null}function D2(t,e){return[...t.entries()].flatMap(([n,r])=>e(r,n))}function P2(t,e){const n=typeof e=="string"?r=>I2(r[e]):e;return t.reduce((r,s)=>{var i;return(r[i=n(s)]??(r[i]=[])).push(s),r},{})}function L2(t){return t.length===0}function M2(t,e){return t.map(n=>n[e])}function N2(t){return t.length===0?null:t[Math.floor(Math.random()*t.length)]}function j2(t,e){const n=t.slice(0),r=[];for(;n.length>0&&r.length<e;){const s=Math.floor(Math.random()*n.length);r.push(n[s]),n.splice(s,1)}return r}function F2(t,e){const n=t.indexOf(e);return n===-1?!1:(t.splice(n,1),!0)}function U2(t,e){return t.splice(Number(e),1).length>0}function B2(t,e,n){const r=t.indexOf(e);return r===-1?!1:(t[r]=n,!0)}function yg(t,e,n){n=e==="asc"||e==="desc"?e:n;const r={},s=a=>{switch(typeof a){case"string":return"";case"number":return Number.MIN_SAFE_INTEGER;case"boolean":return!1;default:return null}},i=(a,l)=>{if(!(l in r)){const c=_c(t.find(u=>_c(u,l)!==void 0&&_c(u,l)!==null),l);r[l]=s(c)}return _c(a,l)??r[l]},o=()=>{const a=n==="desc"?l=>(c,u)=>bh(i(u,l),i(c,l)):l=>(c,u)=>bh(i(c,l),i(u,l));switch(typeof e){case"function":return e;case"string":return e==="asc"?void 0:e==="desc"?(l,c)=>bh(c,l):a(e);case"object":{const l=e.map(c=>a(c));return(c,u)=>{for(const d of l){const f=d(c,u);if(f!==0)return f}return 0}}}};return t.slice(0).sort(o())}function Op(t,e){return e?Object.values(t.reduce((n,r)=>{const s=e(r);return n[s]=n[s]??r,n},{})):[...new Set(t)]}function z2(t,e,n){return t.filter(r=>{const s=r[e],i=typeof s=="function"?s.call(r):s;return n?i===n:!!i})}function V2(t,e){return Array.isArray(e)?ya(t,n=>e.indexOf(n)===-1):H2(t,t.indexOf(e))}function H2(t,e){return dx(t,[e])}function dx(t,e){return t.map((n,r)=>[n,r]).filter(([n,r])=>!e.includes(r)).map(([n])=>n)}function q2(t){return Array.from({length:t},(e,n)=>n)}class Jb{static isConjuring(){return this.__conjuring}static isMagicReady(){return this.__reservedProperties.has(this)}static prepareMagic(){this.__conjuring=!0,this.__reservedProperties.set(this,new Set(Object.getOwnPropertyNames(new this))),this.__conjuring=!1}static isReservedProperty(e){var n;return!!((n=this.__reservedProperties.get(this))!=null&&n.has(e))}constructor(...e){if(!this.static().isConjuring())return this.static().isMagicReady()||this.static().prepareMagic(),this._proxy=this.createProxy(),this.initialize(...e),this._proxy.instance}static(e){const n=this.constructor;return e?n[e]:n}reserveProperty(e){Object.assign(this,{[e]:null})}initialize(...e){}__get(e){return Reflect.get(this._proxy.target,e)}__set(e,n){Reflect.set(this._proxy.target,e,n)}__delete(e){Reflect.deleteProperty(this._proxy.target,e)}createProxy(){const e=this.static();return{target:this,instance:new Proxy(this,{get(n,r,s){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.get(n,r,s):n.__get(r)},set(n,r,s,i){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.set(n,r,s,i):(n.__set(r,s),!0)},deleteProperty(n,r){return typeof r!="string"||r in n||e.isReservedProperty(r)?Reflect.deleteProperty(n,r):(n.__delete(r),!0)}})}}}Tp(Jb,"__conjuring"),Tp(Jb,"__reservedProperties",new WeakMap);const Yb={},fx=class hx{static get instance(){return this._instance=this._instance??new hx}constructor(){}set(e,n){typeof n>"u"&&(n="__undefined__"),localStorage.setItem(e,JSON.stringify(n))}get(e,n=null){const r=localStorage.getItem(e);if(r===null)return n;if(r!=="__undefined__")return JSON.parse(r)}require(e){const n=this.get(e,Yb);if(n===Yb)throw new Error(`Failed getting required key from local storage: '${e}'`);return n}has(e){return localStorage.getItem(e)!==null}remove(e){localStorage.removeItem(e)}pull(e,n=null){if(!this.has(e))return n;const r=this.get(e);return this.remove(e),r}};Tp(fx,"_instance");let K2=fx;K2.instance;function W2(t){const e=t;return(e^Math.random()*16>>e/4).toString(16)}function G2(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,W2)}function J2(t={}){const e=typeof t=="number"?t:(t.milliseconds||t.ms||0)+(t.seconds||0)*1e3;return new Promise(n=>setTimeout(n,e))}function Y2(t){return t.split("").reverse().join("")}function vg(t){return t.split(/_|-|\s|(?=[A-Z])/)}function X2(t){const[e,...n]=vg(t);return(e??"").toLowerCase()+n.map(r=>r.slice(0,1).toUpperCase()+r.slice(1).toLowerCase()).join("")}function Dp(t,e="-"){return t=t.normalize("NFD").replace(/[֊־᐀‐‑‒–—―⸗⸚⸺⸻~〜〰゠︱︲﹘﹣－(){}><[\]]/g," ").replace(/[\u0300-\u036f]/g,"").replace(/[\u3000-\u303f]/g,"").replace(/['".,#!$%/\\^&*;:=`@+?]/g,"").toLowerCase().trim().replace(/\s+/g,e),e.length>0&&(t=t.replace(new RegExp(`${e}+`,"g"),e)),t}function Q2(t){return vg(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join("")}function Z2(t){return vg(t).map(e=>e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function eO(...t){let e=t.shift();for(;t.length>0;){const n=t.shift();n.startsWith("/")?e=px(e)+n:n.match(/^[\w-]+:\/\//)?e=n:e.endsWith("/")?e+=n:e+="/"+n}return e}function px(t){const e=t.indexOf("://")+3,n=t.substr(e).indexOf("/");return n!==-1?t.substring(0,e+n):t}function tO(t){if(t.endsWith("/")&&(t=t.substring(0,t.length-1)),px(t)===t)return null;const e=t.lastIndexOf("/");return e!==-1?t.substr(0,e+1):null}function Xb(t){const e=t.lastIndexOf("/");return(e!==-1?t.slice(e+1):"").replace(/#.*$/,"").replace(/\?.*$/,"")}function nO(t){const e=t.trim().match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);if(!e)return null;const n=e[4]||"",[r,s]=n.indexOf(":")===-1?[n]:n.split(":");return{protocol:e[2]||void 0,domain:r||void 0,port:s||void 0,path:e[5]||void 0,query:e[7]||void 0,fragment:e[9]||void 0}}function mx(t,e){const n=t.prototype;for(const[r,s]of Object.entries(e))n[r]=function(...i){var o;const a=s(this.value,...i);return(o=this.chain)==null?void 0:o.call(this,a)}}function gx(t,e){const n=t.prototype,r=Object.getOwnPropertyDescriptors(e.prototype);for(const[s,i]of Object.entries(r))if(!(s in n)){if(typeof i.value!="function"){Object.defineProperty(n,s,{get(){return this.chain(this.value[s])}});continue}n[s]=function(...o){var a;const l=i.value.call(this.value,...o);return(a=this.chain)==null?void 0:a.call(this,l)}}}let yx=class{constructor(e){this.value=e}static isPrimitive(e){return this.prototype.isPrimitive(e)}create(e){const n=this.constructor;return new n(e)}chain(e){return this.isPrimitive(e)?this.create(e):e}};const rO={clear:R2,diff:T2,filter:ya,first:O2,flatMap:D2,groupBy:P2,isEmpty:L2,project:M2,randomItem:N2,randomItems:j2,remove:F2,removeIndex:U2,replace:B2,sorted:yg,unique:Op,where:z2,without:V2,withoutIndexes:dx};let vx=class extends yx{static create(e=[]){const{prototype:n}=this;return n.create(e)}*[Symbol.iterator](){yield*this.value}get(e){return this.value[e]}toArray(){return this.value.slice(0)}isPrimitive(e){return Array.isArray(e)}};mx(vx,rO);gx(vx,Array);const sO={reverse:Y2,toCamelCase:X2,toSlug:Dp,toStudlyCase:Q2,toTitleCase:Z2};let bx=class extends yx{static create(e=""){const{prototype:n}=this;return n.create(e)}toString(){return this.value}isPrimitive(e){return typeof e=="string"}};mx(bx,sO);gx(bx,String);const iO=[];function _x(t){let e=null;function n(){try{return t()}catch{return new t}}function r(i){return e=i,i}const s={setInstance:r,newInstance:n,requireInstance:()=>e??r(n()),reset:()=>r(n())};return iO.forEach(i=>i(s)),new Proxy(s,{get:(i,o,a)=>{const l=o!=="constructor"&&o in s?s:s.requireInstance();return Reflect.get(l,o,a)},set:(i,o,a)=>Reflect.set(s.requireInstance(),o,a)})}function oO(t){const e=new Proxy(t,{get(n,r,s){const i=Reflect.get(n,r,s);return typeof i!="function"?i:(...o)=>(i.call(n,...o),e)}});return e}function aO(t,e){if(!e)return oO(t);const n=e(t);return n instanceof Promise?n.then(()=>t):t}const ao=t=>`(?:(\\d+(?:(?:.|,)\\d+)?)${t})?`,Xi=t=>`(?:([\\d:]+)\\s*${t})?`,lO=[ao("Y"),ao("M"),ao("W"),ao("D")].join(""),cO=[ao("H"),ao("M"),ao("S")].join(""),uO=[Xi("y(?:s|ears?)?"),Xi("months?"),Xi("w(?:s|eeks?)?"),Xi("d(?:ays?)?"),Xi("h(?:ours?)?"),Xi("m(?:in(?:s|utes?)?)?"),Xi("s(?:ec(?:s|onds?)?)?")].join("(?:\\s|,)*"),wx=new RegExp(`P${lO}(?:T${cO})?`),dO=new RegExp(uO);function xx(t,e){const n=t.match(e);if(!n)return null;const r=q2(8).map(()=>[]),s=o=>{const a=n[o],[l,...c]=(a==null?void 0:a.split(":").map(d=>d.trim()))??[],u=ya([l,...(r==null?void 0:r[o])??[]]);return u.length===0?null:(c.forEach((d,f)=>{var h;(h=r[o+f+1])==null||h.push(d)}),u.map(d=>d?parseFloat(d.replace(",",".")):0).reduce((d,f)=>d+f,0))},i=k2({years:s(1),months:s(2),weeks:s(3),days:s(4),hours:s(5),minutes:s(6),seconds:s(7)});return A2(i)?null:i}function fO(t){const e=(t.years??0)*365*30*24*60*60+(t.months??0)*30*24*60*60+(t.weeks??0)*7*24*60*60+(t.days??0)*24*60*60+(t.hours??0)*60*60+(t.minutes??0)*60+(t.seconds??0);return{years:Math.floor(e/(365*30*24*60*60)),months:Math.floor(e/(720*60*60))%30,weeks:Math.floor(e/(10080*60))%7,days:Math.floor(e/(1440*60))%30,hours:Math.floor(e/3600)%24,minutes:Math.floor(e/60)%60,seconds:e%60}}function hO(t){return xx(t,dO)}function pO(t){return xx(t,wx)}function mO(t){return ya([t.years&&(t.years===1?"1 year":`${t.years} years`),t.months&&(t.months===1?"1 month":`${t.months} months`),t.weeks&&(t.weeks===1?"1 week":`${t.weeks} weeks`),t.days&&(t.days===1?"1 day":`${t.days} days`),t.hours&&(t.hours===1?"1 hour":`${t.hours} hours`),t.minutes&&`${t.minutes} min`,t.seconds&&(t.seconds===1?"1 second":`${t.seconds} seconds`)]).join(" ")}function gO(t){return wx.test(t)}function Ex(t){const e=fO(t),n=ya([e.years&&`${e.years}Y`,e.months&&`${e.months}M`,e.weeks&&`${e.weeks}W`,e.days&&`${e.days}D`]).join(""),r=ya([e.hours&&`${e.hours}H`,e.minutes&&`${e.minutes}M`,e.seconds&&`${e.seconds}S`]).join("");return`P${n}${r&&`T${r}`}`}const Sx={"https://schema.org/ActiveActionStatus":"watching","https://schema.org/CompletedActionStatus":"completed","https://schema.org/FailedActionStatus":"dropped","https://schema.org/PotentialActionStatus":"pending"},Qb=S2(Sx),Ax=bn({rdfContext:"https://schema.org/",fields:{object:{required:!0,type:Ae.Key},date:{type:Ae.Date,rdfProperty:"endTime"},status:{rdfProperty:"actionStatus",type:Ae.Key,serialize(t){if(t)return t instanceof Hn?new Hn(Qb[t.toString()]):{"@id":Qb[t["@id"]]}},deserialize(t){if(t)return Sx[t.toString()]}}}}),yO=Object.freeze(Object.defineProperty({__proto__:null,default:Ax},Symbol.toStringTag,{value:"Module"})),Pp=["watching","completed","dropped","pending"];class ra extends Ax{showRelationship(){return this.belongsToOne(gn,"object")}episodeRelationship(){return this.belongsToOne(go,"object")}}st(ra,"history",!0);const vO=Object.freeze(Object.defineProperty({__proto__:null,default:ra,watchStatuses:Pp},Symbol.toStringTag,{value:"Module"})),$x=bn({rdfContext:"https://schema.org/",rdfsClass:"TVSeries",fields:{name:Ae.String,description:Ae.String,startDate:Ae.Date,endDate:Ae.Date,imageUrl:{type:Ae.Key,rdfProperty:"image"},seasonUrls:{type:Ae.Array,rdfProperty:"containsSeason",items:Ae.Key},externalUrls:{type:Ae.Array,rdfProperty:"schema:sameAs",items:Ae.Key}}}),bO=Object.freeze(Object.defineProperty({__proto__:null,default:$x},Symbol.toStringTag,{value:"Module"}));class gn extends $x{static boot(e){super.boot(e),mo.on("updated",n=>n.show&&ls(n.show,"updated")),go.on("updated",n=>n.show&&ls(n.show,"updated")),ra.on("created",n=>n.show&&ls(n.show,"updated")),ra.on("updated",n=>n.show&&ls(n.show,"updated"))}get status(){var e;return((e=this.watchAction)==null?void 0:e.status)??"pending"}get slug(){if(this.url)return this.url.endsWith("/info#it")?Xb(this.url.slice(0,-8)):Xb(this.url)}get tmdbId(){const e=this.externalUrls.find(r=>r.includes("themoviedb.org/tv/"));if(!e)return null;const n=e.match(/\/tv\/(\d+)/);return n&&parseInt(n[1],10)}get imdbId(){const e=this.externalUrls.find(r=>r.includes("imdb.com/title/"));if(!e)return null;const n=e.match(/\/title\/(tt\d+)/);return n&&n[1]}get sortedSeasons(){return yg(this.seasons??[],"number")}get episodes(){return(this.seasons??[]).flatMap(e=>e.episodes??[])}get nextEpisode(){for(const e of this.sortedSeasons)for(const n of e.sortedEpisodes)if(!n.watched)return n;return null}async loadRelationsIfUnloaded(){var e,n;await this.loadRelationIfUnloaded("seasons"),await Promise.all(((e=this.seasons)==null?void 0:e.map(r=>r.loadRelationIfUnloaded("episodes")))??[]),await ls(this,"updated"),await Promise.all(((n=this.seasons)==null?void 0:n.map(r=>ls(r,"updated")))??[])}async updateStatus(e){if(e===this.status){await this.save();return}const n=this.watchAction??this.relatedWatchAction.attach();n.status=e,await this.save()}watchActionRelationship(){return this.hasOne(ra,"object").usingSameDocument().onDelete("cascade")}seasonsRelationship(){return this.belongsToMany(mo).usingSameDocument().onDelete("cascade")}newUrl(e,n){const r=this.name?this.startDate?`${Dp(this.name)}-${this.startDate.getFullYear()}`:Dp(this.name):G2();return e=e??eO(this.static().collection,`${r}/info`),n=n??this.static().defaultResourceHash??"it",`${e}#${n}`}}st(gn,"cloud",!0),st(gn,"history",!0);const _O=Object.freeze(Object.defineProperty({__proto__:null,default:gn},Symbol.toStringTag,{value:"Module"})),Cx=bn({rdfContext:"https://schema.org/",rdfsClass:"TVSeason",fields:{number:{type:Ae.Number,rdfProperty:"seasonNumber"},episodeUrls:{type:Ae.Array,rdfProperty:"episode",items:Ae.Key}}}),wO=Object.freeze(Object.defineProperty({__proto__:null,default:Cx},Symbol.toStringTag,{value:"Module"}));class mo extends Cx{static boot(e){super.boot(e),go.on("updated",n=>n.season&&ls(n.season,"updated"))}get sortedEpisodes(){return yg(this.episodes??[],"number")}async watch(){!this.show||!this.episodes||(this.episodes.forEach(e=>{e.watched||e.relatedWatchAction.attach({date:new Date})}),await Promise.all(this.show.episodes.map(e=>e.save())),await this.show.updateStatus("watching"),await this.emit("updated"))}showRelationship(){return this.hasOne(gn,"seasonUrls")}episodesRelationship(){return this.belongsToMany(go)}}st(mo,"history",!0);const xO=Object.freeze(Object.defineProperty({__proto__:null,default:mo},Symbol.toStringTag,{value:"Module"})),Zb=t=>(t||0).toString().padStart(2,"0");class go extends ux{static boot(e){super.boot(e),mo.on("updated",async n=>{const r=n.episodes??[];await Promise.all(r.map(s=>ls(s,"updated")))})}get show(){var e;return((e=this.season)==null?void 0:e.show)??null}get shortName(){var e;return`S${Zb((e=this.season)==null?void 0:e.number)}E${Zb(this.number)}`}get watched(){return!!this.watchAction}async toggle(){await(this.watched?this.unwatch():this.watch())}async unwatch(){this.watched&&(await this.relatedWatchAction.remove(),await this.emit("updated"))}async watch(){this.watched||!this.show||(await this.show.updateStatus("watching"),await this.relatedWatchAction.create({date:new Date}),await this.emit("updated"))}seasonRelationship(){return this.hasOne(mo,"episodeUrls")}watchActionRelationship(){return this.hasOne(ra,"object").usingSameDocument().onDelete("cascade")}async beforeSave(e){await super.beforeSave(e),this.duration&&!gO(this.duration)&&(this.duration=Ex(hO(this.duration)??{}))}newUrl(e,n){var i;if(!((i=this.show)!=null&&i.url)||!this.season)return super.newUrl(e,n);const r=tO(this.show.url),s=`season-${this.season.number}`;return e=e??`${r}${s}/episode-${this.number}`,n=n??this.static().defaultResourceHash??"it",`${e}#${n}`}}st(go,"history",!0);const EO=Object.freeze(Object.defineProperty({__proto__:null,default:go},Symbol.toStringTag,{value:"Module"})),SO=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function wd(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const it={},sa=[],Or=()=>{},AO=()=>!1,Ql=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),bg=t=>t.startsWith("onUpdate:"),kt=Object.assign,_g=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},$O=Object.prototype.hasOwnProperty,ht=(t,e)=>$O.call(t,e),Me=Array.isArray,ia=t=>Ra(t)==="[object Map]",xo=t=>Ra(t)==="[object Set]",e_=t=>Ra(t)==="[object Date]",CO=t=>Ra(t)==="[object RegExp]",We=t=>typeof t=="function",Ot=t=>typeof t=="string",Jr=t=>typeof t=="symbol",At=t=>t!==null&&typeof t=="object",wg=t=>(At(t)||We(t))&&We(t.then)&&We(t.catch),kx=Object.prototype.toString,Ra=t=>kx.call(t),kO=t=>Ra(t).slice(8,-1),xd=t=>Ra(t)==="[object Object]",xg=t=>Ot(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,oa=wd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ed=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},IO=/-(\w)/g,an=Ed(t=>t.replace(IO,(e,n)=>n?n.toUpperCase():"")),RO=/\B([A-Z])/g,or=Ed(t=>t.replace(RO,"-$1").toLowerCase()),Zl=Ed(t=>t.charAt(0).toUpperCase()+t.slice(1)),aa=Ed(t=>t?`on${Zl(t)}`:""),zn=(t,e)=>!Object.is(t,e),la=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Lp=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Su=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Au=t=>{const e=Ot(t)?Number(t):NaN;return isNaN(e)?t:e};let t_;const Sd=()=>t_||(t_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),TO="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",OO=wd(TO);function xs(t){if(Me(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Ot(r)?MO(r):xs(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Ot(t)||At(t))return t}const DO=/;(?![^(]*\))/g,PO=/:([^]+)/,LO=/\/\*[^]*?\*\//g;function MO(t){const e={};return t.replace(LO,"").split(DO).forEach(n=>{if(n){const r=n.split(PO);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Je(t){let e="";if(Ot(t))e=t;else if(Me(t))for(let n=0;n<t.length;n++){const r=Je(t[n]);r&&(e+=r+" ")}else if(At(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Ln(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Ot(e)&&(t.class=Je(e)),n&&(t.style=xs(n)),t}const NO="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jO=wd(NO);function Ix(t){return!!t||t===""}function FO(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Ni(t[r],e[r]);return n}function Ni(t,e){if(t===e)return!0;let n=e_(t),r=e_(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Jr(t),r=Jr(e),n||r)return t===e;if(n=Me(t),r=Me(e),n||r)return n&&r?FO(t,e):!1;if(n=At(t),r=At(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Ni(t[o],e[o]))return!1}}return String(t)===String(e)}function Ad(t,e){return t.findIndex(n=>Ni(n,e))}const Rx=t=>!!(t&&t.__v_isRef===!0),ue=t=>Ot(t)?t:t==null?"":Me(t)||At(t)&&(t.toString===kx||!We(t.toString))?Rx(t)?ue(t.value):JSON.stringify(t,Tx,2):String(t),Tx=(t,e)=>Rx(e)?Tx(t,e.value):ia(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[_h(r,i)+" =>"]=s,n),{})}:xo(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>_h(n))}:Jr(e)?_h(e):At(e)&&!Me(e)&&!xd(e)?String(e):e,_h=(t,e="")=>{var n;return Jr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Cn;class Eg{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Cn,!e&&Cn&&(this.index=(Cn.scopes||(Cn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Cn;try{return Cn=this,e()}finally{Cn=n}}}on(){++this._on===1&&(this.prevScope=Cn,Cn=this)}off(){this._on>0&&--this._on===0&&(Cn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Ta(t){return new Eg(t)}function Eo(){return Cn}function Oa(t,e=!1){Cn&&Cn.cleanups.push(t)}let It;const wh=new WeakSet;class Pl{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Cn&&Cn.active&&Cn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wh.has(this)&&(wh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Dx(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,n_(this),Px(this);const e=It,n=Gr;It=this,Gr=!0;try{return this.fn()}finally{Lx(this),It=e,Gr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)$g(e);this.deps=this.depsTail=void 0,n_(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Mp(this)&&this.run()}get dirty(){return Mp(this)}}let Ox=0,bl,_l;function Dx(t,e=!1){if(t.flags|=8,e){t.next=_l,_l=t;return}t.next=bl,bl=t}function Sg(){Ox++}function Ag(){if(--Ox>0)return;if(_l){let e=_l;for(_l=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;bl;){let e=bl;for(bl=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Px(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Lx(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),$g(r),UO(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Mp(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Mx(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Mx(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ll)||(t.globalVersion=Ll,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Mp(t))))return;t.flags|=2;const e=t.dep,n=It,r=Gr;It=t,Gr=!0;try{Px(t);const s=t.fn(t._value);(e.version===0||zn(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{It=n,Gr=r,Lx(t),t.flags&=-3}}function $g(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)$g(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function UO(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function BO(t,e){t.effect instanceof Pl&&(t=t.effect.fn);const n=new Pl(t);e&&kt(n,e);try{n.run()}catch(s){throw n.stop(),s}const r=n.run.bind(n);return r.effect=n,r}function zO(t){t.effect.stop()}let Gr=!0;const Nx=[];function Js(){Nx.push(Gr),Gr=!1}function Ys(){const t=Nx.pop();Gr=t===void 0?!0:t}function n_(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=It;It=void 0;try{e()}finally{It=n}}}let Ll=0;class VO{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $d{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!It||!Gr||It===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==It)n=this.activeLink=new VO(It,this),It.deps?(n.prevDep=It.depsTail,It.depsTail.nextDep=n,It.depsTail=n):It.deps=It.depsTail=n,jx(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=It.depsTail,n.nextDep=void 0,It.depsTail.nextDep=n,It.depsTail=n,It.deps===n&&(It.deps=r)}return n}trigger(e){this.version++,Ll++,this.notify(e)}notify(e){Sg();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Ag()}}}function jx(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)jx(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const $u=new WeakMap,co=Symbol(""),Np=Symbol(""),Ml=Symbol("");function In(t,e,n){if(Gr&&It){let r=$u.get(t);r||$u.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new $d),s.map=r,s.key=n),s.track()}}function Fs(t,e,n,r,s,i){const o=$u.get(t);if(!o){Ll++;return}const a=l=>{l&&l.trigger()};if(Sg(),e==="clear")o.forEach(a);else{const l=Me(t),c=l&&xg(n);if(l&&n==="length"){const u=Number(r);o.forEach((d,f)=>{(f==="length"||f===Ml||!Jr(f)&&f>=u)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Ml)),e){case"add":l?c&&a(o.get("length")):(a(o.get(co)),ia(t)&&a(o.get(Np)));break;case"delete":l||(a(o.get(co)),ia(t)&&a(o.get(Np)));break;case"set":ia(t)&&a(o.get(co));break}}Ag()}function HO(t,e){const n=$u.get(t);return n&&n.get(e)}function Mo(t){const e=Ze(t);return e===t?e:(In(e,"iterate",Ml),hr(t)?e:e.map(yn))}function Cd(t){return In(t=Ze(t),"iterate",Ml),t}const qO={__proto__:null,[Symbol.iterator](){return xh(this,Symbol.iterator,yn)},concat(...t){return Mo(this).concat(...t.map(e=>Me(e)?Mo(e):e))},entries(){return xh(this,"entries",t=>(t[1]=yn(t[1]),t))},every(t,e){return Os(this,"every",t,e,void 0,arguments)},filter(t,e){return Os(this,"filter",t,e,n=>n.map(yn),arguments)},find(t,e){return Os(this,"find",t,e,yn,arguments)},findIndex(t,e){return Os(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Os(this,"findLast",t,e,yn,arguments)},findLastIndex(t,e){return Os(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Os(this,"forEach",t,e,void 0,arguments)},includes(...t){return Eh(this,"includes",t)},indexOf(...t){return Eh(this,"indexOf",t)},join(t){return Mo(this).join(t)},lastIndexOf(...t){return Eh(this,"lastIndexOf",t)},map(t,e){return Os(this,"map",t,e,void 0,arguments)},pop(){return Ja(this,"pop")},push(...t){return Ja(this,"push",t)},reduce(t,...e){return r_(this,"reduce",t,e)},reduceRight(t,...e){return r_(this,"reduceRight",t,e)},shift(){return Ja(this,"shift")},some(t,e){return Os(this,"some",t,e,void 0,arguments)},splice(...t){return Ja(this,"splice",t)},toReversed(){return Mo(this).toReversed()},toSorted(t){return Mo(this).toSorted(t)},toSpliced(...t){return Mo(this).toSpliced(...t)},unshift(...t){return Ja(this,"unshift",t)},values(){return xh(this,"values",yn)}};function xh(t,e,n){const r=Cd(t),s=r[e]();return r!==t&&!hr(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const KO=Array.prototype;function Os(t,e,n,r,s,i){const o=Cd(t),a=o!==t&&!hr(t),l=o[e];if(l!==KO[e]){const d=l.apply(t,i);return a?yn(d):d}let c=n;o!==t&&(a?c=function(d,f){return n.call(this,yn(d),f,t)}:n.length>2&&(c=function(d,f){return n.call(this,d,f,t)}));const u=l.call(o,c,r);return a&&s?s(u):u}function r_(t,e,n,r){const s=Cd(t);let i=n;return s!==t&&(hr(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,yn(a),l,t)}),s[e](i,...r)}function Eh(t,e,n){const r=Ze(t);In(r,"iterate",Ml);const s=r[e](...n);return(s===-1||s===!1)&&Rd(n[0])?(n[0]=Ze(n[0]),r[e](...n)):s}function Ja(t,e,n=[]){Js(),Sg();const r=Ze(t)[e].apply(t,n);return Ag(),Ys(),r}const WO=wd("__proto__,__v_isRef,__isVue"),Fx=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Jr));function GO(t){Jr(t)||(t=String(t));const e=Ze(this);return In(e,"has",t),e.hasOwnProperty(t)}class Ux{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Kx:qx:i?Hx:Vx).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Me(e);if(!s){let l;if(o&&(l=qO[n]))return l;if(n==="hasOwnProperty")return GO}const a=Reflect.get(e,n,Pt(e)?e:r);return(Jr(n)?Fx.has(n):WO(n))||(s||In(e,"get",n),i)?a:Pt(a)?o&&xg(n)?a:a.value:At(a)?s?Es(a):Jn(a):a}}class Bx extends Ux{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=Xs(i);if(!hr(r)&&!Xs(r)&&(i=Ze(i),r=Ze(r)),!Me(e)&&Pt(i)&&!Pt(r))return l?!1:(i.value=r,!0)}const o=Me(e)&&xg(n)?Number(n)<e.length:ht(e,n),a=Reflect.set(e,n,r,Pt(e)?e:s);return e===Ze(s)&&(o?zn(r,i)&&Fs(e,"set",n,r):Fs(e,"add",n,r)),a}deleteProperty(e,n){const r=ht(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Fs(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Jr(n)||!Fx.has(n))&&In(e,"has",n),r}ownKeys(e){return In(e,"iterate",Me(e)?"length":co),Reflect.ownKeys(e)}}class zx extends Ux{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const JO=new Bx,YO=new zx,XO=new Bx(!0),QO=new zx(!0),jp=t=>t,wc=t=>Reflect.getPrototypeOf(t);function ZO(t,e,n){return function(...r){const s=this.__v_raw,i=Ze(s),o=ia(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...r),u=n?jp:e?Cu:yn;return!e&&In(i,"iterate",l?Np:co),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function xc(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function eD(t,e){const n={get(s){const i=this.__v_raw,o=Ze(i),a=Ze(s);t||(zn(s,a)&&In(o,"get",s),In(o,"get",a));const{has:l}=wc(o),c=e?jp:t?Cu:yn;if(l.call(o,s))return c(i.get(s));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&In(Ze(s),"iterate",co),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=Ze(i),a=Ze(s);return t||(zn(s,a)&&In(o,"has",s),In(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=Ze(a),c=e?jp:t?Cu:yn;return!t&&In(l,"iterate",co),a.forEach((u,d)=>s.call(i,c(u),c(d),o))}};return kt(n,t?{add:xc("add"),set:xc("set"),delete:xc("delete"),clear:xc("clear")}:{add(s){!e&&!hr(s)&&!Xs(s)&&(s=Ze(s));const i=Ze(this);return wc(i).has.call(i,s)||(i.add(s),Fs(i,"add",s,s)),this},set(s,i){!e&&!hr(i)&&!Xs(i)&&(i=Ze(i));const o=Ze(this),{has:a,get:l}=wc(o);let c=a.call(o,s);c||(s=Ze(s),c=a.call(o,s));const u=l.call(o,s);return o.set(s,i),c?zn(i,u)&&Fs(o,"set",s,i):Fs(o,"add",s,i),this},delete(s){const i=Ze(this),{has:o,get:a}=wc(i);let l=o.call(i,s);l||(s=Ze(s),l=o.call(i,s)),a&&a.call(i,s);const c=i.delete(s);return l&&Fs(i,"delete",s,void 0),c},clear(){const s=Ze(this),i=s.size!==0,o=s.clear();return i&&Fs(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=ZO(s,t,e)}),n}function kd(t,e){const n=eD(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(ht(n,s)&&s in r?n:r,s,i)}const tD={get:kd(!1,!1)},nD={get:kd(!1,!0)},rD={get:kd(!0,!1)},sD={get:kd(!0,!0)},Vx=new WeakMap,Hx=new WeakMap,qx=new WeakMap,Kx=new WeakMap;function iD(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function oD(t){return t.__v_skip||!Object.isExtensible(t)?0:iD(kO(t))}function Jn(t){return Xs(t)?t:Id(t,!1,JO,tD,Vx)}function Cg(t){return Id(t,!1,XO,nD,Hx)}function Es(t){return Id(t,!0,YO,rD,qx)}function no(t){return Id(t,!0,QO,sD,Kx)}function Id(t,e,n,r,s){if(!At(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=oD(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function hs(t){return Xs(t)?hs(t.__v_raw):!!(t&&t.__v_isReactive)}function Xs(t){return!!(t&&t.__v_isReadonly)}function hr(t){return!!(t&&t.__v_isShallow)}function Rd(t){return t?!!t.__v_raw:!1}function Ze(t){const e=t&&t.__v_raw;return e?Ze(e):t}function Ue(t){return!ht(t,"__v_skip")&&Object.isExtensible(t)&&Lp(t,"__v_skip",!0),t}const yn=t=>At(t)?Jn(t):t,Cu=t=>At(t)?Es(t):t;function Pt(t){return t?t.__v_isRef===!0:!1}function xe(t){return Wx(t,!1)}function yr(t){return Wx(t,!0)}function Wx(t,e){return Pt(t)?t:new aD(t,e)}class aD{constructor(e,n){this.dep=new $d,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ze(e),this._value=n?e:yn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||hr(e)||Xs(e);e=r?e:Ze(e),zn(e,n)&&(this._rawValue=e,this._value=r?e:yn(e),this.dep.trigger())}}function lD(t){t.dep&&t.dep.trigger()}function $(t){return Pt(t)?t.value:t}function fn(t){return We(t)?t():$(t)}const cD={get:(t,e,n)=>e==="__v_raw"?t:$(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Pt(s)&&!Pt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function kg(t){return hs(t)?t:new Proxy(t,cD)}class uD{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new $d,{get:r,set:s}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function So(t){return new uD(t)}function lr(t){const e=Me(t)?new Array(t.length):{};for(const n in t)e[n]=Gx(t,n);return e}class dD{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return HO(Ze(this._object),this._key)}}class fD{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function ku(t,e,n){return Pt(t)?t:We(t)?new fD(t):At(t)&&arguments.length>1?Gx(t,e,n):xe(t)}function Gx(t,e,n){const r=t[e];return Pt(r)?r:new dD(t,e,n)}class hD{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new $d(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ll-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&It!==this)return Dx(this,!0),!0}get value(){const e=this.dep.track();return Mx(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function pD(t,e,n=!1){let r,s;return We(t)?r=t:(r=t.get,s=t.set),new hD(r,s,n)}const mD={GET:"get",HAS:"has",ITERATE:"iterate"},gD={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},Ec={},Iu=new WeakMap;let gi;function yD(){return gi}function Jx(t,e=!1,n=gi){if(n){let r=Iu.get(n);r||Iu.set(n,r=[]),r.push(t)}}function vD(t,e,n=it){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=n,c=p=>s?p:hr(p)||s===!1||s===0?Us(p,1):Us(p);let u,d,f,h,m=!1,y=!1;if(Pt(t)?(d=()=>t.value,m=hr(t)):hs(t)?(d=()=>c(t),m=!0):Me(t)?(y=!0,m=t.some(p=>hs(p)||hr(p)),d=()=>t.map(p=>{if(Pt(p))return p.value;if(hs(p))return c(p);if(We(p))return l?l(p,2):p()})):We(t)?e?d=l?()=>l(t,2):t:d=()=>{if(f){Js();try{f()}finally{Ys()}}const p=gi;gi=u;try{return l?l(t,3,[h]):t(h)}finally{gi=p}}:d=Or,e&&s){const p=d,v=s===!0?1/0:s;d=()=>Us(p(),v)}const S=Eo(),x=()=>{u.stop(),S&&S.active&&_g(S.effects,u)};if(i&&e){const p=e;e=(...v)=>{p(...v),x()}}let _=y?new Array(t.length).fill(Ec):Ec;const g=p=>{if(!(!(u.flags&1)||!u.dirty&&!p))if(e){const v=u.run();if(s||m||(y?v.some((E,k)=>zn(E,_[k])):zn(v,_))){f&&f();const E=gi;gi=u;try{const k=[v,_===Ec?void 0:y&&_[0]===Ec?[]:_,h];_=v,l?l(e,3,k):e(...k)}finally{gi=E}}}else u.run()};return a&&a(g),u=new Pl(d),u.scheduler=o?()=>o(g,!1):g,h=p=>Jx(p,!1,u),f=u.onStop=()=>{const p=Iu.get(u);if(p){if(l)l(p,4);else for(const v of p)v();Iu.delete(u)}},e?r?g(!0):_=u.run():o?o(g.bind(null,!0),!0):u.run(),x.pause=u.pause.bind(u),x.resume=u.resume.bind(u),x.stop=x,x}function Us(t,e=1/0,n){if(e<=0||!At(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Pt(t))Us(t.value,e,n);else if(Me(t))for(let r=0;r<t.length;r++)Us(t[r],e,n);else if(xo(t)||ia(t))t.forEach(r=>{Us(r,e,n)});else if(xd(t)){for(const r in t)Us(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Us(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Yx=[];function bD(t){Yx.push(t)}function _D(){Yx.pop()}function wD(t,e){}const xD={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},ED={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Da(t,e,n,r){try{return r?t(...r):t()}catch(s){Ao(s,e,n)}}function Mr(t,e,n,r){if(We(t)){const s=Da(t,e,n,r);return s&&wg(s)&&s.catch(i=>{Ao(i,e,n)}),s}if(Me(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Mr(t[i],e,n,r));return s}}function Ao(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||it;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,c)===!1)return}a=a.parent}if(i){Js(),Da(i,null,10,[t,l,c]),Ys();return}}SD(t,n,s,r,o)}function SD(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Vn=[];let os=-1;const ca=[];let yi=null,qo=0;const Xx=Promise.resolve();let Ru=null;function Tt(t){const e=Ru||Xx;return t?e.then(this?t.bind(this):t):e}function AD(t){let e=os+1,n=Vn.length;for(;e<n;){const r=e+n>>>1,s=Vn[r],i=jl(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Ig(t){if(!(t.flags&1)){const e=jl(t),n=Vn[Vn.length-1];!n||!(t.flags&2)&&e>=jl(n)?Vn.push(t):Vn.splice(AD(e),0,t),t.flags|=1,Qx()}}function Qx(){Ru||(Ru=Xx.then(Zx))}function Nl(t){Me(t)?ca.push(...t):yi&&t.id===-1?yi.splice(qo+1,0,t):t.flags&1||(ca.push(t),t.flags|=1),Qx()}function s_(t,e,n=os+1){for(;n<Vn.length;n++){const r=Vn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Vn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Tu(t){if(ca.length){const e=[...new Set(ca)].sort((n,r)=>jl(n)-jl(r));if(ca.length=0,yi){yi.push(...e);return}for(yi=e,qo=0;qo<yi.length;qo++){const n=yi[qo];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}yi=null,qo=0}}const jl=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Zx(t){try{for(os=0;os<Vn.length;os++){const e=Vn[os];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Da(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;os<Vn.length;os++){const e=Vn[os];e&&(e.flags&=-2)}os=-1,Vn.length=0,Tu(),Ru=null,(Vn.length||ca.length)&&Zx()}}let Ko,Sc=[];function eE(t,e){var n,r;Ko=t,Ko?(Ko.enabled=!0,Sc.forEach(({event:s,args:i})=>Ko.emit(s,...i)),Sc=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{eE(i,e)}),setTimeout(()=>{Ko||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Sc=[])},3e3)):Sc=[]}let on=null,Td=null;function Fl(t){const e=on;return on=t,Td=t&&t.type.__scopeId||null,e}function $D(t){Td=t}function CD(){Td=null}const kD=t=>Y;function Y(t,e=on,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Kp(-1);const i=Fl(e);let o;try{o=t(...s)}finally{Fl(i),r._d&&Kp(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function zs(t,e){if(on===null)return t;const n=nc(on),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=it]=e[s];i&&(We(i)&&(i={mounted:i,updated:i}),i.deep&&Us(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function as(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Js(),Mr(l,n,8,[t.el,a,t,e]),Ys())}}const tE=Symbol("_vte"),nE=t=>t.__isTeleport,wl=t=>t&&(t.disabled||t.disabled===""),i_=t=>t&&(t.defer||t.defer===""),o_=t=>typeof SVGElement<"u"&&t instanceof SVGElement,a_=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Fp=(t,e)=>{const n=t&&t.to;return Ot(n)?e?e(n):null:n},rE={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,l,c){const{mc:u,pc:d,pbc:f,o:{insert:h,querySelector:m,createText:y,createComment:S}}=c,x=wl(e.props);let{shapeFlag:_,children:g,dynamicChildren:p}=e;if(t==null){const v=e.el=y(""),E=e.anchor=y("");h(v,n,r),h(E,n,r);const k=(C,I)=>{_&16&&(s&&s.isCE&&(s.ce._teleportTarget=C),u(g,C,I,s,i,o,a,l))},A=()=>{const C=e.target=Fp(e.props,m),I=sE(C,e,y,h);C&&(o!=="svg"&&o_(C)?o="svg":o!=="mathml"&&a_(C)&&(o="mathml"),x||(k(C,I),iu(e,!1)))};x&&(k(n,E),iu(e,!0)),i_(e.props)?(e.el.__isMounted=!1,rn(()=>{A(),delete e.el.__isMounted},i)):A()}else{if(i_(e.props)&&t.el.__isMounted===!1){rn(()=>{rE.process(t,e,n,r,s,i,o,a,l,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const v=e.anchor=t.anchor,E=e.target=t.target,k=e.targetAnchor=t.targetAnchor,A=wl(t.props),C=A?n:E,I=A?v:k;if(o==="svg"||o_(E)?o="svg":(o==="mathml"||a_(E))&&(o="mathml"),p?(f(t.dynamicChildren,p,C,s,i,o,a),zg(t,e,!0)):l||d(t,e,C,I,s,i,o,a,!1),x)A?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Ac(e,n,v,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const N=e.target=Fp(e.props,m);N&&Ac(e,N,null,c,0)}else A&&Ac(e,E,k,c,1);iu(e,x)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:d,props:f}=t;if(d&&(s(c),s(u)),i&&s(l),o&16){const h=i||!wl(f);for(let m=0;m<a.length;m++){const y=a[m];r(y,e,n,h,!!y.dynamicChildren)}}},move:Ac,hydrate:ID};function Ac(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,d=i===2;if(d&&r(o,e,n),(!d||wl(u))&&l&16)for(let f=0;f<c.length;f++)s(c[f],e,n,2);d&&r(a,e,n)}function ID(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},d){const f=e.target=Fp(e.props,l);if(f){const h=wl(e.props),m=f._lpa||f.firstChild;if(e.shapeFlag&16)if(h)e.anchor=d(o(t),e,a(t),n,r,s,i),e.targetStart=m,e.targetAnchor=m&&o(m);else{e.anchor=o(t);let y=m;for(;y;){if(y&&y.nodeType===8){if(y.data==="teleport start anchor")e.targetStart=y;else if(y.data==="teleport anchor"){e.targetAnchor=y,f._lpa=e.targetAnchor&&o(e.targetAnchor);break}}y=o(y)}e.targetAnchor||sE(f,e,u,c),d(m&&o(m),e,f,n,r,s,i)}iu(e,h)}return e.anchor&&o(e.anchor)}const Od=rE;function iu(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function sE(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[tE]=i,t&&(r(s,t),r(i,t)),i}const vi=Symbol("_leaveCb"),$c=Symbol("_enterCb");function Rg(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ht(()=>{t.isMounted=!0}),Pa(()=>{t.isUnmounting=!0}),t}const wr=[Function,Array],Tg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:wr,onEnter:wr,onAfterEnter:wr,onEnterCancelled:wr,onBeforeLeave:wr,onLeave:wr,onAfterLeave:wr,onLeaveCancelled:wr,onBeforeAppear:wr,onAppear:wr,onAfterAppear:wr,onAppearCancelled:wr},iE=t=>{const e=t.subTree;return e.component?iE(e.component):e},RD={name:"BaseTransition",props:Tg,setup(t,{slots:e}){const n=Kt(),r=Rg();return()=>{const s=e.default&&Dd(e.default(),!0);if(!s||!s.length)return;const i=oE(s),o=Ze(t),{mode:a}=o;if(r.isLeaving)return Sh(i);const l=l_(i);if(!l)return Sh(i);let c=va(l,o,r,n,d=>c=d);l.type!==Vt&&Qs(l,c);let u=n.subTree&&l_(n.subTree);if(u&&u.type!==Vt&&!qr(l,u)&&iE(n).type!==Vt){let d=va(u,o,r,n);if(Qs(u,d),a==="out-in"&&l.type!==Vt)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,u=void 0},Sh(i);a==="in-out"&&l.type!==Vt?d.delayLeave=(f,h,m)=>{const y=lE(r,u);y[String(u.key)]=u,f[vi]=()=>{h(),f[vi]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{m(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function oE(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Vt){e=n;break}}return e}const aE=RD;function lE(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function va(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:m,onLeaveCancelled:y,onBeforeAppear:S,onAppear:x,onAfterAppear:_,onAppearCancelled:g}=e,p=String(t.key),v=lE(n,t),E=(C,I)=>{C&&Mr(C,r,9,I)},k=(C,I)=>{const N=I[1];E(C,I),Me(C)?C.every(j=>j.length<=1)&&N():C.length<=1&&N()},A={mode:o,persisted:a,beforeEnter(C){let I=l;if(!n.isMounted)if(i)I=S||l;else return;C[vi]&&C[vi](!0);const N=v[p];N&&qr(t,N)&&N.el[vi]&&N.el[vi](),E(I,[C])},enter(C){let I=c,N=u,j=d;if(!n.isMounted)if(i)I=x||c,N=_||u,j=g||d;else return;let V=!1;const L=C[$c]=Z=>{V||(V=!0,Z?E(j,[C]):E(N,[C]),A.delayedLeave&&A.delayedLeave(),C[$c]=void 0)};I?k(I,[C,L]):L()},leave(C,I){const N=String(t.key);if(C[$c]&&C[$c](!0),n.isUnmounting)return I();E(f,[C]);let j=!1;const V=C[vi]=L=>{j||(j=!0,I(),L?E(y,[C]):E(m,[C]),C[vi]=void 0,v[N]===t&&delete v[N])};v[N]=t,h?k(h,[C,V]):V()},clone(C){const I=va(C,e,n,r,s);return s&&s(I),I}};return A}function Sh(t){if(ec(t))return t=Yr(t),t.children=null,t}function l_(t){if(!ec(t))return nE(t.type)&&t.children?oE(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&We(n.default))return n.default()}}function Qs(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Qs(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Dd(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ge?(o.patchFlag&128&&s++,r=r.concat(Dd(o.children,e,a))):(e||o.type!==Vt)&&r.push(a!=null?Yr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function pe(t,e){return We(t)?kt({name:t.name},e,{setup:t}):t}function ou(){const t=Kt();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function Og(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function si(t){const e=Kt(),n=yr(null);if(e){const s=e.refs===it?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>n.value,set:i=>n.value=i})}return n}function ua(t,e,n,r,s=!1){if(Me(t)){t.forEach((m,y)=>ua(m,e&&(Me(e)?e[y]:e),n,r,s));return}if(Di(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ua(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?nc(r.component):r.el,o=s?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===it?a.refs={}:a.refs,d=a.setupState,f=Ze(d),h=d===it?()=>!1:m=>ht(f,m);if(c!=null&&c!==l&&(Ot(c)?(u[c]=null,h(c)&&(d[c]=null)):Pt(c)&&(c.value=null)),We(l))Da(l,a,12,[o,u]);else{const m=Ot(l),y=Pt(l);if(m||y){const S=()=>{if(t.f){const x=m?h(l)?d[l]:u[l]:l.value;s?Me(x)&&_g(x,i):Me(x)?x.includes(i)||x.push(i):m?(u[l]=[i],h(l)&&(d[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else m?(u[l]=o,h(l)&&(d[l]=o)):y&&(l.value=o,t.k&&(u[t.k]=o))};o?(S.id=-1,rn(S,n)):S()}}}let c_=!1;const No=()=>{c_||(console.error("Hydration completed but contains mismatches."),c_=!0)},TD=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",OD=t=>t.namespaceURI.includes("MathML"),Cc=t=>{if(t.nodeType===1){if(TD(t))return"svg";if(OD(t))return"mathml"}},Xo=t=>t.nodeType===8;function DD(t){const{mt:e,p:n,o:{patchProp:r,createText:s,nextSibling:i,parentNode:o,remove:a,insert:l,createComment:c}}=t,u=(g,p)=>{if(!p.hasChildNodes()){n(null,g,p),Tu(),p._vnode=g;return}d(p.firstChild,g,null,null,null),Tu(),p._vnode=g},d=(g,p,v,E,k,A=!1)=>{A=A||!!p.dynamicChildren;const C=Xo(g)&&g.data==="[",I=()=>y(g,p,v,E,k,C),{type:N,ref:j,shapeFlag:V,patchFlag:L}=p;let Z=g.nodeType;p.el=g,L===-2&&(A=!1,p.dynamicChildren=null);let T=null;switch(N){case ps:Z!==3?p.children===""?(l(p.el=s(""),o(g),g),T=g):T=I():(g.data!==p.children&&(No(),g.data=p.children),T=i(g));break;case Vt:_(g)?(T=i(g),x(p.el=g.content.firstChild,g,v)):Z!==8||C?T=I():T=i(g);break;case Pi:if(C&&(g=i(g),Z=g.nodeType),Z===1||Z===3){T=g;const q=!p.children.length;for(let z=0;z<p.staticCount;z++)q&&(p.children+=T.nodeType===1?T.outerHTML:T.data),z===p.staticCount-1&&(p.anchor=T),T=i(T);return C?i(T):T}else I();break;case Ge:C?T=m(g,p,v,E,k,A):T=I();break;default:if(V&1)(Z!==1||p.type.toLowerCase()!==g.tagName.toLowerCase())&&!_(g)?T=I():T=f(g,p,v,E,k,A);else if(V&6){p.slotScopeIds=k;const q=o(g);if(C?T=S(g):Xo(g)&&g.data==="teleport start"?T=S(g,g.data,"teleport end"):T=i(g),e(p,q,null,v,E,Cc(q),A),Di(p)&&!p.type.__asyncResolved){let z;C?(z=K(Ge),z.anchor=T?T.previousSibling:q.lastChild):z=g.nodeType===3?je(""):K("div"),z.el=g,p.component.subTree=z}}else V&64?Z!==8?T=I():T=p.type.hydrate(g,p,v,E,k,A,t,h):V&128&&(T=p.type.hydrate(g,p,v,E,Cc(o(g)),k,A,t,d))}return j!=null&&ua(j,null,E,p),T},f=(g,p,v,E,k,A)=>{A=A||!!p.dynamicChildren;const{type:C,props:I,patchFlag:N,shapeFlag:j,dirs:V,transition:L}=p,Z=C==="input"||C==="option";if(Z||N!==-1){V&&as(p,null,v,"created");let T=!1;if(_(g)){T=PE(null,L)&&v&&v.vnode.props&&v.vnode.props.appear;const z=g.content.firstChild;if(T){const se=z.getAttribute("class");se&&(z.$cls=se),L.beforeEnter(z)}x(z,g,v),p.el=g=z}if(j&16&&!(I&&(I.innerHTML||I.textContent))){let z=h(g.firstChild,p,g,v,E,k,A);for(;z;){kc(g,1)||No();const se=z;z=z.nextSibling,a(se)}}else if(j&8){let z=p.children;z[0]===`
`&&(g.tagName==="PRE"||g.tagName==="TEXTAREA")&&(z=z.slice(1)),g.textContent!==z&&(kc(g,0)||No(),g.textContent=p.children)}if(I){if(Z||!A||N&48){const z=g.tagName.includes("-");for(const se in I)(Z&&(se.endsWith("value")||se==="indeterminate")||Ql(se)&&!oa(se)||se[0]==="."||z)&&r(g,se,null,I[se],void 0,v)}else if(I.onClick)r(g,"onClick",null,I.onClick,void 0,v);else if(N&4&&hs(I.style))for(const z in I.style)I.style[z]}let q;(q=I&&I.onVnodeBeforeMount)&&rr(q,v,p),V&&as(p,null,v,"beforeMount"),((q=I&&I.onVnodeMounted)||V||T)&&VE(()=>{q&&rr(q,v,p),T&&L.enter(g),V&&as(p,null,v,"mounted")},E)}return g.nextSibling},h=(g,p,v,E,k,A,C)=>{C=C||!!p.dynamicChildren;const I=p.children,N=I.length;for(let j=0;j<N;j++){const V=C?I[j]:I[j]=ir(I[j]),L=V.type===ps;g?(L&&!C&&j+1<N&&ir(I[j+1]).type===ps&&(l(s(g.data.slice(V.children.length)),v,i(g)),g.data=V.children),g=d(g,V,E,k,A,C)):L&&!V.children?l(V.el=s(""),v):(kc(v,1)||No(),n(null,V,v,null,E,k,Cc(v),A))}return g},m=(g,p,v,E,k,A)=>{const{slotScopeIds:C}=p;C&&(k=k?k.concat(C):C);const I=o(g),N=h(i(g),p,I,v,E,k,A);return N&&Xo(N)&&N.data==="]"?i(p.anchor=N):(No(),l(p.anchor=c("]"),I,N),N)},y=(g,p,v,E,k,A)=>{if(kc(g.parentElement,1)||No(),p.el=null,A){const N=S(g);for(;;){const j=i(g);if(j&&j!==N)a(j);else break}}const C=i(g),I=o(g);return a(g),n(null,p,I,C,v,E,Cc(I),k),v&&(v.vnode.el=p.el,Fd(v,p.el)),C},S=(g,p="[",v="]")=>{let E=0;for(;g;)if(g=i(g),g&&Xo(g)&&(g.data===p&&E++,g.data===v)){if(E===0)return i(g);E--}return g},x=(g,p,v)=>{const E=p.parentNode;E&&E.replaceChild(g,p);let k=v;for(;k;)k.vnode.el===p&&(k.vnode.el=k.subTree.el=g),k=k.parent},_=g=>g.nodeType===1&&g.tagName==="TEMPLATE";return[u,d]}const u_="data-allow-mismatch",PD={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function kc(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(u_);)t=t.parentElement;const n=t&&t.getAttribute(u_);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:r.includes(PD[e])}}const LD=Sd().requestIdleCallback||(t=>setTimeout(t,1)),MD=Sd().cancelIdleCallback||(t=>clearTimeout(t)),ND=(t=1e4)=>e=>{const n=LD(e,{timeout:t});return()=>MD(n)};function jD(t){const{top:e,left:n,bottom:r,right:s}=t.getBoundingClientRect(),{innerHeight:i,innerWidth:o}=window;return(e>0&&e<i||r>0&&r<i)&&(n>0&&n<o||s>0&&s<o)}const FD=t=>(e,n)=>{const r=new IntersectionObserver(s=>{for(const i of s)if(i.isIntersecting){r.disconnect(),e();break}},t);return n(s=>{if(s instanceof Element){if(jD(s))return e(),r.disconnect(),!1;r.observe(s)}}),()=>r.disconnect()},UD=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},BD=(t=[])=>(e,n)=>{Ot(t)&&(t=[t]);let r=!1;const s=o=>{r||(r=!0,i(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},i=()=>{n(o=>{for(const a of t)o.removeEventListener(a,s)})};return n(o=>{for(const a of t)o.addEventListener(a,s,{once:!0})}),i};function zD(t,e){if(Xo(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(Xo(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const Di=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function VD(t){We(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,u,d=0;const f=()=>(d++,c=null,h()),h=()=>{let m;return c||(m=c=e().catch(y=>{if(y=y instanceof Error?y:new Error(String(y)),l)return new Promise((S,x)=>{l(y,()=>S(f()),()=>x(y),d+1)});throw y}).then(y=>m!==c&&c?c:(y&&(y.__esModule||y[Symbol.toStringTag]==="Module")&&(y=y.default),u=y,y)))};return pe({name:"AsyncComponentWrapper",__asyncLoader:h,__asyncHydrate(m,y,S){const x=i?()=>{const g=i(()=>{S()},p=>zD(m,p));g&&(y.bum||(y.bum=[])).push(g),(y.u||(y.u=[])).push(()=>!0)}:S;u?x():h().then(()=>!y.isUnmounted&&x())},get __asyncResolved(){return u},setup(){const m=sn;if(Og(m),u)return()=>Ah(u,m);const y=g=>{c=null,Ao(g,m,13,!r)};if(a&&m.suspense||ba)return h().then(g=>()=>Ah(g,m)).catch(g=>(y(g),()=>r?K(r,{error:g}):null));const S=xe(!1),x=xe(),_=xe(!!s);return s&&setTimeout(()=>{_.value=!1},s),o!=null&&setTimeout(()=>{if(!S.value&&!x.value){const g=new Error(`Async component timed out after ${o}ms.`);y(g),x.value=g}},o),h().then(()=>{S.value=!0,m.parent&&ec(m.parent.vnode)&&m.parent.update()}).catch(g=>{y(g),x.value=g}),()=>{if(S.value&&u)return Ah(u,m);if(x.value&&r)return K(r,{error:x.value});if(n&&!_.value)return K(n)}}})}function Ah(t,e){const{ref:n,props:r,children:s,ce:i}=e.vnode,o=K(t,r,s);return o.ref=n,o.ce=i,delete e.vnode.ce,o}const ec=t=>t.type.__isKeepAlive,HD={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Kt(),r=n.ctx;if(!r.renderer)return()=>{const _=e.default&&e.default();return _&&_.length===1?_[0]:_};const s=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:d}}}=r,f=d("div");r.activate=(_,g,p,v,E)=>{const k=_.component;c(_,g,p,0,a),l(k.vnode,_,g,p,k,a,v,_.slotScopeIds,E),rn(()=>{k.isDeactivated=!1,k.a&&la(k.a);const A=_.props&&_.props.onVnodeMounted;A&&rr(A,k.parent,_)},a)},r.deactivate=_=>{const g=_.component;Du(g.m),Du(g.a),c(_,f,null,1,a),rn(()=>{g.da&&la(g.da);const p=_.props&&_.props.onVnodeUnmounted;p&&rr(p,g.parent,_),g.isDeactivated=!0},a)};function h(_){$h(_),u(_,n,a,!0)}function m(_){s.forEach((g,p)=>{const v=Xp(g.type);v&&!_(v)&&y(p)})}function y(_){const g=s.get(_);g&&(!o||!qr(g,o))?h(g):o&&$h(o),s.delete(_),i.delete(_)}ot(()=>[t.include,t.exclude],([_,g])=>{_&&m(p=>dl(_,p)),g&&m(p=>!dl(g,p))},{flush:"post",deep:!0});let S=null;const x=()=>{S!=null&&(Pu(n.subTree.type)?rn(()=>{s.set(S,Ic(n.subTree))},n.subTree.suspense):s.set(S,Ic(n.subTree)))};return Ht(x),Ld(x),Pa(()=>{s.forEach(_=>{const{subTree:g,suspense:p}=n,v=Ic(g);if(_.type===v.type&&_.key===v.key){$h(v);const E=v.component.da;E&&rn(E,p);return}h(_)})}),()=>{if(S=null,!e.default)return o=null;const _=e.default(),g=_[0];if(_.length>1)return o=null,_;if(!Zs(g)||!(g.shapeFlag&4)&&!(g.shapeFlag&128))return o=null,g;let p=Ic(g);if(p.type===Vt)return o=null,p;const v=p.type,E=Xp(Di(p)?p.type.__asyncResolved||{}:v),{include:k,exclude:A,max:C}=t;if(k&&(!E||!dl(k,E))||A&&E&&dl(A,E))return p.shapeFlag&=-257,o=p,g;const I=p.key==null?v:p.key,N=s.get(I);return p.el&&(p=Yr(p),g.shapeFlag&128&&(g.ssContent=p)),S=I,N?(p.el=N.el,p.component=N.component,p.transition&&Qs(p,p.transition),p.shapeFlag|=512,i.delete(I),i.add(I)):(i.add(I),C&&i.size>parseInt(C,10)&&y(i.values().next().value)),p.shapeFlag|=256,o=p,Pu(g.type)?g:p}}},qD=HD;function dl(t,e){return Me(t)?t.some(n=>dl(n,e)):Ot(t)?t.split(",").includes(e):CO(t)?(t.lastIndex=0,t.test(e)):!1}function cE(t,e){dE(t,"a",e)}function uE(t,e){dE(t,"da",e)}function dE(t,e,n=sn){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Pd(e,r,n),n){let s=n.parent;for(;s&&s.parent;)ec(s.parent.vnode)&&KD(r,e,n,s),s=s.parent}}function KD(t,e,n,r){const s=Pd(e,t,r,!0);Mn(()=>{_g(r[e],s)},n)}function $h(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Ic(t){return t.shapeFlag&128?t.ssContent:t}function Pd(t,e,n=sn,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Js();const a=vo(n),l=Mr(e,n,t,o);return a(),Ys(),l});return r?s.unshift(i):s.push(i),i}}const ii=t=>(e,n=sn)=>{(!ba||t==="sp")&&Pd(t,(...r)=>e(...r),n)},fE=ii("bm"),Ht=ii("m"),Dg=ii("bu"),Ld=ii("u"),Pa=ii("bum"),Mn=ii("um"),hE=ii("sp"),pE=ii("rtg"),mE=ii("rtc");function gE(t,e=sn){Pd("ec",t,e)}const Pg="components",WD="directives";function Md(t,e){return Lg(Pg,t,!0,e)||t}const yE=Symbol.for("v-ndc");function Ss(t){return Ot(t)?Lg(Pg,t,!1)||t:t||yE}function vE(t){return Lg(WD,t)}function Lg(t,e,n=!0,r=!1){const s=on||sn;if(s){const i=s.type;if(t===Pg){const a=Xp(i,!1);if(a&&(a===e||a===an(e)||a===Zl(an(e))))return i}const o=d_(s[t]||i[t],e)||d_(s.appContext[t],e);return!o&&r?i:o}}function d_(t,e){return t&&(t[e]||t[an(e)]||t[Zl(an(e))])}function Lt(t,e,n,r){let s;const i=n&&n[r],o=Me(t);if(o||Ot(t)){const a=o&&hs(t);let l=!1,c=!1;a&&(l=!hr(t),c=Xs(t),t=Cd(t)),s=new Array(t.length);for(let u=0,d=t.length;u<d;u++)s[u]=e(l?c?Cu(yn(t[u])):yn(t[u]):t[u],u,void 0,i&&i[u])}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i&&i[a])}else if(At(t))if(t[Symbol.iterator])s=Array.from(t,(a,l)=>e(a,l,void 0,i&&i[l]));else{const a=Object.keys(t);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=e(t[u],u,l,i&&i[l])}}else s=[];return n&&(n[r]=s),s}function GD(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(Me(r))for(let s=0;s<r.length;s++)t[r[s].name]=r[s].fn;else r&&(t[r.name]=r.key?(...s)=>{const i=r.fn(...s);return i&&(i.key=r.key),i}:r.fn)}return t}function $e(t,e,n={},r,s){if(on.ce||on.parent&&Di(on.parent)&&on.parent.ce)return e!=="default"&&(n.name=e),O(),ae(Ge,null,[K("slot",n,r&&r())],64);let i=t[e];i&&i._c&&(i._d=!1),O();const o=i&&Mg(i(n)),a=n.key||o&&o.key,l=ae(Ge,{key:(a&&!Jr(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function Mg(t){return t.some(e=>Zs(e)?!(e.type===Vt||e.type===Ge&&!Mg(e.children)):!0)?t:null}function JD(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:aa(r)]=t[r];return n}const Up=t=>t?GE(t)?nc(t):Up(t.parent):null,xl=kt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Up(t.parent),$root:t=>Up(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Fg(t),$forceUpdate:t=>t.f||(t.f=()=>{Ig(t.update)}),$nextTick:t=>t.n||(t.n=Tt.bind(t.proxy)),$watch:t=>_P.bind(t)}),Ch=(t,e)=>t!==it&&!t.__isScriptSetup&&ht(t,e),Bp={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const h=o[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Ch(r,e))return o[e]=1,r[e];if(s!==it&&ht(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&ht(c,e))return o[e]=3,i[e];if(n!==it&&ht(n,e))return o[e]=4,n[e];zp&&(o[e]=0)}}const u=xl[e];let d,f;if(u)return e==="$attrs"&&In(t.attrs,"get",""),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==it&&ht(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,ht(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Ch(s,e)?(s[e]=n,!0):r!==it&&ht(r,e)?(r[e]=n,!0):ht(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==it&&ht(t,o)||Ch(e,o)||(a=i[0])&&ht(a,o)||ht(r,o)||ht(xl,o)||ht(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ht(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},YD=kt({},Bp,{get(t,e){if(e!==Symbol.unscopables)return Bp.get(t,e,t)},has(t,e){return e[0]!=="_"&&!OO(e)}});function XD(){return null}function QD(){return null}function ZD(t){}function eP(t){}function tP(){return null}function nP(){}function rP(t,e){return null}function Nd(){return bE().slots}function Ng(){return bE().attrs}function bE(){const t=Kt();return t.setupContext||(t.setupContext=XE(t))}function Ul(t){return Me(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function jg(t,e){const n=Ul(t);for(const r in e){if(r.startsWith("__skip"))continue;let s=n[r];s?Me(s)||We(s)?s=n[r]={type:s,default:e[r]}:s.default=e[r]:s===null&&(s=n[r]={default:e[r]}),s&&e[`__skip_${r}`]&&(s.skipFactory=!0)}return n}function sP(t,e){return!t||!e?t||e:Me(t)&&Me(e)?t.concat(e):kt({},Ul(t),Ul(e))}function oi(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function iP(t){const e=Kt();let n=t();return Gp(),wg(n)&&(n=n.catch(r=>{throw vo(e),r})),[n,()=>vo(e)]}let zp=!0;function oP(t){const e=Fg(t),n=t.proxy,r=t.ctx;zp=!1,e.beforeCreate&&f_(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:m,activated:y,deactivated:S,beforeDestroy:x,beforeUnmount:_,destroyed:g,unmounted:p,render:v,renderTracked:E,renderTriggered:k,errorCaptured:A,serverPrefetch:C,expose:I,inheritAttrs:N,components:j,directives:V,filters:L}=e;if(c&&aP(c,r,null),o)for(const q in o){const z=o[q];We(z)&&(r[q]=z.bind(n))}if(s){const q=s.call(n,n);At(q)&&(t.data=Jn(q))}if(zp=!0,i)for(const q in i){const z=i[q],se=We(z)?z.bind(n,n):We(z.get)?z.get.bind(n,n):Or,W=!We(z)&&We(z.set)?z.set.bind(n):Or,he=ne({get:se,set:W});Object.defineProperty(r,q,{enumerable:!0,configurable:!0,get:()=>he.value,set:me=>he.value=me})}if(a)for(const q in a)_E(a[q],r,n,q);if(l){const q=We(l)?l.call(n):l;Reflect.ownKeys(q).forEach(z=>{pr(z,q[z])})}u&&f_(u,t,"c");function T(q,z){Me(z)?z.forEach(se=>q(se.bind(n))):z&&q(z.bind(n))}if(T(fE,d),T(Ht,f),T(Dg,h),T(Ld,m),T(cE,y),T(uE,S),T(gE,A),T(mE,E),T(pE,k),T(Pa,_),T(Mn,p),T(hE,C),Me(I))if(I.length){const q=t.exposed||(t.exposed={});I.forEach(z=>{Object.defineProperty(q,z,{get:()=>n[z],set:se=>n[z]=se})})}else t.exposed||(t.exposed={});v&&t.render===Or&&(t.render=v),N!=null&&(t.inheritAttrs=N),j&&(t.components=j),V&&(t.directives=V),C&&Og(t)}function aP(t,e,n=Or){Me(t)&&(t=Vp(t));for(const r in t){const s=t[r];let i;At(s)?"default"in s?i=qt(s.from||r,s.default,!0):i=qt(s.from||r):i=qt(s),Pt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function f_(t,e,n){Mr(Me(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function _E(t,e,n,r){let s=r.includes(".")?FE(n,r):()=>n[r];if(Ot(t)){const i=e[t];We(i)&&ot(s,i)}else if(We(t))ot(s,t.bind(n));else if(At(t))if(Me(t))t.forEach(i=>_E(i,e,n,r));else{const i=We(t.handler)?t.handler.bind(n):e[t.handler];We(i)&&ot(s,i,t)}}function Fg(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(c=>Ou(l,c,o,!0)),Ou(l,e,o)),At(e)&&i.set(e,l),l}function Ou(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Ou(t,i,n,!0),s&&s.forEach(o=>Ou(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=lP[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const lP={data:h_,props:p_,emits:p_,methods:fl,computed:fl,beforeCreate:Fn,created:Fn,beforeMount:Fn,mounted:Fn,beforeUpdate:Fn,updated:Fn,beforeDestroy:Fn,beforeUnmount:Fn,destroyed:Fn,unmounted:Fn,activated:Fn,deactivated:Fn,errorCaptured:Fn,serverPrefetch:Fn,components:fl,directives:fl,watch:uP,provide:h_,inject:cP};function h_(t,e){return e?t?function(){return kt(We(t)?t.call(this,this):t,We(e)?e.call(this,this):e)}:e:t}function cP(t,e){return fl(Vp(t),Vp(e))}function Vp(t){if(Me(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Fn(t,e){return t?[...new Set([].concat(t,e))]:e}function fl(t,e){return t?kt(Object.create(null),t,e):e}function p_(t,e){return t?Me(t)&&Me(e)?[...new Set([...t,...e])]:kt(Object.create(null),Ul(t),Ul(e??{})):e}function uP(t,e){if(!t)return e;if(!e)return t;const n=kt(Object.create(null),t);for(const r in e)n[r]=Fn(t[r],e[r]);return n}function wE(){return{app:null,config:{isNativeTag:AO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let dP=0;function fP(t,e){return function(r,s=null){We(r)||(r=kt({},r)),s!=null&&!At(s)&&(s=null);const i=wE(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:dP++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:ZE,get config(){return i.config},set config(u){},use(u,...d){return o.has(u)||(u&&We(u.install)?(o.add(u),u.install(c,...d)):We(u)&&(o.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,f){if(!l){const h=c._ceVNode||K(r,s);return h.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),d&&e?e(h,u):t(h,u,f),l=!0,c._container=u,u.__vue_app__=c,nc(h.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Mr(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=uo;uo=c;try{return u()}finally{uo=d}}};return c}}let uo=null;function pr(t,e){if(sn){let n=sn.provides;const r=sn.parent&&sn.parent.provides;r===n&&(n=sn.provides=Object.create(r)),n[t]=e}}function qt(t,e,n=!1){const r=sn||on;if(r||uo){let s=uo?uo._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&We(e)?e.call(r&&r.proxy):e}}function xE(){return!!(sn||on||uo)}const EE={},SE=()=>Object.create(EE),AE=t=>Object.getPrototypeOf(t)===EE;function hP(t,e,n,r=!1){const s={},i=SE();t.propsDefaults=Object.create(null),$E(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Cg(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function pP(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Ze(s),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(jd(t.emitsOptions,f))continue;const h=e[f];if(l)if(ht(i,f))h!==i[f]&&(i[f]=h,c=!0);else{const m=an(f);s[m]=Hp(l,a,m,h,t,!1)}else h!==i[f]&&(i[f]=h,c=!0)}}}else{$E(t,e,s,i)&&(c=!0);let u;for(const d in a)(!e||!ht(e,d)&&((u=or(d))===d||!ht(e,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(s[d]=Hp(l,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!ht(e,d))&&(delete i[d],c=!0)}c&&Fs(t.attrs,"set","")}function $E(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(oa(l))continue;const c=e[l];let u;s&&ht(s,u=an(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:jd(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=Ze(n),c=a||it;for(let u=0;u<i.length;u++){const d=i[u];n[d]=Hp(s,l,d,c[d],t,!ht(c,d))}}return o}function Hp(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=ht(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&We(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=vo(s);r=c[n]=l.call(null,e),u()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===or(n))&&(r=!0))}return r}const mP=new WeakMap;function CE(t,e,n=!1){const r=n?mP:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!We(t)){const u=d=>{l=!0;const[f,h]=CE(d,e,!0);kt(o,f),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return At(t)&&r.set(t,sa),sa;if(Me(i))for(let u=0;u<i.length;u++){const d=an(i[u]);m_(d)&&(o[d]=it)}else if(i)for(const u in i){const d=an(u);if(m_(d)){const f=i[u],h=o[d]=Me(f)||We(f)?{type:f}:kt({},f),m=h.type;let y=!1,S=!0;if(Me(m))for(let x=0;x<m.length;++x){const _=m[x],g=We(_)&&_.name;if(g==="Boolean"){y=!0;break}else g==="String"&&(S=!1)}else y=We(m)&&m.name==="Boolean";h[0]=y,h[1]=S,(y||ht(h,"default"))&&a.push(d)}}const c=[o,a];return At(t)&&r.set(t,c),c}function m_(t){return t[0]!=="$"&&!oa(t)}const Ug=t=>t[0]==="_"||t==="$stable",Bg=t=>Me(t)?t.map(ir):[ir(t)],gP=(t,e,n)=>{if(e._n)return e;const r=Y((...s)=>Bg(e(...s)),n);return r._c=!1,r},kE=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Ug(s))continue;const i=t[s];if(We(i))e[s]=gP(s,i,r);else if(i!=null){const o=Bg(i);e[s]=()=>o}}},IE=(t,e)=>{const n=Bg(e);t.slots.default=()=>n},RE=(t,e,n)=>{for(const r in e)(n||!Ug(r))&&(t[r]=e[r])},yP=(t,e,n)=>{const r=t.slots=SE();if(t.vnode.shapeFlag&32){const s=e.__;s&&Lp(r,"__",s,!0);const i=e._;i?(RE(r,e,n),n&&Lp(r,"_",i,!0)):kE(e,r)}else e&&IE(t,e)},vP=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=it;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:RE(s,e,n):(i=!e.$stable,kE(e,s)),o=e}else e&&(IE(t,e),o={default:1});if(i)for(const a in s)!Ug(a)&&o[a]==null&&delete s[a]},rn=VE;function TE(t){return DE(t)}function OE(t){return DE(t,DD)}function DE(t,e){const n=Sd();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=Or,insertStaticContent:m}=t,y=(D,F,le,be=null,ge=null,M=null,H=void 0,oe=null,ye=!!F.dynamicChildren)=>{if(D===F)return;D&&!qr(D,F)&&(be=P(D),me(D,ge,M,!0),D=null),F.patchFlag===-2&&(ye=!1,F.dynamicChildren=null);const{type:we,ref:Se,shapeFlag:X}=F;switch(we){case ps:S(D,F,le,be);break;case Vt:x(D,F,le,be);break;case Pi:D==null&&_(F,le,be,H);break;case Ge:j(D,F,le,be,ge,M,H,oe,ye);break;default:X&1?v(D,F,le,be,ge,M,H,oe,ye):X&6?V(D,F,le,be,ge,M,H,oe,ye):(X&64||X&128)&&we.process(D,F,le,be,ge,M,H,oe,ye,ie)}Se!=null&&ge?ua(Se,D&&D.ref,M,F||D,!F):Se==null&&D&&D.ref!=null&&ua(D.ref,null,M,D,!0)},S=(D,F,le,be)=>{if(D==null)r(F.el=a(F.children),le,be);else{const ge=F.el=D.el;F.children!==D.children&&c(ge,F.children)}},x=(D,F,le,be)=>{D==null?r(F.el=l(F.children||""),le,be):F.el=D.el},_=(D,F,le,be)=>{[D.el,D.anchor]=m(D.children,F,le,be,D.el,D.anchor)},g=({el:D,anchor:F},le,be)=>{let ge;for(;D&&D!==F;)ge=f(D),r(D,le,be),D=ge;r(F,le,be)},p=({el:D,anchor:F})=>{let le;for(;D&&D!==F;)le=f(D),s(D),D=le;s(F)},v=(D,F,le,be,ge,M,H,oe,ye)=>{F.type==="svg"?H="svg":F.type==="math"&&(H="mathml"),D==null?E(F,le,be,ge,M,H,oe,ye):C(D,F,ge,M,H,oe,ye)},E=(D,F,le,be,ge,M,H,oe)=>{let ye,we;const{props:Se,shapeFlag:X,transition:de,dirs:Re}=D;if(ye=D.el=o(D.type,M,Se&&Se.is,Se),X&8?u(ye,D.children):X&16&&A(D.children,ye,null,be,ge,kh(D,M),H,oe),Re&&as(D,null,be,"created"),k(ye,D,D.scopeId,H,be),Se){for(const b in Se)b!=="value"&&!oa(b)&&i(ye,b,null,Se[b],M,be);"value"in Se&&i(ye,"value",null,Se.value,M),(we=Se.onVnodeBeforeMount)&&rr(we,be,D)}Re&&as(D,null,be,"beforeMount");const R=PE(ge,de);R&&de.beforeEnter(ye),r(ye,F,le),((we=Se&&Se.onVnodeMounted)||R||Re)&&rn(()=>{we&&rr(we,be,D),R&&de.enter(ye),Re&&as(D,null,be,"mounted")},ge)},k=(D,F,le,be,ge)=>{if(le&&h(D,le),be)for(let M=0;M<be.length;M++)h(D,be[M]);if(ge){let M=ge.subTree;if(F===M||Pu(M.type)&&(M.ssContent===F||M.ssFallback===F)){const H=ge.vnode;k(D,H,H.scopeId,H.slotScopeIds,ge.parent)}}},A=(D,F,le,be,ge,M,H,oe,ye=0)=>{for(let we=ye;we<D.length;we++){const Se=D[we]=oe?bi(D[we]):ir(D[we]);y(null,Se,F,le,be,ge,M,H,oe)}},C=(D,F,le,be,ge,M,H)=>{const oe=F.el=D.el;let{patchFlag:ye,dynamicChildren:we,dirs:Se}=F;ye|=D.patchFlag&16;const X=D.props||it,de=F.props||it;let Re;if(le&&Qi(le,!1),(Re=de.onVnodeBeforeUpdate)&&rr(Re,le,F,D),Se&&as(F,D,le,"beforeUpdate"),le&&Qi(le,!0),(X.innerHTML&&de.innerHTML==null||X.textContent&&de.textContent==null)&&u(oe,""),we?I(D.dynamicChildren,we,oe,le,be,kh(F,ge),M):H||z(D,F,oe,null,le,be,kh(F,ge),M,!1),ye>0){if(ye&16)N(oe,X,de,le,ge);else if(ye&2&&X.class!==de.class&&i(oe,"class",null,de.class,ge),ye&4&&i(oe,"style",X.style,de.style,ge),ye&8){const R=F.dynamicProps;for(let b=0;b<R.length;b++){const w=R[b],B=X[w],Q=de[w];(Q!==B||w==="value")&&i(oe,w,B,Q,ge,le)}}ye&1&&D.children!==F.children&&u(oe,F.children)}else!H&&we==null&&N(oe,X,de,le,ge);((Re=de.onVnodeUpdated)||Se)&&rn(()=>{Re&&rr(Re,le,F,D),Se&&as(F,D,le,"updated")},be)},I=(D,F,le,be,ge,M,H)=>{for(let oe=0;oe<F.length;oe++){const ye=D[oe],we=F[oe],Se=ye.el&&(ye.type===Ge||!qr(ye,we)||ye.shapeFlag&198)?d(ye.el):le;y(ye,we,Se,null,be,ge,M,H,!0)}},N=(D,F,le,be,ge)=>{if(F!==le){if(F!==it)for(const M in F)!oa(M)&&!(M in le)&&i(D,M,F[M],null,ge,be);for(const M in le){if(oa(M))continue;const H=le[M],oe=F[M];H!==oe&&M!=="value"&&i(D,M,oe,H,ge,be)}"value"in le&&i(D,"value",F.value,le.value,ge)}},j=(D,F,le,be,ge,M,H,oe,ye)=>{const we=F.el=D?D.el:a(""),Se=F.anchor=D?D.anchor:a("");let{patchFlag:X,dynamicChildren:de,slotScopeIds:Re}=F;Re&&(oe=oe?oe.concat(Re):Re),D==null?(r(we,le,be),r(Se,le,be),A(F.children||[],le,Se,ge,M,H,oe,ye)):X>0&&X&64&&de&&D.dynamicChildren?(I(D.dynamicChildren,de,le,ge,M,H,oe),(F.key!=null||ge&&F===ge.subTree)&&zg(D,F,!0)):z(D,F,le,Se,ge,M,H,oe,ye)},V=(D,F,le,be,ge,M,H,oe,ye)=>{F.slotScopeIds=oe,D==null?F.shapeFlag&512?ge.ctx.activate(F,le,be,H,ye):L(F,le,be,ge,M,H,ye):Z(D,F,ye)},L=(D,F,le,be,ge,M,H)=>{const oe=D.component=WE(D,be,ge);if(ec(D)&&(oe.ctx.renderer=ie),JE(oe,!1,H),oe.asyncDep){if(ge&&ge.registerDep(oe,T,H),!D.el){const ye=oe.subTree=K(Vt);x(null,ye,F,le)}}else T(oe,D,F,le,ge,M,H)},Z=(D,F,le)=>{const be=F.component=D.component;if($P(D,F,le))if(be.asyncDep&&!be.asyncResolved){q(be,F,le);return}else be.next=F,be.update();else F.el=D.el,be.vnode=F},T=(D,F,le,be,ge,M,H)=>{const oe=()=>{if(D.isMounted){let{next:X,bu:de,u:Re,parent:R,vnode:b}=D;{const _e=LE(D);if(_e){X&&(X.el=b.el,q(D,X,H)),_e.asyncDep.then(()=>{D.isUnmounted||oe()});return}}let w=X,B;Qi(D,!1),X?(X.el=b.el,q(D,X,H)):X=b,de&&la(de),(B=X.props&&X.props.onVnodeBeforeUpdate)&&rr(B,R,X,b),Qi(D,!0);const Q=au(D),fe=D.subTree;D.subTree=Q,y(fe,Q,d(fe.el),P(fe),D,ge,M),X.el=Q.el,w===null&&Fd(D,Q.el),Re&&rn(Re,ge),(B=X.props&&X.props.onVnodeUpdated)&&rn(()=>rr(B,R,X,b),ge)}else{let X;const{el:de,props:Re}=F,{bm:R,m:b,parent:w,root:B,type:Q}=D,fe=Di(F);if(Qi(D,!1),R&&la(R),!fe&&(X=Re&&Re.onVnodeBeforeMount)&&rr(X,w,F),Qi(D,!0),de&&ke){const _e=()=>{D.subTree=au(D),ke(de,D.subTree,D,ge,null)};fe&&Q.__asyncHydrate?Q.__asyncHydrate(de,D,_e):_e()}else{B.ce&&B.ce._def.shadowRoot!==!1&&B.ce._injectChildStyle(Q);const _e=D.subTree=au(D);y(null,_e,le,be,D,ge,M),F.el=_e.el}if(b&&rn(b,ge),!fe&&(X=Re&&Re.onVnodeMounted)){const _e=F;rn(()=>rr(X,w,_e),ge)}(F.shapeFlag&256||w&&Di(w.vnode)&&w.vnode.shapeFlag&256)&&D.a&&rn(D.a,ge),D.isMounted=!0,F=le=be=null}};D.scope.on();const ye=D.effect=new Pl(oe);D.scope.off();const we=D.update=ye.run.bind(ye),Se=D.job=ye.runIfDirty.bind(ye);Se.i=D,Se.id=D.uid,ye.scheduler=()=>Ig(Se),Qi(D,!0),we()},q=(D,F,le)=>{F.component=D;const be=D.vnode.props;D.vnode=F,D.next=null,pP(D,F.props,be,le),vP(D,F.children,le),Js(),s_(D),Ys()},z=(D,F,le,be,ge,M,H,oe,ye=!1)=>{const we=D&&D.children,Se=D?D.shapeFlag:0,X=F.children,{patchFlag:de,shapeFlag:Re}=F;if(de>0){if(de&128){W(we,X,le,be,ge,M,H,oe,ye);return}else if(de&256){se(we,X,le,be,ge,M,H,oe,ye);return}}Re&8?(Se&16&&G(we,ge,M),X!==we&&u(le,X)):Se&16?Re&16?W(we,X,le,be,ge,M,H,oe,ye):G(we,ge,M,!0):(Se&8&&u(le,""),Re&16&&A(X,le,be,ge,M,H,oe,ye))},se=(D,F,le,be,ge,M,H,oe,ye)=>{D=D||sa,F=F||sa;const we=D.length,Se=F.length,X=Math.min(we,Se);let de;for(de=0;de<X;de++){const Re=F[de]=ye?bi(F[de]):ir(F[de]);y(D[de],Re,le,null,ge,M,H,oe,ye)}we>Se?G(D,ge,M,!0,!1,X):A(F,le,be,ge,M,H,oe,ye,X)},W=(D,F,le,be,ge,M,H,oe,ye)=>{let we=0;const Se=F.length;let X=D.length-1,de=Se-1;for(;we<=X&&we<=de;){const Re=D[we],R=F[we]=ye?bi(F[we]):ir(F[we]);if(qr(Re,R))y(Re,R,le,null,ge,M,H,oe,ye);else break;we++}for(;we<=X&&we<=de;){const Re=D[X],R=F[de]=ye?bi(F[de]):ir(F[de]);if(qr(Re,R))y(Re,R,le,null,ge,M,H,oe,ye);else break;X--,de--}if(we>X){if(we<=de){const Re=de+1,R=Re<Se?F[Re].el:be;for(;we<=de;)y(null,F[we]=ye?bi(F[we]):ir(F[we]),le,R,ge,M,H,oe,ye),we++}}else if(we>de)for(;we<=X;)me(D[we],ge,M,!0),we++;else{const Re=we,R=we,b=new Map;for(we=R;we<=de;we++){const Xe=F[we]=ye?bi(F[we]):ir(F[we]);Xe.key!=null&&b.set(Xe.key,we)}let w,B=0;const Q=de-R+1;let fe=!1,_e=0;const He=new Array(Q);for(we=0;we<Q;we++)He[we]=0;for(we=Re;we<=X;we++){const Xe=D[we];if(B>=Q){me(Xe,ge,M,!0);continue}let et;if(Xe.key!=null)et=b.get(Xe.key);else for(w=R;w<=de;w++)if(He[w-R]===0&&qr(Xe,F[w])){et=w;break}et===void 0?me(Xe,ge,M,!0):(He[et-R]=we+1,et>=_e?_e=et:fe=!0,y(Xe,F[et],le,null,ge,M,H,oe,ye),B++)}const ct=fe?bP(He):sa;for(w=ct.length-1,we=Q-1;we>=0;we--){const Xe=R+we,et=F[Xe],ut=Xe+1<Se?F[Xe+1].el:be;He[we]===0?y(null,et,le,ut,ge,M,H,oe,ye):fe&&(w<0||we!==ct[w]?he(et,le,ut,2):w--)}}},he=(D,F,le,be,ge=null)=>{const{el:M,type:H,transition:oe,children:ye,shapeFlag:we}=D;if(we&6){he(D.component.subTree,F,le,be);return}if(we&128){D.suspense.move(F,le,be);return}if(we&64){H.move(D,F,le,ie);return}if(H===Ge){r(M,F,le);for(let X=0;X<ye.length;X++)he(ye[X],F,le,be);r(D.anchor,F,le);return}if(H===Pi){g(D,F,le);return}if(be!==2&&we&1&&oe)if(be===0)oe.beforeEnter(M),r(M,F,le),rn(()=>oe.enter(M),ge);else{const{leave:X,delayLeave:de,afterLeave:Re}=oe,R=()=>{D.ctx.isUnmounted?s(M):r(M,F,le)},b=()=>{X(M,()=>{R(),Re&&Re()})};de?de(M,R,b):b()}else r(M,F,le)},me=(D,F,le,be=!1,ge=!1)=>{const{type:M,props:H,ref:oe,children:ye,dynamicChildren:we,shapeFlag:Se,patchFlag:X,dirs:de,cacheIndex:Re}=D;if(X===-2&&(ge=!1),oe!=null&&(Js(),ua(oe,null,le,D,!0),Ys()),Re!=null&&(F.renderCache[Re]=void 0),Se&256){F.ctx.deactivate(D);return}const R=Se&1&&de,b=!Di(D);let w;if(b&&(w=H&&H.onVnodeBeforeUnmount)&&rr(w,F,D),Se&6)J(D.component,le,be);else{if(Se&128){D.suspense.unmount(le,be);return}R&&as(D,null,F,"beforeUnmount"),Se&64?D.type.remove(D,F,le,ie,be):we&&!we.hasOnce&&(M!==Ge||X>0&&X&64)?G(we,F,le,!1,!0):(M===Ge&&X&384||!ge&&Se&16)&&G(ye,F,le),be&&ve(D)}(b&&(w=H&&H.onVnodeUnmounted)||R)&&rn(()=>{w&&rr(w,F,D),R&&as(D,null,F,"unmounted")},le)},ve=D=>{const{type:F,el:le,anchor:be,transition:ge}=D;if(F===Ge){Ce(le,be);return}if(F===Pi){p(D);return}const M=()=>{s(le),ge&&!ge.persisted&&ge.afterLeave&&ge.afterLeave()};if(D.shapeFlag&1&&ge&&!ge.persisted){const{leave:H,delayLeave:oe}=ge,ye=()=>H(le,M);oe?oe(D.el,M,ye):ye()}else M()},Ce=(D,F)=>{let le;for(;D!==F;)le=f(D),s(D),D=le;s(F)},J=(D,F,le)=>{const{bum:be,scope:ge,job:M,subTree:H,um:oe,m:ye,a:we,parent:Se,slots:{__:X}}=D;Du(ye),Du(we),be&&la(be),Se&&Me(X)&&X.forEach(de=>{Se.renderCache[de]=void 0}),ge.stop(),M&&(M.flags|=8,me(H,D,F,le)),oe&&rn(oe,F),rn(()=>{D.isUnmounted=!0},F),F&&F.pendingBranch&&!F.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===F.pendingId&&(F.deps--,F.deps===0&&F.resolve())},G=(D,F,le,be=!1,ge=!1,M=0)=>{for(let H=M;H<D.length;H++)me(D[H],F,le,be,ge)},P=D=>{if(D.shapeFlag&6)return P(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const F=f(D.anchor||D.el),le=F&&F[tE];return le?f(le):F};let ee=!1;const ce=(D,F,le)=>{D==null?F._vnode&&me(F._vnode,null,null,!0):y(F._vnode||null,D,F,null,null,null,le),F._vnode=D,ee||(ee=!0,s_(),Tu(),ee=!1)},ie={p:y,um:me,m:he,r:ve,mt:L,mc:A,pc:z,pbc:I,n:P,o:t};let Ee,ke;return e&&([Ee,ke]=e(ie)),{render:ce,hydrate:Ee,createApp:fP(ce,Ee)}}function kh({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Qi({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function PE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function zg(t,e,n=!1){const r=t.children,s=e.children;if(Me(r)&&Me(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=bi(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&zg(o,a)),a.type===ps&&(a.el=o.el),a.type===Vt&&!a.el&&(a.el=o.el)}}function bP(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function LE(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:LE(e)}function Du(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const ME=Symbol.for("v-scx"),NE=()=>qt(ME);function Dt(t,e){return tc(t,null,e)}function Vg(t,e){return tc(t,null,{flush:"post"})}function jE(t,e){return tc(t,null,{flush:"sync"})}function ot(t,e,n){return tc(t,e,n)}function tc(t,e,n=it){const{immediate:r,deep:s,flush:i,once:o}=n,a=kt({},n),l=e&&r||!e&&i!=="post";let c;if(ba){if(i==="sync"){const h=NE();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Or,h.resume=Or,h.pause=Or,h}}const u=sn;a.call=(h,m,y)=>Mr(h,u,m,y);let d=!1;i==="post"?a.scheduler=h=>{rn(h,u&&u.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(h,m)=>{m?h():Ig(h)}),a.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const f=vD(t,e,a);return ba&&(c?c.push(f):l&&f()),f}function _P(t,e,n){const r=this.proxy,s=Ot(t)?t.includes(".")?FE(r,t):()=>r[t]:t.bind(r,r);let i;We(e)?i=e:(i=e.handler,n=e);const o=vo(this),a=tc(s,i.bind(r),n);return o(),a}function FE(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function wP(t,e,n=it){const r=Kt(),s=an(e),i=or(e),o=UE(t,s),a=So((l,c)=>{let u,d=it,f;return jE(()=>{const h=t[s];zn(u,h)&&(u=h,c())}),{get(){return l(),n.get?n.get(u):u},set(h){const m=n.set?n.set(h):h;if(!zn(m,u)&&!(d!==it&&zn(h,d)))return;const y=r.vnode.props;y&&(e in y||s in y||i in y)&&(`onUpdate:${e}`in y||`onUpdate:${s}`in y||`onUpdate:${i}`in y)||(u=h,c()),r.emit(`update:${e}`,m),zn(h,m)&&zn(h,d)&&!zn(m,f)&&c(),d=h,f=m}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||it:a,done:!1}:{done:!0}}}},a}const UE=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${an(e)}Modifiers`]||t[`${or(e)}Modifiers`];function xP(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||it;let s=n;const i=e.startsWith("update:"),o=i&&UE(r,e.slice(7));o&&(o.trim&&(s=n.map(u=>Ot(u)?u.trim():u)),o.number&&(s=n.map(Su)));let a,l=r[a=aa(e)]||r[a=aa(an(e))];!l&&i&&(l=r[a=aa(or(e))]),l&&Mr(l,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Mr(c,t,6,s)}}function BE(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!We(t)){const l=c=>{const u=BE(c,e,!0);u&&(a=!0,kt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(At(t)&&r.set(t,null),null):(Me(i)?i.forEach(l=>o[l]=null):kt(o,i),At(t)&&r.set(t,o),o)}function jd(t,e){return!t||!Ql(e)?!1:(e=e.slice(2).replace(/Once$/,""),ht(t,e[0].toLowerCase()+e.slice(1))||ht(t,or(e))||ht(t,e))}function au(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:h,ctx:m,inheritAttrs:y}=t,S=Fl(t);let x,_;try{if(n.shapeFlag&4){const p=s||r,v=p;x=ir(c.call(v,p,u,d,h,f,m)),_=a}else{const p=e;x=ir(p.length>1?p(d,{attrs:a,slots:o,emit:l}):p(d,null)),_=e.props?a:SP(a)}}catch(p){El.length=0,Ao(p,t,1),x=K(Vt)}let g=x;if(_&&y!==!1){const p=Object.keys(_),{shapeFlag:v}=g;p.length&&v&7&&(i&&p.some(bg)&&(_=AP(_,i)),g=Yr(g,_,!1,!0))}return n.dirs&&(g=Yr(g,null,!1,!0),g.dirs=g.dirs?g.dirs.concat(n.dirs):n.dirs),n.transition&&Qs(g,n.transition),x=g,Fl(S),x}function EP(t,e=!0){let n;for(let r=0;r<t.length;r++){const s=t[r];if(Zs(s)){if(s.type!==Vt||s.children==="v-if"){if(n)return;n=s}}else return}return n}const SP=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ql(n))&&((e||(e={}))[n]=t[n]);return e},AP=(t,e)=>{const n={};for(const r in t)(!bg(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function $P(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?g_(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==r[f]&&!jd(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?g_(r,o,c):!0:!!o;return!1}function g_(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!jd(n,i))return!0}return!1}function Fd({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Pu=t=>t.__isSuspense;let qp=0;const CP={name:"Suspense",__isSuspense:!0,process(t,e,n,r,s,i,o,a,l,c){if(t==null)IP(e,n,r,s,i,o,a,l,c);else{if(i&&i.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}RP(t,e,n,r,s,o,a,l,c)}},hydrate:TP,normalize:OP},kP=CP;function Bl(t,e){const n=t.props&&t.props[e];We(n)&&n()}function IP(t,e,n,r,s,i,o,a,l){const{p:c,o:{createElement:u}}=l,d=u("div"),f=t.suspense=zE(t,s,r,e,d,n,i,o,a,l);c(null,f.pendingBranch=t.ssContent,d,null,r,f,i,o),f.deps>0?(Bl(t,"onPending"),Bl(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,i,o),da(f,t.ssFallback)):f.resolve(!1,!0)}function RP(t,e,n,r,s,i,o,a,{p:l,um:c,o:{createElement:u}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const f=e.ssContent,h=e.ssFallback,{activeBranch:m,pendingBranch:y,isInFallback:S,isHydrating:x}=d;if(y)d.pendingBranch=f,qr(f,y)?(l(y,f,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0?d.resolve():S&&(x||(l(m,h,n,r,s,null,i,o,a),da(d,h)))):(d.pendingId=qp++,x?(d.isHydrating=!1,d.activeBranch=y):c(y,s,d),d.deps=0,d.effects.length=0,d.hiddenContainer=u("div"),S?(l(null,f,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0?d.resolve():(l(m,h,n,r,s,null,i,o,a),da(d,h))):m&&qr(f,m)?(l(m,f,n,r,s,d,i,o,a),d.resolve(!0)):(l(null,f,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0&&d.resolve()));else if(m&&qr(f,m))l(m,f,n,r,s,d,i,o,a),da(d,f);else if(Bl(e,"onPending"),d.pendingBranch=f,f.shapeFlag&512?d.pendingId=f.component.suspenseId:d.pendingId=qp++,l(null,f,d.hiddenContainer,null,s,d,i,o,a),d.deps<=0)d.resolve();else{const{timeout:_,pendingId:g}=d;_>0?setTimeout(()=>{d.pendingId===g&&d.fallback(h)},_):_===0&&d.fallback(h)}}function zE(t,e,n,r,s,i,o,a,l,c,u=!1){const{p:d,m:f,um:h,n:m,o:{parentNode:y,remove:S}}=c;let x;const _=DP(t);_&&e&&e.pendingBranch&&(x=e.pendingId,e.deps++);const g=t.props?Au(t.props.timeout):void 0,p=i,v={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:s,deps:0,pendingId:qp++,timeout:typeof g=="number"?g:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(E=!1,k=!1){const{vnode:A,activeBranch:C,pendingBranch:I,pendingId:N,effects:j,parentComponent:V,container:L}=v;let Z=!1;v.isHydrating?v.isHydrating=!1:E||(Z=C&&I.transition&&I.transition.mode==="out-in",Z&&(C.transition.afterLeave=()=>{N===v.pendingId&&(f(I,L,i===p?m(C):i,0),Nl(j))}),C&&(y(C.el)===L&&(i=m(C)),h(C,V,v,!0)),Z||f(I,L,i,0)),da(v,I),v.pendingBranch=null,v.isInFallback=!1;let T=v.parent,q=!1;for(;T;){if(T.pendingBranch){T.effects.push(...j),q=!0;break}T=T.parent}!q&&!Z&&Nl(j),v.effects=[],_&&e&&e.pendingBranch&&x===e.pendingId&&(e.deps--,e.deps===0&&!k&&e.resolve()),Bl(A,"onResolve")},fallback(E){if(!v.pendingBranch)return;const{vnode:k,activeBranch:A,parentComponent:C,container:I,namespace:N}=v;Bl(k,"onFallback");const j=m(A),V=()=>{v.isInFallback&&(d(null,E,I,j,C,null,N,a,l),da(v,E))},L=E.transition&&E.transition.mode==="out-in";L&&(A.transition.afterLeave=V),v.isInFallback=!0,h(A,C,null,!0),L||V()},move(E,k,A){v.activeBranch&&f(v.activeBranch,E,k,A),v.container=E},next(){return v.activeBranch&&m(v.activeBranch)},registerDep(E,k,A){const C=!!v.pendingBranch;C&&v.deps++;const I=E.vnode.el;E.asyncDep.catch(N=>{Ao(N,E,0)}).then(N=>{if(E.isUnmounted||v.isUnmounted||v.pendingId!==E.suspenseId)return;E.asyncResolved=!0;const{vnode:j}=E;Jp(E,N,!1),I&&(j.el=I);const V=!I&&E.subTree.el;k(E,j,y(I||E.subTree.el),I?null:m(E.subTree),v,o,A),V&&S(V),Fd(E,j.el),C&&--v.deps===0&&v.resolve()})},unmount(E,k){v.isUnmounted=!0,v.activeBranch&&h(v.activeBranch,n,E,k),v.pendingBranch&&h(v.pendingBranch,n,E,k)}};return v}function TP(t,e,n,r,s,i,o,a,l){const c=e.suspense=zE(e,r,n,t.parentNode,document.createElement("div"),null,s,i,o,a,!0),u=l(t,c.pendingBranch=e.ssContent,n,c,i,o);return c.deps===0&&c.resolve(!1,!0),u}function OP(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=y_(r?n.default:n),t.ssFallback=r?y_(n.fallback):K(Vt)}function y_(t){let e;if(We(t)){const n=yo&&t._c;n&&(t._d=!1,O()),t=t(),n&&(t._d=!0,e=Dn,HE())}return Me(t)&&(t=EP(t)),t=ir(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function VE(t,e){e&&e.pendingBranch?Me(t)?e.effects.push(...t):e.effects.push(t):Nl(t)}function da(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,r&&r.subTree===n&&(r.vnode.el=s,Fd(r,s))}function DP(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Ge=Symbol.for("v-fgt"),ps=Symbol.for("v-txt"),Vt=Symbol.for("v-cmt"),Pi=Symbol.for("v-stc"),El=[];let Dn=null;function O(t=!1){El.push(Dn=t?null:[])}function HE(){El.pop(),Dn=El[El.length-1]||null}let yo=1;function Kp(t,e=!1){yo+=t,t<0&&Dn&&e&&(Dn.hasOnce=!0)}function qE(t){return t.dynamicChildren=yo>0?Dn||sa:null,HE(),yo>0&&Dn&&Dn.push(t),t}function re(t,e,n,r,s,i){return qE(U(t,e,n,r,s,i,!0))}function ae(t,e,n,r,s){return qE(K(t,e,n,r,s,!0))}function Zs(t){return t?t.__v_isVNode===!0:!1}function qr(t,e){return t.type===e.type&&t.key===e.key}function PP(t){}const KE=({key:t})=>t??null,lu=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ot(t)||Pt(t)||We(t)?{i:on,r:t,k:e,f:!!n}:t:null);function U(t,e=null,n=null,r=0,s=null,i=t===Ge?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&KE(e),ref:e&&lu(e),scopeId:Td,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:on};return a?(Hg(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Ot(n)?8:16),yo>0&&!o&&Dn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Dn.push(l),l}const K=LP;function LP(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===yE)&&(t=Vt),Zs(t)){const a=Yr(t,e,!0);return n&&Hg(a,n),yo>0&&!i&&Dn&&(a.shapeFlag&6?Dn[Dn.indexOf(t)]=a:Dn.push(a)),a.patchFlag=-2,a}if(VP(t)&&(t=t.__vccOpts),e){e=tr(e);let{class:a,style:l}=e;a&&!Ot(a)&&(e.class=Je(a)),At(l)&&(Rd(l)&&!Me(l)&&(l=kt({},l)),e.style=xs(l))}const o=Ot(t)?1:Pu(t)?128:nE(t)?64:At(t)?4:We(t)?2:0;return U(t,e,n,r,s,o,i,!0)}function tr(t){return t?Rd(t)||AE(t)?kt({},t):t:null}function Yr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?Ve(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&KE(c),ref:e&&e.ref?n&&i?Me(i)?i.concat(lu(e)):[i,lu(e)]:lu(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ge?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Yr(t.ssContent),ssFallback:t.ssFallback&&Yr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Qs(u,l.clone(u)),u}function je(t=" ",e=0){return K(ps,null,t,e)}function MP(t,e){const n=K(Pi,null,t);return n.staticCount=e,n}function Te(t="",e=!1){return e?(O(),ae(Vt,null,t)):K(Vt,null,t)}function ir(t){return t==null||typeof t=="boolean"?K(Vt):Me(t)?K(Ge,null,t.slice()):Zs(t)?bi(t):K(ps,null,String(t))}function bi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Yr(t)}function Hg(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Me(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Hg(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!AE(e)?e._ctx=on:s===3&&on&&(on.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else We(e)?(e={default:e,_ctx:on},n=32):(e=String(e),r&64?(n=16,e=[je(e)]):n=8);t.children=e,t.shapeFlag|=n}function Ve(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Je([e.class,r.class]));else if(s==="style")e.style=xs([e.style,r.style]);else if(Ql(s)){const i=e[s],o=r[s];o&&i!==o&&!(Me(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function rr(t,e,n,r=null){Mr(t,e,7,[n,r])}const NP=wE();let jP=0;function WE(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||NP,i={uid:jP++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Eg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:CE(r,s),emitsOptions:BE(r,s),emit:null,emitted:null,propsDefaults:it,inheritAttrs:r.inheritAttrs,ctx:it,data:it,props:it,attrs:it,slots:it,refs:it,setupState:it,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=xP.bind(null,i),t.ce&&t.ce(i),i}let sn=null;const Kt=()=>sn||on;let Lu,Wp;{const t=Sd(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Lu=e("__VUE_INSTANCE_SETTERS__",n=>sn=n),Wp=e("__VUE_SSR_SETTERS__",n=>ba=n)}const vo=t=>{const e=sn;return Lu(t),t.scope.on(),()=>{t.scope.off(),Lu(e)}},Gp=()=>{sn&&sn.scope.off(),Lu(null)};function GE(t){return t.vnode.shapeFlag&4}let ba=!1;function JE(t,e=!1,n=!1){e&&Wp(e);const{props:r,children:s}=t.vnode,i=GE(t);hP(t,r,i,e),yP(t,s,n||e);const o=i?FP(t,e):void 0;return e&&Wp(!1),o}function FP(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Bp);const{setup:r}=n;if(r){Js();const s=t.setupContext=r.length>1?XE(t):null,i=vo(t),o=Da(r,t,0,[t.props,s]),a=wg(o);if(Ys(),i(),(a||t.sp)&&!Di(t)&&Og(t),a){if(o.then(Gp,Gp),e)return o.then(l=>{Jp(t,l,e)}).catch(l=>{Ao(l,t,0)});t.asyncDep=o}else Jp(t,o,e)}else YE(t,e)}function Jp(t,e,n){We(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:At(e)&&(t.setupState=kg(e)),YE(t,n)}let Mu,Yp;function UP(t){Mu=t,Yp=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,YD))}}const BP=()=>!Mu;function YE(t,e,n){const r=t.type;if(!t.render){if(!e&&Mu&&!r.render){const s=r.template||Fg(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=kt(kt({isCustomElement:i,delimiters:a},o),l);r.render=Mu(s,c)}}t.render=r.render||Or,Yp&&Yp(t)}{const s=vo(t);Js();try{oP(t)}finally{Ys(),s()}}}const zP={get(t,e){return In(t,"get",""),t[e]}};function XE(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,zP),slots:t.slots,emit:t.emit,expose:e}}function nc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(kg(Ue(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in xl)return xl[n](t)},has(e,n){return n in e||n in xl}})):t.proxy}function Xp(t,e=!0){return We(t)?t.displayName||t.name:t.name||e&&t.__name}function VP(t){return We(t)&&"__vccOpts"in t}const ne=(t,e)=>pD(t,e,ba);function Yn(t,e,n){const r=arguments.length;return r===2?At(e)&&!Me(e)?Zs(e)?K(t,null,[e]):K(t,e):K(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Zs(n)&&(n=[n]),K(t,e,n))}function HP(){}function qP(t,e,n,r){const s=n[r];if(s&&QE(s,t))return s;const i=e();return i.memo=t.slice(),i.cacheIndex=r,n[r]=i}function QE(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(zn(n[r],e[r]))return!1;return yo>0&&Dn&&Dn.push(t),!0}const ZE="3.5.17",KP=Or,WP=ED,GP=Ko,JP=eE,YP={createComponentInstance:WE,setupComponent:JE,renderComponentRoot:au,setCurrentRenderingInstance:Fl,isVNode:Zs,normalizeVNode:ir,getComponentPublicInstance:nc,ensureValidVNode:Mg,pushWarningContext:bD,popWarningContext:_D},XP=YP,QP=null,ZP=null,eL=null;/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qp;const v_=typeof window<"u"&&window.trustedTypes;if(v_)try{Qp=v_.createPolicy("vue",{createHTML:t=>t})}catch{}const eS=Qp?t=>Qp.createHTML(t):t=>t,tL="http://www.w3.org/2000/svg",nL="http://www.w3.org/1998/Math/MathML",Ns=typeof document<"u"?document:null,b_=Ns&&Ns.createElement("template"),rL={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Ns.createElementNS(tL,t):e==="mathml"?Ns.createElementNS(nL,t):n?Ns.createElement(t,{is:n}):Ns.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Ns.createTextNode(t),createComment:t=>Ns.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ns.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{b_.innerHTML=eS(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=b_.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ci="transition",Ya="animation",_a=Symbol("_vtc"),tS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},nS=kt({},Tg,tS),sL=t=>(t.displayName="Transition",t.props=nS,t),iL=sL((t,{slots:e})=>Yn(aE,rS(t),e)),Zi=(t,e=[])=>{Me(t)?t.forEach(n=>n(...e)):t&&t(...e)},__=t=>t?Me(t)?t.some(e=>e.length>1):t.length>1:!1;function rS(t){const e={};for(const j in t)j in tS||(e[j]=t[j]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=t,m=oL(s),y=m&&m[0],S=m&&m[1],{onBeforeEnter:x,onEnter:_,onEnterCancelled:g,onLeave:p,onLeaveCancelled:v,onBeforeAppear:E=x,onAppear:k=_,onAppearCancelled:A=g}=e,C=(j,V,L,Z)=>{j._enterCancelled=Z,hi(j,V?u:a),hi(j,V?c:o),L&&L()},I=(j,V)=>{j._isLeaving=!1,hi(j,d),hi(j,h),hi(j,f),V&&V()},N=j=>(V,L)=>{const Z=j?k:_,T=()=>C(V,j,L);Zi(Z,[V,T]),w_(()=>{hi(V,j?l:i),ss(V,j?u:a),__(Z)||x_(V,r,y,T)})};return kt(e,{onBeforeEnter(j){Zi(x,[j]),ss(j,i),ss(j,o)},onBeforeAppear(j){Zi(E,[j]),ss(j,l),ss(j,c)},onEnter:N(!1),onAppear:N(!0),onLeave(j,V){j._isLeaving=!0;const L=()=>I(j,V);ss(j,d),j._enterCancelled?(ss(j,f),Zp()):(Zp(),ss(j,f)),w_(()=>{j._isLeaving&&(hi(j,d),ss(j,h),__(p)||x_(j,r,S,L))}),Zi(p,[j,L])},onEnterCancelled(j){C(j,!1,void 0,!0),Zi(g,[j])},onAppearCancelled(j){C(j,!0,void 0,!0),Zi(A,[j])},onLeaveCancelled(j){I(j),Zi(v,[j])}})}function oL(t){if(t==null)return null;if(At(t))return[Ih(t.enter),Ih(t.leave)];{const e=Ih(t);return[e,e]}}function Ih(t){return Au(t)}function ss(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[_a]||(t[_a]=new Set)).add(e)}function hi(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[_a];n&&(n.delete(e),n.size||(t[_a]=void 0))}function w_(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let aL=0;function x_(t,e,n,r){const s=t._endId=++aL,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=sS(t,e);if(!o)return r();const c=o+"end";let u=0;const d=()=>{t.removeEventListener(c,f),i()},f=h=>{h.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,f)}function sS(t,e){const n=window.getComputedStyle(t),r=m=>(n[m]||"").split(", "),s=r(`${ci}Delay`),i=r(`${ci}Duration`),o=E_(s,i),a=r(`${Ya}Delay`),l=r(`${Ya}Duration`),c=E_(a,l);let u=null,d=0,f=0;e===ci?o>0&&(u=ci,d=o,f=i.length):e===Ya?c>0&&(u=Ya,d=c,f=l.length):(d=Math.max(o,c),u=d>0?o>c?ci:Ya:null,f=u?u===ci?i.length:l.length:0);const h=u===ci&&/\b(transform|all)(,|$)/.test(r(`${ci}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:h}}function E_(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>S_(n)+S_(t[r])))}function S_(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Zp(){return document.body.offsetHeight}function lL(t,e,n){const r=t[_a];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Nu=Symbol("_vod"),iS=Symbol("_vsh"),oS={beforeMount(t,{value:e},{transition:n}){t[Nu]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Xa(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Xa(t,!0),r.enter(t)):r.leave(t,()=>{Xa(t,!1)}):Xa(t,e))},beforeUnmount(t,{value:e}){Xa(t,e)}};function Xa(t,e){t.style.display=e?t[Nu]:"none",t[iS]=!e}function cL(){oS.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const aS=Symbol("");function uL(t){const e=Kt();if(!e)return;const n=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>ju(i,s))},r=()=>{const s=t(e.proxy);e.ce?ju(e.ce,s):em(e.subTree,s),n(s)};Dg(()=>{Nl(r)}),Ht(()=>{ot(r,Or,{flush:"post"});const s=new MutationObserver(r);s.observe(e.subTree.el.parentNode,{childList:!0}),Mn(()=>s.disconnect())})}function em(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{em(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)ju(t.el,e);else if(t.type===Ge)t.children.forEach(n=>em(n,e));else if(t.type===Pi){let{el:n,anchor:r}=t;for(;n&&(ju(n,e),n!==r);)n=n.nextSibling}}function ju(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const s in e)n.setProperty(`--${s}`,e[s]),r+=`--${s}: ${e[s]};`;n[aS]=r}}const dL=/(^|;)\s*display\s*:/;function fL(t,e,n){const r=t.style,s=Ot(n);let i=!1;if(n&&!s){if(e)if(Ot(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&cu(r,a,"")}else for(const o in e)n[o]==null&&cu(r,o,"");for(const o in n)o==="display"&&(i=!0),cu(r,o,n[o])}else if(s){if(e!==n){const o=r[aS];o&&(n+=";"+o),r.cssText=n,i=dL.test(n)}}else e&&t.removeAttribute("style");Nu in t&&(t[Nu]=i?r.display:"",t[iS]&&(r.display="none"))}const A_=/\s*!important$/;function cu(t,e,n){if(Me(n))n.forEach(r=>cu(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=hL(t,e);A_.test(n)?t.setProperty(or(r),n.replace(A_,""),"important"):t[r]=n}}const $_=["Webkit","Moz","ms"],Rh={};function hL(t,e){const n=Rh[e];if(n)return n;let r=an(e);if(r!=="filter"&&r in t)return Rh[e]=r;r=Zl(r);for(let s=0;s<$_.length;s++){const i=$_[s]+r;if(i in t)return Rh[e]=i}return e}const C_="http://www.w3.org/1999/xlink";function k_(t,e,n,r,s,i=jO(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(C_,e.slice(6,e.length)):t.setAttributeNS(C_,e,n):n==null||i&&!Ix(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Jr(n)?String(n):n)}function I_(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?eS(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Ix(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Bs(t,e,n,r){t.addEventListener(e,n,r)}function pL(t,e,n,r){t.removeEventListener(e,n,r)}const R_=Symbol("_vei");function mL(t,e,n,r,s=null){const i=t[R_]||(t[R_]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=gL(e);if(r){const c=i[e]=bL(r,s);Bs(t,a,c,l)}else o&&(pL(t,a,o,l),i[e]=void 0)}}const T_=/(?:Once|Passive|Capture)$/;function gL(t){let e;if(T_.test(t)){e={};let r;for(;r=t.match(T_);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):or(t.slice(2)),e]}let Th=0;const yL=Promise.resolve(),vL=()=>Th||(yL.then(()=>Th=0),Th=Date.now());function bL(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Mr(_L(r,n.value),e,5,[r])};return n.value=t,n.attached=vL(),n}function _L(t,e){if(Me(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const O_=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,wL=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?lL(t,r,o):e==="style"?fL(t,n,r):Ql(e)?bg(e)||mL(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):xL(t,e,r,o))?(I_(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&k_(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ot(r))?I_(t,an(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),k_(t,e,r,o))};function xL(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&O_(e)&&We(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return O_(e)&&Ot(n)?!1:e in t}const D_={};/*! #__NO_SIDE_EFFECTS__ */function lS(t,e,n){const r=pe(t,e);xd(r)&&kt(r,e);class s extends Ud{constructor(o){super(r,o,n)}}return s.def=r,s}/*! #__NO_SIDE_EFFECTS__ */const EL=(t,e)=>lS(t,e,_S),SL=typeof HTMLElement<"u"?HTMLElement:class{};class Ud extends SL{constructor(e,n={},r=Uu){super(),this._def=e,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==Uu?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Ud){this._parent=e;break}this._instance||(this._resolved?this._mount(this._def):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._inheritParentContext(e))}_inheritParentContext(e=this._parent){e&&this._app&&Object.setPrototypeOf(this._app._context.provides,e._instance.provides)}disconnectedCallback(){this._connected=!1,Tt(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const s of r)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:i,styles:o}=r;let a;if(i&&!Me(i))for(const l in i){const c=i[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=Au(this._props[l])),(a||(a=Object.create(null)))[an(l)]=!0)}this._numberProps=a,this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>{r.configureApp=this._def.configureApp,e(this._def=r,!0)}):e(this._def)}_mount(e){this._app=this._createApp(e),this._inheritParentContext(),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)ht(this,r)||Object.defineProperty(this,r,{get:()=>$(n[r])})}_resolveProps(e){const{props:n}=e,r=Me(n)?n:Object.keys(n||{});for(const s of Object.keys(this))s[0]!=="_"&&r.includes(s)&&this._setProp(s,this[s]);for(const s of r.map(an))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(i){this._setProp(s,i,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let r=n?this.getAttribute(e):D_;const s=an(e);n&&this._numberProps&&this._numberProps[s]&&(r=Au(r)),this._setProp(s,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,s=!1){if(n!==this._props[e]&&(n===D_?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),s&&this._instance&&this._update(),r)){const i=this._ob;i&&i.disconnect(),n===!0?this.setAttribute(or(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(or(e),n+""):n||this.removeAttribute(or(e)),i&&i.observe(this,{attributes:!0})}}_update(){const e=this._createVNode();this._app&&(e.appContext=this._app._context),bS(e,this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=K(this._def,kt(e,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const s=(i,o)=>{this.dispatchEvent(new CustomEvent(i,xd(o[0])?kt({detail:o},o[0]):{detail:o}))};r.emit=(i,...o)=>{s(i,o),or(i)!==i&&s(or(i),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let s=e.length-1;s>=0;s--){const i=document.createElement("style");r&&i.setAttribute("nonce",r),i.textContent=e[s],this.shadowRoot.prepend(i)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const s=e[r],i=s.getAttribute("name")||"default",o=this._slots[i],a=s.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const c=n+"-s",u=document.createTreeWalker(l,1);l.setAttribute(c,"");let d;for(;d=u.nextNode();)d.setAttribute(c,"")}a.insertBefore(l,s)}else for(;s.firstChild;)a.insertBefore(s.firstChild,s);a.removeChild(s)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function cS(t){const e=Kt(),n=e&&e.ce;return n||null}function AL(){const t=cS();return t&&t.shadowRoot}function $L(t="$style"){{const e=Kt();if(!e)return it;const n=e.type.__cssModules;if(!n)return it;const r=n[t];return r||it}}const uS=new WeakMap,dS=new WeakMap,Fu=Symbol("_moveCb"),P_=Symbol("_enterCb"),CL=t=>(delete t.props.mode,t),kL=CL({name:"TransitionGroup",props:kt({},nS,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Kt(),r=Rg();let s,i;return Ld(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!DL(s[0].el,n.vnode.el,o)){s=[];return}s.forEach(RL),s.forEach(TL);const a=s.filter(OL);Zp(),a.forEach(l=>{const c=l.el,u=c.style;ss(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=c[Fu]=f=>{f&&f.target!==c||(!f||/transform$/.test(f.propertyName))&&(c.removeEventListener("transitionend",d),c[Fu]=null,hi(c,o))};c.addEventListener("transitionend",d)}),s=[]}),()=>{const o=Ze(t),a=rS(o);let l=o.tag||Ge;if(s=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(s.push(u),Qs(u,va(u,a,r,n)),uS.set(u,u.el.getBoundingClientRect()))}i=e.default?Dd(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&Qs(u,va(u,a,r,n))}return K(l,null,i)}}}),IL=kL;function RL(t){const e=t.el;e[Fu]&&e[Fu](),e[P_]&&e[P_]()}function TL(t){dS.set(t,t.el.getBoundingClientRect())}function OL(t){const e=uS.get(t),n=dS.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function DL(t,e,n){const r=t.cloneNode(),s=t[_a];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=sS(r);return i.removeChild(r),o}const ji=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Me(e)?n=>la(e,n):e};function PL(t){t.target.composing=!0}function L_(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Dr=Symbol("_assign"),us={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Dr]=ji(s);const i=r||s.props&&s.props.type==="number";Bs(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Su(a)),t[Dr](a)}),n&&Bs(t,"change",()=>{t.value=t.value.trim()}),e||(Bs(t,"compositionstart",PL),Bs(t,"compositionend",L_),Bs(t,"change",L_))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[Dr]=ji(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Su(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},Bd={deep:!0,created(t,e,n){t[Dr]=ji(n),Bs(t,"change",()=>{const r=t._modelValue,s=wa(t),i=t.checked,o=t[Dr];if(Me(r)){const a=Ad(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const c=[...r];c.splice(a,1),o(c)}}else if(xo(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(hS(t,i))})},mounted:M_,beforeUpdate(t,e,n){t[Dr]=ji(n),M_(t,e,n)}};function M_(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(Me(e))s=Ad(e,r.props.value)>-1;else if(xo(e))s=e.has(r.props.value);else{if(e===n)return;s=Ni(e,hS(t,!0))}t.checked!==s&&(t.checked=s)}const qg={created(t,{value:e},n){t.checked=Ni(e,n.props.value),t[Dr]=ji(n),Bs(t,"change",()=>{t[Dr](wa(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Dr]=ji(r),e!==n&&(t.checked=Ni(e,r.props.value))}},fS={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=xo(e);Bs(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Su(wa(o)):wa(o));t[Dr](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Tt(()=>{t._assigning=!1})}),t[Dr]=ji(r)},mounted(t,{value:e}){N_(t,e)},beforeUpdate(t,e,n){t[Dr]=ji(n)},updated(t,{value:e}){t._assigning||N_(t,e)}};function N_(t,e){const n=t.multiple,r=Me(e);if(!(n&&!r&&!xo(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],a=wa(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=Ad(e,a)>-1}else o.selected=e.has(a);else if(Ni(wa(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function wa(t){return"_value"in t?t._value:t.value}function hS(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const pS={created(t,e,n){Rc(t,e,n,null,"created")},mounted(t,e,n){Rc(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){Rc(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){Rc(t,e,n,r,"updated")}};function mS(t,e){switch(t){case"SELECT":return fS;case"TEXTAREA":return us;default:switch(e){case"checkbox":return Bd;case"radio":return qg;default:return us}}}function Rc(t,e,n,r,s){const o=mS(t.tagName,n.props&&n.props.type)[s];o&&o(t,e,n,r)}function LL(){us.getSSRProps=({value:t})=>({value:t}),qg.getSSRProps=({value:t},e)=>{if(e.props&&Ni(e.props.value,t))return{checked:!0}},Bd.getSSRProps=({value:t},e)=>{if(Me(t)){if(e.props&&Ad(t,e.props.value)>-1)return{checked:!0}}else if(xo(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},pS.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=mS(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const ML=["ctrl","shift","alt","meta"],NL={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>ML.some(n=>t[`${n}Key`]&&!e.includes(n))},Xn=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=NL[e[o]];if(a&&a(s,e))return}return t(s,...i)})},jL={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},zd=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const i=or(s.key);if(e.some(o=>o===i||jL[o]===i))return t(s)})},gS=kt({patchProp:wL},rL);let Sl,j_=!1;function yS(){return Sl||(Sl=TE(gS))}function vS(){return Sl=j_?Sl:OE(gS),j_=!0,Sl}const bS=(...t)=>{yS().render(...t)},FL=(...t)=>{vS().hydrate(...t)},Uu=(...t)=>{const e=yS().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=xS(r);if(!s)return;const i=e._component;!We(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,wS(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e},_S=(...t)=>{const e=vS().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=xS(r);if(s)return n(s,!0,wS(s))},e};function wS(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function xS(t){return Ot(t)?document.querySelector(t):t}let F_=!1;const UL=()=>{F_||(F_=!0,LL(),cL())};/**
* vue v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const BL=()=>{},zL=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:aE,BaseTransitionPropsValidators:Tg,Comment:Vt,DeprecationTypes:eL,EffectScope:Eg,ErrorCodes:xD,ErrorTypeStrings:WP,Fragment:Ge,KeepAlive:qD,ReactiveEffect:Pl,Static:Pi,Suspense:kP,Teleport:Od,Text:ps,TrackOpTypes:mD,Transition:iL,TransitionGroup:IL,TriggerOpTypes:gD,VueElement:Ud,assertNumber:wD,callWithAsyncErrorHandling:Mr,callWithErrorHandling:Da,camelize:an,capitalize:Zl,cloneVNode:Yr,compatUtils:ZP,compile:BL,computed:ne,createApp:Uu,createBlock:ae,createCommentVNode:Te,createElementBlock:re,createElementVNode:U,createHydrationRenderer:OE,createPropsRestProxy:oi,createRenderer:TE,createSSRApp:_S,createSlots:GD,createStaticVNode:MP,createTextVNode:je,createVNode:K,customRef:So,defineAsyncComponent:VD,defineComponent:pe,defineCustomElement:lS,defineEmits:QD,defineExpose:ZD,defineModel:nP,defineOptions:eP,defineProps:XD,defineSSRCustomElement:EL,defineSlots:tP,devtools:GP,effect:BO,effectScope:Ta,getCurrentInstance:Kt,getCurrentScope:Eo,getCurrentWatcher:yD,getTransitionRawChildren:Dd,guardReactiveProps:tr,h:Yn,handleError:Ao,hasInjectionContext:xE,hydrate:FL,hydrateOnIdle:ND,hydrateOnInteraction:BD,hydrateOnMediaQuery:UD,hydrateOnVisible:FD,initCustomFormatter:HP,initDirectivesForSSR:UL,inject:qt,isMemoSame:QE,isProxy:Rd,isReactive:hs,isReadonly:Xs,isRef:Pt,isRuntimeOnly:BP,isShallow:hr,isVNode:Zs,markRaw:Ue,mergeDefaults:jg,mergeModels:sP,mergeProps:Ve,nextTick:Tt,normalizeClass:Je,normalizeProps:Ln,normalizeStyle:xs,onActivated:cE,onBeforeMount:fE,onBeforeUnmount:Pa,onBeforeUpdate:Dg,onDeactivated:uE,onErrorCaptured:gE,onMounted:Ht,onRenderTracked:mE,onRenderTriggered:pE,onScopeDispose:Oa,onServerPrefetch:hE,onUnmounted:Mn,onUpdated:Ld,onWatcherCleanup:Jx,openBlock:O,popScopeId:CD,provide:pr,proxyRefs:kg,pushScopeId:$D,queuePostFlushCb:Nl,reactive:Jn,readonly:Es,ref:xe,registerRuntimeCompiler:UP,render:bS,renderList:Lt,renderSlot:$e,resolveComponent:Md,resolveDirective:vE,resolveDynamicComponent:Ss,resolveFilter:QP,resolveTransitionHooks:va,setBlockTracking:Kp,setDevtoolsHook:JP,setTransitionHooks:Qs,shallowReactive:Cg,shallowReadonly:no,shallowRef:yr,ssrContextKey:ME,ssrUtils:XP,stop:zO,toDisplayString:ue,toHandlerKey:aa,toHandlers:JD,toRaw:Ze,toRef:ku,toRefs:lr,toValue:fn,transformVNodeArgs:PP,triggerRef:lD,unref:$,useAttrs:Ng,useCssModule:$L,useCssVars:uL,useHost:cS,useId:ou,useModel:wP,useSSRContext:NE,useShadowRoot:AL,useSlots:Nd,useTemplateRef:si,useTransitionState:Rg,vModelCheckbox:Bd,vModelDynamic:pS,vModelRadio:qg,vModelSelect:fS,vModelText:us,vShow:oS,version:ZE,warn:KP,watch:ot,watchEffect:Dt,watchPostEffect:Vg,watchSyncEffect:jE,withAsyncContext:iP,withCtx:Y,withDefaults:rP,withDirectives:zs,withKeys:zd,withMemo:qP,withModifiers:Xn,withScopeId:kD},Symbol.toStringTag,{value:"Module"})),Kr={name:"Shows Tracker",version:"?",sourceHash:`8e987979b88a28dd4fc6999e25f426b874cdb140
`,basePath:"/shows-tracker/",sourceUrl:"https://github.com/noeldemartin/shows-tracker",locales:{en:"English"}};/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let ES;const rc=t=>ES=t,SS=Symbol();function tm(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Al;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Al||(Al={}));function VL(){const t=Ta(!0),e=t.run(()=>xe({}));let n=[],r=[];const s=Ue({install(i){rc(s),s._a=i,i.provide(SS,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const AS=()=>{};function U_(t,e,n,r=AS){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&Eo()&&Oa(s),s}function jo(t,...e){t.slice().forEach(n=>{n(...e)})}const HL=t=>t(),B_=Symbol(),Oh=Symbol();function nm(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];tm(s)&&tm(r)&&t.hasOwnProperty(n)&&!Pt(r)&&!hs(r)?t[n]=nm(s,r):t[n]=r}return t}const qL=Symbol();function KL(t){return!tm(t)||!t.hasOwnProperty(qL)}const{assign:pi}=Object;function WL(t){return!!(Pt(t)&&t.effect)}function GL(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=s?s():{});const u=lr(n.state.value[t]);return pi(u,i,Object.keys(o||{}).reduce((d,f)=>(d[f]=Ue(ne(()=>{rc(n);const h=n._s.get(t);return o[f].call(h,h)})),d),{}))}return l=$S(t,c,e,n,r,!0),l}function $S(t,e,n={},r,s,i){let o;const a=pi({actions:{}},n),l={deep:!0};let c,u,d=[],f=[],h;const m=r.state.value[t];!i&&!m&&(r.state.value[t]={}),xe({});let y;function S(A){let C;c=u=!1,typeof A=="function"?(A(r.state.value[t]),C={type:Al.patchFunction,storeId:t,events:h}):(nm(r.state.value[t],A),C={type:Al.patchObject,payload:A,storeId:t,events:h});const I=y=Symbol();Tt().then(()=>{y===I&&(c=!0)}),u=!0,jo(d,C,r.state.value[t])}const x=i?function(){const{state:C}=n,I=C?C():{};this.$patch(N=>{pi(N,I)})}:AS;function _(){o.stop(),d=[],f=[],r._s.delete(t)}const g=(A,C="")=>{if(B_ in A)return A[Oh]=C,A;const I=function(){rc(r);const N=Array.from(arguments),j=[],V=[];function L(q){j.push(q)}function Z(q){V.push(q)}jo(f,{args:N,name:I[Oh],store:v,after:L,onError:Z});let T;try{T=A.apply(this&&this.$id===t?this:v,N)}catch(q){throw jo(V,q),q}return T instanceof Promise?T.then(q=>(jo(j,q),q)).catch(q=>(jo(V,q),Promise.reject(q))):(jo(j,T),T)};return I[B_]=!0,I[Oh]=C,I},p={_p:r,$id:t,$onAction:U_.bind(null,f),$patch:S,$reset:x,$subscribe(A,C={}){const I=U_(d,A,C.detached,()=>N()),N=o.run(()=>ot(()=>r.state.value[t],j=>{(C.flush==="sync"?u:c)&&A({storeId:t,type:Al.direct,events:h},j)},pi({},l,C)));return I},$dispose:_},v=Jn(p);r._s.set(t,v);const k=(r._a&&r._a.runWithContext||HL)(()=>r._e.run(()=>(o=Ta()).run(()=>e({action:g}))));for(const A in k){const C=k[A];if(Pt(C)&&!WL(C)||hs(C))i||(m&&KL(C)&&(Pt(C)?C.value=m[A]:nm(C,m[A])),r.state.value[t][A]=C);else if(typeof C=="function"){const I=g(C,A);k[A]=I,a.actions[A]=C}}return pi(v,k),pi(Ze(v),k),Object.defineProperty(v,"$state",{get:()=>r.state.value[t],set:A=>{S(C=>{pi(C,A)})}}),r._p.forEach(A=>{pi(v,o.run(()=>A({store:v,app:r._a,pinia:r,options:a})))}),m&&i&&n.hydrate&&n.hydrate(v.$state,m),c=!0,u=!0,v}/*! #__NO_SIDE_EFFECTS__ */function JL(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,l){const c=xE();return a=a||(c?qt(SS,null):null),a&&rc(a),a=ES,a._s.has(r)||(i?$S(r,e,s,a):GL(r,s,a)),a._s.get(r)}return o.$id=r,o}/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:CS,setPrototypeOf:z_,isFrozen:YL,getPrototypeOf:XL,getOwnPropertyDescriptor:QL}=Object;let{freeze:Zn,seal:Nr,create:kS}=Object,{apply:rm,construct:sm}=typeof Reflect<"u"&&Reflect;Zn||(Zn=function(e){return e});Nr||(Nr=function(e){return e});rm||(rm=function(e,n,r){return e.apply(n,r)});sm||(sm=function(e,n){return new e(...n)});const Tc=er(Array.prototype.forEach),ZL=er(Array.prototype.lastIndexOf),V_=er(Array.prototype.pop),Qa=er(Array.prototype.push),eM=er(Array.prototype.splice),uu=er(String.prototype.toLowerCase),Dh=er(String.prototype.toString),H_=er(String.prototype.match),Za=er(String.prototype.replace),tM=er(String.prototype.indexOf),nM=er(String.prototype.trim),Br=er(Object.prototype.hasOwnProperty),jn=er(RegExp.prototype.test),el=rM(TypeError);function er(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return rm(t,e,r)}}function rM(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return sm(t,n)}}function tt(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:uu;z_&&z_(t,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){const i=n(s);i!==s&&(YL(e)||(e[r]=i),s=i)}t[s]=!0}return t}function sM(t){for(let e=0;e<t.length;e++)Br(t,e)||(t[e]=null);return t}function Ms(t){const e=kS(null);for(const[n,r]of CS(t))Br(t,n)&&(Array.isArray(r)?e[n]=sM(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Ms(r):e[n]=r);return e}function tl(t,e){for(;t!==null;){const r=QL(t,e);if(r){if(r.get)return er(r.get);if(typeof r.value=="function")return er(r.value)}t=XL(t)}function n(){return null}return n}const q_=Zn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ph=Zn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Lh=Zn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),iM=Zn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Mh=Zn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),oM=Zn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),K_=Zn(["#text"]),W_=Zn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Nh=Zn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),G_=Zn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Oc=Zn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),aM=Nr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),lM=Nr(/<%[\w\W]*|[\w\W]*%>/gm),cM=Nr(/\$\{[\w\W]*/gm),uM=Nr(/^data-[\-\w.\u00B7-\uFFFF]+$/),dM=Nr(/^aria-[\-\w]+$/),IS=Nr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),fM=Nr(/^(?:\w+script|data):/i),hM=Nr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),RS=Nr(/^html$/i),pM=Nr(/^[a-z][.\w]*(-[.\w]+)+$/i);var J_=Object.freeze({__proto__:null,ARIA_ATTR:dM,ATTR_WHITESPACE:hM,CUSTOM_ELEMENT:pM,DATA_ATTR:uM,DOCTYPE_NAME:RS,ERB_EXPR:lM,IS_ALLOWED_URI:IS,IS_SCRIPT_OR_DATA:fM,MUSTACHE_EXPR:aM,TMPLIT_EXPR:cM});const nl={element:1,text:3,progressingInstruction:7,comment:8,document:9},mM=function(){return typeof window>"u"?null:window},gM=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},Y_=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function TS(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mM();const e=ze=>TS(ze);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==nl.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,s=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:h}=t,m=l.prototype,y=tl(m,"cloneNode"),S=tl(m,"remove"),x=tl(m,"nextSibling"),_=tl(m,"childNodes"),g=tl(m,"parentNode");if(typeof o=="function"){const ze=n.createElement("template");ze.content&&ze.content.ownerDocument&&(n=ze.content.ownerDocument)}let p,v="";const{implementation:E,createNodeIterator:k,createDocumentFragment:A,getElementsByTagName:C}=n,{importNode:I}=r;let N=Y_();e.isSupported=typeof CS=="function"&&typeof g=="function"&&E&&E.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:j,ERB_EXPR:V,TMPLIT_EXPR:L,DATA_ATTR:Z,ARIA_ATTR:T,IS_SCRIPT_OR_DATA:q,ATTR_WHITESPACE:z,CUSTOM_ELEMENT:se}=J_;let{IS_ALLOWED_URI:W}=J_,he=null;const me=tt({},[...q_,...Ph,...Lh,...Mh,...K_]);let ve=null;const Ce=tt({},[...W_,...Nh,...G_,...Oc]);let J=Object.seal(kS(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),G=null,P=null,ee=!0,ce=!0,ie=!1,Ee=!0,ke=!1,D=!0,F=!1,le=!1,be=!1,ge=!1,M=!1,H=!1,oe=!0,ye=!1;const we="user-content-";let Se=!0,X=!1,de={},Re=null;const R=tt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let b=null;const w=tt({},["audio","video","img","source","image","track"]);let B=null;const Q=tt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),fe="http://www.w3.org/1998/Math/MathML",_e="http://www.w3.org/2000/svg",He="http://www.w3.org/1999/xhtml";let ct=He,Xe=!1,et=null;const ut=tt({},[fe,_e,He],Dh);let dc=tt({},["mi","mo","mn","ms","mtext"]),fc=tt({},["annotation-xml"]);const UC=tt({},["title","style","font","a","script"]);let Ua=null;const BC=["application/xhtml+xml","text/html"],zC="text/html";let ln=null,Oo=null;const VC=n.createElement("form"),ov=function(te){return te instanceof RegExp||te instanceof Function},hf=function(){let te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Oo&&Oo===te)){if((!te||typeof te!="object")&&(te={}),te=Ms(te),Ua=BC.indexOf(te.PARSER_MEDIA_TYPE)===-1?zC:te.PARSER_MEDIA_TYPE,ln=Ua==="application/xhtml+xml"?Dh:uu,he=Br(te,"ALLOWED_TAGS")?tt({},te.ALLOWED_TAGS,ln):me,ve=Br(te,"ALLOWED_ATTR")?tt({},te.ALLOWED_ATTR,ln):Ce,et=Br(te,"ALLOWED_NAMESPACES")?tt({},te.ALLOWED_NAMESPACES,Dh):ut,B=Br(te,"ADD_URI_SAFE_ATTR")?tt(Ms(Q),te.ADD_URI_SAFE_ATTR,ln):Q,b=Br(te,"ADD_DATA_URI_TAGS")?tt(Ms(w),te.ADD_DATA_URI_TAGS,ln):w,Re=Br(te,"FORBID_CONTENTS")?tt({},te.FORBID_CONTENTS,ln):R,G=Br(te,"FORBID_TAGS")?tt({},te.FORBID_TAGS,ln):Ms({}),P=Br(te,"FORBID_ATTR")?tt({},te.FORBID_ATTR,ln):Ms({}),de=Br(te,"USE_PROFILES")?te.USE_PROFILES:!1,ee=te.ALLOW_ARIA_ATTR!==!1,ce=te.ALLOW_DATA_ATTR!==!1,ie=te.ALLOW_UNKNOWN_PROTOCOLS||!1,Ee=te.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ke=te.SAFE_FOR_TEMPLATES||!1,D=te.SAFE_FOR_XML!==!1,F=te.WHOLE_DOCUMENT||!1,ge=te.RETURN_DOM||!1,M=te.RETURN_DOM_FRAGMENT||!1,H=te.RETURN_TRUSTED_TYPE||!1,be=te.FORCE_BODY||!1,oe=te.SANITIZE_DOM!==!1,ye=te.SANITIZE_NAMED_PROPS||!1,Se=te.KEEP_CONTENT!==!1,X=te.IN_PLACE||!1,W=te.ALLOWED_URI_REGEXP||IS,ct=te.NAMESPACE||He,dc=te.MATHML_TEXT_INTEGRATION_POINTS||dc,fc=te.HTML_INTEGRATION_POINTS||fc,J=te.CUSTOM_ELEMENT_HANDLING||{},te.CUSTOM_ELEMENT_HANDLING&&ov(te.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(J.tagNameCheck=te.CUSTOM_ELEMENT_HANDLING.tagNameCheck),te.CUSTOM_ELEMENT_HANDLING&&ov(te.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(J.attributeNameCheck=te.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),te.CUSTOM_ELEMENT_HANDLING&&typeof te.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(J.allowCustomizedBuiltInElements=te.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ke&&(ce=!1),M&&(ge=!0),de&&(he=tt({},K_),ve=[],de.html===!0&&(tt(he,q_),tt(ve,W_)),de.svg===!0&&(tt(he,Ph),tt(ve,Nh),tt(ve,Oc)),de.svgFilters===!0&&(tt(he,Lh),tt(ve,Nh),tt(ve,Oc)),de.mathMl===!0&&(tt(he,Mh),tt(ve,G_),tt(ve,Oc))),te.ADD_TAGS&&(he===me&&(he=Ms(he)),tt(he,te.ADD_TAGS,ln)),te.ADD_ATTR&&(ve===Ce&&(ve=Ms(ve)),tt(ve,te.ADD_ATTR,ln)),te.ADD_URI_SAFE_ATTR&&tt(B,te.ADD_URI_SAFE_ATTR,ln),te.FORBID_CONTENTS&&(Re===R&&(Re=Ms(Re)),tt(Re,te.FORBID_CONTENTS,ln)),Se&&(he["#text"]=!0),F&&tt(he,["html","head","body"]),he.table&&(tt(he,["tbody"]),delete G.tbody),te.TRUSTED_TYPES_POLICY){if(typeof te.TRUSTED_TYPES_POLICY.createHTML!="function")throw el('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof te.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw el('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');p=te.TRUSTED_TYPES_POLICY,v=p.createHTML("")}else p===void 0&&(p=gM(h,s)),p!==null&&typeof v=="string"&&(v=p.createHTML(""));Zn&&Zn(te),Oo=te}},av=tt({},[...Ph,...Lh,...iM]),lv=tt({},[...Mh,...oM]),HC=function(te){let Ie=g(te);(!Ie||!Ie.tagName)&&(Ie={namespaceURI:ct,tagName:"template"});const Fe=uu(te.tagName),Nt=uu(Ie.tagName);return et[te.namespaceURI]?te.namespaceURI===_e?Ie.namespaceURI===He?Fe==="svg":Ie.namespaceURI===fe?Fe==="svg"&&(Nt==="annotation-xml"||dc[Nt]):!!av[Fe]:te.namespaceURI===fe?Ie.namespaceURI===He?Fe==="math":Ie.namespaceURI===_e?Fe==="math"&&fc[Nt]:!!lv[Fe]:te.namespaceURI===He?Ie.namespaceURI===_e&&!fc[Nt]||Ie.namespaceURI===fe&&!dc[Nt]?!1:!lv[Fe]&&(UC[Fe]||!av[Fe]):!!(Ua==="application/xhtml+xml"&&et[te.namespaceURI]):!1},ns=function(te){Qa(e.removed,{element:te});try{g(te).removeChild(te)}catch{S(te)}},Do=function(te,Ie){try{Qa(e.removed,{attribute:Ie.getAttributeNode(te),from:Ie})}catch{Qa(e.removed,{attribute:null,from:Ie})}if(Ie.removeAttribute(te),te==="is")if(ge||M)try{ns(Ie)}catch{}else try{Ie.setAttribute(te,"")}catch{}},cv=function(te){let Ie=null,Fe=null;if(be)te="<remove></remove>"+te;else{const en=H_(te,/^[\r\n\t ]+/);Fe=en&&en[0]}Ua==="application/xhtml+xml"&&ct===He&&(te='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+te+"</body></html>");const Nt=p?p.createHTML(te):te;if(ct===He)try{Ie=new f().parseFromString(Nt,Ua)}catch{}if(!Ie||!Ie.documentElement){Ie=E.createDocument(ct,"template",null);try{Ie.documentElement.innerHTML=Xe?v:Nt}catch{}}const wn=Ie.body||Ie.documentElement;return te&&Fe&&wn.insertBefore(n.createTextNode(Fe),wn.childNodes[0]||null),ct===He?C.call(Ie,F?"html":"body")[0]:F?Ie.documentElement:wn},uv=function(te){return k.call(te.ownerDocument||te,te,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},pf=function(te){return te instanceof d&&(typeof te.nodeName!="string"||typeof te.textContent!="string"||typeof te.removeChild!="function"||!(te.attributes instanceof u)||typeof te.removeAttribute!="function"||typeof te.setAttribute!="function"||typeof te.namespaceURI!="string"||typeof te.insertBefore!="function"||typeof te.hasChildNodes!="function")},dv=function(te){return typeof a=="function"&&te instanceof a};function Rs(ze,te,Ie){Tc(ze,Fe=>{Fe.call(e,te,Ie,Oo)})}const fv=function(te){let Ie=null;if(Rs(N.beforeSanitizeElements,te,null),pf(te))return ns(te),!0;const Fe=ln(te.nodeName);if(Rs(N.uponSanitizeElement,te,{tagName:Fe,allowedTags:he}),D&&te.hasChildNodes()&&!dv(te.firstElementChild)&&jn(/<[/\w!]/g,te.innerHTML)&&jn(/<[/\w!]/g,te.textContent)||te.nodeType===nl.progressingInstruction||D&&te.nodeType===nl.comment&&jn(/<[/\w]/g,te.data))return ns(te),!0;if(!he[Fe]||G[Fe]){if(!G[Fe]&&pv(Fe)&&(J.tagNameCheck instanceof RegExp&&jn(J.tagNameCheck,Fe)||J.tagNameCheck instanceof Function&&J.tagNameCheck(Fe)))return!1;if(Se&&!Re[Fe]){const Nt=g(te)||te.parentNode,wn=_(te)||te.childNodes;if(wn&&Nt){const en=wn.length;for(let nr=en-1;nr>=0;--nr){const Ts=y(wn[nr],!0);Ts.__removalCount=(te.__removalCount||0)+1,Nt.insertBefore(Ts,x(te))}}}return ns(te),!0}return te instanceof l&&!HC(te)||(Fe==="noscript"||Fe==="noembed"||Fe==="noframes")&&jn(/<\/no(script|embed|frames)/i,te.innerHTML)?(ns(te),!0):(ke&&te.nodeType===nl.text&&(Ie=te.textContent,Tc([j,V,L],Nt=>{Ie=Za(Ie,Nt," ")}),te.textContent!==Ie&&(Qa(e.removed,{element:te.cloneNode()}),te.textContent=Ie)),Rs(N.afterSanitizeElements,te,null),!1)},hv=function(te,Ie,Fe){if(oe&&(Ie==="id"||Ie==="name")&&(Fe in n||Fe in VC))return!1;if(!(ce&&!P[Ie]&&jn(Z,Ie))){if(!(ee&&jn(T,Ie))){if(!ve[Ie]||P[Ie]){if(!(pv(te)&&(J.tagNameCheck instanceof RegExp&&jn(J.tagNameCheck,te)||J.tagNameCheck instanceof Function&&J.tagNameCheck(te))&&(J.attributeNameCheck instanceof RegExp&&jn(J.attributeNameCheck,Ie)||J.attributeNameCheck instanceof Function&&J.attributeNameCheck(Ie))||Ie==="is"&&J.allowCustomizedBuiltInElements&&(J.tagNameCheck instanceof RegExp&&jn(J.tagNameCheck,Fe)||J.tagNameCheck instanceof Function&&J.tagNameCheck(Fe))))return!1}else if(!B[Ie]){if(!jn(W,Za(Fe,z,""))){if(!((Ie==="src"||Ie==="xlink:href"||Ie==="href")&&te!=="script"&&tM(Fe,"data:")===0&&b[te])){if(!(ie&&!jn(q,Za(Fe,z,"")))){if(Fe)return!1}}}}}}return!0},pv=function(te){return te!=="annotation-xml"&&H_(te,se)},mv=function(te){Rs(N.beforeSanitizeAttributes,te,null);const{attributes:Ie}=te;if(!Ie||pf(te))return;const Fe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ve,forceKeepAttr:void 0};let Nt=Ie.length;for(;Nt--;){const wn=Ie[Nt],{name:en,namespaceURI:nr,value:Ts}=wn,Ba=ln(en),mf=Ts;let xn=en==="value"?mf:nM(mf);if(Fe.attrName=Ba,Fe.attrValue=xn,Fe.keepAttr=!0,Fe.forceKeepAttr=void 0,Rs(N.uponSanitizeAttribute,te,Fe),xn=Fe.attrValue,ye&&(Ba==="id"||Ba==="name")&&(Do(en,te),xn=we+xn),D&&jn(/((--!?|])>)|<\/(style|title)/i,xn)){Do(en,te);continue}if(Fe.forceKeepAttr)continue;if(!Fe.keepAttr){Do(en,te);continue}if(!Ee&&jn(/\/>/i,xn)){Do(en,te);continue}ke&&Tc([j,V,L],yv=>{xn=Za(xn,yv," ")});const gv=ln(te.nodeName);if(!hv(gv,Ba,xn)){Do(en,te);continue}if(p&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!nr)switch(h.getAttributeType(gv,Ba)){case"TrustedHTML":{xn=p.createHTML(xn);break}case"TrustedScriptURL":{xn=p.createScriptURL(xn);break}}if(xn!==mf)try{nr?te.setAttributeNS(nr,en,xn):te.setAttribute(en,xn),pf(te)?ns(te):V_(e.removed)}catch{Do(en,te)}}Rs(N.afterSanitizeAttributes,te,null)},qC=function ze(te){let Ie=null;const Fe=uv(te);for(Rs(N.beforeSanitizeShadowDOM,te,null);Ie=Fe.nextNode();)Rs(N.uponSanitizeShadowNode,Ie,null),fv(Ie),mv(Ie),Ie.content instanceof i&&ze(Ie.content);Rs(N.afterSanitizeShadowDOM,te,null)};return e.sanitize=function(ze){let te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ie=null,Fe=null,Nt=null,wn=null;if(Xe=!ze,Xe&&(ze="<!-->"),typeof ze!="string"&&!dv(ze))if(typeof ze.toString=="function"){if(ze=ze.toString(),typeof ze!="string")throw el("dirty is not a string, aborting")}else throw el("toString is not a function");if(!e.isSupported)return ze;if(le||hf(te),e.removed=[],typeof ze=="string"&&(X=!1),X){if(ze.nodeName){const Ts=ln(ze.nodeName);if(!he[Ts]||G[Ts])throw el("root node is forbidden and cannot be sanitized in-place")}}else if(ze instanceof a)Ie=cv("<!---->"),Fe=Ie.ownerDocument.importNode(ze,!0),Fe.nodeType===nl.element&&Fe.nodeName==="BODY"||Fe.nodeName==="HTML"?Ie=Fe:Ie.appendChild(Fe);else{if(!ge&&!ke&&!F&&ze.indexOf("<")===-1)return p&&H?p.createHTML(ze):ze;if(Ie=cv(ze),!Ie)return ge?null:H?v:""}Ie&&be&&ns(Ie.firstChild);const en=uv(X?ze:Ie);for(;Nt=en.nextNode();)fv(Nt),mv(Nt),Nt.content instanceof i&&qC(Nt.content);if(X)return ze;if(ge){if(M)for(wn=A.call(Ie.ownerDocument);Ie.firstChild;)wn.appendChild(Ie.firstChild);else wn=Ie;return(ve.shadowroot||ve.shadowrootmode)&&(wn=I.call(r,wn,!0)),wn}let nr=F?Ie.outerHTML:Ie.innerHTML;return F&&he["!doctype"]&&Ie.ownerDocument&&Ie.ownerDocument.doctype&&Ie.ownerDocument.doctype.name&&jn(RS,Ie.ownerDocument.doctype.name)&&(nr="<!DOCTYPE "+Ie.ownerDocument.doctype.name+`>
`+nr),ke&&Tc([j,V,L],Ts=>{nr=Za(nr,Ts," ")}),p&&H?p.createHTML(nr):nr},e.setConfig=function(){let ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};hf(ze),le=!0},e.clearConfig=function(){Oo=null,le=!1},e.isValidAttribute=function(ze,te,Ie){Oo||hf({});const Fe=ln(ze),Nt=ln(te);return hv(Fe,Nt,Ie)},e.addHook=function(ze,te){typeof te=="function"&&Qa(N[ze],te)},e.removeHook=function(ze,te){if(te!==void 0){const Ie=ZL(N[ze],te);return Ie===-1?void 0:eM(N[ze],Ie,1)[0]}return V_(N[ze])},e.removeHooks=function(ze){N[ze]=[]},e.removeAllHooks=function(){N=Y_()},e}var yM=TS();function Kg(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var $o=Kg();function OS(t){$o=t}var $l={exec:()=>null};function bt(t,e=""){let n=typeof t=="string"?t:t.source;const r={replace:(s,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(Kn.caret,"$1"),n=n.replace(s,o),r},getRegex:()=>new RegExp(n,e)};return r}var Kn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},vM=/^(?:[ \t]*(?:\n|$))+/,bM=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,_M=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,sc=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,wM=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Wg=/(?:[*+-]|\d{1,9}[.)])/,DS=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,PS=bt(DS).replace(/bull/g,Wg).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),xM=bt(DS).replace(/bull/g,Wg).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Gg=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,EM=/^[^\n]+/,Jg=/(?!\s*\])(?:\\.|[^\[\]\\])+/,SM=bt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Jg).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),AM=bt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Wg).getRegex(),Vd="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Yg=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,$M=bt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Yg).replace("tag",Vd).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),LS=bt(Gg).replace("hr",sc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Vd).getRegex(),CM=bt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",LS).getRegex(),Xg={blockquote:CM,code:bM,def:SM,fences:_M,heading:wM,hr:sc,html:$M,lheading:PS,list:AM,newline:vM,paragraph:LS,table:$l,text:EM},X_=bt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",sc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Vd).getRegex(),kM={...Xg,lheading:xM,table:X_,paragraph:bt(Gg).replace("hr",sc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",X_).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Vd).getRegex()},IM={...Xg,html:bt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Yg).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:$l,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:bt(Gg).replace("hr",sc).replace("heading",` *#{1,6} *[^
]`).replace("lheading",PS).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},RM=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,TM=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,MS=/^( {2,}|\\)\n(?!\s*$)/,OM=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Hd=/[\p{P}\p{S}]/u,Qg=/[\s\p{P}\p{S}]/u,NS=/[^\s\p{P}\p{S}]/u,DM=bt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Qg).getRegex(),jS=/(?!~)[\p{P}\p{S}]/u,PM=/(?!~)[\s\p{P}\p{S}]/u,LM=/(?:[^\s\p{P}\p{S}]|~)/u,MM=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,FS=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,NM=bt(FS,"u").replace(/punct/g,Hd).getRegex(),jM=bt(FS,"u").replace(/punct/g,jS).getRegex(),US="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",FM=bt(US,"gu").replace(/notPunctSpace/g,NS).replace(/punctSpace/g,Qg).replace(/punct/g,Hd).getRegex(),UM=bt(US,"gu").replace(/notPunctSpace/g,LM).replace(/punctSpace/g,PM).replace(/punct/g,jS).getRegex(),BM=bt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,NS).replace(/punctSpace/g,Qg).replace(/punct/g,Hd).getRegex(),zM=bt(/\\(punct)/,"gu").replace(/punct/g,Hd).getRegex(),VM=bt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),HM=bt(Yg).replace("(?:-->|$)","-->").getRegex(),qM=bt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",HM).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Bu=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,KM=bt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Bu).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),BS=bt(/^!?\[(label)\]\[(ref)\]/).replace("label",Bu).replace("ref",Jg).getRegex(),zS=bt(/^!?\[(ref)\](?:\[\])?/).replace("ref",Jg).getRegex(),WM=bt("reflink|nolink(?!\\()","g").replace("reflink",BS).replace("nolink",zS).getRegex(),Zg={_backpedal:$l,anyPunctuation:zM,autolink:VM,blockSkip:MM,br:MS,code:TM,del:$l,emStrongLDelim:NM,emStrongRDelimAst:FM,emStrongRDelimUnd:BM,escape:RM,link:KM,nolink:zS,punctuation:DM,reflink:BS,reflinkSearch:WM,tag:qM,text:OM,url:$l},GM={...Zg,link:bt(/^!?\[(label)\]\((.*?)\)/).replace("label",Bu).getRegex(),reflink:bt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Bu).getRegex()},im={...Zg,emStrongRDelimAst:UM,emStrongLDelim:jM,url:bt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},JM={...im,br:bt(MS).replace("{2,}","*").getRegex(),text:bt(im.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Dc={normal:Xg,gfm:kM,pedantic:IM},rl={normal:Zg,gfm:im,breaks:JM,pedantic:GM},YM={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Q_=t=>YM[t];function is(t,e){if(e){if(Kn.escapeTest.test(t))return t.replace(Kn.escapeReplace,Q_)}else if(Kn.escapeTestNoEncode.test(t))return t.replace(Kn.escapeReplaceNoEncode,Q_);return t}function Z_(t){try{t=encodeURI(t).replace(Kn.percentDecode,"%")}catch{return null}return t}function ew(t,e){var i;const n=t.replace(Kn.findPipe,(o,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=n.split(Kn.splitPipe);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!((i=r.at(-1))!=null&&i.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(Kn.slashPipe,"|");return r}function sl(t,e,n){const r=t.length;if(r===0)return"";let s=0;for(;s<r&&t.charAt(r-s-1)===e;)s++;return t.slice(0,r-s)}function XM(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function tw(t,e,n,r,s){const i=e.href,o=e.title||null,a=t[1].replace(s.other.outputLinkReplace,"$1");r.state.inLink=!0;const l={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:i,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function QM(t,e,n){const r=t.match(n.other.indentCodeCompensation);if(r===null)return e;const s=r[1];return e.split(`
`).map(i=>{const o=i.match(n.other.beginningSpace);if(o===null)return i;const[a]=o;return a.length>=s.length?i.slice(s.length):i}).join(`
`)}var zu=class{constructor(t){st(this,"options");st(this,"rules");st(this,"lexer");this.options=t||$o}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:sl(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],r=QM(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){const r=sl(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:sl(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let n=sl(e[0],`
`).split(`
`),r="",s="";const i=[];for(;n.length>0;){let o=!1;const a=[];let l;for(l=0;l<n.length;l++)if(this.rules.other.blockquoteStart.test(n[l]))a.push(n[l]),o=!0;else if(!o)a.push(n[l]);else break;n=n.slice(l);const c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,s=s?`${s}
${u}`:u;const d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,i,!0),this.lexer.state.top=d,n.length===0)break;const f=i.at(-1);if((f==null?void 0:f.type)==="code")break;if((f==null?void 0:f.type)==="blockquote"){const h=f,m=h.raw+`
`+n.join(`
`),y=this.blockquote(m);i[i.length-1]=y,r=r.substring(0,r.length-h.raw.length)+y.raw,s=s.substring(0,s.length-h.text.length)+y.text;break}else if((f==null?void 0:f.type)==="list"){const h=f,m=h.raw+`
`+n.join(`
`),y=this.list(m);i[i.length-1]=y,r=r.substring(0,r.length-f.raw.length)+y.raw,s=s.substring(0,s.length-h.raw.length)+y.raw,n=m.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:i,text:s}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const r=n.length>1,s={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const i=this.rules.other.listItemRegex(n);let o=!1;for(;t;){let l=!1,c="",u="";if(!(e=i.exec(t))||this.rules.block.hr.test(t))break;c=e[0],t=t.substring(c.length);let d=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,x=>" ".repeat(3*x.length)),f=t.split(`
`,1)[0],h=!d.trim(),m=0;if(this.options.pedantic?(m=2,u=d.trimStart()):h?m=e[1].length+1:(m=e[2].search(this.rules.other.nonSpaceChar),m=m>4?1:m,u=d.slice(m),m+=e[1].length),h&&this.rules.other.blankLine.test(f)&&(c+=f+`
`,t=t.substring(f.length+1),l=!0),!l){const x=this.rules.other.nextBulletRegex(m),_=this.rules.other.hrRegex(m),g=this.rules.other.fencesBeginRegex(m),p=this.rules.other.headingBeginRegex(m),v=this.rules.other.htmlBeginRegex(m);for(;t;){const E=t.split(`
`,1)[0];let k;if(f=E,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),k=f):k=f.replace(this.rules.other.tabCharGlobal,"    "),g.test(f)||p.test(f)||v.test(f)||x.test(f)||_.test(f))break;if(k.search(this.rules.other.nonSpaceChar)>=m||!f.trim())u+=`
`+k.slice(m);else{if(h||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||g.test(d)||p.test(d)||_.test(d))break;u+=`
`+f}!h&&!f.trim()&&(h=!0),c+=E+`
`,t=t.substring(E.length+1),d=k.slice(m)}}s.loose||(o?s.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(o=!0));let y=null,S;this.options.gfm&&(y=this.rules.other.listIsTask.exec(u),y&&(S=y[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:c,task:!!y,checked:S,loose:!1,text:u,tokens:[]}),s.raw+=c}const a=s.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let l=0;l<s.items.length;l++)if(this.lexer.state.top=!1,s.items[l].tokens=this.lexer.blockTokens(s.items[l].text,[]),!s.loose){const c=s.items[l].tokens.filter(d=>d.type==="space"),u=c.length>0&&c.some(d=>this.rules.other.anyLine.test(d.raw));s.loose=u}if(s.loose)for(let l=0;l<s.items.length;l++)s.items[l].loose=!0;return s}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:s}}}table(t){var o;const e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const n=ew(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=(o=e[3])!=null&&o.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const a of r)this.rules.other.tableAlignRight.test(a)?i.align.push("right"):this.rules.other.tableAlignCenter.test(a)?i.align.push("center"):this.rules.other.tableAlignLeft.test(a)?i.align.push("left"):i.align.push(null);for(let a=0;a<n.length;a++)i.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:i.align[a]});for(const a of s)i.rows.push(ew(a,i.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:i.align[c]})));return i}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const i=sl(n.slice(0,-1),"\\");if((n.length-i.length)%2===0)return}else{const i=XM(e[2],"()");if(i===-2)return;if(i>-1){const a=(e[0].indexOf("!")===0?5:4)+e[1].length+i;e[2]=e[2].substring(0,i),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let r=e[2],s="";if(this.options.pedantic){const i=this.rules.other.pedanticHrefTitle.exec(r);i&&(r=i[1],s=i[3])}else s=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),tw(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=e[r.toLowerCase()];if(!s){const i=n[0].charAt(0);return{type:"text",raw:i,text:i}}return tw(n,s,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const i=[...r[0]].length-1;let o,a,l=i,c=0;const u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*t.length+i);(r=u.exec(e))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){l+=a;continue}else if((r[5]||r[6])&&i%3&&!((i+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);const d=[...r[0]][0].length,f=t.slice(0,i+r.index+d+a);if(Math.min(i,a)%2){const m=f.slice(1,-1);return{type:"em",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}const h=f.slice(2,-2);return{type:"strong",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(n),s=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&s&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=e[1],r="mailto:"+n):(n=e[1],r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let e;if(e=this.rules.inline.url.exec(t)){let r,s;if(e[2]==="@")r=e[0],s="mailto:"+r;else{let i;do i=e[0],e[0]=((n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])??"";while(i!==e[0]);r=e[0],e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},Vs=class om{constructor(e){st(this,"tokens");st(this,"options");st(this,"state");st(this,"tokenizer");st(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||$o,this.options.tokenizer=this.options.tokenizer||new zu,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:Kn,block:Dc.normal,inline:rl.normal};this.options.pedantic?(n.block=Dc.pedantic,n.inline=rl.pedantic):this.options.gfm&&(n.block=Dc.gfm,this.options.breaks?n.inline=rl.breaks:n.inline=rl.gfm),this.tokenizer.rules=n}static get rules(){return{block:Dc,inline:rl}}static lex(e,n){return new om(n).lex(e)}static lexInline(e,n){return new om(n).inlineTokens(e)}lex(e){e=e.replace(Kn.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var s,i,o;for(this.options.pedantic&&(e=e.replace(Kn.tabCharGlobal,"    ").replace(Kn.spaceLine,""));e;){let a;if((i=(s=this.options.extensions)==null?void 0:s.block)!=null&&i.some(c=>(a=c.call({lexer:this},e,n))?(e=e.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const c=n.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),n.push(a);continue}let l=e;if((o=this.options.extensions)!=null&&o.startBlock){let c=1/0;const u=e.slice(1);let d;this.options.extensions.startBlock.forEach(f=>{d=f.call({lexer:this},u),typeof d=="number"&&d>=0&&(c=Math.min(c,d))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){const c=n.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a),r=l.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var a,l,c;let r=e,s=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)u.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,s.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(s=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,o="";for(;e;){i||(o=""),i=!1;let u;if((l=(a=this.options.extensions)==null?void 0:a.inline)!=null&&l.some(f=>(u=f.call({lexer:this},e,n))?(e=e.substring(u.raw.length),n.push(u),!0):!1))continue;if(u=this.tokenizer.escape(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.tag(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.link(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(u.raw.length);const f=n.at(-1);u.type==="text"&&(f==null?void 0:f.type)==="text"?(f.raw+=u.raw,f.text+=u.text):n.push(u);continue}if(u=this.tokenizer.emStrong(e,r,o)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.codespan(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.br(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.del(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.autolink(e)){e=e.substring(u.raw.length),n.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(e))){e=e.substring(u.raw.length),n.push(u);continue}let d=e;if((c=this.options.extensions)!=null&&c.startInline){let f=1/0;const h=e.slice(1);let m;this.options.extensions.startInline.forEach(y=>{m=y.call({lexer:this},h),typeof m=="number"&&m>=0&&(f=Math.min(f,m))}),f<1/0&&f>=0&&(d=e.substring(0,f+1))}if(u=this.tokenizer.inlineText(d)){e=e.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(o=u.raw.slice(-1)),i=!0;const f=n.at(-1);(f==null?void 0:f.type)==="text"?(f.raw+=u.raw,f.text+=u.text):n.push(u);continue}if(e){const f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return n}},xa=class{constructor(t){st(this,"options");st(this,"parser");this.options=t||$o}space(t){return""}code({text:t,lang:e,escaped:n}){var i;const r=(i=(e||"").match(Kn.notSpaceStart))==null?void 0:i[0],s=t.replace(Kn.endingNewline,"")+`
`;return r?'<pre><code class="language-'+is(r)+'">'+(n?s:is(s,!0))+`</code></pre>
`:"<pre><code>"+(n?s:is(s,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,n=t.start;let r="";for(let o=0;o<t.items.length;o++){const a=t.items[o];r+=this.listitem(a)}const s=e?"ol":"ul",i=e&&n!==1?' start="'+n+'"':"";return"<"+s+i+`>
`+r+"</"+s+`>
`}listitem(t){var n;let e="";if(t.task){const r=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=r+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=r+" "+is(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let s=0;s<t.header.length;s++)n+=this.tablecell(t.header[s]);e+=this.tablerow({text:n});let r="";for(let s=0;s<t.rows.length;s++){const i=t.rows[s];n="";for(let o=0;o<i.length;o++)n+=this.tablecell(i[o]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${is(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){const r=this.parser.parseInline(n),s=Z_(t);if(s===null)return r;t=s;let i='<a href="'+t+'"';return e&&(i+=' title="'+is(e)+'"'),i+=">"+r+"</a>",i}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));const s=Z_(t);if(s===null)return is(n);t=s;let i=`<img src="${t}" alt="${n}"`;return e&&(i+=` title="${is(e)}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:is(t.text)}},ey=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},Hs=class am{constructor(e){st(this,"options");st(this,"renderer");st(this,"textRenderer");this.options=e||$o,this.options.renderer=this.options.renderer||new xa,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ey}static parse(e,n){return new am(n).parse(e)}static parseInline(e,n){return new am(n).parseInline(e)}parse(e,n=!0){var s,i;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[a.type]){const c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){r+=u||"";continue}}const l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;o+1<e.length&&e[o+1].type==="text";)c=e[++o],u+=`
`+this.renderer.text(c);n?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(e,n=this.renderer){var s,i;let r="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[a.type]){const c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=c||"";continue}}const l=a;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},up,du=(up=class{constructor(t){st(this,"options");st(this,"block");this.options=t||$o}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?Vs.lex:Vs.lexInline}provideParser(){return this.block?Hs.parse:Hs.parseInline}},st(up,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),up),ZM=class{constructor(...t){st(this,"defaults",Kg());st(this,"options",this.setOptions);st(this,"parse",this.parseMarkdown(!0));st(this,"parseInline",this.parseMarkdown(!1));st(this,"Parser",Hs);st(this,"Renderer",xa);st(this,"TextRenderer",ey);st(this,"Lexer",Vs);st(this,"Tokenizer",zu);st(this,"Hooks",du);this.use(...t)}walkTokens(t,e){var r,s;let n=[];for(const i of t)switch(n=n.concat(e.call(this,i)),i.type){case"table":{const o=i;for(const a of o.header)n=n.concat(this.walkTokens(a.tokens,e));for(const a of o.rows)for(const l of a)n=n.concat(this.walkTokens(l.tokens,e));break}case"list":{const o=i;n=n.concat(this.walkTokens(o.items,e));break}default:{const o=i;(s=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&s[o.type]?this.defaults.extensions.childTokens[o.type].forEach(a=>{const l=o[a].flat(1/0);n=n.concat(this.walkTokens(l,e))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const i=e.renderers[s.name];i?e.renderers[s.name]=function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=i.apply(this,o)),a}:e.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const i=e[s.level];i?i.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),r.extensions=e),n.renderer){const s=this.defaults.renderer||new xa(this.defaults);for(const i in n.renderer){if(!(i in s))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;const o=i,a=n.renderer[o],l=s[o];s[o]=(...c)=>{let u=a.apply(s,c);return u===!1&&(u=l.apply(s,c)),u||""}}r.renderer=s}if(n.tokenizer){const s=this.defaults.tokenizer||new zu(this.defaults);for(const i in n.tokenizer){if(!(i in s))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const o=i,a=n.tokenizer[o],l=s[o];s[o]=(...c)=>{let u=a.apply(s,c);return u===!1&&(u=l.apply(s,c)),u}}r.tokenizer=s}if(n.hooks){const s=this.defaults.hooks||new du;for(const i in n.hooks){if(!(i in s))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;const o=i,a=n.hooks[o],l=s[o];du.passThroughHooks.has(i)?s[o]=c=>{if(this.defaults.async)return Promise.resolve(a.call(s,c)).then(d=>l.call(s,d));const u=a.call(s,c);return l.call(s,u)}:s[o]=(...c)=>{let u=a.apply(s,c);return u===!1&&(u=l.apply(s,c)),u}}r.hooks=s}if(n.walkTokens){const s=this.defaults.walkTokens,i=n.walkTokens;r.walkTokens=function(o){let a=[];return a.push(i.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return Vs.lex(t,e??this.defaults)}parser(t,e){return Hs.parse(t,e??this.defaults)}parseMarkdown(t){return(n,r)=>{const s={...r},i={...this.defaults,...s},o=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&s.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=t);const a=i.hooks?i.hooks.provideLexer():t?Vs.lex:Vs.lexInline,l=i.hooks?i.hooks.provideParser():t?Hs.parse:Hs.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(n):n).then(c=>a(c,i)).then(c=>i.hooks?i.hooks.processAllTokens(c):c).then(c=>i.walkTokens?Promise.all(this.walkTokens(c,i.walkTokens)).then(()=>c):c).then(c=>l(c,i)).then(c=>i.hooks?i.hooks.postprocess(c):c).catch(o);try{i.hooks&&(n=i.hooks.preprocess(n));let c=a(n,i);i.hooks&&(c=i.hooks.processAllTokens(c)),i.walkTokens&&this.walkTokens(c,i.walkTokens);let u=l(c,i);return i.hooks&&(u=i.hooks.postprocess(u)),u}catch(c){return o(c)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+is(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}}},bo=new ZM;function xt(t,e){return bo.parse(t,e)}xt.options=xt.setOptions=function(t){return bo.setOptions(t),xt.defaults=bo.defaults,OS(xt.defaults),xt};xt.getDefaults=Kg;xt.defaults=$o;xt.use=function(...t){return bo.use(...t),xt.defaults=bo.defaults,OS(xt.defaults),xt};xt.walkTokens=function(t,e){return bo.walkTokens(t,e)};xt.parseInline=bo.parseInline;xt.Parser=Hs;xt.parser=Hs.parse;xt.Renderer=xa;xt.TextRenderer=ey;xt.Lexer=Vs;xt.lexer=Vs.lex;xt.Tokenizer=zu;xt.Hooks=du;xt.parse=xt;xt.options;xt.setOptions;xt.use;xt.walkTokens;xt.parseInline;Hs.parse;Vs.lex;function VS(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=VS(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function HS(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=VS(t))&&(r&&(r+=" "),r+=e);return r}const nw=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,rw=HS,eN=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return rw(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n==null?void 0:n[c],d=i==null?void 0:i[c];if(u===null)return null;const f=nw(u)||nw(d);return s[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:f,...h}=u;return Object.entries(h).every(m=>{let[y,S]=m;return Array.isArray(S)?S.includes({...i,...a}[y]):{...i,...a}[y]===S})?[...c,d,f]:c},[]);return rw(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},ty="-",tN=t=>{const e=rN(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(ty);return a[0]===""&&a.length!==1&&a.shift(),qS(a,e)||nN(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},qS=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?qS(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(ty);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},sw=/^\[(.+)\]$/,nN=t=>{if(sw.test(t)){const e=sw.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},rN=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const s in n)lm(n[s],r,s,e);return r},lm=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:iw(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(sN(s)){lm(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{lm(o,iw(e,i),n,r)})})},iw=(t,e)=>{let n=t;return e.split(ty).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},sN=t=>t.isThemeGetter,iN=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},cm="!",um=":",oN=um.length,aN=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const i=[];let o=0,a=0,l=0,c;for(let m=0;m<s.length;m++){let y=s[m];if(o===0&&a===0){if(y===um){i.push(s.slice(l,m)),l=m+oN;continue}if(y==="/"){c=m;continue}}y==="["?o++:y==="]"?o--:y==="("?a++:y===")"&&a--}const u=i.length===0?s:s.substring(l),d=lN(u),f=d!==u,h=c&&c>l?c-l:void 0;return{modifiers:i,hasImportantModifier:f,baseClassName:d,maybePostfixModifierPosition:h}};if(e){const s=e+um,i=r;r=o=>o.startsWith(s)?i(o.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},lN=t=>t.endsWith(cm)?t.substring(0,t.length-1):t.startsWith(cm)?t.substring(1):t,cN=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let i=[];return r.forEach(o=>{o[0]==="["||e[o]?(s.push(...i.sort(),o),i=[]):i.push(o)}),s.push(...i.sort()),s}},uN=t=>({cache:iN(t.cacheSize),parseClassName:aN(t),sortModifiers:cN(t),...tN(t)}),dN=/\s+/,fN=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=e,o=[],a=t.trim().split(dN);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:d,modifiers:f,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:y}=n(u);if(d){l=u+(l.length>0?" "+l:l);continue}let S=!!y,x=r(S?m.substring(0,y):m);if(!x){if(!S){l=u+(l.length>0?" "+l:l);continue}if(x=r(m),!x){l=u+(l.length>0?" "+l:l);continue}S=!1}const _=i(f).join(":"),g=h?_+cm:_,p=g+x;if(o.includes(p))continue;o.push(p);const v=s(x,S);for(let E=0;E<v.length;++E){const k=v[E];o.push(g+k)}l=u+(l.length>0?" "+l:l)}return l};function hN(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=KS(e))&&(r&&(r+=" "),r+=n);return r}const KS=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=KS(t[r]))&&(n&&(n+=" "),n+=e);return n};function pN(t,...e){let n,r,s,i=o;function o(l){const c=e.reduce((u,d)=>d(u),t());return n=uN(c),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=fN(l,n);return s(l,u),u}return function(){return i(hN.apply(null,arguments))}}const tn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},WS=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,GS=/^\((?:(\w[\w-]*):)?(.+)\)$/i,mN=/^\d+\/\d+$/,gN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yN=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,vN=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,bN=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_N=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fo=t=>mN.test(t),Qe=t=>!!t&&!Number.isNaN(Number(t)),ui=t=>!!t&&Number.isInteger(Number(t)),jh=t=>t.endsWith("%")&&Qe(t.slice(0,-1)),Ds=t=>gN.test(t),wN=()=>!0,xN=t=>yN.test(t)&&!vN.test(t),JS=()=>!1,EN=t=>bN.test(t),SN=t=>_N.test(t),AN=t=>!Pe(t)&&!Le(t),$N=t=>La(t,QS,JS),Pe=t=>WS.test(t),eo=t=>La(t,ZS,xN),Fh=t=>La(t,TN,Qe),ow=t=>La(t,YS,JS),CN=t=>La(t,XS,SN),Pc=t=>La(t,eA,EN),Le=t=>GS.test(t),il=t=>Ma(t,ZS),kN=t=>Ma(t,ON),aw=t=>Ma(t,YS),IN=t=>Ma(t,QS),RN=t=>Ma(t,XS),Lc=t=>Ma(t,eA,!0),La=(t,e,n)=>{const r=WS.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Ma=(t,e,n=!1)=>{const r=GS.exec(t);return r?r[1]?e(r[1]):n:!1},YS=t=>t==="position"||t==="percentage",XS=t=>t==="image"||t==="url",QS=t=>t==="length"||t==="size"||t==="bg-size",ZS=t=>t==="length",TN=t=>t==="number",ON=t=>t==="family-name",eA=t=>t==="shadow",DN=()=>{const t=tn("color"),e=tn("font"),n=tn("text"),r=tn("font-weight"),s=tn("tracking"),i=tn("leading"),o=tn("breakpoint"),a=tn("container"),l=tn("spacing"),c=tn("radius"),u=tn("shadow"),d=tn("inset-shadow"),f=tn("text-shadow"),h=tn("drop-shadow"),m=tn("blur"),y=tn("perspective"),S=tn("aspect"),x=tn("ease"),_=tn("animate"),g=()=>["auto","avoid","all","avoid-page","page","left","right","column"],p=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],v=()=>[...p(),Le,Pe],E=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],A=()=>[Le,Pe,l],C=()=>[Fo,"full","auto",...A()],I=()=>[ui,"none","subgrid",Le,Pe],N=()=>["auto",{span:["full",ui,Le,Pe]},ui,Le,Pe],j=()=>[ui,"auto",Le,Pe],V=()=>["auto","min","max","fr",Le,Pe],L=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Z=()=>["start","end","center","stretch","center-safe","end-safe"],T=()=>["auto",...A()],q=()=>[Fo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],z=()=>[t,Le,Pe],se=()=>[...p(),aw,ow,{position:[Le,Pe]}],W=()=>["no-repeat",{repeat:["","x","y","space","round"]}],he=()=>["auto","cover","contain",IN,$N,{size:[Le,Pe]}],me=()=>[jh,il,eo],ve=()=>["","none","full",c,Le,Pe],Ce=()=>["",Qe,il,eo],J=()=>["solid","dashed","dotted","double"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>[Qe,jh,aw,ow],ee=()=>["","none",m,Le,Pe],ce=()=>["none",Qe,Le,Pe],ie=()=>["none",Qe,Le,Pe],Ee=()=>[Qe,Le,Pe],ke=()=>[Fo,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ds],breakpoint:[Ds],color:[wN],container:[Ds],"drop-shadow":[Ds],ease:["in","out","in-out"],font:[AN],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ds],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ds],shadow:[Ds],spacing:["px",Qe],text:[Ds],"text-shadow":[Ds],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Fo,Pe,Le,S]}],container:["container"],columns:[{columns:[Qe,Pe,Le,a]}],"break-after":[{"break-after":g()}],"break-before":[{"break-before":g()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[ui,"auto",Le,Pe]}],basis:[{basis:[Fo,"full","auto",a,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Qe,Fo,"auto","initial","none",Pe]}],grow:[{grow:["",Qe,Le,Pe]}],shrink:[{shrink:["",Qe,Le,Pe]}],order:[{order:[ui,"first","last","none",Le,Pe]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:N()}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:N()}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...L(),"normal"]}],"justify-items":[{"justify-items":[...Z(),"normal"]}],"justify-self":[{"justify-self":["auto",...Z()]}],"align-content":[{content:["normal",...L()]}],"align-items":[{items:[...Z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Z(),{baseline:["","last"]}]}],"place-content":[{"place-content":L()}],"place-items":[{"place-items":[...Z(),"baseline"]}],"place-self":[{"place-self":["auto",...Z()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:T()}],mx:[{mx:T()}],my:[{my:T()}],ms:[{ms:T()}],me:[{me:T()}],mt:[{mt:T()}],mr:[{mr:T()}],mb:[{mb:T()}],ml:[{ml:T()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:q()}],w:[{w:[a,"screen",...q()]}],"min-w":[{"min-w":[a,"screen","none",...q()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...q()]}],h:[{h:["screen","lh",...q()]}],"min-h":[{"min-h":["screen","lh","none",...q()]}],"max-h":[{"max-h":["screen","lh",...q()]}],"font-size":[{text:["base",n,il,eo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Le,Fh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",jh,Pe]}],"font-family":[{font:[kN,Pe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Le,Pe]}],"line-clamp":[{"line-clamp":[Qe,"none",Le,Fh]}],leading:[{leading:[i,...A()]}],"list-image":[{"list-image":["none",Le,Pe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Le,Pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:[Qe,"from-font","auto",Le,eo]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[Qe,"auto",Le,Pe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le,Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le,Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:se()}],"bg-repeat":[{bg:W()}],"bg-size":[{bg:he()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ui,Le,Pe],radial:["",Le,Pe],conic:[ui,Le,Pe]},RN,CN]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:me()}],"gradient-via-pos":[{via:me()}],"gradient-to-pos":[{to:me()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:ve()}],"rounded-s":[{"rounded-s":ve()}],"rounded-e":[{"rounded-e":ve()}],"rounded-t":[{"rounded-t":ve()}],"rounded-r":[{"rounded-r":ve()}],"rounded-b":[{"rounded-b":ve()}],"rounded-l":[{"rounded-l":ve()}],"rounded-ss":[{"rounded-ss":ve()}],"rounded-se":[{"rounded-se":ve()}],"rounded-ee":[{"rounded-ee":ve()}],"rounded-es":[{"rounded-es":ve()}],"rounded-tl":[{"rounded-tl":ve()}],"rounded-tr":[{"rounded-tr":ve()}],"rounded-br":[{"rounded-br":ve()}],"rounded-bl":[{"rounded-bl":ve()}],"border-w":[{border:Ce()}],"border-w-x":[{"border-x":Ce()}],"border-w-y":[{"border-y":Ce()}],"border-w-s":[{"border-s":Ce()}],"border-w-e":[{"border-e":Ce()}],"border-w-t":[{"border-t":Ce()}],"border-w-r":[{"border-r":Ce()}],"border-w-b":[{"border-b":Ce()}],"border-w-l":[{"border-l":Ce()}],"divide-x":[{"divide-x":Ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...J(),"hidden","none"]}],"divide-style":[{divide:[...J(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...J(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Qe,Le,Pe]}],"outline-w":[{outline:["",Qe,il,eo]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",u,Lc,Pc]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",d,Lc,Pc]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:Ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[Qe,eo]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":Ce()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",f,Lc,Pc]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[Qe,Le,Pe]}],"mix-blend":[{"mix-blend":[...G(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":G()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Qe]}],"mask-image-linear-from-pos":[{"mask-linear-from":P()}],"mask-image-linear-to-pos":[{"mask-linear-to":P()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":P()}],"mask-image-t-to-pos":[{"mask-t-to":P()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":P()}],"mask-image-r-to-pos":[{"mask-r-to":P()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":P()}],"mask-image-b-to-pos":[{"mask-b-to":P()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":P()}],"mask-image-l-to-pos":[{"mask-l-to":P()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":P()}],"mask-image-x-to-pos":[{"mask-x-to":P()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":P()}],"mask-image-y-to-pos":[{"mask-y-to":P()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[Le,Pe]}],"mask-image-radial-from-pos":[{"mask-radial-from":P()}],"mask-image-radial-to-pos":[{"mask-radial-to":P()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":p()}],"mask-image-conic-pos":[{"mask-conic":[Qe]}],"mask-image-conic-from-pos":[{"mask-conic-from":P()}],"mask-image-conic-to-pos":[{"mask-conic-to":P()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:se()}],"mask-repeat":[{mask:W()}],"mask-size":[{mask:he()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Le,Pe]}],filter:[{filter:["","none",Le,Pe]}],blur:[{blur:ee()}],brightness:[{brightness:[Qe,Le,Pe]}],contrast:[{contrast:[Qe,Le,Pe]}],"drop-shadow":[{"drop-shadow":["","none",h,Lc,Pc]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",Qe,Le,Pe]}],"hue-rotate":[{"hue-rotate":[Qe,Le,Pe]}],invert:[{invert:["",Qe,Le,Pe]}],saturate:[{saturate:[Qe,Le,Pe]}],sepia:[{sepia:["",Qe,Le,Pe]}],"backdrop-filter":[{"backdrop-filter":["","none",Le,Pe]}],"backdrop-blur":[{"backdrop-blur":ee()}],"backdrop-brightness":[{"backdrop-brightness":[Qe,Le,Pe]}],"backdrop-contrast":[{"backdrop-contrast":[Qe,Le,Pe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Qe,Le,Pe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Qe,Le,Pe]}],"backdrop-invert":[{"backdrop-invert":["",Qe,Le,Pe]}],"backdrop-opacity":[{"backdrop-opacity":[Qe,Le,Pe]}],"backdrop-saturate":[{"backdrop-saturate":[Qe,Le,Pe]}],"backdrop-sepia":[{"backdrop-sepia":["",Qe,Le,Pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Le,Pe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Qe,"initial",Le,Pe]}],ease:[{ease:["linear","initial",x,Le,Pe]}],delay:[{delay:[Qe,Le,Pe]}],animate:[{animate:["none",_,Le,Pe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,Le,Pe]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:ce()}],"rotate-x":[{"rotate-x":ce()}],"rotate-y":[{"rotate-y":ce()}],"rotate-z":[{"rotate-z":ce()}],scale:[{scale:ie()}],"scale-x":[{"scale-x":ie()}],"scale-y":[{"scale-y":ie()}],"scale-z":[{"scale-z":ie()}],"scale-3d":["scale-3d"],skew:[{skew:Ee()}],"skew-x":[{"skew-x":Ee()}],"skew-y":[{"skew-y":Ee()}],transform:[{transform:[Le,Pe,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ke()}],"translate-x":[{"translate-x":ke()}],"translate-y":[{"translate-y":ke()}],"translate-z":[{"translate-z":ke()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le,Pe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le,Pe]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[Qe,il,eo,Fh]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},PN=pN(DN),LN=["top","right","bottom","left"],Fi=Math.min,ur=Math.max,Vu=Math.round,Mc=Math.floor,ms=t=>({x:t,y:t}),MN={left:"right",right:"left",bottom:"top",top:"bottom"},NN={start:"end",end:"start"};function dm(t,e,n){return ur(t,Fi(e,n))}function ei(t,e){return typeof t=="function"?t(e):t}function ti(t){return t.split("-")[0]}function Na(t){return t.split("-")[1]}function ny(t){return t==="x"?"y":"x"}function ry(t){return t==="y"?"height":"width"}const jN=new Set(["top","bottom"]);function ds(t){return jN.has(ti(t))?"y":"x"}function sy(t){return ny(ds(t))}function FN(t,e,n){n===void 0&&(n=!1);const r=Na(t),s=sy(t),i=ry(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Hu(o)),[o,Hu(o)]}function UN(t){const e=Hu(t);return[fm(t),e,fm(e)]}function fm(t){return t.replace(/start|end/g,e=>NN[e])}const lw=["left","right"],cw=["right","left"],BN=["top","bottom"],zN=["bottom","top"];function VN(t,e,n){switch(t){case"top":case"bottom":return n?e?cw:lw:e?lw:cw;case"left":case"right":return e?BN:zN;default:return[]}}function HN(t,e,n,r){const s=Na(t);let i=VN(ti(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(fm)))),i}function Hu(t){return t.replace(/left|right|bottom|top/g,e=>MN[e])}function qN(t){return{top:0,right:0,bottom:0,left:0,...t}}function tA(t){return typeof t!="number"?qN(t):{top:t,right:t,bottom:t,left:t}}function qu(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function uw(t,e,n){let{reference:r,floating:s}=t;const i=ds(e),o=sy(e),a=ry(o),l=ti(e),c=i==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-s.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-s.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Na(e)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const KN=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=uw(c,r,l),f=r,h={},m=0;for(let y=0;y<a.length;y++){const{name:S,fn:x}=a[y],{x:_,y:g,data:p,reset:v}=await x({x:u,y:d,initialPlacement:r,placement:f,strategy:s,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:e}});u=_??u,d=g??d,h={...h,[S]:{...h[S],...p}},v&&m<=50&&(m++,typeof v=="object"&&(v.placement&&(f=v.placement),v.rects&&(c=v.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):v.rects),{x:u,y:d}=uw(c,f,l)),y=-1)}return{x:u,y:d,placement:f,strategy:s,middlewareData:h}};async function zl(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=ei(e,t),m=tA(h),S=a[f?d==="floating"?"reference":"floating":d],x=qu(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(S)))==null||n?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),_=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,g=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),p=await(i.isElement==null?void 0:i.isElement(g))?await(i.getScale==null?void 0:i.getScale(g))||{x:1,y:1}:{x:1,y:1},v=qu(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:g,strategy:l}):_);return{top:(x.top-v.top+m.top)/p.y,bottom:(v.bottom-x.bottom+m.bottom)/p.y,left:(x.left-v.left+m.left)/p.x,right:(v.right-x.right+m.right)/p.x}}const WN=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=ei(t,e)||{};if(c==null)return{};const d=tA(u),f={x:n,y:r},h=sy(s),m=ry(h),y=await o.getDimensions(c),S=h==="y",x=S?"top":"left",_=S?"bottom":"right",g=S?"clientHeight":"clientWidth",p=i.reference[m]+i.reference[h]-f[h]-i.floating[m],v=f[h]-i.reference[h],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let k=E?E[g]:0;(!k||!await(o.isElement==null?void 0:o.isElement(E)))&&(k=a.floating[g]||i.floating[m]);const A=p/2-v/2,C=k/2-y[m]/2-1,I=Fi(d[x],C),N=Fi(d[_],C),j=I,V=k-y[m]-N,L=k/2-y[m]/2+A,Z=dm(j,L,V),T=!l.arrow&&Na(s)!=null&&L!==Z&&i.reference[m]/2-(L<j?I:N)-y[m]/2<0,q=T?L<j?L-j:L-V:0;return{[h]:f[h]+q,data:{[h]:Z,centerOffset:L-Z-q,...T&&{alignmentOffset:q}},reset:T}}}),GN=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:y=!0,...S}=ei(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=ti(s),_=ds(a),g=ti(a)===a,p=await(l.isRTL==null?void 0:l.isRTL(c.floating)),v=f||(g||!y?[Hu(a)]:UN(a)),E=m!=="none";!f&&E&&v.push(...HN(a,y,m,p));const k=[a,...v],A=await zl(e,S),C=[];let I=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&C.push(A[x]),d){const L=FN(s,o,p);C.push(A[L[0]],A[L[1]])}if(I=[...I,{placement:s,overflows:C}],!C.every(L=>L<=0)){var N,j;const L=(((N=i.flip)==null?void 0:N.index)||0)+1,Z=k[L];if(Z&&(!(d==="alignment"?_!==ds(Z):!1)||I.every(z=>z.overflows[0]>0&&ds(z.placement)===_)))return{data:{index:L,overflows:I},reset:{placement:Z}};let T=(j=I.filter(q=>q.overflows[0]<=0).sort((q,z)=>q.overflows[1]-z.overflows[1])[0])==null?void 0:j.placement;if(!T)switch(h){case"bestFit":{var V;const q=(V=I.filter(z=>{if(E){const se=ds(z.placement);return se===_||se==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(se=>se>0).reduce((se,W)=>se+W,0)]).sort((z,se)=>z[1]-se[1])[0])==null?void 0:V[0];q&&(T=q);break}case"initialPlacement":T=a;break}if(s!==T)return{reset:{placement:T}}}return{}}}};function dw(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function fw(t){return LN.some(e=>t[e]>=0)}const JN=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ei(t,e);switch(r){case"referenceHidden":{const i=await zl(e,{...s,elementContext:"reference"}),o=dw(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:fw(o)}}}case"escaped":{const i=await zl(e,{...s,altBoundary:!0}),o=dw(i,n.floating);return{data:{escapedOffsets:o,escaped:fw(o)}}}default:return{}}}}},nA=new Set(["left","top"]);async function YN(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=ti(n),a=Na(n),l=ds(n)==="y",c=nA.has(o)?-1:1,u=i&&l?-1:1,d=ei(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const XN=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await YN(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},QN=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:S=>{let{x,y:_}=S;return{x,y:_}}},...l}=ei(t,e),c={x:n,y:r},u=await zl(e,l),d=ds(ti(s)),f=ny(d);let h=c[f],m=c[d];if(i){const S=f==="y"?"top":"left",x=f==="y"?"bottom":"right",_=h+u[S],g=h-u[x];h=dm(_,h,g)}if(o){const S=d==="y"?"top":"left",x=d==="y"?"bottom":"right",_=m+u[S],g=m-u[x];m=dm(_,m,g)}const y=a.fn({...e,[f]:h,[d]:m});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[f]:i,[d]:o}}}}}},ZN=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ei(t,e),u={x:n,y:r},d=ds(s),f=ny(d);let h=u[f],m=u[d];const y=ei(a,e),S=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const g=f==="y"?"height":"width",p=i.reference[f]-i.floating[g]+S.mainAxis,v=i.reference[f]+i.reference[g]-S.mainAxis;h<p?h=p:h>v&&(h=v)}if(c){var x,_;const g=f==="y"?"width":"height",p=nA.has(ti(s)),v=i.reference[d]-i.floating[g]+(p&&((x=o.offset)==null?void 0:x[d])||0)+(p?0:S.crossAxis),E=i.reference[d]+i.reference[g]+(p?0:((_=o.offset)==null?void 0:_[d])||0)-(p?S.crossAxis:0);m<v?m=v:m>E&&(m=E)}return{[f]:h,[d]:m}}}},e3=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ei(t,e),u=await zl(e,c),d=ti(s),f=Na(s),h=ds(s)==="y",{width:m,height:y}=i.floating;let S,x;d==="top"||d==="bottom"?(S=d,x=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=d,S=f==="end"?"top":"bottom");const _=y-u.top-u.bottom,g=m-u.left-u.right,p=Fi(y-u[S],_),v=Fi(m-u[x],g),E=!e.middlewareData.shift;let k=p,A=v;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=g),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=_),E&&!f){const I=ur(u.left,0),N=ur(u.right,0),j=ur(u.top,0),V=ur(u.bottom,0);h?A=m-2*(I!==0||N!==0?I+N:ur(u.left,u.right)):k=y-2*(j!==0||V!==0?j+V:ur(u.top,u.bottom))}await l({...e,availableWidth:A,availableHeight:k});const C=await o.getDimensions(a.floating);return m!==C.width||y!==C.height?{reset:{rects:!0}}:{}}}};function qd(){return typeof window<"u"}function Co(t){return iy(t)?(t.nodeName||"").toLowerCase():"#document"}function mr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function As(t){var e;return(e=(iy(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function iy(t){return qd()?t instanceof Node||t instanceof mr(t).Node:!1}function Xr(t){return qd()?t instanceof Element||t instanceof mr(t).Element:!1}function vs(t){return qd()?t instanceof HTMLElement||t instanceof mr(t).HTMLElement:!1}function hw(t){return!qd()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof mr(t).ShadowRoot}const t3=new Set(["inline","contents"]);function ic(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Qr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!t3.has(s)}const n3=new Set(["table","td","th"]);function r3(t){return n3.has(Co(t))}const s3=[":popover-open",":modal"];function Kd(t){return s3.some(e=>{try{return t.matches(e)}catch{return!1}})}const i3=["transform","translate","scale","rotate","perspective"],o3=["transform","translate","scale","rotate","perspective","filter"],a3=["paint","layout","strict","content"];function oy(t){const e=ay(),n=Xr(t)?Qr(t):t;return i3.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||o3.some(r=>(n.willChange||"").includes(r))||a3.some(r=>(n.contain||"").includes(r))}function l3(t){let e=Ui(t);for(;vs(e)&&!Ea(e);){if(oy(e))return e;if(Kd(e))return null;e=Ui(e)}return null}function ay(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const c3=new Set(["html","body","#document"]);function Ea(t){return c3.has(Co(t))}function Qr(t){return mr(t).getComputedStyle(t)}function Wd(t){return Xr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ui(t){if(Co(t)==="html")return t;const e=t.assignedSlot||t.parentNode||hw(t)&&t.host||As(t);return hw(e)?e.host:e}function rA(t){const e=Ui(t);return Ea(e)?t.ownerDocument?t.ownerDocument.body:t.body:vs(e)&&ic(e)?e:rA(e)}function Vl(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=rA(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=mr(s);if(i){const a=hm(o);return e.concat(o,o.visualViewport||[],ic(s)?s:[],a&&n?Vl(a):[])}return e.concat(s,Vl(s,[],n))}function hm(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function sA(t){const e=Qr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=vs(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Vu(n)!==i||Vu(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function ly(t){return Xr(t)?t:t.contextElement}function fa(t){const e=ly(t);if(!vs(e))return ms(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=sA(e);let o=(i?Vu(n.width):n.width)/r,a=(i?Vu(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const u3=ms(0);function iA(t){const e=mr(t);return!ay()||!e.visualViewport?u3:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function d3(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==mr(t)?!1:e}function _o(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=ly(t);let o=ms(1);e&&(r?Xr(r)&&(o=fa(r)):o=fa(t));const a=d3(i,n,r)?iA(i):ms(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const f=mr(i),h=r&&Xr(r)?mr(r):r;let m=f,y=hm(m);for(;y&&r&&h!==m;){const S=fa(y),x=y.getBoundingClientRect(),_=Qr(y),g=x.left+(y.clientLeft+parseFloat(_.paddingLeft))*S.x,p=x.top+(y.clientTop+parseFloat(_.paddingTop))*S.y;l*=S.x,c*=S.y,u*=S.x,d*=S.y,l+=g,c+=p,m=mr(y),y=hm(m)}}return qu({width:u,height:d,x:l,y:c})}function cy(t,e){const n=Wd(t).scrollLeft;return e?e.left+n:_o(As(t)).left+n}function oA(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:cy(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function f3(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=As(r),a=e?Kd(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=ms(1);const u=ms(0),d=vs(r);if((d||!d&&!i)&&((Co(r)!=="body"||ic(o))&&(l=Wd(r)),vs(r))){const h=_o(r);c=fa(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const f=o&&!d&&!i?oA(o,l,!0):ms(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function h3(t){return Array.from(t.getClientRects())}function p3(t){const e=As(t),n=Wd(t),r=t.ownerDocument.body,s=ur(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=ur(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+cy(t);const a=-n.scrollTop;return Qr(r).direction==="rtl"&&(o+=ur(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function m3(t,e){const n=mr(t),r=As(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=ay();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}const g3=new Set(["absolute","fixed"]);function y3(t,e){const n=_o(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=vs(t)?fa(t):ms(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function pw(t,e,n){let r;if(e==="viewport")r=m3(t,n);else if(e==="document")r=p3(As(t));else if(Xr(e))r=y3(e,n);else{const s=iA(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return qu(r)}function aA(t,e){const n=Ui(t);return n===e||!Xr(n)||Ea(n)?!1:Qr(n).position==="fixed"||aA(n,e)}function v3(t,e){const n=e.get(t);if(n)return n;let r=Vl(t,[],!1).filter(a=>Xr(a)&&Co(a)!=="body"),s=null;const i=Qr(t).position==="fixed";let o=i?Ui(t):t;for(;Xr(o)&&!Ea(o);){const a=Qr(o),l=oy(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&g3.has(s.position)||ic(o)&&!l&&aA(t,o))?r=r.filter(u=>u!==o):s=a,o=Ui(o)}return e.set(t,r),r}function b3(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Kd(e)?[]:v3(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=pw(e,u,s);return c.top=ur(d.top,c.top),c.right=Fi(d.right,c.right),c.bottom=Fi(d.bottom,c.bottom),c.left=ur(d.left,c.left),c},pw(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function _3(t){const{width:e,height:n}=sA(t);return{width:e,height:n}}function w3(t,e,n){const r=vs(e),s=As(e),i=n==="fixed",o=_o(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=ms(0);function c(){l.x=cy(s)}if(r||!r&&!i)if((Co(e)!=="body"||ic(s))&&(a=Wd(e)),r){const h=_o(e,!0,i,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else s&&c();i&&!r&&s&&c();const u=s&&!r&&!i?oA(s,a):ms(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function Uh(t){return Qr(t).position==="static"}function mw(t,e){if(!vs(t)||Qr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return As(t)===n&&(n=n.ownerDocument.body),n}function lA(t,e){const n=mr(t);if(Kd(t))return n;if(!vs(t)){let s=Ui(t);for(;s&&!Ea(s);){if(Xr(s)&&!Uh(s))return s;s=Ui(s)}return n}let r=mw(t,e);for(;r&&r3(r)&&Uh(r);)r=mw(r,e);return r&&Ea(r)&&Uh(r)&&!oy(r)?n:r||l3(t)||n}const x3=async function(t){const e=this.getOffsetParent||lA,n=this.getDimensions,r=await n(t.floating);return{reference:w3(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function E3(t){return Qr(t).direction==="rtl"}const S3={convertOffsetParentRelativeRectToViewportRelativeRect:f3,getDocumentElement:As,getClippingRect:b3,getOffsetParent:lA,getElementRects:x3,getClientRects:h3,getDimensions:_3,getScale:fa,isElement:Xr,isRTL:E3};function cA(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function A3(t,e){let n=null,r;const s=As(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||e(),!f||!h)return;const m=Mc(d),y=Mc(s.clientWidth-(u+f)),S=Mc(s.clientHeight-(d+h)),x=Mc(u),g={rootMargin:-m+"px "+-y+"px "+-S+"px "+-x+"px",threshold:ur(0,Fi(1,l))||1};let p=!0;function v(E){const k=E[0].intersectionRatio;if(k!==l){if(!p)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!cA(c,t.getBoundingClientRect())&&o(),p=!1}try{n=new IntersectionObserver(v,{...g,root:s.ownerDocument})}catch{n=new IntersectionObserver(v,g)}n.observe(t)}return o(!0),i}function $3(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=ly(t),u=s||i?[...c?Vl(c):[],...Vl(e)]:[];u.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const d=c&&a?A3(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(x=>{let[_]=x;_&&_.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var g;(g=h)==null||g.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let m,y=l?_o(t):null;l&&S();function S(){const x=_o(t);y&&!cA(y,x)&&n(),y=x,m=requestAnimationFrame(S)}return n(),()=>{var x;u.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),d==null||d(),(x=h)==null||x.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const C3=XN,k3=QN,gw=GN,I3=e3,R3=JN,T3=WN,O3=ZN,D3=(t,e,n)=>{const r=new Map,s={platform:S3,...n},i={...s.platform,_c:r};return KN(t,e,{...s,platform:i})};function P3(t){return t!=null&&typeof t=="object"&&"$el"in t}function pm(t){if(P3(t)){const e=t.$el;return iy(e)&&Co(e)==="#comment"?null:e}return t}function Wo(t){return typeof t=="function"?t():$(t)}function L3(t){return{name:"arrow",options:t,fn(e){const n=pm(Wo(t.element));return n==null?{}:T3({element:n,padding:t.padding}).fn(e)}}}function uA(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function yw(t,e){const n=uA(t);return Math.round(e*n)/n}function M3(t,e,n){n===void 0&&(n={});const r=n.whileElementsMounted,s=ne(()=>{var k;return(k=Wo(n.open))!=null?k:!0}),i=ne(()=>Wo(n.middleware)),o=ne(()=>{var k;return(k=Wo(n.placement))!=null?k:"bottom"}),a=ne(()=>{var k;return(k=Wo(n.strategy))!=null?k:"absolute"}),l=ne(()=>{var k;return(k=Wo(n.transform))!=null?k:!0}),c=ne(()=>pm(t.value)),u=ne(()=>pm(e.value)),d=xe(0),f=xe(0),h=xe(a.value),m=xe(o.value),y=yr({}),S=xe(!1),x=ne(()=>{const k={position:h.value,left:"0",top:"0"};if(!u.value)return k;const A=yw(u.value,d.value),C=yw(u.value,f.value);return l.value?{...k,transform:"translate("+A+"px, "+C+"px)",...uA(u.value)>=1.5&&{willChange:"transform"}}:{position:h.value,left:A+"px",top:C+"px"}});let _;function g(){if(c.value==null||u.value==null)return;const k=s.value;D3(c.value,u.value,{middleware:i.value,placement:o.value,strategy:a.value}).then(A=>{d.value=A.x,f.value=A.y,h.value=A.strategy,m.value=A.placement,y.value=A.middlewareData,S.value=k!==!1})}function p(){typeof _=="function"&&(_(),_=void 0)}function v(){if(p(),r===void 0){g();return}if(c.value!=null&&u.value!=null){_=r(c.value,u.value,g);return}}function E(){s.value||(S.value=!1)}return ot([i,o,a,s],g,{flush:"sync"}),ot([c,u],v,{flush:"sync"}),ot(s,E,{flush:"sync"}),Eo()&&Oa(p),{x:no(d),y:no(f),strategy:no(h),placement:no(m),middlewareData:no(y),isPositioned:no(S),floatingStyles:x,update:g}}function uy(t){return t?t.flatMap(e=>e.type===Ge?uy(e.children):[e]):[]}const mm=pe({name:"PrimitiveSlot",inheritAttrs:!1,setup(t,{attrs:e,slots:n}){return()=>{var l;if(!n.default)return null;const r=uy(n.default()),s=r.findIndex(c=>c.type!==Vt);if(s===-1)return r;const i=r[s];(l=i.props)==null||delete l.ref;const o=i.props?Ve(e,i.props):e,a=Yr({...i,props:{}},o);return r.length===1?a:(r[s]=a,r)}}}),N3=["area","img","input"],$t=pe({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(t,{attrs:e,slots:n}){const r=t.asChild?"template":t.as;return typeof r=="string"&&N3.includes(r)?()=>Yn(r,e):r!=="template"?()=>Yn(t.as,e,{default:n.default}):()=>Yn(mm,e,{default:n.default})}}),Gd=pe({__name:"VisuallyHidden",props:{feature:{default:"focusable"},asChild:{type:Boolean},as:{default:"span"}},setup(t){return(e,n)=>(O(),ae($($t),{as:e.as,"as-child":e.asChild,"aria-hidden":e.feature==="focusable"?"true":void 0,"data-hidden":e.feature==="fully-hidden"?"":void 0,tabindex:e.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal"}},{default:Y(()=>[$e(e.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}});function j3(t,e){var n;const r=yr();return Dt(()=>{r.value=t()},{...e,flush:(n=void 0)!=null?n:"sync"}),Es(r)}function ja(t){return Eo()?(Oa(t),!0):!1}function F3(t){let e=!1,n;const r=Ta(!0);return(...s)=>(e||(n=r.run(()=>t(...s)),e=!0),n)}function dA(t){let e=0,n,r;const s=()=>{e-=1,r&&e<=0&&(r.stop(),n=void 0,r=void 0)};return(...i)=>(e+=1,r||(r=Ta(!0),n=r.run(()=>t(...i))),ja(s),n)}const $s=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const U3=t=>typeof t<"u",B3=Object.prototype.toString,z3=t=>B3.call(t)==="[object Object]",V3=()=>{},vw=H3();function H3(){var t,e;return $s&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window==null?void 0:window.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function q3(t){return Kt()}function Bh(t){return Array.isArray(t)?t:[t]}function K3(t,e=1e4){return So((n,r)=>{let s=fn(t),i;const o=()=>setTimeout(()=>{s=fn(t),r()},fn(e));return ja(()=>{clearTimeout(i)}),{get(){return n(),s},set(a){s=a,r(),clearTimeout(i),i=o()}}})}const W3=fn;function G3(t,e){q3()&&Pa(t,e)}function J3(t,e,n={}){const{immediate:r=!0,immediateCallback:s=!1}=n,i=yr(!1);let o=null;function a(){o&&(clearTimeout(o),o=null)}function l(){i.value=!1,a()}function c(...u){s&&t(),a(),i.value=!0,o=setTimeout(()=>{i.value=!1,o=null,t(...u)},fn(e))}return r&&(i.value=!0,$s&&c()),ja(l),{isPending:Es(i),start:c,stop:l}}function Y3(t=1e3,e={}){const{controls:n=!1,callback:r}=e,s=J3(r??V3,t,e),i=ne(()=>!s.isPending.value);return n?{ready:i,...s}:i}function X3(t,e,n){return ot(t,e,{...n,immediate:!0})}const oc=$s?window:void 0;function jr(t){var e;const n=fn(t);return(e=n==null?void 0:n.$el)!=null?e:n}function Ku(...t){const e=[],n=()=>{e.forEach(a=>a()),e.length=0},r=(a,l,c,u)=>(a.addEventListener(l,c,u),()=>a.removeEventListener(l,c,u)),s=ne(()=>{const a=Bh(fn(t[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),i=X3(()=>{var a,l;return[(l=(a=s.value)==null?void 0:a.map(c=>jr(c)))!=null?l:[oc].filter(c=>c!=null),Bh(fn(s.value?t[1]:t[0])),Bh($(s.value?t[2]:t[1])),fn(s.value?t[3]:t[2])]},([a,l,c,u])=>{if(n(),!(a!=null&&a.length)||!(l!=null&&l.length)||!(c!=null&&c.length))return;const d=z3(u)?{...u}:u;e.push(...a.flatMap(f=>l.flatMap(h=>c.map(m=>r(f,h,m,d)))))},{flush:"post"}),o=()=>{i(),n()};return ja(n),o}function fA(){const t=yr(!1),e=Kt();return e&&Ht(()=>{t.value=!0},e),t}function Q3(t){const e=fA();return ne(()=>(e.value,!!t()))}function Z3(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function dy(...t){let e,n,r={};t.length===3?(e=t[0],n=t[1],r=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,n=t[0],r=t[1]):(e=t[0],n=t[1]):(e=!0,n=t[0]);const{target:s=oc,eventName:i="keydown",passive:o=!1,dedupe:a=!1}=r,l=Z3(e);return Ku(s,i,u=>{u.repeat&&fn(a)||l(u)&&n(u)},o)}function hA(t,e={}){const{immediate:n=!0,fpsLimit:r=void 0,window:s=oc,once:i=!1}=e,o=yr(!1),a=ne(()=>r?1e3/fn(r):null);let l=0,c=null;function u(h){if(!o.value||!s)return;l||(l=h);const m=h-l;if(a.value&&m<a.value){c=s.requestAnimationFrame(u);return}if(l=h,t({delta:m,timestamp:h}),i){o.value=!1,c=null;return}c=s.requestAnimationFrame(u)}function d(){!o.value&&s&&(o.value=!0,l=0,c=s.requestAnimationFrame(u))}function f(){o.value=!1,c!=null&&s&&(s.cancelAnimationFrame(c),c=null)}return n&&d(),ja(f),{isActive:Es(o),pause:f,resume:d}}function ej(t){return JSON.parse(JSON.stringify(t))}function tj(t,e,n={}){const{window:r=oc,...s}=n;let i;const o=Q3(()=>r&&"ResizeObserver"in r),a=()=>{i&&(i.disconnect(),i=void 0)},l=ne(()=>{const d=fn(t);return Array.isArray(d)?d.map(f=>jr(f)):[jr(d)]}),c=ot(l,d=>{if(a(),o.value&&r){i=new ResizeObserver(e);for(const f of d)f&&i.observe(f,s)}},{immediate:!0,flush:"post"}),u=()=>{a(),c()};return ja(u),{isSupported:o,stop:u}}function Bi(t,e,n,r={}){var s,i,o;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:d,shouldEmit:f}=r,h=Kt(),m=n||(h==null?void 0:h.emit)||((s=h==null?void 0:h.$emit)==null?void 0:s.bind(h))||((o=(i=h==null?void 0:h.proxy)==null?void 0:i.$emit)==null?void 0:o.bind(h==null?void 0:h.proxy));let y=c;e||(e="modelValue"),y=y||`update:${e.toString()}`;const S=g=>a?typeof a=="function"?a(g):ej(g):g,x=()=>U3(t[e])?S(t[e]):d,_=g=>{f?f(g)&&m(y,g):m(y,g)};if(l){const g=x(),p=xe(g);let v=!1;return ot(()=>t[e],E=>{v||(v=!0,p.value=S(E),Tt(()=>v=!1))}),ot(p,E=>{!v&&(E!==t[e]||u)&&_(E)},{deep:u}),p}else return ne({get(){return x()},set(g){_(g)}})}function Nn(t,e){const n=typeof t=="string"&&!e?`${t}Context`:e,r=Symbol(n);return[o=>{const a=qt(r,o);if(a||a===null)return a;throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(t)?`one of the following components: ${t.join(", ")}`:`\`${t}\``}`)},o=>(pr(r,o),o)]}function bw(t){return typeof t=="string"?`'${t}'`:new nj().serialize(t)}const nj=function(){var e;class t{constructor(){bv(this,e,new Map)}compare(r,s){const i=typeof r,o=typeof s;return i==="string"&&o==="string"?r.localeCompare(s):i==="number"&&o==="number"?r-s:String.prototype.localeCompare.call(this.serialize(r,!0),this.serialize(s,!0))}serialize(r,s){if(r===null)return"null";switch(typeof r){case"string":return s?r:`'${r}'`;case"bigint":return`${r}n`;case"object":return this.$object(r);case"function":return this.$function(r)}return String(r)}serializeObject(r){const s=Object.prototype.toString.call(r);if(s!=="[object Object]")return this.serializeBuiltInType(s.length<10?`unknown:${s}`:s.slice(8,-1),r);const i=r.constructor,o=i===Object||i===void 0?"":i.name;if(o!==""&&globalThis[o]===i)return this.serializeBuiltInType(o,r);if(typeof r.toJSON=="function"){const a=r.toJSON();return o+(a!==null&&typeof a=="object"?this.$object(a):`(${this.serialize(a)})`)}return this.serializeObjectEntries(o,Object.entries(r))}serializeBuiltInType(r,s){const i=this["$"+r];if(i)return i.call(this,s);if(typeof(s==null?void 0:s.entries)=="function")return this.serializeObjectEntries(r,s.entries());throw new Error(`Cannot serialize ${r}`)}serializeObjectEntries(r,s){const i=Array.from(s).sort((a,l)=>this.compare(a[0],l[0]));let o=`${r}{`;for(let a=0;a<i.length;a++){const[l,c]=i[a];o+=`${this.serialize(l,!0)}:${this.serialize(c)}`,a<i.length-1&&(o+=",")}return o+"}"}$object(r){let s=za(this,e).get(r);return s===void 0&&(za(this,e).set(r,`#${za(this,e).size}`),s=this.serializeObject(r),za(this,e).set(r,s)),s}$function(r){const s=Function.prototype.toString.call(r);return s.slice(-15)==="[native code] }"?`${r.name||""}()[native]`:`${r.name}(${r.length})${s.replace(/\s*\n\s*/g,"")}`}$Array(r){let s="[";for(let i=0;i<r.length;i++)s+=this.serialize(r[i]),i<r.length-1&&(s+=",");return s+"]"}$Date(r){try{return`Date(${r.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(r){return`ArrayBuffer[${new Uint8Array(r).join(",")}]`}$Set(r){return`Set${this.$Array(Array.from(r).sort((s,i)=>this.compare(s,i)))}`}$Map(r){return this.serializeObjectEntries("Map",r.entries())}}e=new WeakMap;for(const n of["Error","RegExp","URL"])t.prototype["$"+n]=function(r){return`${n}(${r})`};for(const n of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])t.prototype["$"+n]=function(r){return`${n}[${r.join(",")}]`};for(const n of["BigInt64Array","BigUint64Array"])t.prototype["$"+n]=function(r){return`${n}[${r.join("n,")}${r.length>0?"n":""}]`};return t}();function rj(t,e){return t===e||bw(t)===bw(e)}function _w(t){return t==null}const[Jd,WY]=Nn("ConfigProvider");function Yd(t){const e=Jd({dir:xe("ltr")});return ne(()=>{var n;return(t==null?void 0:t.value)||((n=e.dir)==null?void 0:n.value)||"ltr"})}function nt(){const t=Kt(),e=xe(),n=ne(()=>{var o,a;return["#text","#comment"].includes((o=e.value)==null?void 0:o.$el.nodeName)?(a=e.value)==null?void 0:a.$el.nextElementSibling:jr(e)}),r=Object.assign({},t.exposed),s={};for(const o in t.props)Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>t.props[o]});if(Object.keys(r).length>0)for(const o in r)Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>r[o]});Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>t.vnode.el}),t.exposed=s;function i(o){e.value=o,o&&(Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>o instanceof Element?o:o.$el}),t.exposed=s)}return{forwardRef:i,currentRef:e,currentElement:n}}const sj=["INPUT","TEXTAREA"];function ij(t,e,n,r={}){if(!e||r.enableIgnoredElement&&sj.includes(e.nodeName))return null;const{arrowKeyOptions:s="both",attributeName:i="[data-reka-collection-item]",itemsArray:o=[],loop:a=!0,dir:l="ltr",preventScroll:c=!0,focus:u=!1}=r,[d,f,h,m,y,S]=[t.key==="ArrowRight",t.key==="ArrowLeft",t.key==="ArrowUp",t.key==="ArrowDown",t.key==="Home",t.key==="End"],x=h||m,_=d||f;if(!y&&!S&&(!x&&!_||s==="vertical"&&_||s==="horizontal"&&x))return null;const g=n?Array.from(n.querySelectorAll(i)):o;if(!g.length)return null;c&&t.preventDefault();let p=null;return _||x?p=pA(g,e,{goForward:x?m:l==="ltr"?d:f,loop:a}):y?p=g.at(0)||null:S&&(p=g.at(-1)||null),u&&(p==null||p.focus()),p}function pA(t,e,n,r=t.length){if(--r===0)return null;const s=t.indexOf(e),i=n.goForward?s+1:s-1;if(!n.loop&&(i<0||i>=t.length))return null;const o=(i+t.length)%t.length,a=t[o];return a?a.hasAttribute("disabled")&&a.getAttribute("disabled")!=="false"?pA(t,a,n,r):a:null}let oj=0;function Sa(t,e="reka"){const n=Jd({useId:void 0});return Object.hasOwn(zL,"useId")?`${e}-${ou==null?void 0:ou()}`:n.useId?`${e}-${n.useId()}`:`${e}-${++oj}`}function aj(t,e){const n=xe(t);function r(i){return e[n.value][i]??n.value}return{state:n,dispatch:i=>{n.value=r(i)}}}function lj(t,e){var S;const n=xe({}),r=xe("none"),s=xe(t),i=t.value?"mounted":"unmounted";let o;const a=((S=e.value)==null?void 0:S.ownerDocument.defaultView)??oc,{state:l,dispatch:c}=aj(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),u=x=>{var _;if($s){const g=new CustomEvent(x,{bubbles:!1,cancelable:!1});(_=e.value)==null||_.dispatchEvent(g)}};ot(t,async(x,_)=>{var p;const g=_!==x;if(await Tt(),g){const v=r.value,E=Nc(e.value);x?(c("MOUNT"),u("enter"),E==="none"&&u("after-enter")):E==="none"||E==="undefined"||((p=n.value)==null?void 0:p.display)==="none"?(c("UNMOUNT"),u("leave"),u("after-leave")):_&&v!==E?(c("ANIMATION_OUT"),u("leave")):(c("UNMOUNT"),u("after-leave"))}},{immediate:!0});const d=x=>{const _=Nc(e.value),g=_.includes(x.animationName),p=l.value==="mounted"?"enter":"leave";if(x.target===e.value&&g&&(u(`after-${p}`),c("ANIMATION_END"),!s.value)){const v=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",o=a==null?void 0:a.setTimeout(()=>{var E;((E=e.value)==null?void 0:E.style.animationFillMode)==="forwards"&&(e.value.style.animationFillMode=v)})}x.target===e.value&&_==="none"&&c("ANIMATION_END")},f=x=>{x.target===e.value&&(r.value=Nc(e.value))},h=ot(e,(x,_)=>{x?(n.value=getComputedStyle(x),x.addEventListener("animationstart",f),x.addEventListener("animationcancel",d),x.addEventListener("animationend",d)):(c("ANIMATION_END"),o!==void 0&&(a==null||a.clearTimeout(o)),_==null||_.removeEventListener("animationstart",f),_==null||_.removeEventListener("animationcancel",d),_==null||_.removeEventListener("animationend",d))},{immediate:!0}),m=ot(l,()=>{const x=Nc(e.value);r.value=l.value==="mounted"?x:"none"});return Mn(()=>{h(),m()}),{isPresent:ne(()=>["mounted","unmountSuspended"].includes(l.value))}}function Nc(t){return t&&getComputedStyle(t).animationName||"none"}const ac=pe({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:n}){var c;const{present:r,forceMount:s}=lr(t),i=xe(),{isPresent:o}=lj(r,i);n({present:o});let a=e.default({present:o.value});a=uy(a||[]);const l=Kt();if(a&&(a==null?void 0:a.length)>1){const u=(c=l==null?void 0:l.parent)!=null&&c.type.name?`<${l.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${u}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(d=>`  - ${d}`).join(`
`)].join(`
`))}return()=>s.value||r.value||o.value?Yn(e.default({present:o.value})[0],{ref:u=>{const d=jr(u);return typeof(d==null?void 0:d.hasAttribute)>"u"||(d!=null&&d.hasAttribute("data-reka-popper-content-wrapper")?i.value=d.firstElementChild:i.value=d),d}}):null}}),[Hi,cj]=Nn("DialogRoot"),uj=pe({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:!1},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,s=Bi(n,"open",e,{defaultValue:n.defaultOpen,passive:n.open===void 0}),i=xe(),o=xe(),{modal:a}=lr(n);return cj({open:s,modal:a,openModal:()=>{s.value=!0},onOpenChange:l=>{s.value=l},onOpenToggle:()=>{s.value=!s.value},contentId:"",titleId:"",descriptionId:"",triggerElement:i,contentElement:o}),(l,c)=>$e(l.$slots,"default",{open:$(s),close:()=>s.value=!1})}});function lc(t){const e=Kt(),n=e==null?void 0:e.type.emits,r={};return n!=null&&n.length||console.warn(`No emitted event found. Please check component: ${e==null?void 0:e.type.__name}`),n==null||n.forEach(s=>{r[aa(an(s))]=(...i)=>t(s,...i)}),r}function hn(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}const dj="menu.itemSelect",gm=["Enter"," "],fj=["ArrowDown","PageUp","Home"],mA=["ArrowUp","PageDown","End"],hj=[...fj,...mA];[...gm],[...gm];function gA(t){return t?"open":"closed"}function ym(t){const e=hn();for(const n of t)if(n===e||(n.focus(),hn()!==e))return}function pj(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function mj(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return pj(n,e)}function vm(t){return t.pointerType==="mouse"}const gj=F3(()=>xe([]));function yj(){const t=gj();return{add(e){const n=t.value[0];e!==n&&(n==null||n.pause()),t.value=ww(t.value,e),t.value.unshift(e)},remove(e){var n;t.value=ww(t.value,e),(n=t.value[0])==null||n.resume()}}}function ww(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function vj(t){return t.filter(e=>e.tagName!=="A")}const zh="focusScope.autoFocusOnMount",Vh="focusScope.autoFocusOnUnmount",xw={bubbles:!1,cancelable:!0};function fu(t,{select:e=!1}={}){const n=hn();for(const r of t)if(mi(r,{select:e}),hn()!==n)return!0}function bj(t){const e=fy(t),n=Ew(e,t),r=Ew(e.reverse(),t);return[n,r]}function fy(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Ew(t,e){for(const n of t)if(!_j(n,{upTo:e}))return n}function _j(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function wj(t){return t instanceof HTMLInputElement&&"select"in t}function mi(t,{select:e=!1}={}){if(t&&t.focus){const n=hn();t.focus({preventScroll:!0}),t!==n&&wj(t)&&e&&t.select()}}const hy=pe({__name:"FocusScope",props:{loop:{type:Boolean,default:!1},trapped:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:e}){const n=t,r=e,{currentRef:s,currentElement:i}=nt(),o=xe(null),a=yj(),l=Jn({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});Dt(u=>{if(!$s)return;const d=i.value;if(!n.trapped)return;function f(S){if(l.paused||!d)return;const x=S.target;d.contains(x)?o.value=x:mi(o.value,{select:!0})}function h(S){if(l.paused||!d)return;const x=S.relatedTarget;x!==null&&(d.contains(x)||mi(o.value,{select:!0}))}function m(S){d.contains(o.value)||mi(d)}document.addEventListener("focusin",f),document.addEventListener("focusout",h);const y=new MutationObserver(m);d&&y.observe(d,{childList:!0,subtree:!0}),u(()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",h),y.disconnect()})}),Dt(async u=>{const d=i.value;if(await Tt(),!d)return;a.add(l);const f=hn();if(!d.contains(f)){const m=new CustomEvent(zh,xw);d.addEventListener(zh,y=>r("mountAutoFocus",y)),d.dispatchEvent(m),m.defaultPrevented||(fu(vj(fy(d)),{select:!0}),hn()===f&&mi(d))}u(()=>{d.removeEventListener(zh,S=>r("mountAutoFocus",S));const m=new CustomEvent(Vh,xw),y=S=>{r("unmountAutoFocus",S)};d.addEventListener(Vh,y),d.dispatchEvent(m),setTimeout(()=>{m.defaultPrevented||mi(f??document.body,{select:!0}),d.removeEventListener(Vh,y),a.remove(l)},0)})});function c(u){if(!n.loop&&!n.trapped||l.paused)return;const d=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,f=hn();if(d&&f){const h=u.currentTarget,[m,y]=bj(h);m&&y?!u.shiftKey&&f===y?(u.preventDefault(),n.loop&&mi(m,{select:!0})):u.shiftKey&&f===m&&(u.preventDefault(),n.loop&&mi(y,{select:!0})):f===h&&u.preventDefault()}}return(u,d)=>(O(),ae($($t),{ref_key:"currentRef",ref:s,tabindex:"-1","as-child":u.asChild,as:u.as,onKeydown:c},{default:Y(()=>[$e(u.$slots,"default")]),_:3},8,["as-child","as"]))}});function py(t,e,n){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),r.dispatchEvent(s)}const xj="dismissableLayer.pointerDownOutside",Ej="dismissableLayer.focusOutside";function yA(t,e){const n=e.closest("[data-dismissable-layer]"),r=t.dataset.dismissableLayer===""?t:t.querySelector("[data-dismissable-layer]"),s=Array.from(t.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&(r===n||s.indexOf(r)<s.indexOf(n)))}function Sj(t,e,n=!0){var o;const r=((o=e==null?void 0:e.value)==null?void 0:o.ownerDocument)??(globalThis==null?void 0:globalThis.document),s=xe(!1),i=xe(()=>{});return Dt(a=>{if(!$s||!fn(n))return;const l=async u=>{const d=u.target;if(!(!(e!=null&&e.value)||!d)){if(yA(e.value,d)){s.value=!1;return}if(u.target&&!s.value){let f=function(){py(xj,t,h)};const h={originalEvent:u};u.pointerType==="touch"?(r.removeEventListener("click",i.value),i.value=f,r.addEventListener("click",i.value,{once:!0})):f()}else r.removeEventListener("click",i.value);s.value=!1}},c=window.setTimeout(()=>{r.addEventListener("pointerdown",l)},0);a(()=>{window.clearTimeout(c),r.removeEventListener("pointerdown",l),r.removeEventListener("click",i.value)})}),{onPointerDownCapture:()=>{fn(n)&&(s.value=!0)}}}function Aj(t,e,n=!0){var i;const r=((i=e==null?void 0:e.value)==null?void 0:i.ownerDocument)??(globalThis==null?void 0:globalThis.document),s=xe(!1);return Dt(o=>{if(!$s||!fn(n))return;const a=async l=>{if(!(e!=null&&e.value))return;await Tt(),await Tt();const c=l.target;!e.value||!c||yA(e.value,c)||l.target&&!s.value&&py(Ej,t,{originalEvent:l})};r.addEventListener("focusin",a),o(()=>r.removeEventListener("focusin",a))}),{onFocusCapture:()=>{fn(n)&&(s.value=!0)},onBlurCapture:()=>{fn(n)&&(s.value=!1)}}}const zr=Jn({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),my=pe({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=nt(),o=ne(()=>{var m;return((m=i.value)==null?void 0:m.ownerDocument)??globalThis.document}),a=ne(()=>zr.layersRoot),l=ne(()=>i.value?Array.from(a.value).indexOf(i.value):-1),c=ne(()=>zr.layersWithOutsidePointerEventsDisabled.size>0),u=ne(()=>{const m=Array.from(a.value),[y]=[...zr.layersWithOutsidePointerEventsDisabled].slice(-1),S=m.indexOf(y);return l.value>=S}),d=Sj(async m=>{const y=[...zr.branches].some(S=>S==null?void 0:S.contains(m.target));!u.value||y||(r("pointerDownOutside",m),r("interactOutside",m),await Tt(),m.defaultPrevented||r("dismiss"))},i),f=Aj(m=>{[...zr.branches].some(S=>S==null?void 0:S.contains(m.target))||(r("focusOutside",m),r("interactOutside",m),m.defaultPrevented||r("dismiss"))},i);dy("Escape",m=>{l.value===a.value.size-1&&(r("escapeKeyDown",m),m.defaultPrevented||r("dismiss"))});let h;return Dt(m=>{i.value&&(n.disableOutsidePointerEvents&&(zr.layersWithOutsidePointerEventsDisabled.size===0&&(h=o.value.body.style.pointerEvents,o.value.body.style.pointerEvents="none"),zr.layersWithOutsidePointerEventsDisabled.add(i.value)),a.value.add(i.value),m(()=>{n.disableOutsidePointerEvents&&zr.layersWithOutsidePointerEventsDisabled.size===1&&(o.value.body.style.pointerEvents=h)}))}),Dt(m=>{m(()=>{i.value&&(a.value.delete(i.value),zr.layersWithOutsidePointerEventsDisabled.delete(i.value))})}),(m,y)=>(O(),ae($($t),{ref:$(s),"as-child":m.asChild,as:m.as,"data-dismissable-layer":"",style:xs({pointerEvents:c.value?u.value?"auto":"none":void 0}),onFocusCapture:$(f).onFocusCapture,onBlurCapture:$(f).onBlurCapture,onPointerdownCapture:$(d).onPointerDownCapture},{default:Y(()=>[$e(m.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),vA=pe({__name:"DialogContentImpl",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=Hi(),{forwardRef:i,currentElement:o}=nt();return s.titleId||(s.titleId=Sa(void 0,"reka-dialog-title")),s.descriptionId||(s.descriptionId=Sa(void 0,"reka-dialog-description")),Ht(()=>{s.contentElement=o,hn()!==document.body&&(s.triggerElement.value=hn())}),(a,l)=>(O(),ae($(hy),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:l[5]||(l[5]=c=>r("openAutoFocus",c)),onUnmountAutoFocus:l[6]||(l[6]=c=>r("closeAutoFocus",c))},{default:Y(()=>[K($(my),Ve({id:$(s).contentId,ref:$(i),as:a.as,"as-child":a.asChild,"disable-outside-pointer-events":a.disableOutsidePointerEvents,role:"dialog","aria-describedby":$(s).descriptionId,"aria-labelledby":$(s).titleId,"data-state":$(gA)($(s).open.value)},a.$attrs,{onDismiss:l[0]||(l[0]=c=>$(s).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=c=>r("escapeKeyDown",c)),onFocusOutside:l[2]||(l[2]=c=>r("focusOutside",c)),onInteractOutside:l[3]||(l[3]=c=>r("interactOutside",c)),onPointerDownOutside:l[4]||(l[4]=c=>r("pointerDownOutside",c))}),{default:Y(()=>[$e(a.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}});var $j=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Uo=new WeakMap,jc=new WeakMap,Fc={},Hh=0,bA=function(t){return t&&(t.host||bA(t.parentNode))},Cj=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=bA(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},kj=function(t,e,n,r){var s=Cj(e,Array.isArray(t)?t:[t]);Fc[n]||(Fc[n]=new WeakMap);var i=Fc[n],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(r),m=h!==null&&h!=="false",y=(Uo.get(f)||0)+1,S=(i.get(f)||0)+1;Uo.set(f,y),i.set(f,S),o.push(f),y===1&&m&&jc.set(f,!0),S===1&&f.setAttribute(n,"true"),m||f.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return u(e),a.clear(),Hh++,function(){o.forEach(function(d){var f=Uo.get(d)-1,h=i.get(d)-1;Uo.set(d,f),i.set(d,h),f||(jc.has(d)||d.removeAttribute(r),jc.delete(d)),h||d.removeAttribute(n)}),Hh--,Hh||(Uo=new WeakMap,Uo=new WeakMap,jc=new WeakMap,Fc={})}},Ij=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=$j(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),kj(r,s,n,"aria-hidden")):function(){return null}};function gy(t){let e;ot(()=>jr(t),n=>{n?e=Ij(n):e&&e()}),Mn(()=>{e&&e()})}const Rj=pe({__name:"DialogContentModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=Hi(),i=lc(r),{forwardRef:o,currentElement:a}=nt();return gy(a),(l,c)=>(O(),ae(vA,Ve({...n,...$(i)},{ref:$(o),"trap-focus":$(s).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:c[0]||(c[0]=u=>{var d;u.defaultPrevented||(u.preventDefault(),(d=$(s).triggerElement.value)==null||d.focus())}),onPointerDownOutside:c[1]||(c[1]=u=>{const d=u.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0;(d.button===2||f)&&u.preventDefault()}),onFocusOutside:c[2]||(c[2]=u=>{u.preventDefault()})}),{default:Y(()=>[$e(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),Tj=pe({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,s=lc(e);nt();const i=Hi(),o=xe(!1),a=xe(!1);return(l,c)=>(O(),ae(vA,Ve({...n,...$(s)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:c[0]||(c[0]=u=>{var d;u.defaultPrevented||(o.value||(d=$(i).triggerElement.value)==null||d.focus(),u.preventDefault()),o.value=!1,a.value=!1}),onInteractOutside:c[1]||(c[1]=u=>{var h;u.defaultPrevented||(o.value=!0,u.detail.originalEvent.type==="pointerdown"&&(a.value=!0));const d=u.target;((h=$(i).triggerElement.value)==null?void 0:h.contains(d))&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&a.value&&u.preventDefault()})}),{default:Y(()=>[$e(l.$slots,"default")]),_:3},16))}}),Oj=pe({__name:"DialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=Hi(),i=lc(r),{forwardRef:o}=nt();return(a,l)=>(O(),ae($(ac),{present:a.forceMount||$(s).open.value},{default:Y(()=>[$(s).modal.value?(O(),ae(Rj,Ve({key:0,ref:$(o)},{...n,...$(i),...a.$attrs}),{default:Y(()=>[$e(a.$slots,"default")]),_:3},16)):(O(),ae(Tj,Ve({key:1,ref:$(o)},{...n,...$(i),...a.$attrs}),{default:Y(()=>[$e(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Dj=pe({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(t){const e=t;nt();const n=Hi();return(r,s)=>(O(),ae($($t),Ve(e,{id:$(n).descriptionId}),{default:Y(()=>[$e(r.$slots,"default")]),_:3},16,["id"]))}});function qh(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function bm(t,e,n=".",r){if(!qh(e))return bm(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:qh(o)&&qh(s[i])?s[i]=bm(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function Pj(t){return(...e)=>e.reduce((n,r)=>bm(n,r,"",t),{})}const Lj=Pj(),Mj=dA(()=>{const t=xe(new Map),e=xe(),n=ne(()=>{for(const o of t.value.values())if(o)return!0;return!1}),r=Jd({scrollBody:xe(!0)});let s=null;const i=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",vw&&(s==null||s()),e.value=void 0};return ot(n,(o,a)=>{var d;if(!$s)return;if(!o){a&&i();return}e.value===void 0&&(e.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,c={padding:l,margin:0},u=(d=r.scrollBody)!=null&&d.value?typeof r.scrollBody.value=="object"?Lj({padding:r.scrollBody.value.padding===!0?l:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?l:r.scrollBody.value.margin},c):c:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof u.padding=="number"?`${u.padding}px`:String(u.padding),document.body.style.marginRight=typeof u.margin=="number"?`${u.margin}px`:String(u.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),vw&&(s=Ku(document,"touchmove",f=>Nj(f),{passive:!1})),Tt(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function yy(t){const e=Math.random().toString(36).substring(2,7),n=Mj();n.value.set(e,t??!1);const r=ne({get:()=>n.value.get(e)??!1,set:s=>n.value.set(e,s)});return G3(()=>{n.value.delete(e)}),r}function _A(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const n=t.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:_A(n)}}function Nj(t){const e=t||window.event,n=e.target;return n instanceof Element&&_A(n)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}const jj=pe({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean},as:{}},setup(t){const e=Hi();return yy(!0),nt(),(n,r)=>(O(),ae($($t),{as:n.as,"as-child":n.asChild,"data-state":$(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:Y(()=>[$e(n.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),Fj=pe({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){const e=Hi(),{forwardRef:n}=nt();return(r,s)=>{var i;return(i=$(e))!=null&&i.modal.value?(O(),ae($(ac),{key:0,present:r.forceMount||$(e).open.value},{default:Y(()=>[K(jj,Ve(r.$attrs,{ref:$(n),as:r.as,"as-child":r.asChild}),{default:Y(()=>[$e(r.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):Te("",!0)}}}),vy=pe({__name:"Teleport",props:{to:{default:"body"},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(t){const e=fA();return(n,r)=>$(e)||n.forceMount?(O(),ae(Od,{key:0,to:n.to,disabled:n.disabled,defer:n.defer},[$e(n.$slots,"default")],8,["to","disabled","defer"])):Te("",!0)}});function by(t){const e=Kt(),n=Object.keys((e==null?void 0:e.type.props)??{}).reduce((s,i)=>{const o=(e==null?void 0:e.type.props[i]).default;return o!==void 0&&(s[i]=o),s},{}),r=ku(t);return ne(()=>{const s={},i=(e==null?void 0:e.vnode.props)??{};return Object.keys(i).forEach(o=>{s[an(o)]=i[o]}),Object.keys({...n,...s}).reduce((o,a)=>(r.value[a]!==void 0&&(o[a]=r.value[a]),o),{})})}function cc(t,e){const n=by(t),r=e?lc(e):{};return ne(()=>({...n.value,...r}))}const Uj=pe({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(t){const e=t,n=Hi();return nt(),(r,s)=>(O(),ae($($t),Ve(e,{id:$(n).titleId}),{default:Y(()=>[$e(r.$slots,"default")]),_:3},16,["id"]))}});function _m(){const t=xe(),e=ne(()=>{var n,r;return["#text","#comment"].includes((n=t.value)==null?void 0:n.$el.nodeName)?(r=t.value)==null?void 0:r.$el.nextElementSibling:jr(t)});return{primitiveElement:t,currentElement:e}}function wA(t){return ne(()=>{var e;return W3(t)?!!((e=jr(t))!=null&&e.closest("form")):!0})}const Sw="data-reka-collection-item";function Cs(t={}){const{key:e="",isProvider:n=!1}=t,r=`${e}CollectionProvider`;let s;if(n){const u=xe(new Map);s={collectionRef:xe(),itemMap:u},pr(r,s)}else s=qt(r);const i=(u=!1)=>{const d=s.collectionRef.value;if(!d)return[];const f=Array.from(d.querySelectorAll(`[${Sw}]`)),m=Array.from(s.itemMap.value.values()).sort((y,S)=>f.indexOf(y.ref)-f.indexOf(S.ref));return u?m:m.filter(y=>y.ref.dataset.disabled!=="")},o=pe({name:"CollectionSlot",setup(u,{slots:d}){const{primitiveElement:f,currentElement:h}=_m();return ot(h,()=>{s.collectionRef.value=h.value}),()=>Yn(mm,{ref:f},d)}}),a=pe({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(u,{slots:d,attrs:f}){const{primitiveElement:h,currentElement:m}=_m();return Dt(y=>{if(m.value){const S=Ue(m.value);s.itemMap.value.set(S,{ref:m.value,value:u.value}),y(()=>s.itemMap.value.delete(S))}}),()=>Yn(mm,{...f,[Sw]:"",ref:h},d)}}),l=ne(()=>Array.from(s.itemMap.value.values())),c=ne(()=>s.itemMap.value.size);return{getItems:i,reactiveItems:l,itemMapSize:c,CollectionSlot:o,CollectionItem:a}}const Bj="rovingFocusGroup.onEntryFocus",zj={bubbles:!1,cancelable:!0};function Vj(t,e=!1){const n=hn();for(const r of t)if(r===n||(r.focus({preventScroll:e}),hn()!==n))return}const[GY,Hj]=Nn("RovingFocusGroup"),qj=pe({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(t,{expose:e,emit:n}){const r=t,s=n,{loop:i,orientation:o,dir:a}=lr(r),l=Yd(a),c=Bi(r,"currentTabStopId",s,{defaultValue:r.defaultCurrentTabStopId,passive:r.currentTabStopId===void 0}),u=xe(!1),d=xe(!1),f=xe(0),{getItems:h,CollectionSlot:m}=Cs({isProvider:!0});function y(x){const _=!d.value;if(x.currentTarget&&x.target===x.currentTarget&&_&&!u.value){const g=new CustomEvent(Bj,zj);if(x.currentTarget.dispatchEvent(g),s("entryFocus",g),!g.defaultPrevented){const p=h().map(A=>A.ref).filter(A=>A.dataset.disabled!==""),v=p.find(A=>A.getAttribute("data-active")===""),E=p.find(A=>A.id===c.value),k=[v,E,...p].filter(Boolean);Vj(k,r.preventScrollOnEntryFocus)}}d.value=!1}function S(){setTimeout(()=>{d.value=!1},1)}return e({getItems:h}),Hj({loop:i,dir:l,orientation:o,currentTabStopId:c,onItemFocus:x=>{c.value=x},onItemShiftTab:()=>{u.value=!0},onFocusableItemAdd:()=>{f.value++},onFocusableItemRemove:()=>{f.value--}}),(x,_)=>(O(),ae($(m),null,{default:Y(()=>[K($($t),{tabindex:u.value||f.value===0?-1:0,"data-orientation":$(o),as:x.as,"as-child":x.asChild,dir:$(l),style:{outline:"none"},onMousedown:_[0]||(_[0]=g=>d.value=!0),onMouseup:S,onFocus:y,onBlur:_[1]||(_[1]=g=>u.value=!1)},{default:Y(()=>[$e(x.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),Aw=pe({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(t){const e=t,{primitiveElement:n,currentElement:r}=_m(),s=ne(()=>e.checked??e.value);return ot(s,(i,o)=>{if(!r.value)return;const a=r.value,l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(u&&i!==o){const d=new Event("input",{bubbles:!0}),f=new Event("change",{bubbles:!0});u.call(a,i),a.dispatchEvent(d),a.dispatchEvent(f)}}),(i,o)=>(O(),ae(Gd,Ve({ref_key:"primitiveElement",ref:n},{...e,...i.$attrs},{as:"input"}),null,16))}}),Kj=pe({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{},value:{},checked:{type:Boolean,default:void 0},required:{type:Boolean},disabled:{type:Boolean},feature:{default:"fully-hidden"}},setup(t){const e=t,n=ne(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),r=ne(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((s,i)=>typeof s=="object"?Object.entries(s).map(([o,a])=>({name:`[${e.name}][${i}][${o}]`,value:a})):{name:`[${e.name}][${i}]`,value:s}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([s,i])=>({name:`[${e.name}][${s}]`,value:i})):[]);return(s,i)=>n.value?(O(),ae(Aw,Ve({key:s.name},{...e,...s.$attrs},{name:s.name,value:s.value}),null,16,["name","value"])):(O(!0),re(Ge,{key:1},Lt(r.value,o=>(O(),ae(Aw,Ve({key:o.name,ref_for:!0},{...e,...s.$attrs},{name:o.name,value:o.value}),null,16,["name","value"]))),128))}}),[xA,Wj]=Nn("PopperRoot"),EA=pe({inheritAttrs:!1,__name:"PopperRoot",setup(t){const e=xe();return Wj({anchor:e,onAnchorChange:n=>e.value=n}),(n,r)=>$e(n.$slots,"default")}}),SA=pe({__name:"PopperAnchor",props:{reference:{},asChild:{type:Boolean},as:{}},setup(t){const e=t,{forwardRef:n,currentElement:r}=nt(),s=xA();return Vg(()=>{s.onAnchorChange(e.reference??r.value)}),(i,o)=>(O(),ae($($t),{ref:$(n),as:i.as,"as-child":i.asChild},{default:Y(()=>[$e(i.$slots,"default")]),_:3},8,["as","as-child"]))}});function Gj(t){return t!==null}function Jj(t){return{name:"transformOrigin",options:t,fn(e){var S,x,_;const{placement:n,rects:r,middlewareData:s}=e,o=((S=s.arrow)==null?void 0:S.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=wm(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((x=s.arrow)==null?void 0:x.x)??0)+a/2,h=(((_=s.arrow)==null?void 0:_.y)??0)+l/2;let m="",y="";return c==="bottom"?(m=o?d:`${f}px`,y=`${-l}px`):c==="top"?(m=o?d:`${f}px`,y=`${r.floating.height+l}px`):c==="right"?(m=`${-l}px`,y=o?d:`${h}px`):c==="left"&&(m=`${r.floating.width+l}px`,y=o?d:`${h}px`),{data:{x:m,y}}}}}function wm(t){const[e,n="center"]=t.split("-");return[e,n]}function Yj(t){const e=xe(),n=ne(()=>{var s;return((s=e.value)==null?void 0:s.width)??0}),r=ne(()=>{var s;return((s=e.value)==null?void 0:s.height)??0});return Ht(()=>{const s=jr(t);if(s){e.value={width:s.offsetWidth,height:s.offsetHeight};const i=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let l,c;if("borderBoxSize"in a){const u=a.borderBoxSize,d=Array.isArray(u)?u[0]:u;l=d.inlineSize,c=d.blockSize}else l=s.offsetWidth,c=s.offsetHeight;e.value={width:l,height:c}});return i.observe(s,{box:"border-box"}),()=>i.unobserve(s)}else e.value=void 0}),{width:n,height:r}}const AA={side:"bottom",sideOffset:0,align:"center",alignOffset:0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,positionStrategy:"fixed",updatePositionStrategy:"optimized",prioritizePosition:!1},[JY,Xj]=Nn("PopperContent"),$A=pe({inheritAttrs:!1,__name:"PopperContent",props:jg({side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},{...AA}),emits:["placed"],setup(t,{emit:e}){const n=t,r=e,s=xA(),{forwardRef:i,currentElement:o}=nt(),a=xe(),l=xe(),{width:c,height:u}=Yj(l),d=ne(()=>n.side+(n.align!=="center"?`-${n.align}`:"")),f=ne(()=>typeof n.collisionPadding=="number"?n.collisionPadding:{top:0,right:0,bottom:0,left:0,...n.collisionPadding}),h=ne(()=>Array.isArray(n.collisionBoundary)?n.collisionBoundary:[n.collisionBoundary]),m=ne(()=>({padding:f.value,boundary:h.value.filter(Gj),altBoundary:h.value.length>0})),y=j3(()=>[C3({mainAxis:n.sideOffset+u.value,alignmentAxis:n.alignOffset}),n.prioritizePosition&&n.avoidCollisions&&gw({...m.value}),n.avoidCollisions&&k3({mainAxis:!0,crossAxis:!!n.prioritizePosition,limiter:n.sticky==="partial"?O3():void 0,...m.value}),!n.prioritizePosition&&n.avoidCollisions&&gw({...m.value}),I3({...m.value,apply:({elements:N,rects:j,availableWidth:V,availableHeight:L})=>{const{width:Z,height:T}=j.reference,q=N.floating.style;q.setProperty("--reka-popper-available-width",`${V}px`),q.setProperty("--reka-popper-available-height",`${L}px`),q.setProperty("--reka-popper-anchor-width",`${Z}px`),q.setProperty("--reka-popper-anchor-height",`${T}px`)}}),l.value&&L3({element:l.value,padding:n.arrowPadding}),Jj({arrowWidth:c.value,arrowHeight:u.value}),n.hideWhenDetached&&R3({strategy:"referenceHidden",...m.value})]),S=ne(()=>n.reference??s.anchor.value),{floatingStyles:x,placement:_,isPositioned:g,middlewareData:p}=M3(S,a,{strategy:n.positionStrategy,placement:d,whileElementsMounted:(...N)=>$3(...N,{layoutShift:!n.disableUpdateOnLayoutShift,animationFrame:n.updatePositionStrategy==="always"}),middleware:y}),v=ne(()=>wm(_.value)[0]),E=ne(()=>wm(_.value)[1]);Vg(()=>{g.value&&r("placed")});const k=ne(()=>{var N;return((N=p.value.arrow)==null?void 0:N.centerOffset)!==0}),A=xe("");Dt(()=>{o.value&&(A.value=window.getComputedStyle(o.value).zIndex)});const C=ne(()=>{var N;return((N=p.value.arrow)==null?void 0:N.x)??0}),I=ne(()=>{var N;return((N=p.value.arrow)==null?void 0:N.y)??0});return Xj({placedSide:v,onArrowChange:N=>l.value=N,arrowX:C,arrowY:I,shouldHideArrow:k}),(N,j)=>{var V,L,Z;return O(),re("div",{ref_key:"floatingRef",ref:a,"data-reka-popper-content-wrapper":"",style:xs({...$(x),transform:$(g)?$(x).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:A.value,"--reka-popper-transform-origin":[(V=$(p).transformOrigin)==null?void 0:V.x,(L=$(p).transformOrigin)==null?void 0:L.y].join(" "),...((Z=$(p).hide)==null?void 0:Z.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}})},[K($($t),Ve({ref:$(i)},N.$attrs,{"as-child":n.asChild,as:N.as,"data-side":v.value,"data-align":E.value,style:{animation:$(g)?void 0:"none"}}),{default:Y(()=>[$e(N.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4)}}});function _y(t){const e=K3("",1e3);return{search:e,handleTypeaheadSearch:(s,i)=>{e.value=e.value+s;{const o=hn(),a=i.map(f=>{var h,m;return{...f,textValue:((h=f.value)==null?void 0:h.textValue)??((m=f.ref.textContent)==null?void 0:m.trim())??""}}),l=a.find(f=>f.ref===o),c=a.map(f=>f.textValue),u=Zj(c,e.value,l==null?void 0:l.textValue),d=a.find(f=>f.textValue===u);return d&&d.ref.focus(),d==null?void 0:d.ref}},resetTypeahead:()=>{e.value=""}}}function Qj(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Zj(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=Qj(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function eF(t){const e=Jd({nonce:xe()});return ne(()=>{var n;return(t==null?void 0:t.value)||((n=e.nonce)==null?void 0:n.value)})}function tF(){const t=xe(!1);return Ht(()=>{Ku("keydown",()=>{t.value=!0},{capture:!0,passive:!0}),Ku(["pointerdown","pointermove"],()=>{t.value=!1},{capture:!0,passive:!0})}),t}const nF=dA(tF),[Xd,rF]=Nn(["MenuRoot","MenuSub"],"MenuContext"),[wy,sF]=Nn("MenuRoot"),iF=pe({__name:"MenuRoot",props:{open:{type:Boolean,default:!1},dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e,{modal:s,dir:i}=lr(n),o=Yd(i),a=Bi(n,"open",r),l=xe(),c=nF();return rF({open:a,onOpenChange:u=>{a.value=u},content:l,onContentChange:u=>{l.value=u}}),sF({onClose:()=>{a.value=!1},isUsingKeyboardRef:c,dir:o,modal:s}),(u,d)=>(O(),ae($(EA),null,{default:Y(()=>[$e(u.$slots,"default")]),_:3}))}});let Kh=0;function CA(){Dt(t=>{if(!$s)return;const e=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",e[0]??$w()),document.body.insertAdjacentElement("beforeend",e[1]??$w()),Kh++,t(()=>{Kh===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(n=>n.remove()),Kh--})})}function $w(){const t=document.createElement("span");return t.setAttribute("data-reka-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}const[kA,oF]=Nn("MenuContent"),IA=pe({__name:"MenuContentImpl",props:jg({loop:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},disableOutsideScroll:{type:Boolean},trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},{...AA}),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(t,{emit:e}){const n=t,r=e,s=Xd(),i=wy(),{trapFocus:o,disableOutsidePointerEvents:a,loop:l}=lr(n);CA(),yy(a.value);const c=xe(""),u=xe(0),d=xe(0),f=xe(null),h=xe("right"),m=xe(0),y=xe(null),S=xe(),{forwardRef:x,currentElement:_}=nt(),{handleTypeaheadSearch:g}=_y();ot(_,C=>{s.onContentChange(C)}),Mn(()=>{window.clearTimeout(u.value)});function p(C){var N,j;return h.value===((N=f.value)==null?void 0:N.side)&&mj(C,(j=f.value)==null?void 0:j.area)}async function v(C){var I;r("openAutoFocus",C),!C.defaultPrevented&&(C.preventDefault(),(I=_.value)==null||I.focus({preventScroll:!0}))}function E(C){var q;if(C.defaultPrevented)return;const N=C.target.closest("[data-reka-menu-content]")===C.currentTarget,j=C.ctrlKey||C.altKey||C.metaKey,V=C.key.length===1,L=ij(C,hn(),_.value,{loop:l.value,arrowKeyOptions:"vertical",dir:i==null?void 0:i.dir.value,focus:!0,attributeName:"[data-reka-collection-item]:not([data-disabled])"});if(L)return L==null?void 0:L.focus();if(C.code==="Space")return;const Z=((q=S.value)==null?void 0:q.getItems())??[];if(N&&(C.key==="Tab"&&C.preventDefault(),!j&&V&&g(C.key,Z)),C.target!==_.value||!hj.includes(C.key))return;C.preventDefault();const T=[...Z.map(z=>z.ref)];mA.includes(C.key)&&T.reverse(),ym(T)}function k(C){var I,N;(N=(I=C==null?void 0:C.currentTarget)==null?void 0:I.contains)!=null&&N.call(I,C.target)||(window.clearTimeout(u.value),c.value="")}function A(C){var j;if(!vm(C))return;const I=C.target,N=m.value!==C.clientX;if((j=C==null?void 0:C.currentTarget)!=null&&j.contains(I)&&N){const V=C.clientX>m.value?"right":"left";h.value=V,m.value=C.clientX}}return oF({onItemEnter:C=>!!p(C),onItemLeave:C=>{var I;p(C)||((I=_.value)==null||I.focus(),y.value=null)},onTriggerLeave:C=>!!p(C),searchRef:c,pointerGraceTimerRef:d,onPointerGraceIntentChange:C=>{f.value=C}}),(C,I)=>(O(),ae($(hy),{"as-child":"",trapped:$(o),onMountAutoFocus:v,onUnmountAutoFocus:I[7]||(I[7]=N=>r("closeAutoFocus",N))},{default:Y(()=>[K($(my),{"as-child":"","disable-outside-pointer-events":$(a),onEscapeKeyDown:I[2]||(I[2]=N=>r("escapeKeyDown",N)),onPointerDownOutside:I[3]||(I[3]=N=>r("pointerDownOutside",N)),onFocusOutside:I[4]||(I[4]=N=>r("focusOutside",N)),onInteractOutside:I[5]||(I[5]=N=>r("interactOutside",N)),onDismiss:I[6]||(I[6]=N=>r("dismiss"))},{default:Y(()=>[K($(qj),{ref_key:"rovingFocusGroupRef",ref:S,"current-tab-stop-id":y.value,"onUpdate:currentTabStopId":I[0]||(I[0]=N=>y.value=N),"as-child":"",orientation:"vertical",dir:$(i).dir.value,loop:$(l),onEntryFocus:I[1]||(I[1]=N=>{r("entryFocus",N),$(i).isUsingKeyboardRef.value||N.preventDefault()})},{default:Y(()=>[K($($A),{ref:$(x),role:"menu",as:C.as,"as-child":C.asChild,"aria-orientation":"vertical","data-reka-menu-content":"","data-state":$(gA)($(s).open.value),dir:$(i).dir.value,side:C.side,"side-offset":C.sideOffset,align:C.align,"align-offset":C.alignOffset,"avoid-collisions":C.avoidCollisions,"collision-boundary":C.collisionBoundary,"collision-padding":C.collisionPadding,"arrow-padding":C.arrowPadding,"prioritize-position":C.prioritizePosition,"position-strategy":C.positionStrategy,"update-position-strategy":C.updatePositionStrategy,sticky:C.sticky,"hide-when-detached":C.hideWhenDetached,reference:C.reference,onKeydown:E,onBlur:k,onPointermove:A},{default:Y(()=>[$e(C.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","position-strategy","update-position-strategy","sticky","hide-when-detached","reference"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),aF=pe({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(t){const e=t,n=kA(),{forwardRef:r}=nt(),{CollectionItem:s}=Cs(),i=xe(!1);async function o(l){if(!l.defaultPrevented&&vm(l)){if(e.disabled)n.onItemLeave(l);else if(!n.onItemEnter(l)){const u=l.currentTarget;u==null||u.focus({preventScroll:!0})}}}async function a(l){await Tt(),!l.defaultPrevented&&vm(l)&&n.onItemLeave(l)}return(l,c)=>(O(),ae($(s),{value:{textValue:l.textValue}},{default:Y(()=>[K($($t),Ve({ref:$(r),role:"menuitem",tabindex:"-1"},l.$attrs,{as:l.as,"as-child":l.asChild,"aria-disabled":l.disabled||void 0,"data-disabled":l.disabled?"":void 0,"data-highlighted":i.value?"":void 0,onPointermove:o,onPointerleave:a,onFocus:c[0]||(c[0]=async u=>{await Tt(),!(u.defaultPrevented||l.disabled)&&(i.value=!0)}),onBlur:c[1]||(c[1]=async u=>{await Tt(),!u.defaultPrevented&&(i.value=!1)})}),{default:Y(()=>[$e(l.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),lF=pe({__name:"MenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=nt(),o=wy(),a=kA(),l=xe(!1);async function c(){const u=i.value;if(!n.disabled&&u){const d=new CustomEvent(dj,{bubbles:!0,cancelable:!0});r("select",d),await Tt(),d.defaultPrevented?l.value=!1:o.onClose()}}return(u,d)=>(O(),ae(aF,Ve(n,{ref:$(s),onClick:c,onPointerdown:d[0]||(d[0]=()=>{l.value=!0}),onPointerup:d[1]||(d[1]=async f=>{var h;await Tt(),!f.defaultPrevented&&(l.value||(h=f.currentTarget)==null||h.click())}),onKeydown:d[2]||(d[2]=async f=>{const h=$(a).searchRef.value!=="";u.disabled||h&&f.key===" "||$(gm).includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})}),{default:Y(()=>[$e(u.$slots,"default")]),_:3},16))}}),cF=pe({__name:"MenuRootContentModal",props:{loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=cc(n,r),i=Xd(),{forwardRef:o,currentElement:a}=nt();return gy(a),(l,c)=>(O(),ae(IA,Ve($(s),{ref:$(o),"trap-focus":$(i).open.value,"disable-outside-pointer-events":$(i).open.value,"disable-outside-scroll":!0,onDismiss:c[0]||(c[0]=u=>$(i).onOpenChange(!1)),onFocusOutside:c[1]||(c[1]=Xn(u=>r("focusOutside",u),["prevent"]))}),{default:Y(()=>[$e(l.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),uF=pe({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const s=cc(t,e),i=Xd();return(o,a)=>(O(),ae(IA,Ve($(s),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:a[0]||(a[0]=l=>$(i).onOpenChange(!1))}),{default:Y(()=>[$e(o.$slots,"default")]),_:3},16))}}),dF=pe({__name:"MenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const s=cc(t,e),i=Xd(),o=wy();return(a,l)=>(O(),ae($(ac),{present:a.forceMount||$(i).open.value},{default:Y(()=>[$(o).modal.value?(O(),ae(cF,Ln(Ve({key:0},{...a.$attrs,...$(s)})),{default:Y(()=>[$e(a.$slots,"default")]),_:3},16)):(O(),ae(uF,Ln(Ve({key:1},{...a.$attrs,...$(s)})),{default:Y(()=>[$e(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),fF=pe({__name:"MenuPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(t){const e=t;return(n,r)=>(O(),ae($(vy),Ln(tr(e)),{default:Y(()=>[$e(n.$slots,"default")]),_:3},16))}}),hF=pe({__name:"MenuAnchor",props:{reference:{},asChild:{type:Boolean},as:{}},setup(t){const e=t;return(n,r)=>(O(),ae($(SA),Ln(tr(e)),{default:Y(()=>[$e(n.$slots,"default")]),_:3},16))}}),pF=pe({__name:"DialogPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(t){const e=t;return(n,r)=>(O(),ae($(vy),Ln(tr(e)),{default:Y(()=>[$e(n.$slots,"default")]),_:3},16))}}),[RA,mF]=Nn("DropdownMenuRoot"),gF=pe({__name:"DropdownMenuRoot",props:{defaultOpen:{type:Boolean},open:{type:Boolean,default:void 0},dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=e;nt();const s=Bi(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0}),i=xe(),{modal:o,dir:a}=lr(n),l=Yd(a);return mF({open:s,onOpenChange:c=>{s.value=c},onOpenToggle:()=>{s.value=!s.value},triggerId:"",triggerElement:i,contentId:"",modal:o,dir:l}),(c,u)=>(O(),ae($(iF),{open:$(s),"onUpdate:open":u[0]||(u[0]=d=>Pt(s)?s.value=d:null),dir:$(l),modal:$(o)},{default:Y(()=>[$e(c.$slots,"default",{open:$(s)})]),_:3},8,["open","dir","modal"]))}}),yF=pe({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(t,{emit:e}){const s=cc(t,e);nt();const i=RA(),o=xe(!1);function a(l){l.defaultPrevented||(o.value||setTimeout(()=>{var c;(c=i.triggerElement.value)==null||c.focus()},0),o.value=!1,l.preventDefault())}return i.contentId||(i.contentId=Sa(void 0,"reka-dropdown-menu-content")),(l,c)=>{var u;return O(),ae($(dF),Ve($(s),{id:$(i).contentId,"aria-labelledby":(u=$(i))==null?void 0:u.triggerId,style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:a,onInteractOutside:c[0]||(c[0]=d=>{var y;if(d.defaultPrevented)return;const f=d.detail.originalEvent,h=f.button===0&&f.ctrlKey===!0,m=f.button===2||h;(!$(i).modal.value||m)&&(o.value=!0),(y=$(i).triggerElement.value)!=null&&y.contains(d.target)&&d.preventDefault()})}),{default:Y(()=>[$e(l.$slots,"default")]),_:3},16,["id","aria-labelledby"])}}}),vF=pe({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(t,{emit:e}){const n=t,s=lc(e);return nt(),(i,o)=>(O(),ae($(lF),Ln(tr({...n,...$(s)})),{default:Y(()=>[$e(i.$slots,"default")]),_:3},16))}}),bF=pe({__name:"DropdownMenuPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(t){const e=t;return(n,r)=>(O(),ae($(fF),Ln(tr(e)),{default:Y(()=>[$e(n.$slots,"default")]),_:3},16))}}),_F=pe({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"button"}},setup(t){const e=t,n=RA(),{forwardRef:r,currentElement:s}=nt();return Ht(()=>{n.triggerElement=s}),n.triggerId||(n.triggerId=Sa(void 0,"reka-dropdown-menu-trigger")),(i,o)=>(O(),ae($(hF),{"as-child":""},{default:Y(()=>[K($($t),{id:$(n).triggerId,ref:$(r),type:i.as==="button"?"button":void 0,"as-child":e.asChild,as:i.as,"aria-haspopup":"menu","aria-expanded":$(n).open.value,"aria-controls":$(n).open.value?$(n).contentId:void 0,"data-disabled":i.disabled?"":void 0,disabled:i.disabled,"data-state":$(n).open.value?"open":"closed",onClick:o[0]||(o[0]=async a=>{var l;!i.disabled&&a.button===0&&a.ctrlKey===!1&&((l=$(n))==null||l.onOpenToggle(),await Tt(),$(n).open.value&&a.preventDefault())}),onKeydown:o[1]||(o[1]=zd(a=>{i.disabled||(["Enter"," "].includes(a.key)&&$(n).onOpenToggle(),a.key==="ArrowDown"&&$(n).onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())},["enter","space","arrow-down"]))},{default:Y(()=>[$e(i.$slots,"default")]),_:3},8,["id","type","as-child","as","aria-expanded","aria-controls","data-disabled","disabled","data-state"])]),_:3}))}}),wF=pe({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{default:"label"}},setup(t){const e=t;return nt(),(n,r)=>(O(),ae($($t),Ve(e,{onMousedown:r[0]||(r[0]=s=>{!s.defaultPrevented&&s.detail>1&&s.preventDefault()})}),{default:Y(()=>[$e(n.$slots,"default")]),_:3},16))}});function Cw(t,e=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){return Math.min(n,Math.max(e,t))}const xF=[" ","Enter","ArrowUp","ArrowDown"],EF=[" ","Enter"],Vr=10;function Wu(t,e,n){return t===void 0?!1:Array.isArray(t)?t.some(r=>xm(r,e,n)):xm(t,e,n)}function xm(t,e,n){return t===void 0||e===void 0?!1:typeof t=="string"?t===e:typeof n=="function"?n(t,e):typeof n=="string"?(t==null?void 0:t[n])===(e==null?void 0:e[n]):rj(t,e)}function SF(t){return t==null||t===""||Array.isArray(t)&&t.length===0}const AF=pe({__name:"BubbleSelect",props:{autocomplete:{},autofocus:{type:Boolean},disabled:{type:Boolean},form:{},multiple:{type:Boolean},name:{},required:{type:Boolean},size:{},value:{}},setup(t){const e=t,n=xe();return ot(()=>e.value,(r,s)=>{const i=window.HTMLSelectElement.prototype,a=Object.getOwnPropertyDescriptor(i,"value").set;if(r!==s&&a&&n.value){const l=new Event("change",{bubbles:!0});a.call(n.value,r),n.value.dispatchEvent(l)}}),(r,s)=>(O(),ae($(Gd),{"as-child":""},{default:Y(()=>[U("select",Ve({ref_key:"selectElement",ref:n},e),[$e(r.$slots,"default")],16)]),_:3}))}}),$F={key:0,value:""},[ko,TA]=Nn("SelectRoot"),CF=pe({inheritAttrs:!1,__name:"SelectRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{default:void 0},by:{},dir:{},multiple:{type:Boolean},autocomplete:{},disabled:{type:Boolean},name:{},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(t,{emit:e}){const n=t,r=e,{required:s,disabled:i,multiple:o,dir:a}=lr(n),l=Bi(n,"modelValue",r,{defaultValue:n.defaultValue??(o.value?[]:void 0),passive:n.modelValue===void 0,deep:!0}),c=Bi(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0}),u=xe(),d=xe(),f=xe({x:0,y:0}),h=ne(()=>{var g;return o.value&&Array.isArray(l.value)?((g=l.value)==null?void 0:g.length)===0:_w(l.value)});Cs({isProvider:!0});const m=Yd(a),y=wA(u),S=xe(new Set),x=ne(()=>Array.from(S.value).map(g=>g.value).join(";"));function _(g){if(o.value){const p=Array.isArray(l.value)?[...l.value]:[],v=p.findIndex(E=>xm(E,g,n.by));v===-1?p.push(g):p.splice(v,1),l.value=[...p]}else l.value=g}return TA({triggerElement:u,onTriggerChange:g=>{u.value=g},valueElement:d,onValueElementChange:g=>{d.value=g},contentId:"",modelValue:l,onValueChange:_,by:n.by,open:c,multiple:o,required:s,onOpenChange:g=>{c.value=g},dir:m,triggerPointerDownPosRef:f,disabled:i,isEmptyModelValue:h,optionsSet:S,onOptionAdd:g=>S.value.add(g),onOptionRemove:g=>S.value.delete(g)}),(g,p)=>(O(),ae($(EA),null,{default:Y(()=>[$e(g.$slots,"default",{modelValue:$(l),open:$(c)}),$(y)?(O(),ae(AF,{key:x.value,"aria-hidden":"true",tabindex:"-1",multiple:$(o),required:$(s),name:g.name,autocomplete:g.autocomplete,disabled:$(i),value:$(l)},{default:Y(()=>[$(_w)($(l))?(O(),re("option",$F)):Te("",!0),(O(!0),re(Ge,null,Lt(Array.from(S.value),v=>(O(),re("option",Ve({key:v.value??"",ref_for:!0},v),null,16))),128))]),_:1},8,["multiple","required","name","autocomplete","disabled","value"])):Te("",!0)]),_:3}))}}),[kF,IF]=Nn("SelectItemAlignedPosition"),RF=pe({inheritAttrs:!1,__name:"SelectItemAlignedPosition",props:{asChild:{type:Boolean},as:{}},emits:["placed"],setup(t,{emit:e}){const n=t,r=e,{getItems:s}=Cs(),i=ko(),o=Qd(),a=xe(!1),l=xe(!0),c=xe(),{forwardRef:u,currentElement:d}=nt(),{viewport:f,selectedItem:h,selectedItemText:m,focusSelectedItem:y}=o;function S(){if(i.triggerElement.value&&i.valueElement.value&&c.value&&d.value&&(f!=null&&f.value)&&(h!=null&&h.value)&&(m!=null&&m.value)){const g=i.triggerElement.value.getBoundingClientRect(),p=d.value.getBoundingClientRect(),v=i.valueElement.value.getBoundingClientRect(),E=m.value.getBoundingClientRect();if(i.dir.value!=="rtl"){const P=E.left-p.left,ee=v.left-P,ce=g.left-ee,ie=g.width+ce,Ee=Math.max(ie,p.width),ke=window.innerWidth-Vr,D=Cw(ee,Vr,Math.max(Vr,ke-Ee));c.value.style.minWidth=`${ie}px`,c.value.style.left=`${D}px`}else{const P=p.right-E.right,ee=window.innerWidth-v.right-P,ce=window.innerWidth-g.right-ee,ie=g.width+ce,Ee=Math.max(ie,p.width),ke=window.innerWidth-Vr,D=Cw(ee,Vr,Math.max(Vr,ke-Ee));c.value.style.minWidth=`${ie}px`,c.value.style.right=`${D}px`}const k=s().map(P=>P.ref),A=window.innerHeight-Vr*2,C=f.value.scrollHeight,I=window.getComputedStyle(d.value),N=Number.parseInt(I.borderTopWidth,10),j=Number.parseInt(I.paddingTop,10),V=Number.parseInt(I.borderBottomWidth,10),L=Number.parseInt(I.paddingBottom,10),Z=N+j+C+L+V,T=Math.min(h.value.offsetHeight*5,Z),q=window.getComputedStyle(f.value),z=Number.parseInt(q.paddingTop,10),se=Number.parseInt(q.paddingBottom,10),W=g.top+g.height/2-Vr,he=A-W,me=h.value.offsetHeight/2,ve=h.value.offsetTop+me,Ce=N+j+ve,J=Z-Ce;if(Ce<=W){const P=h.value===k[k.length-1];c.value.style.bottom="0px";const ee=d.value.clientHeight-f.value.offsetTop-f.value.offsetHeight,ce=Math.max(he,me+(P?se:0)+ee+V),ie=Ce+ce;c.value.style.height=`${ie}px`}else{const P=h.value===k[0];c.value.style.top="0px";const ce=Math.max(W,N+f.value.offsetTop+(P?z:0)+me)+J;c.value.style.height=`${ce}px`,f.value.scrollTop=Ce-W+f.value.offsetTop}c.value.style.margin=`${Vr}px 0`,c.value.style.minHeight=`${T}px`,c.value.style.maxHeight=`${A}px`,r("placed"),requestAnimationFrame(()=>a.value=!0)}}const x=xe("");Ht(async()=>{await Tt(),S(),d.value&&(x.value=window.getComputedStyle(d.value).zIndex)});function _(g){g&&l.value===!0&&(S(),y==null||y(),l.value=!1)}return tj(i.triggerElement,()=>{S()}),IF({contentWrapper:c,shouldExpandOnScrollRef:a,onScrollButtonChange:_}),(g,p)=>(O(),re("div",{ref_key:"contentWrapperElement",ref:c,style:xs({display:"flex",flexDirection:"column",position:"fixed",zIndex:x.value})},[K($($t),Ve({ref:$(u),style:{boxSizing:"border-box",maxHeight:"100%"}},{...g.$attrs,...n}),{default:Y(()=>[$e(g.$slots,"default")]),_:3},16)],4))}}),TF=pe({__name:"SelectPopperPosition",props:{side:{},sideOffset:{},align:{default:"start"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{default:Vr},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},setup(t){const n=by(t);return(r,s)=>(O(),ae($($A),Ve($(n),{style:{boxSizing:"border-box","--reka-select-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-select-content-available-width":"var(--reka-popper-available-width)","--reka-select-content-available-height":"var(--reka-popper-available-height)","--reka-select-trigger-width":"var(--reka-popper-anchor-width)","--reka-select-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:Y(()=>[$e(r.$slots,"default")]),_:3},16))}}),OF={onViewportChange:()=>{},itemTextRefCallback:()=>{},itemRefCallback:()=>{}},[Qd,OA]=Nn("SelectContent"),DF=pe({__name:"SelectContentImpl",props:{position:{default:"item-aligned"},bodyLock:{type:Boolean,default:!0},side:{},sideOffset:{},align:{default:"start"},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(t,{emit:e}){const n=t,r=e,s=ko();CA(),yy(n.bodyLock);const{CollectionSlot:i,getItems:o}=Cs(),a=xe();gy(a);const{search:l,handleTypeaheadSearch:c}=_y(),u=xe(),d=xe(),f=xe(),h=xe(!1),m=xe(!1),y=xe(!1);function S(){d.value&&a.value&&ym([d.value,a.value])}ot(h,()=>{S()});const{onOpenChange:x,triggerPointerDownPosRef:_}=s;Dt(E=>{if(!a.value)return;let k={x:0,y:0};const A=I=>{var N,j;k={x:Math.abs(Math.round(I.pageX)-(((N=_.value)==null?void 0:N.x)??0)),y:Math.abs(Math.round(I.pageY)-(((j=_.value)==null?void 0:j.y)??0))}},C=I=>{var N;I.pointerType!=="touch"&&(k.x<=10&&k.y<=10?I.preventDefault():(N=a.value)!=null&&N.contains(I.target)||x(!1),document.removeEventListener("pointermove",A),_.value=null)};_.value!==null&&(document.addEventListener("pointermove",A),document.addEventListener("pointerup",C,{capture:!0,once:!0})),E(()=>{document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",C,{capture:!0})})});function g(E){const k=E.ctrlKey||E.altKey||E.metaKey;if(E.key==="Tab"&&E.preventDefault(),!k&&E.key.length===1&&c(E.key,o()),["ArrowUp","ArrowDown","Home","End"].includes(E.key)){let C=[...o().map(I=>I.ref)];if(["ArrowUp","End"].includes(E.key)&&(C=C.slice().reverse()),["ArrowUp","ArrowDown"].includes(E.key)){const I=E.target,N=C.indexOf(I);C=C.slice(N+1)}setTimeout(()=>ym(C)),E.preventDefault()}}const p=ne(()=>n.position==="popper"?n:{}),v=by(p.value);return OA({content:a,viewport:u,onViewportChange:E=>{u.value=E},itemRefCallback:(E,k,A)=>{const C=!m.value&&!A,I=Wu(s.modelValue.value,k,s.by);if(s.multiple.value){if(y.value)return;(I||C)&&(d.value=E,I&&(y.value=!0))}else(I||C)&&(d.value=E);C&&(m.value=!0)},selectedItem:d,selectedItemText:f,onItemLeave:()=>{var E;(E=a.value)==null||E.focus()},itemTextRefCallback:(E,k,A)=>{const C=!m.value&&!A;(Wu(s.modelValue.value,k,s.by)||C)&&(f.value=E)},focusSelectedItem:S,position:n.position,isPositioned:h,searchRef:l}),(E,k)=>(O(),ae($(i),null,{default:Y(()=>[K($(hy),{"as-child":"",onMountAutoFocus:k[6]||(k[6]=Xn(()=>{},["prevent"])),onUnmountAutoFocus:k[7]||(k[7]=A=>{var C;r("closeAutoFocus",A),!A.defaultPrevented&&((C=$(s).triggerElement.value)==null||C.focus({preventScroll:!0}),A.preventDefault())})},{default:Y(()=>[K($(my),{"as-child":"","disable-outside-pointer-events":"",onFocusOutside:k[2]||(k[2]=Xn(()=>{},["prevent"])),onDismiss:k[3]||(k[3]=A=>$(s).onOpenChange(!1)),onEscapeKeyDown:k[4]||(k[4]=A=>r("escapeKeyDown",A)),onPointerDownOutside:k[5]||(k[5]=A=>r("pointerDownOutside",A))},{default:Y(()=>[(O(),ae(Ss(E.position==="popper"?TF:RF),Ve({...E.$attrs,...$(v)},{id:$(s).contentId,ref:A=>{a.value=$(jr)(A)},role:"listbox","data-state":$(s).open.value?"open":"closed",dir:$(s).dir.value,style:{display:"flex",flexDirection:"column",outline:"none"},onContextmenu:k[0]||(k[0]=Xn(()=>{},["prevent"])),onPlaced:k[1]||(k[1]=A=>h.value=!0),onKeydown:g}),{default:Y(()=>[$e(E.$slots,"default")]),_:3},16,["id","data-state","dir","onKeydown"]))]),_:3})]),_:3})]),_:3}))}}),PF=pe({inheritAttrs:!1,__name:"SelectProvider",props:{context:{}},setup(t){return TA(t.context),OA(OF),(n,r)=>$e(n.$slots,"default")}}),LF={key:1},MF=pe({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean},position:{},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(t,{emit:e}){const n=t,s=cc(n,e),i=ko(),o=xe();Ht(()=>{o.value=new DocumentFragment});const a=xe(),l=ne(()=>n.forceMount||i.open.value),c=xe(l.value);return ot(l,()=>{setTimeout(()=>c.value=l.value)}),(u,d)=>{var f;return l.value||c.value||(f=a.value)!=null&&f.present?(O(),ae($(ac),{key:0,ref_key:"presenceRef",ref:a,present:l.value},{default:Y(()=>[K(DF,Ln(tr({...$(s),...u.$attrs})),{default:Y(()=>[$e(u.$slots,"default")]),_:3},16)]),_:3},8,["present"])):o.value?(O(),re("div",LF,[(O(),ae(Od,{to:o.value},[K(PF,{context:$(i)},{default:Y(()=>[$e(u.$slots,"default")]),_:3},8,["context"])],8,["to"]))])):Te("",!0)}}}),NF=pe({__name:"SelectIcon",props:{asChild:{type:Boolean},as:{default:"span"}},setup(t){return(e,n)=>(O(),ae($($t),{"aria-hidden":"true",as:e.as,"as-child":e.asChild},{default:Y(()=>[$e(e.$slots,"default",{},()=>[n[0]||(n[0]=je("▼"))])]),_:3},8,["as","as-child"]))}}),[jF,FF]=Nn("SelectItem"),UF=pe({__name:"SelectItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(t,{emit:e}){const n=t,r=e,{disabled:s}=lr(n),i=ko(),o=Qd(),{forwardRef:a,currentElement:l}=nt(),{CollectionItem:c}=Cs(),u=ne(()=>{var p;return Wu((p=i.modelValue)==null?void 0:p.value,n.value,i.by)}),d=xe(!1),f=xe(n.textValue??""),h=Sa(void 0,"reka-select-item-text"),m="select.select";async function y(p){if(p.defaultPrevented)return;const v={originalEvent:p,value:n.value};py(m,S,v)}async function S(p){await Tt(),r("select",p),!p.defaultPrevented&&(s.value||(i.onValueChange(n.value),i.multiple.value||i.onOpenChange(!1)))}async function x(p){var v,E;await Tt(),!p.defaultPrevented&&(s.value?(v=o.onItemLeave)==null||v.call(o):(E=p.currentTarget)==null||E.focus({preventScroll:!0}))}async function _(p){var v;await Tt(),!p.defaultPrevented&&p.currentTarget===hn()&&((v=o.onItemLeave)==null||v.call(o))}async function g(p){var E;await Tt(),!(p.defaultPrevented||((E=o.searchRef)==null?void 0:E.value)!==""&&p.key===" ")&&(EF.includes(p.key)&&y(p),p.key===" "&&p.preventDefault())}if(n.value==="")throw new Error("A <SelectItem /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return Ht(()=>{l.value&&o.itemRefCallback(l.value,n.value,n.disabled)}),FF({value:n.value,disabled:s,textId:h,isSelected:u,onItemTextChange:p=>{f.value=((f.value||(p==null?void 0:p.textContent))??"").trim()}}),(p,v)=>(O(),ae($(c),{value:{textValue:f.value}},{default:Y(()=>[K($($t),{ref:$(a),role:"option","aria-labelledby":$(h),"data-highlighted":d.value?"":void 0,"aria-selected":u.value,"data-state":u.value?"checked":"unchecked","aria-disabled":$(s)||void 0,"data-disabled":$(s)?"":void 0,tabindex:$(s)?void 0:-1,as:p.as,"as-child":p.asChild,onFocus:v[0]||(v[0]=E=>d.value=!0),onBlur:v[1]||(v[1]=E=>d.value=!1),onPointerup:y,onPointerdown:v[2]||(v[2]=E=>{E.currentTarget.focus({preventScroll:!0})}),onTouchend:v[3]||(v[3]=Xn(()=>{},["prevent","stop"])),onPointermove:x,onPointerleave:_,onKeydown:g},{default:Y(()=>[$e(p.$slots,"default")]),_:3},8,["aria-labelledby","data-highlighted","aria-selected","data-state","aria-disabled","data-disabled","tabindex","as","as-child"])]),_:3},8,["value"]))}}),BF=pe({inheritAttrs:!1,__name:"SelectItemText",props:{asChild:{type:Boolean},as:{default:"span"}},setup(t){const e=t,n=ko(),r=Qd(),s=jF(),{forwardRef:i,currentElement:o}=nt(),a=ne(()=>{var l,c;return{value:s.value,disabled:s.disabled.value,textContent:((l=o.value)==null?void 0:l.textContent)??((c=s.value)==null?void 0:c.toString())??""}});return Ht(()=>{o.value&&(s.onItemTextChange(o.value),r.itemTextRefCallback(o.value,s.value,s.disabled.value),n.onOptionAdd(a.value))}),Mn(()=>{n.onOptionRemove(a.value)}),(l,c)=>(O(),ae($($t),Ve({id:$(s).textId,ref:$(i)},{...e,...l.$attrs}),{default:Y(()=>[$e(l.$slots,"default")]),_:3},16,["id"]))}}),zF=pe({__name:"SelectPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(t){const e=t;return(n,r)=>(O(),ae($(vy),Ln(tr(e)),{default:Y(()=>[$e(n.$slots,"default")]),_:3},16))}}),VF=pe({__name:"SelectTrigger",props:{disabled:{type:Boolean},reference:{},asChild:{type:Boolean},as:{default:"button"}},setup(t){const e=t,n=ko(),{forwardRef:r,currentElement:s}=nt(),i=ne(()=>{var f;return((f=n.disabled)==null?void 0:f.value)||e.disabled});n.contentId||(n.contentId=Sa(void 0,"reka-select-content")),Ht(()=>{n.onTriggerChange(s.value)});const{getItems:o}=Cs(),{search:a,handleTypeaheadSearch:l,resetTypeahead:c}=_y();function u(){i.value||(n.onOpenChange(!0),c())}function d(f){u(),n.triggerPointerDownPosRef.value={x:Math.round(f.pageX),y:Math.round(f.pageY)}}return(f,h)=>(O(),ae($(SA),{"as-child":"",reference:f.reference},{default:Y(()=>{var m,y,S,x;return[K($($t),{ref:$(r),role:"combobox",type:f.as==="button"?"button":void 0,"aria-controls":$(n).contentId,"aria-expanded":$(n).open.value||!1,"aria-required":(m=$(n).required)==null?void 0:m.value,"aria-autocomplete":"none",disabled:i.value,dir:(y=$(n))==null?void 0:y.dir.value,"data-state":(S=$(n))!=null&&S.open.value?"open":"closed","data-disabled":i.value?"":void 0,"data-placeholder":$(SF)((x=$(n).modelValue)==null?void 0:x.value)?"":void 0,"as-child":f.asChild,as:f.as,onClick:h[0]||(h[0]=_=>{var g;(g=_==null?void 0:_.currentTarget)==null||g.focus()}),onPointerdown:h[1]||(h[1]=_=>{if(_.pointerType==="touch")return _.preventDefault();const g=_.target;g.hasPointerCapture(_.pointerId)&&g.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&(d(_),_.preventDefault())}),onPointerup:h[2]||(h[2]=Xn(_=>{_.pointerType==="touch"&&d(_)},["prevent"])),onKeydown:h[3]||(h[3]=_=>{const g=$(a)!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&g&&_.key===" "||($(l)(_.key,$(o)()),$(xF).includes(_.key)&&(u(),_.preventDefault()))})},{default:Y(()=>[$e(f.$slots,"default")]),_:3},8,["type","aria-controls","aria-expanded","aria-required","disabled","dir","data-state","data-disabled","data-placeholder","as-child","as"])]}),_:3},8,["reference"]))}}),kw=pe({__name:"SelectValue",props:{placeholder:{default:""},asChild:{type:Boolean},as:{default:"span"}},setup(t){const e=t,{forwardRef:n,currentElement:r}=nt(),s=ko();Ht(()=>{s.valueElement=r});const i=ne(()=>{var u;let a=[];const l=Array.from(s.optionsSet.value),c=d=>l.find(f=>Wu(d,f.value,s.by));return Array.isArray(s.modelValue.value)?a=s.modelValue.value.map(d=>{var f;return((f=c(d))==null?void 0:f.textContent)??""}):a=[((u=c(s.modelValue.value))==null?void 0:u.textContent)??""],a.filter(Boolean)}),o=ne(()=>i.value.length?i.value.join(", "):e.placeholder);return(a,l)=>(O(),ae($($t),{ref:$(n),as:a.as,"as-child":a.asChild,style:{pointerEvents:"none"},"data-placeholder":i.value.length?void 0:e.placeholder},{default:Y(()=>[$e(a.$slots,"default",{selectedLabel:i.value,modelValue:$(s).modelValue.value},()=>[je(ue(o.value),1)])]),_:3},8,["as","as-child","data-placeholder"]))}}),HF=pe({__name:"SelectViewport",props:{nonce:{},asChild:{type:Boolean},as:{}},setup(t){const e=t,{nonce:n}=lr(e),r=eF(n),s=Qd(),i=s.position==="item-aligned"?kF():void 0,{forwardRef:o,currentElement:a}=nt();Ht(()=>{s==null||s.onViewportChange(a.value)});const l=xe(0);function c(u){const d=u.currentTarget,{shouldExpandOnScrollRef:f,contentWrapper:h}=i??{};if(f!=null&&f.value&&(h!=null&&h.value)){const m=Math.abs(l.value-d.scrollTop);if(m>0){const y=window.innerHeight-Vr*2,S=Number.parseFloat(h.value.style.minHeight),x=Number.parseFloat(h.value.style.height),_=Math.max(S,x);if(_<y){const g=_+m,p=Math.min(y,g),v=g-p;h.value.style.height=`${p}px`,h.value.style.bottom==="0px"&&(d.scrollTop=v>0?v:0,h.value.style.justifyContent="flex-end")}}}l.value=d.scrollTop}return(u,d)=>(O(),re(Ge,null,[K($($t),Ve({ref:$(o),"data-reka-select-viewport":"",role:"presentation"},{...u.$attrs,...e},{style:{position:"relative",flex:1,overflow:"hidden auto"},onScroll:c}),{default:Y(()=>[$e(u.$slots,"default")]),_:3},16),K($($t),{as:"style",nonce:$(r)},{default:Y(()=>d[0]||(d[0]=[je(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-select-viewport] { scrollbar-width:none; -ms-overflow-style: none; -webkit-overflow-scrolling: touch; } [data-reka-select-viewport]::-webkit-scrollbar { display: none; } ")])),_:1},8,["nonce"])],64))}}),[qF,KF]=Nn("SwitchRoot"),WF=pe({__name:"SwitchRoot",props:{defaultValue:{type:Boolean},modelValue:{type:[Boolean,null],default:void 0},disabled:{type:Boolean},id:{},value:{default:"on"},asChild:{type:Boolean},as:{default:"button"},name:{},required:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,{disabled:s}=lr(n),i=Bi(n,"modelValue",r,{defaultValue:n.defaultValue,passive:n.modelValue===void 0});function o(){s.value||(i.value=!i.value)}const{forwardRef:a,currentElement:l}=nt(),c=wA(l),u=ne(()=>{var d;return n.id&&l.value?(d=document.querySelector(`[for="${n.id}"]`))==null?void 0:d.innerText:void 0});return KF({modelValue:i,toggleCheck:o,disabled:s}),(d,f)=>(O(),ae($($t),Ve(d.$attrs,{id:d.id,ref:$(a),role:"switch",type:d.as==="button"?"button":void 0,value:d.value,"aria-label":d.$attrs["aria-label"]||u.value,"aria-checked":$(i),"aria-required":d.required,"data-state":$(i)?"checked":"unchecked","data-disabled":$(s)?"":void 0,"as-child":d.asChild,as:d.as,disabled:$(s),onClick:o,onKeydown:zd(Xn(o,["prevent"]),["enter"])}),{default:Y(()=>[$e(d.$slots,"default",{modelValue:$(i)}),$(c)&&d.name?(O(),ae($(Kj),{key:0,type:"checkbox",name:d.name,disabled:$(s),required:d.required,value:d.value,checked:!!$(i)},null,8,["name","disabled","required","value","checked"])):Te("",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),GF=pe({__name:"SwitchThumb",props:{asChild:{type:Boolean},as:{default:"span"}},setup(t){const e=qF();return nt(),(n,r)=>{var s;return O(),ae($($t),{"data-state":(s=$(e).modelValue)!=null&&s.value?"checked":"unchecked","data-disabled":$(e).disabled.value?"":void 0,"as-child":n.asChild,as:n.as},{default:Y(()=>[$e(n.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),JF=pe({__name:"ToastAnnounceExclude",props:{altText:{},asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(O(),ae($($t),{as:e.as,"as-child":e.asChild,"data-reka-toast-announce-exclude":"","data-reka-toast-announce-alt":e.altText||void 0},{default:Y(()=>[$e(e.$slots,"default")]),_:3},8,["as","as-child","data-reka-toast-announce-alt"]))}}),[Zd,YF]=Nn("ToastProvider"),XF=pe({inheritAttrs:!1,__name:"ToastProvider",props:{label:{default:"Notification"},duration:{default:5e3},swipeDirection:{default:"right"},swipeThreshold:{default:50}},setup(t){const e=t,{label:n,duration:r,swipeDirection:s,swipeThreshold:i}=lr(e);Cs({isProvider:!0});const o=xe(),a=xe(0),l=xe(!1),c=xe(!1);if(e.label&&typeof e.label=="string"&&!e.label.trim()){const u="Invalid prop `label` supplied to `ToastProvider`. Expected non-empty `string`.";throw new Error(u)}return YF({label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:a,viewport:o,onViewportChange(u){o.value=u},onToastAdd(){a.value++},onToastRemove(){a.value--},isFocusedToastEscapeKeyDownRef:l,isClosePausedRef:c}),(u,d)=>$e(u.$slots,"default")}}),QF=pe({__name:"ToastAnnounce",setup(t){const e=Zd(),n=Y3(1e3),r=xe(!1);return hA(()=>{r.value=!0}),(s,i)=>$(n)||r.value?(O(),ae($(Gd),{key:0},{default:Y(()=>[je(ue($(e).label.value)+" ",1),$e(s.$slots,"default")]),_:3})):Te("",!0)}}),ZF="toast.swipeStart",eU="toast.swipeMove",tU="toast.swipeCancel",nU="toast.swipeEnd",Em="toast.viewportPause",Sm="toast.viewportResume";function Uc(t,e,n){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),r.dispatchEvent(s)}function Iw(t,e,n=0){const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n}function rU(t){return t.nodeType===t.ELEMENT_NODE}function DA(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),rU(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.rekaToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.rekaToastAnnounceAlt;o&&e.push(o)}else e.push(...DA(r))}}),e}const[sU,iU]=Nn("ToastRoot"),oU=pe({inheritAttrs:!1,__name:"ToastRootImpl",props:{type:{},open:{type:Boolean,default:!1},duration:{},asChild:{type:Boolean},as:{default:"li"}},emits:["close","escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=nt(),{CollectionItem:o}=Cs(),a=Zd(),l=xe(null),c=xe(null),u=ne(()=>typeof n.duration=="number"?n.duration:a.duration.value),d=xe(0),f=xe(u.value),h=xe(0),m=xe(u.value),y=hA(()=>{const g=new Date().getTime()-d.value;m.value=Math.max(f.value-g,0)},{fpsLimit:60});function S(g){g<=0||g===Number.POSITIVE_INFINITY||$s&&(window.clearTimeout(h.value),d.value=new Date().getTime(),h.value=window.setTimeout(x,g))}function x(g){var E,k;const p=(g==null?void 0:g.pointerType)==="";((E=i.value)==null?void 0:E.contains(hn()))&&p&&((k=a.viewport.value)==null||k.focus()),p&&(a.isClosePausedRef.value=!1),r("close")}const _=ne(()=>i.value?DA(i.value):null);if(n.type&&!["foreground","background"].includes(n.type)){const g="Invalid prop `type` supplied to `Toast`. Expected `foreground | background`.";throw new Error(g)}return Dt(g=>{const p=a.viewport.value;if(p){const v=()=>{S(f.value),y.resume(),r("resume")},E=()=>{const k=new Date().getTime()-d.value;f.value=f.value-k,window.clearTimeout(h.value),y.pause(),r("pause")};return p.addEventListener(Em,E),p.addEventListener(Sm,v),()=>{p.removeEventListener(Em,E),p.removeEventListener(Sm,v)}}}),ot(()=>[n.open,u.value],()=>{f.value=u.value,n.open&&!a.isClosePausedRef.value&&S(u.value)},{immediate:!0}),dy("Escape",g=>{r("escapeKeyDown",g),g.defaultPrevented||(a.isFocusedToastEscapeKeyDownRef.value=!0,x())}),Ht(()=>{a.onToastAdd()}),Mn(()=>{a.onToastRemove()}),iU({onClose:x}),(g,p)=>(O(),re(Ge,null,[_.value?(O(),ae(QF,{key:0,role:"alert","aria-live":g.type==="foreground"?"assertive":"polite","aria-atomic":"true"},{default:Y(()=>[je(ue(_.value),1)]),_:1},8,["aria-live"])):Te("",!0),$(a).viewport.value?(O(),ae(Od,{key:1,to:$(a).viewport.value},[K($(o),null,{default:Y(()=>[K($($t),Ve({ref:$(s),role:"alert","aria-live":"off","aria-atomic":"true",tabindex:"0"},g.$attrs,{as:g.as,"as-child":g.asChild,"data-state":g.open?"open":"closed","data-swipe-direction":$(a).swipeDirection.value,style:{userSelect:"none",touchAction:"none"},onPointerdown:p[0]||(p[0]=Xn(v=>{l.value={x:v.clientX,y:v.clientY}},["left"])),onPointermove:p[1]||(p[1]=v=>{if(!l.value)return;const E=v.clientX-l.value.x,k=v.clientY-l.value.y,A=!!c.value,C=["left","right"].includes($(a).swipeDirection.value),I=["left","up"].includes($(a).swipeDirection.value)?Math.min:Math.max,N=C?I(0,E):0,j=C?0:I(0,k),V=v.pointerType==="touch"?10:2,L={x:N,y:j},Z={originalEvent:v,delta:L};A?(c.value=L,$(Uc)($(eU),T=>r("swipeMove",T),Z)):$(Iw)(L,$(a).swipeDirection.value,V)?(c.value=L,$(Uc)($(ZF),T=>r("swipeStart",T),Z),v.target.setPointerCapture(v.pointerId)):(Math.abs(E)>V||Math.abs(k)>V)&&(l.value=null)}),onPointerup:p[2]||(p[2]=v=>{const E=c.value,k=v.target;if(k.hasPointerCapture(v.pointerId)&&k.releasePointerCapture(v.pointerId),c.value=null,l.value=null,E){const A=v.currentTarget,C={originalEvent:v,delta:E};$(Iw)(E,$(a).swipeDirection.value,$(a).swipeThreshold.value)?$(Uc)($(nU),I=>r("swipeEnd",I),C):$(Uc)($(tU),I=>r("swipeCancel",I),C),A==null||A.addEventListener("click",I=>I.preventDefault(),{once:!0})}})}),{default:Y(()=>[$e(g.$slots,"default",{remaining:m.value,duration:u.value})]),_:3},16,["as","as-child","data-state","data-swipe-direction"])]),_:3})],8,["to"])):Te("",!0)],64))}}),aU=pe({__name:"ToastClose",props:{asChild:{type:Boolean},as:{default:"button"}},setup(t){const e=t,n=sU(),{forwardRef:r}=nt();return(s,i)=>(O(),ae(JF,{"as-child":""},{default:Y(()=>[K($($t),Ve(e,{ref:$(r),type:s.as==="button"?"button":void 0,onClick:$(n).onClose}),{default:Y(()=>[$e(s.$slots,"default")]),_:3},16,["type","onClick"])]),_:3}))}}),lU=pe({__name:"ToastRoot",props:{defaultOpen:{type:Boolean,default:!0},forceMount:{type:Boolean},type:{default:"foreground"},open:{type:Boolean,default:void 0},duration:{},asChild:{type:Boolean},as:{default:"li"}},emits:["escapeKeyDown","pause","resume","swipeStart","swipeMove","swipeCancel","swipeEnd","update:open"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s}=nt(),i=Bi(n,"open",r,{defaultValue:n.defaultOpen,passive:n.open===void 0});return(o,a)=>(O(),ae($(ac),{present:o.forceMount||$(i)},{default:Y(()=>[K(oU,Ve({ref:$(s),open:$(i),type:o.type,as:o.as,"as-child":o.asChild,duration:o.duration},o.$attrs,{onClose:a[0]||(a[0]=l=>i.value=!1),onPause:a[1]||(a[1]=l=>r("pause")),onResume:a[2]||(a[2]=l=>r("resume")),onEscapeKeyDown:a[3]||(a[3]=l=>r("escapeKeyDown",l)),onSwipeStart:a[4]||(a[4]=l=>{r("swipeStart",l),l.defaultPrevented||l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:a[5]||(a[5]=l=>{if(r("swipeMove",l),!l.defaultPrevented){const{x:c,y:u}=l.detail.delta,d=l.currentTarget;d.setAttribute("data-swipe","move"),d.style.setProperty("--reka-toast-swipe-move-x",`${c}px`),d.style.setProperty("--reka-toast-swipe-move-y",`${u}px`)}}),onSwipeCancel:a[6]||(a[6]=l=>{if(r("swipeCancel",l),!l.defaultPrevented){const c=l.currentTarget;c.setAttribute("data-swipe","cancel"),c.style.removeProperty("--reka-toast-swipe-move-x"),c.style.removeProperty("--reka-toast-swipe-move-y"),c.style.removeProperty("--reka-toast-swipe-end-x"),c.style.removeProperty("--reka-toast-swipe-end-y")}}),onSwipeEnd:a[7]||(a[7]=l=>{if(r("swipeEnd",l),!l.defaultPrevented){const{x:c,y:u}=l.detail.delta,d=l.currentTarget;d.setAttribute("data-swipe","end"),d.style.removeProperty("--reka-toast-swipe-move-x"),d.style.removeProperty("--reka-toast-swipe-move-y"),d.style.setProperty("--reka-toast-swipe-end-x",`${c}px`),d.style.setProperty("--reka-toast-swipe-end-y",`${u}px`),i.value=!1}})}),{default:Y(({remaining:l,duration:c})=>[$e(o.$slots,"default",{remaining:l,duration:c,open:$(i)})]),_:3},16,["open","type","as","as-child","duration"])]),_:3},8,["present"]))}}),Rw=pe({__name:"FocusProxy",emits:["focusFromOutsideViewport"],setup(t,{emit:e}){const n=e,r=Zd();return(s,i)=>(O(),ae($(Gd),{"aria-hidden":"true",tabindex:"0",style:{position:"fixed"},onFocus:i[0]||(i[0]=o=>{var c;const a=o.relatedTarget;!((c=$(r).viewport.value)!=null&&c.contains(a))&&n("focusFromOutsideViewport")})},{default:Y(()=>[$e(s.$slots,"default")]),_:3}))}}),cU=pe({__name:"DismissableLayerBranch",props:{asChild:{type:Boolean},as:{}},setup(t){const e=t,{forwardRef:n,currentElement:r}=nt();return Ht(()=>{zr.branches.add(r.value)}),Mn(()=>{zr.branches.delete(r.value)}),(s,i)=>(O(),ae($($t),Ve({ref:$(n)},e),{default:Y(()=>[$e(s.$slots,"default")]),_:3},16))}}),uU=pe({inheritAttrs:!1,__name:"ToastViewport",props:{hotkey:{default:()=>["F8"]},label:{type:[String,Function],default:"Notifications ({hotkey})"},asChild:{type:Boolean},as:{default:"ol"}},setup(t){const e=t,{hotkey:n,label:r}=lr(e),{forwardRef:s,currentElement:i}=nt(),{CollectionSlot:o,getItems:a}=Cs(),l=Zd(),c=ne(()=>l.toastCount.value>0),u=xe(),d=xe(),f=ne(()=>n.value.join("+").replace(/Key/g,"").replace(/Digit/g,""));dy(n.value,()=>{i.value.focus()}),Ht(()=>{l.onViewportChange(i.value)}),Dt(m=>{const y=i.value;if(c.value&&y){const S=()=>{if(!l.isClosePausedRef.value){const v=new CustomEvent(Em);y.dispatchEvent(v),l.isClosePausedRef.value=!0}},x=()=>{if(l.isClosePausedRef.value){const v=new CustomEvent(Sm);y.dispatchEvent(v),l.isClosePausedRef.value=!1}},_=v=>{!y.contains(v.relatedTarget)&&x()},g=()=>{y.contains(hn())||x()},p=v=>{var A,C,I;const E=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!E){const N=hn(),j=v.shiftKey;if(v.target===y&&j){(A=u.value)==null||A.focus();return}const Z=h({tabbingDirection:j?"backwards":"forwards"}),T=Z.findIndex(q=>q===N);fu(Z.slice(T+1))?v.preventDefault():j?(C=u.value)==null||C.focus():(I=d.value)==null||I.focus()}};y.addEventListener("focusin",S),y.addEventListener("focusout",_),y.addEventListener("pointermove",S),y.addEventListener("pointerleave",g),y.addEventListener("keydown",p),window.addEventListener("blur",S),window.addEventListener("focus",x),m(()=>{y.removeEventListener("focusin",S),y.removeEventListener("focusout",_),y.removeEventListener("pointermove",S),y.removeEventListener("pointerleave",g),y.removeEventListener("keydown",p),window.removeEventListener("blur",S),window.removeEventListener("focus",x)})}});function h({tabbingDirection:m}){const S=a().map(x=>x.ref).map(x=>{const _=[x,...fy(x)];return m==="forwards"?_:_.reverse()});return(m==="forwards"?S.reverse():S).flat()}return(m,y)=>(O(),ae($(cU),{role:"region","aria-label":typeof $(r)=="string"?$(r).replace("{hotkey}",f.value):$(r)(f.value),tabindex:"-1",style:xs({pointerEvents:c.value?void 0:"none"})},{default:Y(()=>[c.value?(O(),ae(Rw,{key:0,ref:S=>{u.value=$(jr)(S)},onFocusFromOutsideViewport:y[0]||(y[0]=()=>{const S=h({tabbingDirection:"forwards"});$(fu)(S)})},null,512)):Te("",!0),K($(o),null,{default:Y(()=>[K($($t),Ve({ref:$(s),tabindex:"-1",as:m.as,"as-child":m.asChild},m.$attrs),{default:Y(()=>[$e(m.$slots,"default")]),_:3},16,["as","as-child"])]),_:3}),c.value?(O(),ae(Rw,{key:1,ref:S=>{d.value=$(jr)(S)},onFocusFromOutsideViewport:y[1]||(y[1]=()=>{const S=h({tabbingDirection:"backwards"});$(fu)(S)})},null,512)):Te("",!0)]),_:3},8,["aria-label","style"]))}});var dU=Object.defineProperty,fU=(t,e,n)=>e in t?dU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vt=(t,e,n)=>fU(t,typeof e!="symbol"?e+"":e,n);class Am extends vr{constructor(e,n){super(`Service '${e}' failed booting`,{cause:n})}}function xy(){return Kr.namespace??Gm(Kr.name)}let Ey=null;function PA(){return Ey??hU()}function hU(){return Be(VL(),t=>{Ey=t,rc(t)})}function pU(){return Ey??PA()}function mU(t,e){return PA(),JL(t,e)()}function Io(t){var e;return e=class extends Fa{usesStore(){return!0}getName(){return t.name??null}getInitialState(){return typeof t.initialState=="function"?t.initialState():Object.entries(t.initialState).reduce((n,[r,s])=>{try{s=structuredClone(s)}catch{console.warn(`Could not clone '${r}' state from ${this.getName()} service, this may cause problems if you're using multiple instances of the service (for example, in unit tests).
To fix this problem, declare your initialState as a function instead.`)}return n[r]=s,n},{})}getComputedStateDefinition(){return t.computed??{}}getStateWatchers(){return t.watch??{}}serializePersistedState(n){var r;return((r=t.serialize)==null?void 0:r.call(t,n))??n}deserializePersistedState(n){var r;return((r=t.restore)==null?void 0:r.call(t,n))??n}},vt(e,"persist",t.persist??[]),e}var Wh;let Fa=(Wh=class extends gu{constructor(){super(),vt(this,"_name"),vt(this,"_booted"),vt(this,"_computedStateKeys"),vt(this,"_watchers"),vt(this,"_store");const t=this.getComputedStateDefinition();this._name=this.getName()??new.target.name,this._booted=new fs,this._computedStateKeys=new Set(Object.keys(t)),this._watchers=this.getStateWatchers(),this._store=this.usesStore()&&mU(this._name,{state:()=>this.getInitialState(),getters:t})}get booted(){return this._booted}static(t){return super.static(t)}launch(){const t=e=>this._booted.reject(new Am(this._name,e));try{this.frameworkBoot().then(()=>this.boot()).then(()=>this._booted.resolve()).catch(t)}catch(e){t(e)}return this._booted}hasPersistedState(){return Er.has(this.storageKey)}hasState(t){return this._store?t in this._store.$state||this._computedStateKeys.has(t):!1}getState(t){const e=this._store;return t?e?e[t]:void 0:e||{}}setState(t,e){if(!this._store)return;const n=typeof t=="string"?{[t]:e}:t,r=xi(this._store.$state,Object.keys(n));Object.assign(this._store.$state,n),this.onStateUpdated(n,r)}updatePersistedState(t){if(!this._store)return;const e=vn(t),n=xi(this._store.$state,e);pl(n)||this.onPersistentStateUpdated(n)}__get(t){return this.hasState(t)?this.getState(t):super.__get(t)}__set(t,e){this.setState({[t]:e})}get storageKey(){return`${xy()}:${this._name}`}onStateUpdated(t,e){const n=xi(t,this.static("persist"));pl(n)||this.onPersistentStateUpdated(n);for(const r in t){const s=this._watchers[r];!s||t[r]===e[r]||s.call(this,t[r],e[r])}}onPersistentStateUpdated(t){const e=Er.get(this.storageKey);e&&Er.set(this.storageKey,{...e,...this.serializePersistedState(Hr(t))})}usesStore(){return!1}getName(){return null}getInitialState(){return{}}getComputedStateDefinition(){return{}}getStateWatchers(){return{}}serializePersistedState(t){return t}deserializePersistedState(t){return t}async frameworkBoot(){this.restorePersistedState()}async boot(){}restorePersistedState(){if(!(!this.usesStore()||pl(this.static("persist")))){if(Er.has(this.storageKey)){const t=Er.require(this.storageKey);this.setState(this.deserializePersistedState(t));return}Er.set(this.storageKey,xi(this.getState(),this.static("persist")))}}requireStore(){return this._store?this._store:Ye(`Failed getting '${this._name}' store`)}},vt(Wh,"persist",[]),Wh);class gU extends Fa{constructor(){super(...arguments),vt(this,"listeners",{})}async boot(){Object.entries(globalThis.__aerogelEvents__??{}).forEach(([e,n])=>this.on(e,n))}async emit(e,n){var r;const s=this.listeners[e]??{priorities:[],handlers:{}};for(const i of s.priorities)await Promise.all(((r=s.handlers[i])==null?void 0:r.map(o=>o(n)))??[])}on(e,n,r){const s=typeof n=="function"?{}:typeof n=="number"?{priority:n}:n,i=typeof n=="function"?n:r;return this.registerListener(e,s,i),()=>this.off(e,i)}once(e,n,r){let s=null;const i=typeof n=="function"?{}:n,o=typeof n=="function"?n:r;return Be(()=>s&&this.off(e,s),a=>{s=(...l)=>(a(),o(...l)),this.registerListener(e,i,o)})}off(e,n){var r;const s=this.listeners[e];if(!s)return;const i=[...s.priorities];for(const o of i)ar(s.handlers[o]??[],n),((r=s.handlers[o])==null?void 0:r.length)===0&&(delete s.handlers[o],ar(s.priorities,o));s.priorities.length===0&&delete this.listeners[e]}registerListener(e,n,r){var s,i,o;const a=n.priority??0;e in this.listeners||(this.listeners[e]={priorities:[],handlers:{}});const l=((s=this.listeners[e])==null?void 0:s.priorities)??Ye(`priorities missing for event '${e}'`),c=((i=this.listeners[e])==null?void 0:i.handlers)??Ye(`handlers missing for event '${e}'`);l.includes(a)||(l.push(a),l.sort((u,d)=>d-u),c[a]=[]),(o=c[a])==null||o.push(r)}}const qe=ts(gU);const yU=Io({name:"app",initialState:{plugins:{},instance:null,environment:ld()??"development",version:Kr.version,sourceUrl:Kr.sourceUrl,settings:[]},computed:{development:t=>t.environment==="development",staging:t=>t.environment==="staging",testing:t=>t.environment==="test"||t.environment==="testing",versionName(t){return this.development?"dev."+Kr.sourceHash.toString().substring(0,7):this.staging?"staging."+Kr.sourceHash.toString().substring(0,7):`v${t.version}`},versionUrl(t){return t.sourceUrl+(this.development||this.staging?`/tree/${Kr.sourceHash}`:`/releases/tag/${this.versionName}`)}}});class vU extends yU{constructor(){super(...arguments),vt(this,"name",Kr.name),vt(this,"ready",new fs),vt(this,"mounted",new fs)}isReady(){return this.ready.isResolved()}isMounted(){return this.mounted.isResolved()}addSetting(e){this.settings.push(Ue(e))}async whenReady(e){return await this.ready.then(e)}async reload(e){e&&Wk(e),location.reload(),await Hk()}plugin(e){return this.plugins[e]??null}service(e){var n;return((n=this.instance)==null?void 0:n.config.globalProperties[e])??null}async boot(){qe.once("application-ready",()=>this.ready.resolve()),qe.once("application-mounted",()=>this.mounted.resolve())}}const mt=ts(vU);async function bU(t,...e){mt.setState("plugins",t.reduce((n,r)=>(r.name&&(n[r.name]=r),n),{})),await Promise.all(t.map(n=>n.install(...e))??[])}function _U(t){return Object.entries(t.props??{}).reduce((e,[n,r])=>e+`${n}="${Rt(r)}"`,"")}function wU(t){const e=qt(t);return e?Jn(e):void 0}function _n(t,e){return wU(t)??Ye(e??`Could not resolve '${Rt(t)}' injection key`)}function xU(t,e){return qt(t)??Ye(`Could not resolve '${Rt(t)}' injection key`)}function LA(t){return typeof t=="string"?t:t.type===Vt?"":t.type===ps||t.type===Pi?t.children:t.type==="br"?`

`:`<${t.type} ${_U(t)}>${Array.from(t.children).map(LA).join("")}</${t.type}>`}const Gh=new WeakMap,EU={mounted(t,{value:e,modifiers:n}){const r=typeof e=="function"?e:null,s=()=>{const i=t.getBoundingClientRect();n.css&&(t.style.setProperty("--width",`${i.width}px`),t.style.setProperty("--height",`${i.height}px`)),r==null||r({width:i.width,height:i.height})};n.watch&&Gh.set(t,Be(new ResizeObserver(s)).observe(t)),s()},unmounted(t){var e;(e=Gh.get(t))==null||e.unobserve(t),Gh.delete(t)}};function MA(t,e){const{baseClasses:n,...r}=t,{baseClasses:s,...i}=e,o=eN(s,i);return Mt(o(r),$(n))}function Mt(...t){return PN(HS(t))}function Sy(t,e){const n=qe.on(t,e);Mn(()=>n())}const SU={required:t=>t?void 0:"required"};function AU(t,e){var n;if(t==null)return!0;switch(e.type){case"string":return typeof t=="string";case"enum":return!!((n=e.values)!=null&&n.includes(t));case"number":return typeof t=="number";case"boolean":return typeof t=="boolean";case"date":return t instanceof Date;case"object":return typeof t=="object"}}const $m={...SU};function $U(t,e){$m[t]=e}function CU(t,e){return AU(t,e)?[]:["invalid_value"]}function kU(t,e){var n;const r=(n=$m[e])==null?void 0:n.call($m,t);return r?vn(r):[]}const Tw=new WeakMap;class IU extends gu{constructor(e){super(),vt(this,"errors"),vt(this,"_fields"),vt(this,"_data"),vt(this,"_submitted"),vt(this,"_errors"),vt(this,"_listeners",{}),this._fields=e,this._submitted=xe(!1),this._data=this.getInitialData(e),this._errors=this.getInitialErrors(e),Tw.set(this,ne(()=>!Object.values(this._errors).some(n=>n!==null))),this.errors=Es(this._errors)}get valid(){var e;return!!((e=Tw.get(this))!=null&&e.value)}get submitted(){return this._submitted.value}setFieldValue(e,n){const r=this._fields[e]??Ye(`Trying to set undefined '${Rt(e)}' field`);this._data[e]=r.type==="string"&&(r.trim??!0)?Rt(n).trim():n,this._submitted.value&&this.validate()}getFieldValue(e){return this._data[e]}getFieldRules(e){var n,r;return((r=(n=this._fields[e])==null?void 0:n.rules)==null?void 0:r.split("|"))??[]}getFieldType(e){var n;return((n=this._fields[e])==null?void 0:n.type)??null}data(){return{...this._data}}validate(){const e=Object.entries(this._fields).reduce((n,[r,s])=>(n[r]=this.getFieldErrors(r,s),n),{});return this.resetErrors(e),this.valid}reset(e={}){this._submitted.value=!1,e.keepData||this.resetData(),e.keepErrors||this.resetErrors()}submit(){var e;this._submitted.value=!0;const n=this.validate();return n&&((e=this._listeners.submit)==null||e.forEach(r=>r())),n}on(e,n){var r,s;return(r=this._listeners)[e]??(r[e]=[]),(s=this._listeners[e])==null||s.push(n),()=>this.off(e,n)}off(e,n){ar(this._listeners[e]??[],n)}async focus(e){var n;await Tt(),(n=this._listeners.focus)==null||n.forEach(r=>r(e))}__get(e){return e in this._fields?this.getFieldValue(e):super.__get(e)}__set(e,n){if(!(e in this._fields)){super.__set(e,n);return}this.setFieldValue(e,n)}getFieldErrors(e,n){var r;const s=[],i=this._data[e],o=((r=n.rules)==null?void 0:r.split("|"))??[];s.push(...CU(i,n));for(const a of o)a!=="required"&&i==null||s.push(...kU(i,a));return s.length>0?s:null}getInitialData(e){if(this.static().isConjuring())return{};const n=Object.entries(e).reduce((r,[s,i])=>(r[s]=i.default??null,r),{});return Jn(n)}getInitialErrors(e){if(this.static().isConjuring())return{};const n=Object.keys(e).reduce((r,s)=>(r[s]=null,r),{});return Jn(n)}resetData(){for(const[e,n]of Object.entries(this._fields))this._data[e]=n.default??null}resetErrors(e){Object.keys(this._errors).forEach(n=>delete this._errors[n]),e&&Object.assign(this._errors,e)}}function NA(t,e){const n=qt("form",null),r=n==null?void 0:n.on("focus",s=>t.name===s&&e());Mn(()=>r==null?void 0:r())}function ef(t){return new IU(t)}function Ay(){const t=Ng(),e=ne(()=>t.class);return[ne(()=>Ws(t,"class")),e]}function RU(t){let e=uI;Ht(()=>e=t()),Mn(()=>e())}function TU(t,e){const n=Jn(Er.get(t)??e);return ot(n,()=>Er.set(t,Ze(n))),n}function OU(t){let e=new Set(t),n,r;const s=So((i,o)=>(r=i,n=o,{get:()=>e,set:()=>Ye("Attempted to write read-only reactive set")}));return{values(){return r(),Array.from(s.value.values())},has(i){return r(),s.value.has(i)},add(i){n(),s.value.add(i)},delete(i){n(),s.value.delete(i)},clear(){n(),s.value.clear()},reset(i){n(),e=new Set(i)}}}function jA(t){const e=xe(),n=ne(t);return ot(n,async()=>e.value=await n.value,{immediate:!0}),e}let Gu=null;function DU(){return Be(new xa,t=>{t.link=function(e){const n=xa.prototype.link.apply(this,[e]);return e.href.startsWith("#")?n:n.replace("<a",'<a target="_blank"')}})}function PU(t){const e=a1(t,/<a[^>]*href="#action:([^"]+)"[^>]*>([^<]+)<\/a>/g);for(const[n,r,s]of e)t=t.replace(n,`<button type="button" data-markdown-action="${r}">${s}</button>`);return t}function LU(t){const e=a1(t,/<a[^>]*href="#route:([^"]+)"[^>]*>([^<]+)<\/a>/g);for(const[n,r,s]of e){const i=(Gu==null?void 0:Gu.resolve(r))??r;t=t.replace(n,`<a data-markdown-route="${r}" href="${i}">${s}</a>`)}return t}function MU(){return Gu}function NU(t){Gu=t}function jU(t){let e=xt(t,{renderer:DU(),async:!1});return e=FA(e),e=PU(e),e=LU(e),e}function FA(t){return yM.sanitize(t,{ADD_ATTR:["target"]})}const FU={mounted(t,{value:e}){t.innerHTML=FA(e)}},UU={measure:EU,"safe-html":FU},BU={install(t,e){const n={...UU,...e.directives};for(const[r,s]of Object.entries(n))t.directive(r,s)}};class zU extends Fa{constructor(){super(...arguments),vt(this,"cache")}async get(e){return await(await this.open()).match(e)??null}async store(e,n){await(await this.open()).put(e,n)}async replace(e,n){const r=await this.open();(await r.keys(e)).length!==0&&await r.put(e,n)}async open(){return this.cache=this.cache??Be(new fs,e=>{caches.open("app").then(n=>e.resolve(n))})}}const Jh=ts(zU);class VU extends Fa{async purge(){await qe.emit("purge-storage")}}const tf=ts(VU);function Ow(t,e){return{...t,...xi(e,Object.keys(t))}}const HU={$app:mt,$events:qe,$storage:tf};async function Ro(t,e){await Promise.all(Object.entries(e).map(async([n,r])=>{await r.launch().catch(s=>{var i,o;return(o=(i=t.config).errorHandler)==null?void 0:o.call(i,s,null,`Failed launching ${n}.`)})})),Object.assign(t.config.globalProperties,e),(Mi()||Ol())&&Object.assign(globalThis,e)}const qU={async install(t,e){var n;const r={...HU,...e.services};t.use(pU()),(n=e.settings)==null||n.forEach(s=>mt.addSetting(s)),await Ro(t,r)}},UA=768,Ju={Mobile:"mobile",Desktop:"desktop"};function BA(){return globalThis.innerWidth>UA?Ju.Desktop:Ju.Mobile}const KU=Io({name:"ui",initialState:{modals:[],toasts:[],layout:BA()},computed:{desktop:({layout:t})=>t===Ju.Desktop,mobile:({layout:t})=>t===Ju.Mobile,openModals:({modals:t})=>t.filter(({closing:e})=>!e)}});class WU extends KU{constructor(){super(...arguments),vt(this,"modalCallbacks",{}),vt(this,"components",{})}registerComponent(e,n){this.components[e]=n}resolveComponent(e){return this.components[e]??null}requireComponent(e){return this.resolveComponent(e)??Ye(`UI Component '${e}' is not defined!`)}alert(e,n){const r=()=>typeof n!="string"?{message:e}:{title:e,message:n};this.modal(this.requireComponent("alert-modal"),r())}async confirm(e,n,r){const s=typeof n!="string"?{...n??{},message:e,required:!!(n!=null&&n.required)}:{...r??{},title:e,message:n,required:!!(r!=null&&r.required)},i=await this.modalForm(this.requireComponent("confirm-modal"),s),o=typeof i=="object"?i[0]:i??!1,a=typeof i=="object"?i[1]:Object.entries(s.checkboxes??{}).reduce((l,[c,{default:u}])=>({[c]:u??!1,...l}),{});for(const[l,c]of Object.entries(s.checkboxes??{}))if(!(!c.required||a[l]))return o&&Mi()&&console.warn(`Confirmed confirm modal was suppressed because required '${l}' checkbox was missing`),[!1,a];return"checkboxes"in s?[o,a]:o}async prompt(e,n,r){const s=(r==null?void 0:r.trim)??!0,i=()=>typeof n!="string"?{message:e,...n??{}}:{title:e,message:n,...r??{}},o=await this.modalForm(this.requireComponent("prompt-modal"),i());return(s&&typeof o=="string"?o==null?void 0:o.trim():o)??null}async loading(e,n){const r=u=>typeof u=="function"?Promise.resolve(u()):u,s=()=>{if(typeof e=="string")return{props:{message:e},operationPromise:r(n)};if(typeof e=="function"||e instanceof Promise)return{operationPromise:r(e)};const{delay:u,...d}=e;return{props:d,delay:$(u),operationPromise:r(n)}};let i=!1;const{operationPromise:o,props:a,delay:l}=s();if(l&&await Promise.race([Ir({ms:l}).then(()=>i=!0),o]),l&&!i)return o;const c=await this.modal(this.requireComponent("loading-modal"),a);try{const u=await o;return await Ir({ms:500}),u}finally{await this.closeModal(c.id)}}toast(e,n={}){const{component:r,...s}=n,i={id:Qn(),properties:{message:e,...s},component:Ue(r??this.requireComponent("toast"))};this.setState("toasts",this.toasts.concat(i))}async modal(e,n){const r=Qn(),s={},i={id:r,closing:!1,properties:n??{},component:Ue(e),beforeClose:new Promise(a=>s.willClose=a),afterClose:new Promise(a=>s.hasClosed=a)},o=this.modals.concat(i);return this.modalCallbacks[i.id]=s,this.setState({modals:o}),await Tt(),i}async modalForm(e,n){return await(await this.modal(e,n)).beforeClose}async closeModal(e,n){if(!mt.isMounted()){await this.removeModal(e,n);return}await qe.emit("close-modal",{id:e,result:n})}async closeAllModals(){for(;this.modals.length>0;)await this.closeModal(On(this.modals[this.modals.length-1]).id)}async boot(){this.watchModalEvents(),this.watchMountedEvent(),this.watchViewportBreakpoints()}async removeModal(e,n){var r,s;this.setState("modals",this.modals.filter(i=>i.id!==e)),(s=(r=this.modalCallbacks[e])==null?void 0:r.hasClosed)==null||s.call(r,n),delete this.modalCallbacks[e]}watchModalEvents(){qe.on("modal-will-close",({modal:{id:e},result:n})=>{var r,s;const i=this.modals.find(o=>e===o.id);i&&(i.closing=!0),(s=(r=this.modalCallbacks[e])==null?void 0:r.willClose)==null||s.call(r,n)}),qe.on("modal-has-closed",async({modal:{id:e},result:n})=>{await this.removeModal(e,n)})}watchMountedEvent(){qe.once("application-mounted",async()=>{if(!globalThis.document||!globalThis.getComputedStyle)return;const e=globalThis.document.getElementById("splash");e&&(globalThis.getComputedStyle(e).opacity!=="0"&&(e.style.opacity="0",await Ir({ms:600})),e.remove())})}watchViewportBreakpoints(){globalThis.matchMedia&&globalThis.matchMedia(`(min-width: ${UA}px)`).addEventListener("change",()=>this.setState({layout:BA()}))}}const ft=ts(WU);class GU{constructor(e,n){this.locale=e,this.fallbackLocale=n}getLocale(){return this.locale}async setLocale(e){this.locale=e}getFallbackLocale(){return this.fallbackLocale}async setFallbackLocale(e){this.fallbackLocale=e}getLocales(){return["en"]}translate(e){return Mi()&&console.warn("Lang provider is missing"),e}translateWithDefault(e,n){return Mi()&&console.warn("Lang provider is missing"),n}}const JU=Io({name:"lang",persist:["locale","fallbackLocale"],initialState:{locale:null,locales:["en"],fallbackLocale:"en"}});class YU extends JU{constructor(){super(),vt(this,"provider"),this.provider=new GU(this.getState("locale")??this.getBrowserLocale(),this.getState("fallbackLocale"))}async setProvider(e){this.provider=e,this.locales=e.getLocales(),await e.setLocale(this.locale??this.getBrowserLocale()),await e.setFallbackLocale(this.fallbackLocale)}translate(e,n){return this.provider.translate(e,n)??e}translateWithDefault(e,n,r={}){return this.provider.translateWithDefault(e,n,r)}getBrowserLocale(){const e=this.getState("locales");return navigator.languages.find(n=>e.includes(n))??"en"}async boot(){globalThis.document&&this.requireStore().$subscribe(async()=>{var e,n;await this.provider.setLocale(this.locale??this.getBrowserLocale()),await this.provider.setFallbackLocale(this.fallbackLocale),this.locale?(e=document.querySelector("html"))==null||e.setAttribute("lang",this.locale):(n=document.querySelector("html"))==null||n.removeAttribute("lang")},{immediate:!0})}}const zi=ts(YU),fr=zi.translate.bind(zi),Ne=zi.translateWithDefault.bind(zi),XU=Io({name:"errors",initialState:{logs:[],startupErrors:[],debug:!1},computed:{hasErrors:({logs:t})=>t.length>0,hasNewErrors:({logs:t})=>t.some(e=>!e.seen),hasStartupErrors:({startupErrors:t})=>t.length>0}});class QU extends XU{constructor(){super(...arguments),vt(this,"forceReporting",!1),vt(this,"enabled",!0),vt(this,"eruda",null)}enable(){this.enabled=!0}disable(){this.enabled=!1}async inspect(e,n){if(Array.isArray(e)&&e.length===0){ft.alert(Ne("errors.inspectEmpty","Nothing to inspect!"));return}const r=Array.isArray(e)?e[0]:this.isErrorReport(e)?e:await this.createErrorReport(e),s=Array.isArray(e)?e:n??[r];ft.modal(ft.requireComponent("error-report-modal"),{report:r,reports:s})}async report(e,n){if(await qe.emit("error",{error:e,message:n}),Ol("unit")||(Mi()&&this.logError(e),!this.enabled))throw e;if(!mt.isMounted()){const i=await this.createStartupErrorReport(e);i&&this.setState({startupErrors:this.startupErrors.concat(i)});return}const r=await this.createErrorReport(e),s={report:r,seen:!1,date:new Date};ft.toast(n??Ne("errors.notice","Something went wrong, but it's not your fault. Try again!"),{variant:"danger",actions:[{label:Ne("errors.viewDetails","View details"),dismiss:!0,click:()=>ft.modal(ft.requireComponent("error-report-modal"),{report:r,reports:[r]})}]}),this.setState({logs:[s].concat(this.logs)})}reportDevelopmentError(e,n){Mi()&&(n&&console.warn(n),this.logError(e))}see(e){this.setState({logs:this.logs.map(n=>n.report!==e?n:{...n,seen:!0})})}async boot(){Dt(async()=>{var e;if(!this.debug){(e=this.eruda)==null||e.destroy();return}this.eruda??(this.eruda=(await Qo(async()=>{const{default:n}=await import("./eruda-BvmBKmTY.js").then(r=>r.e);return{default:n}},[])).default),this.eruda.init()})}logError(e){console.error(e),pt(e)&&e.cause&&this.logError(e.cause)}isErrorReport(e){return pt(e)&&"title"in e}async createErrorReport(e){return typeof e=="string"?{title:e}:e instanceof Error||e instanceof vr?this.createErrorReportFromError(e):pt(e)?Gn({title:Rt(e.name??e.title??Ne("errors.unknown","Unknown Error")),description:Rt(e.message??e.description??Ne("errors.unknownDescription","Unknown error object")),error:e}):{title:Ne("errors.unknown","Unknown Error"),error:e}}async createStartupErrorReport(e){return e instanceof Am?e.cause instanceof Am?null:this.createErrorReport(e.cause):this.createErrorReport(e)}createErrorReportFromError(e,n={}){return{title:e.name,description:e.message,details:e.stack,error:e,...n}}}const bs=ts(QU),$y=pe({__name:"HeadlessButton",props:{class:{},disabled:{type:Boolean},href:{},route:{},routeParams:{},routeQuery:{},size:{},submit:{type:Boolean},variant:{},asChild:{type:Boolean},as:{}},setup(t){const e=ne(()=>t.as?{as:t.as}:t.route?{as:ft.resolveComponent("router-link")??"a",to:Gn({name:t.route,params:t.routeParams,query:t.routeQuery})}:t.href?{as:"a",target:"_blank",href:t.href}:{as:"button",type:t.submit?"submit":"button"});return(n,r)=>(O(),ae($($t),Ve({class:t.class,"as-child":n.asChild,disabled:n.disabled},e.value),{default:Y(()=>[$e(n.$slots,"default")]),_:3},16,["class","as-child","disabled"]))}}),at=pe({__name:"Button",props:{class:{},disabled:{type:Boolean},href:{},route:{},routeParams:{},routeQuery:{},size:{},submit:{type:Boolean},variant:{},asChild:{type:Boolean},as:{}},setup(t){const e=oi(t,["class","size","variant","disabled"]),n=ne(()=>MA({baseClasses:t.class,variant:t.variant,size:t.size,disabled:t.disabled},{baseClasses:"focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",variants:{variant:{default:"bg-primary-600 text-white focus-visible:outline-primary-600",secondary:"bg-background text-gray-900 ring-gray-300",danger:"bg-red-600 text-white focus-visible:outline-red-600",ghost:"bg-transparent",outline:"bg-transparent text-primary-600 ring-primary-600",link:"text-links"},size:{small:"text-xs min-h-6",default:"text-sm min-h-8",large:"text-base min-h-10",icon:"rounded-full p-2.5"},disabled:{false:null,true:"opacity-50 cursor-not-allowed"}},compoundVariants:[{variant:["default","secondary","danger","ghost","outline"],class:"flex items-center justify-center gap-1 font-medium"},{variant:["default","danger"],class:"shadow-sm"},{variant:["secondary","outline"],class:"ring-1 ring-inset"},{variant:["default","secondary","danger","ghost","outline"],size:"small",class:"rounded px-2 py-1"},{variant:["default","secondary","danger","ghost","outline"],size:"default",class:"rounded-md px-2.5 py-1.5"},{variant:["default","secondary","danger","ghost","outline"],size:"large",class:"rounded-md px-3 py-2"},{variant:"default",disabled:!1,class:"hover:bg-primary-500"},{variant:["secondary","ghost","outline"],disabled:!1,class:"hover:bg-gray-50"},{variant:"danger",disabled:!1,class:"hover:bg-red-500"},{variant:"link",disabled:!1,class:"hover:underline"},{variant:"link",size:"small",class:"leading-6"},{variant:"link",size:"default",class:"leading-8"},{variant:"link",size:"large",class:"leading-10"}],defaultVariants:{variant:"default",size:"default",disabled:!1}}));return(r,s)=>(O(),ae($y,Ve({class:n.value,disabled:r.disabled},e),{default:Y(()=>[$e(r.$slots,"default")]),_:3},16,["class","disabled"]))}});function ZU(t){return typeof t=="object"&&t!==null&&"label"in t}const zA=pe({__name:"HeadlessSelectValue",setup(t){const e=_n("select","<HeadlessSelectValue> must be a child of a <HeadlessSelect>");return(n,r)=>n.$slots.default?(O(),ae($(kw),{key:0,placeholder:$(e).placeholder},{default:Y(()=>[$e(n.$slots,"default")]),_:3},8,["placeholder"])):(O(),ae($(kw),{key:1,placeholder:$(e).placeholder},null,8,["placeholder"]))}}),VA=pe({__name:"HeadlessSelectTrigger",setup(t){const e=_n("select","<HeadlessSelectTrigger> must be a child of a <HeadlessSelect>");return(n,r)=>(O(),ae($(VF),{id:$(e).id},{default:Y(()=>[$e(n.$slots,"default",{},()=>[K(zA,{placeholder:$(e).placeholder},null,8,["placeholder"]),K($(NF))])]),_:3},8,["id"]))}}),HA=pe({__name:"HeadlessSelectOption",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(t){const e=_n("select","<HeadlessSelectOption> must be a child of a <HeadlessSelect>"),n=ne(()=>{var r;const s=(r=e.options)==null?void 0:r.find(i=>i.value===t.value);return s?s.label:Rt(t.value)});return(r,s)=>(O(),ae($(UF),Ln(tr(r.$props)),{default:Y(()=>[K($(BF),null,{default:Y(()=>[$e(r.$slots,"default",{},()=>[je(ue(n.value),1)])]),_:3})]),_:3},16))}}),qA=pe({__name:"HeadlessSelectOptions",props:{class:{},innerClass:{}},setup(t){const e=_n("select","<HeadlessSelectOptions> must be a child of a <HeadlessSelect>"),n=ne(()=>Mt("min-w-(--reka-select-trigger-width) max-h-(--reka-select-content-available-height)",t.class));return(r,s)=>(O(),ae($(zF),null,{default:Y(()=>[K($(MF),{position:"popper",class:Je(n.value),align:$(e).align,side:$(e).side,"side-offset":4},{default:Y(()=>[K($(HF),{class:Je(r.innerClass)},{default:Y(()=>[$e(r.$slots,"default",{},()=>[(O(!0),re(Ge,null,Lt($(e).options??[],i=>(O(),ae(HA,{key:i.key,value:i.value},null,8,["value"]))),128))])]),_:3},8,["class"])]),_:3},8,["class","align","side"])]),_:3}))}}),e4=pe({inheritAttrs:!1,__name:"HeadlessSelect",props:{as:{default:"div"},options:{},placeholder:{},renderOption:{type:Function},compareOptions:{type:Function,default:(t,e)=>t===e},labelClass:{},optionsClass:{},align:{},side:{},name:{},label:{},description:{},modelValue:{}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=n,s=qt("form",null),i=ne(()=>s&&t.name?s.getFieldValue(t.name):t.modelValue),o=ne(()=>i.value),a=ne(()=>!s||!t.name?null:s.errors[t.name]??null),l=ne(()=>t.options?t.options.map(d=>({key:Qn(),label:t.renderOption?t.renderOption(d):ZU(d)?fI(d.label):Rt(d),value:d})):null),c={labelClass:t.labelClass,optionsClass:t.optionsClass,align:t.align,side:t.side,value:i,id:`select-${Qn()}`,name:ne(()=>t.name),label:ne(()=>t.label),description:ne(()=>t.description),placeholder:ne(()=>t.placeholder??Ne("ui.select","Select an option")),options:l,selectedOption:ne(()=>{var d;return(d=l.value)==null?void 0:d.find(f=>f.value===t.modelValue)}),errors:Es(a),required:ne(()=>{if(!(!t.name||!s))return s.getFieldRules(t.name).includes("required")}),update(d){if(s&&t.name){s.setFieldValue(t.name,d);return}r("update:modelValue",d)}};function u(d){c.update(d)}return pr("select",c),e(c),(d,f)=>(O(),ae($(CF),{"model-value":o.value,by:d.compareOptions,"onUpdate:modelValue":f[0]||(f[0]=h=>u(h))},{default:Y(({open:h})=>[(O(),ae(Ss(d.as),Ln(tr(d.$attrs)),{default:Y(()=>[$e(d.$slots,"default",{modelValue:d.modelValue,open:h},()=>[K(VA),K(qA)])]),_:2},1040))]),_:3},8,["model-value","by"]))}}),Dw=pe({__name:"HeadlessSelectLabel",props:{asChild:{type:Boolean},as:{}},setup(t){const e=_n("select","<HeadlessSelectLabel> must be a child of a <HeadlessSelect>"),n=Nd(),r=ne(()=>!!(e.label||n.default));return(s,i)=>r.value?(O(),ae($(wF),Ve({key:0,for:$(e).id},s.$props),{default:Y(()=>[$e(s.$slots,"default",{},()=>[je(ue($(e).label),1)])]),_:3},16,["for"])):Te("",!0)}}),KA=pe({__name:"SelectLabel",props:{class:{}},setup(t){const e=_n("select","<SelectLabel> must be a child of a <Select>"),n=ne(()=>Mt("block text-sm leading-6 font-medium text-gray-900",e.labelClass,t.class));return(r,s)=>r.$slots.default?(O(),ae(Dw,{key:0,class:Je(n.value)},{default:Y(()=>[$e(r.$slots,"default")]),_:3},8,["class"])):(O(),ae(Dw,{key:1,class:Je(n.value)},null,8,["class"]))}}),Pw=pe({__name:"SelectOption",props:{value:{},class:{},innerClass:{}},setup(t){const e=ne(()=>Mt("group p-1 outline-none",t.class)),n=ne(()=>Mt("relative flex max-w-[calc(100vw-2rem)] cursor-pointer items-center truncate rounded-md gap-2 px-2 py-1 text-sm select-none *:truncate group-data-[highlighted]:bg-gray-100 group-data-[state=checked]:font-semibold group-data-[state=unchecked]:opacity-50",t.innerClass));return(r,s)=>(O(),ae(HA,{class:Je(e.value),value:r.value},{default:Y(()=>[U("div",{class:Je(n.value)},[$e(r.$slots,"default")],2)]),_:3},8,["class","value"]))}}),WA=pe({__name:"SelectOptions",props:{class:{}},setup(t){const e=_n("select","<SelectOptions> must be a child of a <Select>"),n=ne(()=>Mt("z-50 overflow-auto rounded-lg bg-white text-base shadow-lg ring-1 ring-black/5 focus:outline-hidden",e.optionsClass,t.class));return(r,s)=>(O(),ae(qA,{class:Je(n.value)},{default:Y(()=>{var i;return[(i=$(e).options)!=null&&i.length?$e(r.$slots,"default",{key:0},()=>{var o;return[(O(!0),re(Ge,null,Lt(((o=$(e))==null?void 0:o.options)??[],a=>(O(),ae(Pw,{key:a.key,value:a.value},{default:Y(()=>[je(ue(a.label),1)]),_:2},1032,["value"]))),128))]}):$e(r.$slots,"default",{key:1},()=>[K(Pw,{disabled:"",value:null},{default:Y(()=>[je(ue(r.$td("ui.selectEmpty","No options available")),1)]),_:1})])]}),_:3},8,["class"]))}}),t4={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function n4(t,e){return O(),re("svg",t4,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"m9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828L5.757 6.586L4.343 8z"},null,-1)]))}const r4=Ue({name:"zondicons-cheveron-down",render:n4}),GA=pe({__name:"SelectTrigger",props:{class:{}},setup(t){const e=_n("select","<SelectTrigger> must be a child of a <Select>"),n=ne(()=>Mt("focus:outline-primary-600 data-[state=open]:outline-primary-600 grid w-full cursor-default grid-cols-1 rounded-md bg-white py-1.5 pr-2 pl-3 text-left text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:-outline-offset-2 sm:text-sm/6",{"mt-1":e.label},t.class));return(r,s)=>(O(),ae(VA,{class:Je(n.value)},{default:Y(()=>[K(zA,{class:"col-start-1 row-start-1 truncate pr-6"}),K($(r4),{class:"col-start-1 row-start-1 size-5 self-center justify-self-end text-gray-500 sm:size-4"})]),_:1},8,["class"]))}}),Cy=pe({__name:"Select",props:{as:{},options:{},placeholder:{},renderOption:{type:Function},compareOptions:{type:Function},labelClass:{},optionsClass:{},align:{},side:{},name:{},label:{},description:{},modelValue:{}},emits:["update:modelValue"],setup(t){const{forwardRef:e}=nt();return(n,r)=>(O(),ae(e4,Ve({ref:$(e)},n.$props,{"onUpdate:modelValue":r[0]||(r[0]=s=>n.$emit("update:modelValue",s))}),{default:Y(()=>[K(KA),$e(n.$slots,"default",{},()=>[K(GA),K(WA)])]),_:3},16))}}),s4={class:"grow"},i4=pe({__name:"Language",setup(t){const e=zi.getBrowserLocale(),n=ne(()=>[null,...zi.locales]);function r(s){return(s&&Kr.locales[s])??Ne("settings.localeDefault","{locale} (default)",{locale:Kr.locales[e]??e})}return(s,i)=>(O(),ae(Cy,{modelValue:s.$lang.locale,"onUpdate:modelValue":i[0]||(i[0]=o=>s.$lang.locale=o),class:"flex flex-col items-start md:flex-row",as:"div",options:n.value,"render-option":r},{default:Y(()=>[U("div",s4,[K(KA,{class:"text-base font-semibold"},{default:Y(()=>[je(ue(s.$td("settings.locale","Language")),1)]),_:1}),K(Ut,{"lang-key":"settings.localeDescription","lang-default":"Choose the application's language.",class:"mt-1 text-sm text-gray-500"})]),K(at,{variant:"ghost",as:GA,class:"grid w-auto outline-none"}),K(WA)]),_:1},8,["modelValue","options"]))}}),o4=[{priority:100,component:i4}],a4={$lang:zi},l4={async install(t){var e;(e=t.config.globalProperties).$t??(e.$t=fr),t.config.globalProperties.$td=Ne,o4.forEach(n=>mt.addSetting(n)),await Ro(t,a4)}},c4=pe({__name:"Markdown",props:{as:{},inline:{type:Boolean},langKey:{},langParams:{},langDefault:{},text:{},actions:{}},setup(t){const e=Ng(),n=Nd(),r=ne(()=>n.default?n.default().map(LA).join(""):t.text??(t.langKey&&(t.langDefault?Ne(t.langKey,t.langDefault,t.langParams??{}):fr(t.langKey,t.langParams??{})))),s=ne(()=>{if(!r.value)return null;let a=jU(r.value);return t.inline&&(a=a.replace("<p>","<span>").replace("</p>","</span>")),a}),i=()=>Yn(t.as??(t.inline?"span":"div"),{innerHTML:s.value,onClick:o,...e,class:`${e.class??""} ${t.inline?"":"prose"}`});async function o(a){var l,c;const{target:u}=a;if(cn(u,HTMLElement)&&u.dataset.markdownAction){(c=(l=t.actions)==null?void 0:l[u.dataset.markdownAction])==null||c.call(l);return}if(cn(u,HTMLAnchorElement)&&u.dataset.markdownRoute){const d=MU();d&&(a.preventDefault(),d.visit(u.dataset.markdownRoute));return}}return(a,l)=>(O(),ae(i))}}),u4=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},Ut=u4(c4,[["__scopeId","data-v-8b211cfb"]]),d4={class:"flex-grow"},f4=["id"],h4=pe({__name:"Setting",props:{title:{},titleId:{},description:{},class:{},layout:{default:"horizontal"}},setup(t){const e=ne(()=>Mt(t.class,"flex flex-col justify-center gap-1"));return(n,r)=>(O(),re("div",{class:Je(["mt-4 flex",{"flex-col":n.layout==="vertical"}])},[U("div",d4,[U("h3",{id:n.titleId,class:"text-base font-semibold"},ue(n.title),9,f4),n.description?(O(),ae(Ut,{key:0,text:n.description,class:"mt-1 text-sm text-gray-500"},null,8,["text"])):Te("",!0)]),U("div",{class:Je(e.value)},[$e(n.$slots,"default")],2)],2))}}),p4=["for"],m4=pe({inheritAttrs:!1,__name:"HeadlessSwitch",props:{name:{},label:{},description:{},modelValue:{},class:{},labelClass:{},inputClass:{},thumbClass:{}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=n,s=qt("form",null),i=ne(()=>!s||!t.name?null:s.errors[t.name]??null),o={id:`switch-${Qn()}`,name:ne(()=>t.name),label:ne(()=>t.label),description:ne(()=>t.description),value:ne(()=>s&&t.name?s.getFieldValue(t.name):t.modelValue),errors:Es(i),required:ne(()=>{if(!(!t.name||!s))return s.getFieldRules(t.name).includes("required")}),update(a){if(s&&t.name){s.setFieldValue(t.name,a);return}r("update:modelValue",a)}};return e(o),Dt(()=>{!t.description&&!i.value||console.warn("Errors and description not implemented in <HeadlessSwitch>")}),(a,l)=>(O(),re("div",{class:Je(t.class)},[a.label?(O(),re("label",{key:0,for:o.id,class:Je(a.labelClass)},ue(a.label),11,p4)):Te("",!0),K($(WF),Ve({id:o.id,name:a.name,"model-value":o.value.value},a.$attrs,{class:a.inputClass,"onUpdate:modelValue":l[0]||(l[0]=c=>a.$emit("update:modelValue",c))}),{default:Y(()=>[K($(GF),{class:Je(a.thumbClass)},null,8,["class"])]),_:1},16,["id","name","model-value","class"])],2))}}),g4=pe({__name:"Switch",setup(t){return(e,n)=>(O(),ae(m4,{class:"flex flex-row items-center gap-1","input-class":"disabled:opacity-50 disabled:cursor-not-allowed data-[state=checked]:bg-primary-600 data-[state=unchecked]:bg-gray-200 relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focusdisabled:opacity-50 disabled:cursor-not-allowed :ring-2 focus:ring-primary-600 focus:ring-offset-2 focus:outline-hidden","thumb-class":"data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 pointer-events-none inline-block size-5 transform rounded-full bg-white shadow-sm ring-0 transition duration-200 ease-in-out"}))}}),y4=pe({__name:"Debug",setup(t){return(e,n)=>(O(),ae(h4,{"title-id":"debug-setting",title:e.$td("settings.debug","Debugging"),description:e.$td("settings.debugDescription","Enable debugging with [Eruda](https://eruda.liriliri.io/).")},{default:Y(()=>[K(g4,{modelValue:e.$errors.debug,"onUpdate:modelValue":n[0]||(n[0]=r=>e.$errors.debug=r),"aria-labelledby":"debug-setting"},null,8,["modelValue"])]),_:1},8,["title","description"]))}}),v4=[{priority:10,component:y4}],JA=[];function b4(t){JA.push(t)}function _4(t){for(const e of JA){const n=e(t);if(n)return n}return typeof t=="string"?t:t instanceof Error||t instanceof vr?t.message:pt(t)?Rt(t.message??t.description??"Unknown error object"):Ne("errors.unknown","Unknown Error")}class Lw extends vr{}const w4={$errors:bs},x4=t=>(bs.report(t),!0);function E4(t,e=()=>!1){const n=r=>e(r)||x4(r);t.config.errorHandler=n,globalThis.onerror=(r,s,i,o,a)=>n(a??r),globalThis.onunhandledrejection=r=>n(r.reason)}const S4={async install(t,e){E4(t,e.handleError),v4.forEach(n=>mt.addSetting(n)),await Ro(t,w4)}},A4={async install(){Ol()&&(globalThis.testingRuntime={on:(...t)=>qe.on(...t),service:t=>mt.service(t)})}},$4={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function C4(t,e){return O(),re("svg",$4,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M10 8.586L2.929 1.515L1.515 2.929L8.586 10l-7.071 7.071l1.414 1.414L10 11.414l7.071 7.071l1.414-1.414L11.414 10l7.071-7.071l-1.414-1.414z"},null,-1)]))}const k4=Ue({name:"zondicons-close",render:C4}),YA=pe({__name:"HeadlessModal",props:{persistent:{type:Boolean},title:{},titleHidden:{type:Boolean},description:{},descriptionHidden:{type:Boolean}},setup(t,{expose:e}){const n=xe(null),{modal:r}=_n("modal","could not obtain modal reference from <HeadlessModal>, did you render this component manually? Show it using $ui.modal() instead");e({close:o,$content:n});const{forwardRef:s}=nt(),i=xe(!1);pr("$modalContentRef",n),Sy("close-modal",async({id:a,result:l})=>{a===r.id&&await o(l)});async function o(a){i.value||(await qe.emit("modal-will-close",{modal:r,result:a}),i.value=!0,await qe.emit("modal-has-closed",{modal:r,result:a}))}return(a,l)=>(O(),ae($(uj),{ref:$(s),open:"","onUpdate:open":l[0]||(l[0]=c=>a.persistent||o())},{default:Y(()=>[K($(pF),null,{default:Y(()=>[$e(a.$slots,"default",{close:o})]),_:3})]),_:3},512))}}),XA=pe({__name:"ModalContext",props:{modal:{},childIndex:{}},setup(t){const e=t,n=ne(()=>{const r={};for(const s in e.modal.properties)r[s]=$(e.modal.properties[s]);return r});return pr("modal",{modal:ku(e,"modal"),childIndex:ku(e,"childIndex")}),(r,s)=>(O(),ae(Ss(r.modal.component),Ln(tr(n.value)),null,16))}}),QA=pe({__name:"HeadlessModalContent",setup(t){const{childIndex:e=0}=_n("modal","could not obtain modal reference from <HeadlessModalContent>, did you render this component manually? Show it using $ui.modal() instead"),n=xU("$modalContentRef"),r=si("$contentRef"),s=ne(()=>ft.modals[e]??null);return Dt(()=>n.value=r.value),(i,o)=>(O(),ae($(Oj),{ref:"$contentRef"},{default:Y(()=>[$e(i.$slots,"default"),s.value?(O(),ae(XA,{key:0,"child-index":$(e)+1,modal:s.value},null,8,["child-index","modal"])):Te("",!0)]),_:3},512))}}),I4=pe({__name:"HeadlessModalDescription",props:{asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(O(),ae($(Dj),Ln(tr(e.$props)),{default:Y(()=>[$e(e.$slots,"default")]),_:3},16))}}),ZA=pe({__name:"HeadlessModalOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(O(),ae($(Fj),Ln(tr(e.$props)),{default:Y(()=>[$e(e.$slots,"default")]),_:3},16))}}),R4=pe({__name:"HeadlessModalTitle",props:{asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(O(),ae($(Uj),Ln(tr(e.$props)),{default:Y(()=>[$e(e.$slots,"default")]),_:3},16))}}),T4={key:0,class:"absolute top-0 right-0 hidden pt-3.5 pr-2.5 sm:block"},O4=["onClick"],D4={class:"sr-only"},ai=pe({__name:"Modal",props:{persistent:{type:Boolean},title:{},titleHidden:{type:Boolean},description:{},descriptionHidden:{type:Boolean},wrapperClass:{default:""},class:{default:""},closeHidden:{type:Boolean}},setup(t,{expose:e}){const n=oi(t,["class","wrapperClass","title","titleHidden","description","persistent","closeHidden"]);e({close:async d=>{var f;return(f=i.value)==null?void 0:f.close(d)},$content:ne(()=>{var d;return(d=i.value)==null?void 0:d.$content})});const{forwardRef:r,currentRef:s}=nt(),i=s,o=_n("modal"),a=ne(()=>!o.modal.closing&&o.childIndex===ft.openModals.length),l=ne(()=>t.description?{}:{"aria-describedby":void 0}),c=ne(()=>Mt("max-h-[90vh] overflow-auto px-4 pb-4",{"pt-4":!t.title||t.titleHidden},t.class)),u=ne(()=>Mt("isolate fixed top-1/2 left-1/2 z-50 w-full max-w-[calc(100%-2rem)] -translate-x-1/2 -translate-y-1/2","overflow-hidden rounded-lg bg-white text-left shadow-xl sm:max-w-lg","animate-[fade-in_var(--tw-duration)_ease-in-out,grow_var(--tw-duration)_ease-in-out]","transition-[scale,opacity] will-change-[scale,opacity] duration-300",{"scale-50 opacity-0":!a.value,"scale-100 opacity-100":a.value},t.wrapperClass));return Sy("modal-will-close",async({modal:{id:d}})=>{d===o.modal.id&&await Ir({ms:300})}),(d,f)=>(O(),ae(YA,Ve(n,{ref:h=>$(r)(h),persistent:d.persistent}),{default:Y(({close:h})=>[K(ZA,{class:Je(["fixed inset-0 animate-[fade-in_var(--tw-duration)_ease-in-out] transition-opacity duration-300 will-change-[opacity]",{"bg-black/30":$(o).childIndex===1,"opacity-0":$(o).childIndex===1&&$(o).modal.closing}])},null,8,["class"]),K(QA,Ve(l.value,{class:u.value}),{default:Y(()=>[!d.persistent&&!d.closeHidden?(O(),re("div",T4,[U("button",{type:"button",class:"clickable z-10 rounded-full p-2.5 text-gray-400 hover:text-gray-500",onClick:m=>h()},[U("span",D4,ue(d.$td("ui.close","Close")),1),K($(k4),{class:"size-4"})],8,O4)])):Te("",!0),d.title?(O(),ae(R4,{key:1,class:Je(["px-4 pt-5 text-base font-semibold text-gray-900",{"sr-only":d.titleHidden,"pb-0":d.description&&!d.descriptionHidden,"pb-2":!d.description||d.descriptionHidden}])},{default:Y(()=>[K(Ut,{text:d.title,inline:""},null,8,["text"])]),_:1},8,["class"])):Te("",!0),d.description?(O(),ae(I4,{key:2,class:Je(["px-4 pt-1 pb-2",{"sr-only":d.descriptionHidden}])},{default:Y(()=>[K(Ut,{text:d.description,class:"text-sm leading-6 text-gray-500"},null,8,["text"])]),_:1},8,["class"])):Te("",!0),U("div",{class:Je(c.value)},[$e(d.$slots,"default",{close:h})],2)]),_:2},1040,["class"])]),_:3},16,["persistent"]))}});function P4(t){const e=ne(()=>t.title??Ne("ui.alert","Alert")),n=ne(()=>!t.title);return{renderedTitle:e,titleHidden:n}}const L4=pe({__name:"AlertModal",props:{title:{},message:{}},setup(t,{expose:e}){const n=t,{renderedTitle:r,titleHidden:s}=P4(n);return e(),(i,o)=>(O(),ae(ai,{title:$(r),"title-hidden":$(s)},{default:Y(()=>[K(Ut,{text:i.message},null,8,["text"])]),_:1},8,["title","title-hidden"]))}}),nf=pe({__name:"Form",props:{form:{}},emits:["submit"],setup(t,{emit:e}){let n;const r=e;return Dt(s=>{var i;n==null||n(),n=(i=t.form)==null?void 0:i.on("submit",()=>r("submit")),s(()=>n==null?void 0:n())}),pr("form",t.form),(s,i)=>(O(),re("form",{onSubmit:i[0]||(i[0]=Xn(o=>s.form?s.form.submit():s.$emit("submit"),["prevent"]))},[$e(s.$slots,"default")],32))}});function M4(t){const e=ef(Object.entries(t.checkboxes??{}).reduce((o,[a,l])=>({[a]:{type:"boolean",default:l.default,required:l.required?"required":void 0},...o}),{})),n=ne(()=>t.title??Ne("ui.confirm","Confirm")),r=ne(()=>!t.title),s=ne(()=>t.acceptText??Ne("ui.accept","Ok")),i=ne(()=>t.cancelText??Ne("ui.cancel","Cancel"));return{form:e,renderedTitle:n,titleHidden:r,renderedAcceptText:s,renderedCancelText:i}}const N4={key:0,class:"mt-4 flex flex-col text-sm text-gray-600"},j4={class:"flex items-center"},F4=["onUpdate:modelValue","required"],U4={class:"ml-1.5"},B4={class:"mt-4 flex flex-row-reverse gap-2"},z4=pe({__name:"ConfirmModal",props:{title:{},message:{},acceptText:{},acceptVariant:{},cancelText:{},cancelVariant:{default:"secondary"},checkboxes:{},actions:{},required:{type:Boolean}},setup(t,{expose:e}){const n=oi(t,["cancelVariant"]),{form:r,renderedTitle:s,titleHidden:i,renderedAcceptText:o,renderedCancelText:a}=M4(n);return e(),(l,c)=>(O(),ae(ai,{title:$(s),"title-hidden":$(i),persistent:""},{default:Y(({close:u})=>[K(nf,{form:$(r),onSubmit:d=>u([!0,$(r).data()])},{default:Y(()=>[K(Ut,{text:l.message,actions:l.actions},null,8,["text","actions"]),l.checkboxes?(O(),re("ul",N4,[(O(!0),re(Ge,null,Lt(l.checkboxes,(d,f)=>(O(),re("li",{key:f},[U("label",j4,[zs(U("input",{"onUpdate:modelValue":h=>$(r)[f]=h,type:"checkbox",required:d.required,class:"border-primary-600 text-primary-600 hover:bg-primary-50 hover:checked:bg-primary-500 focus:ring-primary-600 focus-visible:ring-primary-600 rounded border-2"},null,8,F4),[[Bd,$(r)[f]]]),U("span",U4,ue(d.label),1)])]))),128))])):Te("",!0),U("div",B4,[K(at,{variant:l.acceptVariant,submit:""},{default:Y(()=>[je(ue($(o)),1)]),_:1},8,["variant"]),l.required?Te("",!0):(O(),ae(at,{key:0,variant:l.cancelVariant,onClick:d=>u(!1)},{default:Y(()=>[je(ue($(a)),1)]),_:2},1032,["variant","onClick"]))])]),_:2},1032,["form","onSubmit"])]),_:1},8,["title","title-hidden"]))}}),V4={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function H4(t,e){return O(),re("svg",V4,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M7.05 9.293L6.343 10L12 15.657l1.414-1.414L9.172 10l4.242-4.243L12 4.343z"},null,-1)]))}const q4=Ue({name:"zondicons-cheveron-left",render:H4}),K4={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function W4(t,e){return O(),re("svg",K4,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"m12.95 10.707l.707-.707L8 4.343L6.586 5.757L10.828 10l-4.242 4.243L8 15.657z"},null,-1)]))}const e$=Ue({name:"zondicons-cheveron-right",render:W4}),G4={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function J4(t,e){return O(),re("svg",G4,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M2.93 17.07A10 10 0 1 1 17.07 2.93A10 10 0 0 1 2.93 17.07M9 5v6h2V5zm0 8v2h2v-2z"},null,-1)]))}const ky=Ue({name:"zondicons-exclamation-solid",render:J4}),Y4={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function X4(t,e){return O(),re("svg",Y4,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M20 19V7H4v12zm0-16a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm-7 14v-2h5v2zm-3.42-4L5.57 9H8.4l3.3 3.3c.39.39.39 1.03 0 1.42L8.42 17H5.59z"},null,-1)]))}const Q4=Ue({name:"mdi-console",render:X4}),Z4={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function e5(t,e){return O(),re("svg",Z4,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M6 6V2c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-4v4a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8c0-1.1.9-2 2-2zm2 0h4a2 2 0 0 1 2 2v4h4V2H8zM2 8v10h10V8z"},null,-1)]))}const t5=Ue({name:"zondicons-copy",render:e5}),n5={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function r5(t,e){return O(),re("svg",n5,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"},null,-1)]))}const s5=Ue({name:"mdi-github",render:r5}),i5={class:"flex"},o5={class:"sr-only"},a5=pe({__name:"ErrorReportModalButtons",props:{report:{}},setup(t){const e=t,n=ne(()=>e.report.description?`${e.report.title}: ${e.report.description}`:e.report.title),r=ne(()=>{if(!mt.sourceUrl)return!1;const i=encodeURIComponent(n.value),o=encodeURIComponent(["[Please, explain here what you were trying to do when this error appeared]","","Error details:","```",eI(e.report.details??"Details missing from report",1800-i.length-mt.sourceUrl.length).trim(),"```"].join(`
`));return`${mt.sourceUrl}/issues/new?title=${i}&body=${o}`}),s=ne(()=>Be([{id:"clipboard",description:"Copy to clipboard",iconComponent:t5,async click(){await navigator.clipboard.writeText(`${n.value}

${e.report.details}`),ft.toast(Ne("errors.copiedToClipboard","Debug information copied to clipboard"))}},{id:"console",description:"Log to console",iconComponent:Q4,click(){const i=e.report.error??e.report;window.error=i,console.error(i),ft.toast(Ne("errors.addedToConsole","You can now use the **error** variable in the console"))}}],i=>{r.value&&i.push({id:"github",description:"Report in GitHub",iconComponent:s5,url:r.value})}));return(i,o)=>(O(),re("div",i5,[(O(!0),re(Ge,null,Lt(s.value,a=>$e(i.$slots,"default",Ve({ref_for:!0},a),()=>[K(at,{size:"icon",variant:"ghost",class:"group whitespace-nowrap",href:a.url,title:i.$td(`errors.report_${a.id}`,a.description),onClick:a.click},{default:Y(()=>[U("span",o5,ue(i.$td(`errors.report_${a.id}`,a.description)),1),(O(),ae(Ss(a.iconComponent),{class:"size-4","aria-hidden":"true"}))]),_:2},1032,["href","title","onClick"])])),256))]))}}),l5=pe({__name:"ErrorReportModalTitle",props:{report:{},currentReport:{},totalReports:{}},setup(t){const e=ne(()=>!t.totalReports||t.totalReports<=1?t.report.title:`${t.report.title} (${t.currentReport}/${t.totalReports})`);return(n,r)=>(O(),ae(Ut,{text:e.value,inline:""},null,8,["text"]))}});function c5(t){const e=xe(t.reports.includes(t.report)?t.reports.indexOf(t.report):0),n=ne(()=>t.reports[e.value]),r=ne(()=>{var o;return((o=n.value.details)==null?void 0:o.trim())||Ne("errors.detailsEmpty","This error is missing a stacktrace.")}),s=Ne("errors.previousReport","Show previous report"),i=Ne("errors.nextReport","Show next report");return{activeReportIndex:e,details:r,nextReportText:i,previousReportText:s,activeReport:n}}const u5={class:"px-4 pt-5 pb-4"},d5={class:"flex justify-between gap-4"},f5={class:"flex items-center gap-2"},h5={key:0,class:"flex gap-0.5"},p5={class:"-mt-2 max-h-[75vh] overflow-auto bg-red-800/10"},m5=["textContent"],g5=pe({__name:"ErrorReportModal",props:{report:{},reports:{}},setup(t,{expose:e}){const n=t,{activeReportIndex:r,details:s,nextReportText:i,previousReportText:o,activeReport:a}=c5(n);return e(),(l,c)=>(O(),ae(ai,{title:l.$td("errors.report","Error report"),"title-hidden":"","close-hidden":"",class:"p-0","wrapper-class":"sm:w-auto sm:min-w-lg sm:max-w-[80vw]"},{default:Y(()=>[U("div",u5,[U("h2",d5,[U("div",f5,[K($(ky),{class:"size-5 text-red-600"}),K(l5,{class:"text-lg leading-6 font-semibold text-gray-900",report:$(a),"current-report":$(r)+1,"total-reports":l.reports.length},null,8,["report","current-report","total-reports"]),l.reports.length>1?(O(),re("span",h5,[K(at,{size:"icon",variant:"ghost",disabled:$(r)===0,"aria-label":$(o),title:$(o),onClick:c[0]||(c[0]=u=>r.value--)},{default:Y(()=>[K($(q4),{class:"size-4"})]),_:1},8,["disabled","aria-label","title"]),K(at,{size:"icon",variant:"ghost",disabled:$(r)===l.reports.length-1,"aria-label":$(i),title:$(i),onClick:c[1]||(c[1]=u=>r.value++)},{default:Y(()=>[K($(e$),{class:"size-4"})]),_:1},8,["disabled","aria-label","title"])])):Te("",!0)]),K(a5,{report:$(a),class:"gap-0.5"},null,8,["report"])]),$(a).description?(O(),ae(Ut,{key:0,text:$(a).description,class:"text-gray-600"},null,8,["text"])):Te("",!0)]),U("div",p5,[U("pre",{class:"p-4 text-xs text-red-800",textContent:ue($(s))},null,8,m5)])]),_:1},8,["title"]))}}),y5={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function v5(t,e){return O(),re("svg",y5,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z",opacity:".25"},null,-1),U("path",{fill:"currentColor",d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z"},[U("animateTransform",{attributeName:"transform",dur:"0.75s",repeatCount:"indefinite",type:"rotate",values:"0 12 12;360 12 12"})],-1)]))}const b5=Ue({name:"svg-spinners-90-ring-with-bg",render:v5}),_5={class:"mt-1 h-2 w-full overflow-hidden rounded-full bg-gray-200"},w5={class:"sr-only"},t$=pe({__name:"ProgressBar",props:{filledClass:{},progress:{},job:{}},setup(t){let e;const n=xe(0),r=ne(()=>Mt("size-full transition-transform duration-500 rounded-r-full ease-linear bg-primary-600",t.filledClass)),s=ne(()=>typeof t.progress=="number"?t.progress:n.value);return ot(()=>t.job,()=>{e&&e(),n.value=t.job?t.job.progress:0,e=t.job&&t.job.listeners.add({onUpdated:i=>n.value=i})},{immediate:!0}),Mn(()=>e&&e()),(i,o)=>(O(),re("div",_5,[U("div",{class:Je(r.value),style:xs(`transform:translateX(-${(1-s.value)*100}%)`)},null,6),U("span",w5,ue(i.$td("ui.progress","{progress}% complete",{progress:s.value*100})),1)]))}});function x5(t){const e=ne(()=>t.title??Ne("ui.loading","Loading")),n=ne(()=>t.message??Ne("ui.loadingInProgress","Loading in progress...")),r=ne(()=>typeof t.progress=="number"||!!t.job),s=ne(()=>!t.title);return{renderedTitle:e,renderedMessage:n,titleHidden:s,showProgress:r}}const E5=pe({__name:"LoadingModal",props:{title:{},message:{},progress:{},job:{}},setup(t,{expose:e}){const n=t,{renderedTitle:r,renderedMessage:s,titleHidden:i,showProgress:o}=x5(n);return e(),(a,l)=>(O(),ae(ai,{persistent:"",class:Je(["flex",{"flex-col-reverse":$(o),"items-center justify-center gap-2":!$(o)}]),"wrapper-class":"w-auto",title:$(r),"title-hidden":$(i)},{default:Y(()=>[$(o)?(O(),ae(t$,{key:0,progress:a.progress,job:a.job,class:"min-w-[min(400px,80vw)]"},null,8,["progress","job"])):(O(),ae($(b5),{key:1,class:"text-primary-600 mr-1 size-6"})),K(Ut,{text:$(s)},null,8,["text"])]),_:1},8,["title","title-hidden","class"]))}}),Iy=pe({__name:"HeadlessInput",props:{name:{},label:{},description:{},modelValue:{},as:{default:"div"}},emits:["update:modelValue"],setup(t,{expose:e,emit:n}){const r=n,s=qt("form",null),i=ne(()=>!s||!t.name?null:s.errors[t.name]??null),o={id:`input-${Qn()}`,name:ne(()=>t.name),label:ne(()=>t.label),description:ne(()=>t.description),value:ne(()=>s&&t.name?s.getFieldValue(t.name):t.modelValue),errors:Es(i),required:ne(()=>{if(!(!t.name||!s))return s.getFieldRules(t.name).includes("required")}),update(a){if(s&&t.name){s.setFieldValue(t.name,a);return}r("update:modelValue",a)}};return pr("input",o),e(o),(a,l)=>(O(),ae(Ss(a.as),null,{default:Y(()=>[$e(a.$slots,"default")]),_:3}))}}),S5=["for"],Yu=pe({__name:"HeadlessInputLabel",setup(t){const e=_n("input","<HeadlessInputLabel> must be a child of a <HeadlessInput>"),n=Nd(),r=ne(()=>!!(e.label||n.default));return(s,i)=>r.value?(O(),re("label",{key:0,for:$(e).id},[$e(s.$slots,"default",{},()=>[je(ue($(e).label),1)])],8,S5)):Te("",!0)}}),A5=["id","name","checked","type","required","aria-invalid","aria-describedby"],n$=pe({__name:"HeadlessInputInput",props:{type:{}},setup(t){const e=si("$inputRef"),n=_n("input","<HeadlessInputInput> must be a child of a <HeadlessInput>"),r=qt("form",null),s=ne(()=>n.name??void 0),i=ne(()=>n.value),o=ne(()=>{if(t.type)return t.type;const u=(s.value&&(r==null?void 0:r.getFieldType(s.value)))??"";return["text","email","number","tel","url"].includes(u)?u:"text"}),a=ne(()=>{if(t.type==="checkbox")return!!i.value});function l(){e.value&&n.update(c())}function c(){if(!e.value)return null;switch(t.type){case"checkbox":return e.value.checked;case"date":return e.value.valueAsDate;default:return e.value.value}}return NA(n,()=>{var u;return(u=e.value)==null?void 0:u.focus()}),Dt(()=>{if(e.value){if(t.type==="date"&&i.value instanceof Date){e.value.valueAsDate=i.value;return}e.value.value=i.value??null}}),(u,d)=>(O(),re("input",{id:$(n).id,ref:"$inputRef",name:s.value,checked:a.value,type:o.value,required:$(n).required??void 0,"aria-invalid":$(n).errors?"true":"false","aria-describedby":$(n).errors?`${$(n).id}-error`:$(n).description?`${$(n).id}-description`:void 0,onInput:l},null,40,A5))}}),r$=pe({inheritAttrs:!1,__name:"HeadlessInputDescription",setup(t){const e=_n("input","<HeadlessInputDescription> must be a child of a <HeadlessInput>"),n=ne(()=>typeof e.description=="string"?e.description:""),r=ne(()=>!!e.description);return(s,i)=>$e(s.$slots,"default",{id:`${$(e).id}-description`},()=>[r.value?(O(),ae(Ut,Ve({key:0},s.$attrs,{id:`${$(e).id}-description`,text:n.value}),null,16,["id","text"])):Te("",!0)])}}),$5=["id"],Xu=pe({__name:"HeadlessInputError",setup(t){const e=_n("input","<HeadlessInputError> must be a child of a <HeadlessInput>"),n=ne(()=>e.errors?Ne(`errors.${e.errors[0]}`,`Error: ${e.errors[0]}`):null);return(r,s)=>n.value?(O(),re("p",{key:0,id:`${$(e).id}-error`},ue(n.value),9,$5)):Te("",!0)}}),C5={key:0,class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},Ry=pe({inheritAttrs:!1,__name:"Input",props:{name:{},label:{},description:{},modelValue:{},inputClass:{},wrapperClass:{}},emits:["update:modelValue"],setup(t){const e=oi(t,["label","inputClass","wrapperClass"]),n=si("$inputRef"),[r,s]=Ay(),i=ne(()=>Mt("relative rounded-md shadow-2xs",{"mt-1":t.label},t.wrapperClass)),o=ne(()=>{var a,l,c;return Mt("block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6",{"focus:ring-primary-600":!((a=n.value)!=null&&a.errors),"text-gray-900 shadow-2xs ring-gray-900/10 placeholder:text-gray-400":!((l=n.value)!=null&&l.errors),"pr-10 text-red-900 ring-red-900/10 placeholder:text-red-300 focus:ring-red-500":(c=n.value)==null?void 0:c.errors},t.inputClass)});return(a,l)=>(O(),ae(Iy,Ve({ref:"$inputRef",label:a.label,class:$(s)},e,{"onUpdate:modelValue":l[0]||(l[0]=c=>a.$emit("update:modelValue",c))}),{default:Y(()=>{var c;return[K(Yu,{class:"block text-sm leading-6 font-medium text-gray-900"}),U("div",{class:Je(i.value)},[K(n$,Ve($(r),{class:o.value}),null,16,["class"]),(c=n.value)!=null&&c.errors?(O(),re("div",C5,[K($(ky),{class:"size-5 text-red-500"})])):Te("",!0)],2),K(r$,{class:"mt-2 text-sm text-gray-600"}),K(Xu,{class:"mt-2 text-sm text-red-600"})]}),_:1},16,["label","class"]))}});function k5(t,e,n={}){return{default:e,type:"enum",rules:n.rules,values:t}}function Ty(t){return{default:t,type:"string",rules:"required"}}function Cm(t,e={}){return{default:t,type:"string",rules:e.rules}}function I5(t){const e=ef({draft:Ty(t.defaultValue??"")}),n=ne(()=>t.title??t.message),r=ne(()=>t.title?t.message:null),s=ne(()=>t.acceptText??Ne("ui.accept","Ok")),i=ne(()=>t.cancelText??Ne("ui.cancel","Cancel"));return{form:e,renderedTitle:n,renderedMessage:r,renderedAcceptText:s,renderedCancelText:i}}const R5={class:"mt-4 flex flex-row-reverse gap-2"},T5=pe({__name:"PromptModal",props:{title:{},message:{},label:{},defaultValue:{},placeholder:{},acceptText:{},acceptVariant:{},cancelText:{},cancelVariant:{default:"secondary"}},setup(t,{expose:e}){const n=oi(t,["cancelVariant"]),{form:r,renderedTitle:s,renderedMessage:i,renderedAcceptText:o,renderedCancelText:a}=I5(n);return e(),(l,c)=>(O(),ae(ai,{title:$(s),persistent:""},{default:Y(({close:u})=>[K(nf,{form:$(r),onSubmit:d=>u($(r).draft)},{default:Y(()=>[$(i)?(O(),ae(Ut,{key:0,text:$(i)},null,8,["text"])):Te("",!0),K(Ry,{name:"draft",class:"mt-2",placeholder:l.placeholder,label:l.label},null,8,["placeholder","label"]),U("div",R5,[K(at,{variant:l.acceptVariant,submit:""},{default:Y(()=>[je(ue($(o)),1)]),_:1},8,["variant"]),K(at,{variant:l.cancelVariant,onClick:d=>u()},{default:Y(()=>[je(ue($(a)),1)]),_:2},1032,["variant","onClick"])])]),_:2},1032,["form","onSubmit"])]),_:1},8,["title"]))}}),O5={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function D5(t,e){return O(),re("svg",O5,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M12 21q-1.625 0-3.012-.8T6.8 18H4v-2h2.1q-.075-.5-.088-1T6 14H4v-2h2q0-.5.012-1t.088-1H4V8h2.8q.35-.575.788-1.075T8.6 6.05L7 4.4L8.4 3l2.15 2.15q.7-.225 1.425-.225t1.425.225L15.6 3L17 4.4l-1.65 1.65q.575.375 1.038.862T17.2 8H20v2h-2.1q.075.5.088 1T18 12h2v2h-2q0 .5-.013 1t-.087 1H20v2h-2.8q-.8 1.4-2.187 2.2T12 21m-2-5h4v-2h-4zm0-4h4v-2h-4z"},null,-1)]))}const P5=Ue({name:"material-symbols-bug-report",render:D5}),L5={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function M5(t,e){return O(),re("svg",L5,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M7 21q-.825 0-1.412-.587T5 19V6q-.425 0-.712-.288T4 5t.288-.712T5 4h4q0-.425.288-.712T10 3h4q.425 0 .713.288T15 4h4q.425 0 .713.288T20 5t-.288.713T19 6v13q0 .825-.587 1.413T17 21zm5-7.1l1.9 1.9q.275.275.7.275t.7-.275t.275-.7t-.275-.7l-1.9-1.9l1.9-1.9q.275-.275.275-.7t-.275-.7t-.7-.275t-.7.275L12 11.1l-1.9-1.9q-.275-.275-.7-.275t-.7.275t-.275.7t.275.7l1.9 1.9l-1.9 1.9q-.275.275-.275.7t.275.7t.7.275t.7-.275z"},null,-1)]))}const N5=Ue({name:"material-symbols-delete-forever-rounded",render:M5}),j5={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function F5(t,e){return O(),re("svg",j5,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M11.25 13.5q.95 0 1.6-.65t.65-1.6t-.65-1.6t-1.6-.65t-1.6.65t-.65 1.6t.65 1.6t1.6.65m4.825 4l-2.625-2.625q-.5.325-1.062.475t-1.138.15q-1.775 0-3.012-1.237T7 11.25t1.238-3.012T11.25 7t3.013 1.238T15.5 11.25q0 .575-.162 1.138t-.488 1.062l2.65 2.65zM5 21q-.825 0-1.412-.587T3 19v-4h2v4h4v2zm10 0v-2h4v-4h2v4q0 .825-.587 1.413T19 21zM3 9V5q0-.825.588-1.412T5 3h4v2H5v4zm16 0V5h-4V3h4q.825 0 1.413.588T21 5v4z"},null,-1)]))}const U5=Ue({name:"material-symbols-frame-inspect",render:F5}),B5={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function z5(t,e){return O(),re("svg",B5,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M12 20q-3.35 0-5.675-2.325T4 12t2.325-5.675T12 4q1.725 0 3.3.712T18 6.75V5q0-.425.288-.712T19 4t.713.288T20 5v5q0 .425-.288.713T19 11h-5q-.425 0-.712-.288T13 10t.288-.712T14 9h3.2q-.8-1.4-2.187-2.2T12 6Q9.5 6 7.75 7.75T6 12t1.75 4.25T12 18q1.7 0 3.113-.862t2.187-2.313q.2-.35.563-.487t.737-.013q.4.125.575.525t-.025.75q-1.025 2-2.925 3.2T12 20"},null,-1)]))}const V5=Ue({name:"material-symbols-refresh-rounded",render:z5}),H5={class:"grid grow place-items-center"},q5={class:"flex flex-col items-center p-8"},K5={class:"mt-0 mb-0 text-center text-4xl font-medium text-red-600"},W5={class:"mt-4 grid grid-cols-1 gap-2 sm:grid-cols-2 [&_button]:justify-start sm:[&_button]:size-32 sm:[&_button]:flex-col sm:[&_button]:justify-center [&_svg]:size-6 sm:[&_svg]:size-8"},G5=pe({__name:"StartupCrash",setup(t){async function e(){await ft.confirm(Ne("startupCrash.purgeConfirmTitle","Delete everything?"),Ne("startupCrash.purgeConfirmMessage",`If the problem persists, one drastic solution may be to wipe the storage in this device to start from scratch. However, keep in mind that **all the data that you haven't synchronized will be deleted forever**.

Do you still want to proceed?`),{acceptVariant:"danger",acceptText:Ne("startupCrash.purgeConfirmAccept","Purge device")})&&(await tf.purge(),await mt.reload())}return(n,r)=>{const s=Md("i-majesticons-exclamation");return O(),re("div",H5,[U("div",q5,[K(s,{class:"size-20 text-red-600"}),U("h1",K5,ue(n.$td("startupCrash.title","Oops, something went wrong!")),1),K(Ut,{text:n.$td("startupCrash.message","There was a problem starting the application, but here's some things you can do:"),class:"mt-4 text-center"},null,8,["text"]),U("div",W5,[K(at,{variant:"danger",onClick:r[0]||(r[0]=i=>n.$app.reload())},{default:Y(()=>[K($(V5)),je(" "+ue(n.$td("startupCrash.reload","Try again")),1)]),_:1}),K(at,{variant:"danger",onClick:r[1]||(r[1]=i=>n.$errors.inspect(n.$errors.startupErrors))},{default:Y(()=>[K($(P5)),je(" "+ue(n.$td("startupCrash.inspect","View error details")),1)]),_:1}),K(at,{variant:"danger",onClick:r[2]||(r[2]=i=>e())},{default:Y(()=>[K($(N5)),je(" "+ue(n.$td("startupCrash.purge","Purge device")),1)]),_:1}),K(at,{variant:"danger",onClick:r[3]||(r[3]=i=>n.$errors.debug=!n.$errors.debug)},{default:Y(()=>[K($(U5)),je(" "+ue(n.$td("startupCrash.debug","Toggle debugging")),1)]),_:1})])])])}}}),s$=pe({__name:"HeadlessToastAction",props:{action:{}},setup(t){return(e,n)=>(O(),ae(Ss(e.action.dismiss?$(aU):"button"),{type:"button",onClick:e.action.click},{default:Y(()=>[je(ue(e.action.label),1)]),_:1},8,["onClick"]))}}),J5={key:0},Y5=pe({__name:"HeadlessToast",props:{message:{},actions:{},variant:{}},setup(t){return(e,n)=>(O(),ae($(lU),null,{default:Y(()=>[$e(e.$slots,"default",{},()=>[e.message?(O(),re("span",J5,ue(e.message),1)):Te("",!0),(O(!0),re(Ge,null,Lt(e.actions,(r,s)=>(O(),ae(s$,{key:s,action:r},null,8,["action"]))),128))])]),_:3}))}}),X5=pe({__name:"Toast",props:{message:{},actions:{},variant:{default:"secondary"},class:{}},setup(t,{expose:e}){const n=ne(()=>MA({baseClasses:t.class,variant:t.variant},{baseClasses:"flex items-center gap-2 rounded-md p-2 ring-1 shadow-lg border-gray-200",variants:{variant:{secondary:"bg-gray-900 text-white ring-black",danger:"bg-red-50 text-red-900 ring-red-100"}},defaultVariants:{variant:"secondary"}}));return e(),(r,s)=>(O(),ae(Y5,{class:Je(n.value)},{default:Y(()=>[r.message?(O(),ae(Ut,{key:0,text:r.message,inline:""},null,8,["text"])):Te("",!0),(O(!0),re(Ge,null,Lt(r.actions,(i,o)=>(O(),ae(at,{key:o,action:i,variant:r.variant,as:s$},null,8,["action","variant"]))),128))]),_:1},8,["class"]))}}),Q5={$ui:ft},Z5={async install(t,e){const n={"alert-modal":L4,"confirm-modal":z4,"error-report-modal":g5,"loading-modal":E5,"prompt-modal":T5,"startup-crash":G5,toast:X5,...e.components};for(const[r,s]of Object.entries(n))ft.registerComponent(r,s);await Ro(t,Q5)}};async function eB(t,e={}){var n;const r=[A4,BU,S4,l4,qU,Z5,...e.plugins??[]];mt.instance=t,await bU(r,t,e),await((n=e.install)==null?void 0:n.call(e,t)),await qe.emit("application-ready")}async function tB(t,e={}){var n;const r=Uu(t);Mi()&&(window.$aerogel=r),await eB(r,e),r.mount("#app"),(n=r._container)==null||n.classList.remove("loading"),await qe.emit("application-mounted")}const nB={key:0},rB=pe({__name:"AppModals",setup(t){const e=ne(()=>ft.modals[0]??null);return(n,r)=>e.value?(O(),re("aside",nB,[K(XA,{"child-index":1,modal:e.value},null,8,["modal"])])):Te("",!0)}}),sB=pe({__name:"AppToasts",setup(t){return(e,n)=>(O(),ae($(XF),null,{default:Y(()=>[(O(!0),re(Ge,null,Lt(e.$ui.toasts,r=>(O(),ae(Ss(r.component),Ve({id:r.id,key:r.id,ref_for:!0},r.properties),null,16,["id"]))),128)),K($(uU),{class:"fixed right-0 bottom-0 z-50 flex flex-col items-end space-y-4 px-4 py-6 sm:p-6"})]),_:1}))}}),iB=pe({__name:"AppOverlays",setup(t){return(e,n)=>(O(),re(Ge,null,[K(rB),K(sB)],64))}}),oB={class:"flex min-h-full flex-col text-base leading-tight font-normal text-gray-900 antialiased"},aB=pe({__name:"AppLayout",setup(t){return(e,n)=>(O(),re("div",oB,[e.$errors.hasStartupErrors?$e(e.$slots,"startup-crash",{key:0},()=>[(O(),ae(Ss(e.$ui.requireComponent("startup-crash"))))]):$e(e.$slots,"default",{key:1}),K(iB)]))}}),lB=["id","name","value","required","aria-invalid","aria-describedby"],cB=pe({__name:"HeadlessInputTextArea",setup(t){const e=si("$textAreaRef"),n=_n("input","<HeadlessInputTextArea> must be a child of a <HeadlessInput>"),r=ne(()=>n.name??void 0),s=ne(()=>n.value);function i(){e.value&&n.update(e.value.value)}return NA(n,()=>{var o;return(o=e.value)==null?void 0:o.focus()}),(o,a)=>(O(),re("textarea",{id:$(n).id,ref:"$textAreaRef",name:r.value,value:s.value,required:$(n).required??void 0,"aria-invalid":$(n).errors?"true":"false","aria-describedby":$(n).errors?`${$(n).id}-error`:$(n).description?`${$(n).id}-description`:void 0,onInput:i},null,40,lB))}}),uB={class:"group"},dB={class:"-ml-2 flex w-[max-content] items-center rounded-lg py-2 pr-3 pl-1 hover:bg-gray-100 focus-visible:outline focus-visible:outline-gray-700"},fB={class:"pt-2 pl-4"},hB=pe({__name:"AdvancedOptions",setup(t){return(e,n)=>(O(),re("details",uB,[U("summary",dB,[K($(e$),{class:"size-6 transition-transform group-open:rotate-90"}),U("span",null,ue(e.$td("ui.advancedOptions","Advanced options")),1)]),U("div",fB,[$e(e.$slots,"default")])]))}}),pB={class:"flex h-6 items-center"},Yh=pe({inheritAttrs:!1,__name:"Checkbox",props:{name:{},label:{},description:{},modelValue:{},inputClass:{},labelClass:{}},emits:["update:modelValue"],setup(t){const e=oi(t,["inputClass","labelClass"]),n=si("$inputRef"),[r,s]=Ay(),i=ne(()=>Mt("relative flex items-start",s.value)),o=ne(()=>{var l,c;return Mt("size-4 rounded text-primary-600 not-checked:hover:bg-gray-200 checked:hover:text-primary-500 checked:border-0",{"border-gray-300 focus:ring-primary-600":!((l=n.value)!=null&&l.errors),"border-red-400 border-2 focus:ring-red-600":(c=n.value)==null?void 0:c.errors},t.inputClass)}),a=ne(()=>Mt("ml-2 text-sm leading-6",t.labelClass));return(l,c)=>(O(),ae(Iy,Ve({ref:"$inputRef",class:i.value},e,{"onUpdate:modelValue":c[0]||(c[0]=u=>l.$emit("update:modelValue",u))}),{default:Y(()=>[U("div",pB,[K(n$,Ve($(r),{type:"checkbox",class:o.value}),null,16,["class"])]),l.$slots.default?(O(),re("div",{key:0,class:Je(a.value)},[K(Yu,{class:"text-gray-900"},{default:Y(()=>[$e(l.$slots,"default")]),_:3}),K(Xu,{class:"text-red-600"})],2)):l.label?(O(),re("div",{key:1,class:Je(a.value)},[K(Yu,{class:"text-gray-900"}),K(Xu,{class:"text-red-600"})],2)):Te("",!0)]),_:3},16,["class"]))}}),i$=pe({__name:"DropdownMenuOption",props:{class:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(t){const e=oi(t,["class"]),n=ne(()=>Mt("flex w-full items-center gap-2 rounded-lg px-2 py-2 text-sm text-gray-900 data-[highlighted]:bg-gray-100",t.class));return(r,s)=>(O(),ae($(vF),Ve({class:n.value},e,{onSelect:s[0]||(s[0]=i=>r.$emit("select"))}),{default:Y(()=>[$e(r.$slots,"default")]),_:3},16,["class"]))}}),o$=pe({__name:"DropdownMenuOptions",setup(t){const e=_n("dropdown-menu","<DropdownMenuOptions> must be a child of a <DropdownMenu>");return(n,r)=>(O(),ae($(yF),{class:"gap-y-0.5 rounded-lg bg-white p-1.5 shadow-lg ring-1 ring-black/5",align:$(e).align,side:$(e).side},{default:Y(()=>[$e(n.$slots,"default",{},()=>[(O(!0),re(Ge,null,Lt($(e).options,(s,i)=>(O(),ae(i$,Ve({key:i,as:s.route||s.href?$y:void 0,class:s.class,ref_for:!0},s.route||s.href?{href:s.href,route:s.route,routeParams:s.routeParams,routeQuery:s.routeQuery}:{},{onSelect:o=>{var a;return(a=s.click)==null?void 0:a.call(s)}}),{default:Y(()=>[je(ue(s.label),1)]),_:2},1040,["as","class","onSelect"]))),128))])]),_:3},8,["align","side"]))}}),a$=pe({__name:"DropdownMenu",props:{align:{},side:{},options:{}},setup(t,{expose:e}){const n={align:t.align,side:t.side,options:ne(()=>{var r;return(r=t.options)==null?void 0:r.filter(Boolean)})};return pr("dropdown-menu",n),e(n),(r,s)=>(O(),ae($(gF),null,{default:Y(()=>[K($(_F),null,{default:Y(()=>[$e(r.$slots,"default")]),_:3}),K($(bF),null,{default:Y(()=>[$e(r.$slots,"options",{},()=>[K(o$)])]),_:3})]),_:3}))}}),mB=["aria-hidden"],gB=["tabindex","aria-label","type"],yB=pe({__name:"EditableContent",props:{type:{default:"text"},contentClass:{},ariaLabel:{},formAriaHidden:{type:Boolean},tabindex:{},text:{},disabled:{type:Boolean}},emits:["update","save"],setup(t,{emit:e}){const n=e,r=si("$inputRef"),s=xe(null),i=xe(t.text),o=ne(()=>Mt("inline whitespace-pre",t.contentClass)),a=ne(()=>Mt("invisible whitespace-pre",t.contentClass)),l=ne(()=>Mt("absolute inset-0 h-full w-full resize-none border-0 bg-transparent p-0 focus:ring-0",t.contentClass));function c(){s.value=t.text}function u(){s.value&&(t.type!=="number"&&i.value.trim().length===0&&(i.value=s.value,n("update",i.value)),s.value=null,n("save"))}return Dt(()=>i.value=t.text),(d,f)=>(O(),re("div",{class:Je(["relative",{"pointer-events-none!":d.disabled&&!s.value}])},[s.value?(O(),re("span",{key:1,class:Je(a.value)},ue(i.value),3)):(O(),re("div",{key:0,class:Je(o.value)},[$e(d.$slots,"default")],2)),d.type==="number"?(O(),re("span",{key:2,class:Je(["inline-block transition-[width]",s.value?"w-5":"w-0"])},null,2)):Te("",!0),U("form",{class:"w-full","aria-hidden":d.formAriaHidden,onSubmit:f[4]||(f[4]=Xn(h=>{var m;return(m=r.value)==null?void 0:m.blur()},["prevent"]))},[zs(U("input",{ref:"$inputRef","onUpdate:modelValue":f[0]||(f[0]=h=>i.value=h),tabindex:d.tabindex??void 0,"aria-label":d.ariaLabel??void 0,type:d.type,class:Je([l.value,{"opacity-0":!s.value,"appearance-textfield":!s.value&&d.type==="number"}]),onKeyup:f[1]||(f[1]=h=>d.$emit("update",i.value)),onFocus:f[2]||(f[2]=h=>c()),onBlur:f[3]||(f[3]=h=>u())},null,42,gB),[[us,i.value]])],40,mB)],2))}}),vB={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function bB(t,e){return O(),re("svg",vB,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M449.07 399.08L278.64 82.58c-12.08-22.44-44.26-22.44-56.35 0L51.87 399.08A32 32 0 0 0 80 446.25h340.89a32 32 0 0 0 28.18-47.17m-198.6-1.83a20 20 0 1 1 20-20a20 20 0 0 1-20 20m21.72-201.15l-5.74 122a16 16 0 0 1-32 0l-5.74-121.95a21.73 21.73 0 0 1 21.5-22.69h.21a21.74 21.74 0 0 1 21.73 22.7Z"},null,-1)]))}const _B=Ue({name:"ion-warning",render:bB}),wB={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function xB(t,e){return O(),re("svg",wB,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M.2 10a11 11 0 0 1 19.6 0A11 11 0 0 1 .2 10m9.8 4a4 4 0 1 0 0-8a4 4 0 0 0 0 8m0-2a2 2 0 1 1 0-4a2 2 0 0 1 0 4"},null,-1)]))}const EB=Ue({name:"zondicons-view-show",render:xB}),SB={class:"font-medium"},AB=["datetime"],$B=pe({__name:"ErrorLogsModal",setup(t){return(e,n)=>(O(),ae(ai,{title:e.$td("errors.report","Errors ({count})",{count:e.$errors.logs.length})},{default:Y(()=>[U("ol",null,[(O(!0),re(Ge,null,Lt(e.$errors.logs,(r,s)=>(O(),re("li",{key:s,class:"mb-2 flex max-w-prose min-w-56 justify-between py-2 last:mb-0"},[U("div",null,[U("h3",SB,ue(r.report.title),1),U("time",{datetime:r.date.toISOString(),class:"text-xs text-gray-700"},ue(r.date.toLocaleTimeString()),9,AB),K(Ut,{class:"text-sm text-gray-500",text:r.report.description??$(_4)(r.report)},null,8,["text"])]),K(at,{size:"icon",variant:"ghost","aria-label":e.$td("errors.viewDetails","View details"),title:e.$td("errors.viewDetails","View details"),class:"self-center",onClick:i=>e.$errors.inspect(r.report,e.$errors.logs.map(({report:o})=>o))},{default:Y(()=>[K($(EB),{class:"size-4","aria-hidden":"true"})]),_:2},1032,["aria-label","title","onClick"])]))),128))])]),_:1},8,["title"]))}}),CB=pe({__name:"ErrorLogs",setup(t){return(e,n)=>e.$errors.logs.length>0?(O(),ae(at,{key:0,size:"icon",variant:"ghost",title:e.$td("errors.viewLogs","View error logs"),"aria-label":e.$td("errors.viewLogs","View error logs"),onClick:n[0]||(n[0]=r=>e.$ui.modal($B))},{default:Y(()=>[K($(_B),{class:"size-6 text-red-500"})]),_:1},8,["title","aria-label"])):Te("",!0)}}),wo=pe({__name:"Link",props:{class:{},disabled:{type:Boolean},href:{},route:{},routeParams:{},routeQuery:{},size:{},submit:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){return(e,n)=>(O(),ae(at,Ve({variant:"link"},e.$props),{default:Y(()=>[$e(e.$slots,"default")]),_:3},16))}}),l$=pe({__name:"SettingsModal",setup(t){const e=ne(()=>ml(mt.settings,"priority","desc"));return(n,r)=>(O(),ae(ai,{title:n.$td("settings.title","Settings")},{default:Y(()=>[(O(!0),re(Ge,null,Lt(e.value,(s,i)=>(O(),ae(Ss(s.component),{key:i}))),128))]),_:1},8,["title"]))}}),kB={key:0,class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},IB=pe({inheritAttrs:!1,__name:"TextArea",props:{name:{},label:{},description:{},modelValue:{},inputClass:{},wrapperClass:{}},emits:["update:modelValue"],setup(t){const e=oi(t,["label","inputClass","wrapperClass"]),n=si("$inputRef"),[r,s]=Ay(),i=ne(()=>Mt("relative rounded-md shadow-2xs",{"mt-1":t.label},t.wrapperClass)),o=ne(()=>{var a,l,c;return Mt("block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset sm:text-sm sm:leading-6",{"focus:ring-primary-600":!((a=n.value)!=null&&a.errors),"text-gray-900 shadow-2xs ring-gray-900/10 placeholder:text-gray-400":!((l=n.value)!=null&&l.errors),"pr-10 text-red-900 ring-red-900/10 placeholder:text-red-300 focus:ring-red-500":(c=n.value)==null?void 0:c.errors},t.inputClass)});return(a,l)=>(O(),ae(Iy,Ve({ref:"$inputRef",label:a.label,class:$(s)},e,{"onUpdate:modelValue":l[0]||(l[0]=c=>a.$emit("update:modelValue",c))}),{default:Y(()=>{var c;return[K(Yu,{class:"block text-sm leading-6 font-medium text-gray-900"}),U("div",{class:Je(i.value)},[K(cB,Ve($(r),{class:o.value}),null,16,["class"]),(c=n.value)!=null&&c.errors?(O(),re("div",kB,[K($(ky),{class:"size-5 text-red-500"})])):Te("",!0)],2),K(r$,{class:"mt-2 text-sm text-gray-600"}),K(Xu,{class:"mt-2 text-sm text-red-600"})]}),_:1},16,["label","class"]))}});class Oy{constructor(){vt(this,"status"),vt(this,"_listeners"),vt(this,"_progress"),vt(this,"_cancelled"),vt(this,"_started"),vt(this,"_completed"),this.status=this.getInitialStatus(),this._listeners=new J0,this._started=new fs,this._completed=new fs}async start(){this.beforeStart(),this._started.resolve();try{await this.updateProgress(),await this.run(),await this.updateProgress(),this._completed.resolve()}catch(e){if(e instanceof Lw)return;throw Be(_k(e),n=>{this._completed.reject(n)})}}async cancel(){this._cancelled=new fs,await this._cancelled}serialize(){return this.serializeStatus(this.status)}get listeners(){return this._listeners}get progress(){return this._progress??0}get cancelled(){var e;return!!((e=this._cancelled)!=null&&e.isResolved())}get started(){return this._started}get completed(){return this._completed}getInitialStatus(){return{completed:!1}}beforeStart(){if(this._started.isResolved()){if(this._cancelled){delete this._progress,delete this._cancelled;return}throw new Error("Job already started!")}}assertNotCancelled(){if(this._cancelled)throw this._cancelled.resolve(),new Lw}calculateCurrentProgress(e){return e??(e=this.status),e.completed?1:e.children?s1(e.children.reduce((n,r)=>n+this.calculateCurrentProgress(r),0)/e.children.length,2):0}async updateProgress(e){await(e==null?void 0:e(this.status));const n=this.calculateCurrentProgress();n!==this._progress&&(this._progress=n,await this._listeners.emit("onUpdated",n))}serializeStatus(e){return{...e}}}async function Xh(t){await t.start()}/*!
  * shared v11.1.10
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function RB(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const Qu=typeof window<"u",qi=(t,e=!1)=>e?Symbol.for(t):Symbol(t),TB=(t,e,n)=>OB({l:t,k:e,s:n}),OB=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Qt=t=>typeof t=="number"&&isFinite(t),DB=t=>Py(t)==="[object Date]",Zu=t=>Py(t)==="[object RegExp]",rf=t=>lt(t)&&Object.keys(t).length===0,pn=Object.assign,PB=Object.create,St=(t=null)=>PB(t);let Mw;const Dy=()=>Mw||(Mw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:St());function Nw(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function jw(t){return t.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function LB(t){return t=t.replace(/(\w+)\s*=\s*"([^"]*)"/g,(r,s,i)=>`${s}="${jw(i)}"`),t=t.replace(/(\w+)\s*=\s*'([^']*)'/g,(r,s,i)=>`${s}='${jw(i)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(t)&&(t=t.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(r=>{t=t.replace(r,"$1javascript&#58;")}),t}const MB=Object.prototype.hasOwnProperty;function Wr(t,e){return MB.call(t,e)}const Jt=Array.isArray,Bt=t=>typeof t=="function",De=t=>typeof t=="string",zt=t=>typeof t=="boolean",gt=t=>t!==null&&typeof t=="object",NB=t=>gt(t)&&Bt(t.then)&&Bt(t.catch),c$=Object.prototype.toString,Py=t=>c$.call(t),lt=t=>Py(t)==="[object Object]",jB=t=>t==null?"":Jt(t)||lt(t)&&t.toString===c$?JSON.stringify(t,null,2):String(t);function Ly(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}const Bc=t=>!gt(t)||Jt(t);function hu(t,e){if(Bc(t)||Bc(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(i=>{i!=="__proto__"&&(gt(r[i])&&!gt(s[i])&&(s[i]=Array.isArray(r[i])?[]:St()),Bc(s[i])||Bc(r[i])?s[i]=r[i]:n.push({src:r[i],des:s[i]}))})}}/*!
  * message-compiler v11.1.10
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function FB(t,e,n){return{line:t,column:e,offset:n}}function km(t,e,n){return{start:t,end:e}}const _t={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},UB=17;function sf(t,e,n={}){const{domain:r,messages:s,args:i}=n,o=t,a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=r,a}function BB(t){throw t}const Ps=" ",zB="\r",Un=`
`,VB="\u2028",HB="\u2029";function qB(t){const e=t;let n=0,r=1,s=1,i=0;const o=k=>e[k]===zB&&e[k+1]===Un,a=k=>e[k]===Un,l=k=>e[k]===HB,c=k=>e[k]===VB,u=k=>o(k)||a(k)||l(k)||c(k),d=()=>n,f=()=>r,h=()=>s,m=()=>i,y=k=>o(k)||l(k)||c(k)?Un:e[k],S=()=>y(n),x=()=>y(n+i);function _(){return i=0,u(n)&&(r++,s=0),o(n)&&n++,n++,s++,e[n]}function g(){return o(n+i)&&i++,i++,e[n+i]}function p(){n=0,r=1,s=1,i=0}function v(k=0){i=k}function E(){const k=n+i;for(;k!==n;)_();i=0}return{index:d,line:f,column:h,peekOffset:m,charAt:y,currentChar:S,currentPeek:x,next:_,peek:g,reset:p,resetPeek:v,skipToPeek:E}}const di=void 0,KB=".",Fw="'",WB="tokenizer";function GB(t,e={}){const n=e.location!==!1,r=qB(t),s=()=>r.index(),i=()=>FB(r.line(),r.column(),r.index()),o=i(),a=s(),l={currentType:13,offset:a,startLoc:o,endLoc:o,lastType:13,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=e;function d(M,H,oe,...ye){const we=c();if(H.column+=oe,H.offset+=oe,u){const Se=n?km(we.startLoc,H):null,X=sf(M,Se,{domain:WB,args:ye});u(X)}}function f(M,H,oe){M.endLoc=i(),M.currentType=H;const ye={type:H};return n&&(ye.loc=km(M.startLoc,M.endLoc)),oe!=null&&(ye.value=oe),ye}const h=M=>f(M,13);function m(M,H){return M.currentChar()===H?(M.next(),H):(d(_t.EXPECTED_TOKEN,i(),0,H),"")}function y(M){let H="";for(;M.currentPeek()===Ps||M.currentPeek()===Un;)H+=M.currentPeek(),M.peek();return H}function S(M){const H=y(M);return M.skipToPeek(),H}function x(M){if(M===di)return!1;const H=M.charCodeAt(0);return H>=97&&H<=122||H>=65&&H<=90||H===95}function _(M){if(M===di)return!1;const H=M.charCodeAt(0);return H>=48&&H<=57}function g(M,H){const{currentType:oe}=H;if(oe!==2)return!1;y(M);const ye=x(M.currentPeek());return M.resetPeek(),ye}function p(M,H){const{currentType:oe}=H;if(oe!==2)return!1;y(M);const ye=M.currentPeek()==="-"?M.peek():M.currentPeek(),we=_(ye);return M.resetPeek(),we}function v(M,H){const{currentType:oe}=H;if(oe!==2)return!1;y(M);const ye=M.currentPeek()===Fw;return M.resetPeek(),ye}function E(M,H){const{currentType:oe}=H;if(oe!==7)return!1;y(M);const ye=M.currentPeek()===".";return M.resetPeek(),ye}function k(M,H){const{currentType:oe}=H;if(oe!==8)return!1;y(M);const ye=x(M.currentPeek());return M.resetPeek(),ye}function A(M,H){const{currentType:oe}=H;if(!(oe===7||oe===11))return!1;y(M);const ye=M.currentPeek()===":";return M.resetPeek(),ye}function C(M,H){const{currentType:oe}=H;if(oe!==9)return!1;const ye=()=>{const Se=M.currentPeek();return Se==="{"?x(M.peek()):Se==="@"||Se==="|"||Se===":"||Se==="."||Se===Ps||!Se?!1:Se===Un?(M.peek(),ye()):N(M,!1)},we=ye();return M.resetPeek(),we}function I(M){y(M);const H=M.currentPeek()==="|";return M.resetPeek(),H}function N(M,H=!0){const oe=(we=!1,Se="")=>{const X=M.currentPeek();return X==="{"||X==="@"||!X?we:X==="|"?!(Se===Ps||Se===Un):X===Ps?(M.peek(),oe(!0,Ps)):X===Un?(M.peek(),oe(!0,Un)):!0},ye=oe();return H&&M.resetPeek(),ye}function j(M,H){const oe=M.currentChar();return oe===di?di:H(oe)?(M.next(),oe):null}function V(M){const H=M.charCodeAt(0);return H>=97&&H<=122||H>=65&&H<=90||H>=48&&H<=57||H===95||H===36}function L(M){return j(M,V)}function Z(M){const H=M.charCodeAt(0);return H>=97&&H<=122||H>=65&&H<=90||H>=48&&H<=57||H===95||H===36||H===45}function T(M){return j(M,Z)}function q(M){const H=M.charCodeAt(0);return H>=48&&H<=57}function z(M){return j(M,q)}function se(M){const H=M.charCodeAt(0);return H>=48&&H<=57||H>=65&&H<=70||H>=97&&H<=102}function W(M){return j(M,se)}function he(M){let H="",oe="";for(;H=z(M);)oe+=H;return oe}function me(M){let H="";for(;;){const oe=M.currentChar();if(oe==="{"||oe==="}"||oe==="@"||oe==="|"||!oe)break;if(oe===Ps||oe===Un)if(N(M))H+=oe,M.next();else{if(I(M))break;H+=oe,M.next()}else H+=oe,M.next()}return H}function ve(M){S(M);let H="",oe="";for(;H=T(M);)oe+=H;return M.currentChar()===di&&d(_t.UNTERMINATED_CLOSING_BRACE,i(),0),oe}function Ce(M){S(M);let H="";return M.currentChar()==="-"?(M.next(),H+=`-${he(M)}`):H+=he(M),M.currentChar()===di&&d(_t.UNTERMINATED_CLOSING_BRACE,i(),0),H}function J(M){return M!==Fw&&M!==Un}function G(M){S(M),m(M,"'");let H="",oe="";for(;H=j(M,J);)H==="\\"?oe+=P(M):oe+=H;const ye=M.currentChar();return ye===Un||ye===di?(d(_t.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),ye===Un&&(M.next(),m(M,"'")),oe):(m(M,"'"),oe)}function P(M){const H=M.currentChar();switch(H){case"\\":case"'":return M.next(),`\\${H}`;case"u":return ee(M,H,4);case"U":return ee(M,H,6);default:return d(_t.UNKNOWN_ESCAPE_SEQUENCE,i(),0,H),""}}function ee(M,H,oe){m(M,H);let ye="";for(let we=0;we<oe;we++){const Se=W(M);if(!Se){d(_t.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${H}${ye}${M.currentChar()}`);break}ye+=Se}return`\\${H}${ye}`}function ce(M){return M!=="{"&&M!=="}"&&M!==Ps&&M!==Un}function ie(M){S(M);let H="",oe="";for(;H=j(M,ce);)oe+=H;return oe}function Ee(M){let H="",oe="";for(;H=L(M);)oe+=H;return oe}function ke(M){const H=oe=>{const ye=M.currentChar();return ye==="{"||ye==="@"||ye==="|"||ye==="("||ye===")"||!ye||ye===Ps?oe:(oe+=ye,M.next(),H(oe))};return H("")}function D(M){S(M);const H=m(M,"|");return S(M),H}function F(M,H){let oe=null;switch(M.currentChar()){case"{":return H.braceNest>=1&&d(_t.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),M.next(),oe=f(H,2,"{"),S(M),H.braceNest++,oe;case"}":return H.braceNest>0&&H.currentType===2&&d(_t.EMPTY_PLACEHOLDER,i(),0),M.next(),oe=f(H,3,"}"),H.braceNest--,H.braceNest>0&&S(M),H.inLinked&&H.braceNest===0&&(H.inLinked=!1),oe;case"@":return H.braceNest>0&&d(_t.UNTERMINATED_CLOSING_BRACE,i(),0),oe=le(M,H)||h(H),H.braceNest=0,oe;default:{let we=!0,Se=!0,X=!0;if(I(M))return H.braceNest>0&&d(_t.UNTERMINATED_CLOSING_BRACE,i(),0),oe=f(H,1,D(M)),H.braceNest=0,H.inLinked=!1,oe;if(H.braceNest>0&&(H.currentType===4||H.currentType===5||H.currentType===6))return d(_t.UNTERMINATED_CLOSING_BRACE,i(),0),H.braceNest=0,be(M,H);if(we=g(M,H))return oe=f(H,4,ve(M)),S(M),oe;if(Se=p(M,H))return oe=f(H,5,Ce(M)),S(M),oe;if(X=v(M,H))return oe=f(H,6,G(M)),S(M),oe;if(!we&&!Se&&!X)return oe=f(H,12,ie(M)),d(_t.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,oe.value),S(M),oe;break}}return oe}function le(M,H){const{currentType:oe}=H;let ye=null;const we=M.currentChar();switch((oe===7||oe===8||oe===11||oe===9)&&(we===Un||we===Ps)&&d(_t.INVALID_LINKED_FORMAT,i(),0),we){case"@":return M.next(),ye=f(H,7,"@"),H.inLinked=!0,ye;case".":return S(M),M.next(),f(H,8,".");case":":return S(M),M.next(),f(H,9,":");default:return I(M)?(ye=f(H,1,D(M)),H.braceNest=0,H.inLinked=!1,ye):E(M,H)||A(M,H)?(S(M),le(M,H)):k(M,H)?(S(M),f(H,11,Ee(M))):C(M,H)?(S(M),we==="{"?F(M,H)||ye:f(H,10,ke(M))):(oe===7&&d(_t.INVALID_LINKED_FORMAT,i(),0),H.braceNest=0,H.inLinked=!1,be(M,H))}}function be(M,H){let oe={type:13};if(H.braceNest>0)return F(M,H)||h(H);if(H.inLinked)return le(M,H)||h(H);switch(M.currentChar()){case"{":return F(M,H)||h(H);case"}":return d(_t.UNBALANCED_CLOSING_BRACE,i(),0),M.next(),f(H,3,"}");case"@":return le(M,H)||h(H);default:{if(I(M))return oe=f(H,1,D(M)),H.braceNest=0,H.inLinked=!1,oe;if(N(M))return f(H,0,me(M));break}}return oe}function ge(){const{currentType:M,offset:H,startLoc:oe,endLoc:ye}=l;return l.lastType=M,l.lastOffset=H,l.lastStartLoc=oe,l.lastEndLoc=ye,l.offset=s(),l.startLoc=i(),r.currentChar()===di?f(l,13):be(r,l)}return{nextToken:ge,currentOffset:s,currentPosition:i,context:c}}const JB="parser",YB=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function XB(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):"�"}}}function QB(t={}){const e=t.location!==!1,{onError:n}=t;function r(x,_,g,p,...v){const E=x.currentPosition();if(E.offset+=p,E.column+=p,n){const k=e?km(g,E):null,A=sf(_,k,{domain:JB,args:v});n(A)}}function s(x,_,g){const p={type:x};return e&&(p.start=_,p.end=_,p.loc={start:g,end:g}),p}function i(x,_,g,p){e&&(x.end=_,x.loc&&(x.loc.end=g))}function o(x,_){const g=x.context(),p=s(3,g.offset,g.startLoc);return p.value=_,i(p,x.currentOffset(),x.currentPosition()),p}function a(x,_){const g=x.context(),{lastOffset:p,lastStartLoc:v}=g,E=s(5,p,v);return E.index=parseInt(_,10),x.nextToken(),i(E,x.currentOffset(),x.currentPosition()),E}function l(x,_){const g=x.context(),{lastOffset:p,lastStartLoc:v}=g,E=s(4,p,v);return E.key=_,x.nextToken(),i(E,x.currentOffset(),x.currentPosition()),E}function c(x,_){const g=x.context(),{lastOffset:p,lastStartLoc:v}=g,E=s(9,p,v);return E.value=_.replace(YB,XB),x.nextToken(),i(E,x.currentOffset(),x.currentPosition()),E}function u(x){const _=x.nextToken(),g=x.context(),{lastOffset:p,lastStartLoc:v}=g,E=s(8,p,v);return _.type!==11?(r(x,_t.UNEXPECTED_EMPTY_LINKED_MODIFIER,g.lastStartLoc,0),E.value="",i(E,p,v),{nextConsumeToken:_,node:E}):(_.value==null&&r(x,_t.UNEXPECTED_LEXICAL_ANALYSIS,g.lastStartLoc,0,rs(_)),E.value=_.value||"",i(E,x.currentOffset(),x.currentPosition()),{node:E})}function d(x,_){const g=x.context(),p=s(7,g.offset,g.startLoc);return p.value=_,i(p,x.currentOffset(),x.currentPosition()),p}function f(x){const _=x.context(),g=s(6,_.offset,_.startLoc);let p=x.nextToken();if(p.type===8){const v=u(x);g.modifier=v.node,p=v.nextConsumeToken||x.nextToken()}switch(p.type!==9&&r(x,_t.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,rs(p)),p=x.nextToken(),p.type===2&&(p=x.nextToken()),p.type){case 10:p.value==null&&r(x,_t.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,rs(p)),g.key=d(x,p.value||"");break;case 4:p.value==null&&r(x,_t.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,rs(p)),g.key=l(x,p.value||"");break;case 5:p.value==null&&r(x,_t.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,rs(p)),g.key=a(x,p.value||"");break;case 6:p.value==null&&r(x,_t.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,rs(p)),g.key=c(x,p.value||"");break;default:{r(x,_t.UNEXPECTED_EMPTY_LINKED_KEY,_.lastStartLoc,0);const v=x.context(),E=s(7,v.offset,v.startLoc);return E.value="",i(E,v.offset,v.startLoc),g.key=E,i(g,v.offset,v.startLoc),{nextConsumeToken:p,node:g}}}return i(g,x.currentOffset(),x.currentPosition()),{node:g}}function h(x){const _=x.context(),g=_.currentType===1?x.currentOffset():_.offset,p=_.currentType===1?_.endLoc:_.startLoc,v=s(2,g,p);v.items=[];let E=null;do{const C=E||x.nextToken();switch(E=null,C.type){case 0:C.value==null&&r(x,_t.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,rs(C)),v.items.push(o(x,C.value||""));break;case 5:C.value==null&&r(x,_t.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,rs(C)),v.items.push(a(x,C.value||""));break;case 4:C.value==null&&r(x,_t.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,rs(C)),v.items.push(l(x,C.value||""));break;case 6:C.value==null&&r(x,_t.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,rs(C)),v.items.push(c(x,C.value||""));break;case 7:{const I=f(x);v.items.push(I.node),E=I.nextConsumeToken||null;break}}}while(_.currentType!==13&&_.currentType!==1);const k=_.currentType===1?_.lastOffset:x.currentOffset(),A=_.currentType===1?_.lastEndLoc:x.currentPosition();return i(v,k,A),v}function m(x,_,g,p){const v=x.context();let E=p.items.length===0;const k=s(1,_,g);k.cases=[],k.cases.push(p);do{const A=h(x);E||(E=A.items.length===0),k.cases.push(A)}while(v.currentType!==13);return E&&r(x,_t.MUST_HAVE_MESSAGES_IN_PLURAL,g,0),i(k,x.currentOffset(),x.currentPosition()),k}function y(x){const _=x.context(),{offset:g,startLoc:p}=_,v=h(x);return _.currentType===13?v:m(x,g,p,v)}function S(x){const _=GB(x,pn({},t)),g=_.context(),p=s(0,g.offset,g.startLoc);return e&&p.loc&&(p.loc.source=x),p.body=y(_),t.onCacheKey&&(p.cacheKey=t.onCacheKey(x)),g.currentType!==13&&r(_,_t.UNEXPECTED_LEXICAL_ANALYSIS,g.lastStartLoc,0,x[g.offset]||""),i(p,_.currentOffset(),_.currentPosition()),p}return{parse:S}}function rs(t){if(t.type===13)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function ZB(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:i=>(n.helpers.add(i),i)}}function Uw(t,e){for(let n=0;n<t.length;n++)My(t[n],e)}function My(t,e){switch(t.type){case 1:Uw(t.cases,e),e.helper("plural");break;case 2:Uw(t.items,e);break;case 6:{My(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function e8(t,e={}){const n=ZB(t);n.helper("normalize"),t.body&&My(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function t8(t){const e=t.body;return e.type===2?Bw(e):e.cases.forEach(n=>Bw(n)),t}function Bw(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=Ly(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}function Go(t){switch(t.t=t.type,t.type){case 0:{const e=t;Go(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)Go(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)Go(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;Go(e.key),e.k=e.key,delete e.key,e.modifier&&(Go(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}}delete t.type}function n8(t,e){const{filename:n,breakLineCode:r,needIndent:s}=e,i=e.location!==!1,o={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:s,indentLevel:0};i&&t.loc&&(o.source=t.loc.source);const a=()=>o;function l(y,S){o.code+=y}function c(y,S=!0){const x=S?r:"";l(s?x+"  ".repeat(y):x)}function u(y=!0){const S=++o.indentLevel;y&&c(S)}function d(y=!0){const S=--o.indentLevel;y&&c(S)}function f(){c(o.indentLevel)}return{context:a,push:l,indent:u,deindent:d,newline:f,helper:y=>`_${y}`,needIndent:()=>o.needIndent}}function r8(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),Aa(t,e.key),e.modifier?(t.push(", "),Aa(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function s8(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const s=e.items.length;for(let i=0;i<s&&(Aa(t,e.items[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}function i8(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const s=e.cases.length;for(let i=0;i<s&&(Aa(t,e.cases[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}}function o8(t,e){e.body?Aa(t,e.body):t.push("null")}function Aa(t,e){const{helper:n}=t;switch(e.type){case 0:o8(t,e);break;case 1:i8(t,e);break;case 2:s8(t,e);break;case 6:r8(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const a8=(t,e={})=>{const n=De(e.mode)?e.mode:"normal",r=De(e.filename)?e.filename:"message.intl";e.sourceMap;const s=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,i=e.needIndent?e.needIndent:n!=="arrow",o=t.helpers||[],a=n8(t,{filename:r,breakLineCode:s,needIndent:i});a.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),a.indent(i),o.length>0&&(a.push(`const { ${Ly(o.map(u=>`${u}: _${u}`),", ")} } = ctx`),a.newline()),a.push("return "),Aa(a,t),a.deindent(i),a.push("}"),delete t.helpers;const{code:l,map:c}=a.context();return{ast:t,code:l,map:c?c.toJSON():void 0}};function l8(t,e={}){const n=pn({},e),r=!!n.jit,s=!!n.minify,i=n.optimize==null?!0:n.optimize,a=QB(n).parse(t);return r?(i&&t8(a),s&&Go(a),{ast:a,code:""}):(e8(a,n),a8(a,n))}/*!
  * core-base v11.1.10
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function c8(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Dy().__INTLIFY_PROD_DEVTOOLS__=!1)}function gs(t){return gt(t)&&Ny(t)===0&&(Wr(t,"b")||Wr(t,"body"))}const u$=["b","body"];function u8(t){return Ki(t,u$)}const d$=["c","cases"];function d8(t){return Ki(t,d$,[])}const f$=["s","static"];function f8(t){return Ki(t,f$)}const h$=["i","items"];function h8(t){return Ki(t,h$,[])}const p$=["t","type"];function Ny(t){return Ki(t,p$)}const m$=["v","value"];function zc(t,e){const n=Ki(t,m$);if(n!=null)return n;throw Hl(e)}const g$=["m","modifier"];function p8(t){return Ki(t,g$)}const y$=["k","key"];function m8(t){const e=Ki(t,y$);if(e)return e;throw Hl(6)}function Ki(t,e,n){for(let r=0;r<e.length;r++){const s=e[r];if(Wr(t,s)&&t[s]!=null)return t[s]}return n}const v$=[...u$,...d$,...f$,...h$,...y$,...g$,...m$,...p$];function Hl(t){return new Error(`unhandled node type: ${t}`)}function Qh(t){return n=>g8(n,t)}function g8(t,e){const n=u8(e);if(n==null)throw Hl(0);if(Ny(n)===1){const i=d8(n);return t.plural(i.reduce((o,a)=>[...o,zw(t,a)],[]))}else return zw(t,n)}function zw(t,e){const n=f8(e);if(n!=null)return t.type==="text"?n:t.normalize([n]);{const r=h8(e).reduce((s,i)=>[...s,Im(t,i)],[]);return t.normalize(r)}}function Im(t,e){const n=Ny(e);switch(n){case 3:return zc(e,n);case 9:return zc(e,n);case 4:{const r=e;if(Wr(r,"k")&&r.k)return t.interpolate(t.named(r.k));if(Wr(r,"key")&&r.key)return t.interpolate(t.named(r.key));throw Hl(n)}case 5:{const r=e;if(Wr(r,"i")&&Qt(r.i))return t.interpolate(t.list(r.i));if(Wr(r,"index")&&Qt(r.index))return t.interpolate(t.list(r.index));throw Hl(n)}case 6:{const r=e,s=p8(r),i=m8(r);return t.linked(Im(t,i),s?Im(t,s):void 0,t.type)}case 7:return zc(e,n);case 8:return zc(e,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const y8=t=>t;let Vc=St();function v8(t,e={}){let n=!1;const r=e.onError||BB;return e.onError=s=>{n=!0,r(s)},{...l8(t,e),detectError:n}}function b8(t,e){if(De(t)){zt(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||y8)(t),s=Vc[r];if(s)return s;const{ast:i,detectError:o}=v8(t,{...e,location:!1,jit:!0}),a=Qh(i);return o?a:Vc[r]=a}else{const n=t.cacheKey;if(n){const r=Vc[n];return r||(Vc[n]=Qh(t))}else return Qh(t)}}let ql=null;function _8(t){ql=t}function w8(t,e,n){ql&&ql.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const x8=E8("function:translate");function E8(t){return e=>ql&&ql.emit(t,e)}const qs={INVALID_ARGUMENT:UB,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},S8=24;function Ks(t){return sf(t,null,void 0)}function jy(t,e){return e.locale!=null?Vw(e.locale):Vw(t.locale)}let Zh;function Vw(t){if(De(t))return t;if(Bt(t)){if(t.resolvedOnce&&Zh!=null)return Zh;if(t.constructor.name==="Function"){const e=t();if(NB(e))throw Ks(qs.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Zh=e}else throw Ks(qs.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Ks(qs.NOT_SUPPORT_LOCALE_TYPE)}function A8(t,e,n){return[...new Set([n,...Jt(e)?e:gt(e)?Object.keys(e):De(e)?[e]:[n]])]}function b$(t,e,n){const r=De(n)?n:ed,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let i=s.__localeChainCache.get(r);if(!i){i=[];let o=[n];for(;Jt(o);)o=Hw(i,o,e);const a=Jt(e)||!lt(e)?e:e.default?e.default:null;o=De(a)?[a]:a,Jt(o)&&Hw(i,o,!1),s.__localeChainCache.set(r,i)}return i}function Hw(t,e,n){let r=!0;for(let s=0;s<e.length&&zt(r);s++){const i=e[s];De(i)&&(r=$8(t,e[s],n))}return r}function $8(t,e,n){let r;const s=e.split("-");do{const i=s.join("-");r=C8(t,i,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function C8(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(Jt(n)||lt(n))&&n[s]&&(r=n[s])}return r}const Wi=[];Wi[0]={w:[0],i:[3,0],"[":[4],o:[7]};Wi[1]={w:[1],".":[2],"[":[4],o:[7]};Wi[2]={w:[2],i:[3,0],0:[3,0]};Wi[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Wi[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Wi[5]={"'":[4,0],o:8,l:[5,0]};Wi[6]={'"':[4,0],o:8,l:[6,0]};const k8=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function I8(t){return k8.test(t)}function R8(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function T8(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function O8(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:I8(e)?R8(e):"*"+e}function D8(t){const e=[];let n=-1,r=0,s=0,i,o,a,l,c,u,d;const f=[];f[0]=()=>{o===void 0?o=a:o+=a},f[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},f[2]=()=>{f[0](),s++},f[3]=()=>{if(s>0)s--,r=4,f[0]();else{if(s=0,o===void 0||(o=O8(o),o===!1))return!1;f[1]()}};function h(){const m=t[n+1];if(r===5&&m==="'"||r===6&&m==='"')return n++,a="\\"+m,f[0](),!0}for(;r!==null;)if(n++,i=t[n],!(i==="\\"&&h())){if(l=T8(i),d=Wi[r],c=d[l]||d.l||8,c===8||(r=c[0],c[1]!==void 0&&(u=f[c[1]],u&&(a=i,u()===!1))))return;if(r===7)return e}}const qw=new Map;function P8(t,e){return gt(t)?t[e]:null}function L8(t,e){if(!gt(t))return null;let n=qw.get(e);if(n||(n=D8(e),n&&qw.set(e,n)),!n)return null;const r=n.length;let s=t,i=0;for(;i<r;){const o=n[i];if(v$.includes(o)&&gs(s))return null;const a=s[o];if(a===void 0||Bt(s))return null;s=a,i++}return s}const M8="11.1.10",of=-1,ed="en-US",Kw="",Ww=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function N8(){return{upper:(t,e)=>e==="text"&&De(t)?t.toUpperCase():e==="vnode"&&gt(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&De(t)?t.toLowerCase():e==="vnode"&&gt(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&De(t)?Ww(t):e==="vnode"&&gt(t)&&"__v_isVNode"in t?Ww(t.children):t}}let _$;function j8(t){_$=t}let w$;function F8(t){w$=t}let x$;function U8(t){x$=t}let E$=null;const B8=t=>{E$=t},z8=()=>E$;let S$=null;const Gw=t=>{S$=t},V8=()=>S$;let Jw=0;function H8(t={}){const e=Bt(t.onWarn)?t.onWarn:RB,n=De(t.version)?t.version:M8,r=De(t.locale)||Bt(t.locale)?t.locale:ed,s=Bt(r)?ed:r,i=Jt(t.fallbackLocale)||lt(t.fallbackLocale)||De(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,o=lt(t.messages)?t.messages:ep(s),a=lt(t.datetimeFormats)?t.datetimeFormats:ep(s),l=lt(t.numberFormats)?t.numberFormats:ep(s),c=pn(St(),t.modifiers,N8()),u=t.pluralRules||St(),d=Bt(t.missing)?t.missing:null,f=zt(t.missingWarn)||Zu(t.missingWarn)?t.missingWarn:!0,h=zt(t.fallbackWarn)||Zu(t.fallbackWarn)?t.fallbackWarn:!0,m=!!t.fallbackFormat,y=!!t.unresolving,S=Bt(t.postTranslation)?t.postTranslation:null,x=lt(t.processor)?t.processor:null,_=zt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,g=!!t.escapeParameter,p=Bt(t.messageCompiler)?t.messageCompiler:_$,v=Bt(t.messageResolver)?t.messageResolver:w$||P8,E=Bt(t.localeFallbacker)?t.localeFallbacker:x$||A8,k=gt(t.fallbackContext)?t.fallbackContext:void 0,A=t,C=gt(A.__datetimeFormatters)?A.__datetimeFormatters:new Map,I=gt(A.__numberFormatters)?A.__numberFormatters:new Map,N=gt(A.__meta)?A.__meta:{};Jw++;const j={version:n,cid:Jw,locale:r,fallbackLocale:i,messages:o,modifiers:c,pluralRules:u,missing:d,missingWarn:f,fallbackWarn:h,fallbackFormat:m,unresolving:y,postTranslation:S,processor:x,warnHtmlMessage:_,escapeParameter:g,messageCompiler:p,messageResolver:v,localeFallbacker:E,fallbackContext:k,onWarn:e,__meta:N};return j.datetimeFormats=a,j.numberFormats=l,j.__datetimeFormatters=C,j.__numberFormatters=I,__INTLIFY_PROD_DEVTOOLS__&&w8(j,n,N),j}const ep=t=>({[t]:St()});function Fy(t,e,n,r,s){const{missing:i,onWarn:o}=t;if(i!==null){const a=i(t,n,e,s);return De(a)?a:e}else return e}function ol(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function q8(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function K8(t,e){const n=e.indexOf(t);if(n===-1)return!1;for(let r=n+1;r<e.length;r++)if(q8(t,e[r]))return!0;return!1}function Yw(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[l,c,u,d]=Rm(...e),f=zt(u.missingWarn)?u.missingWarn:t.missingWarn;zt(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const h=!!u.part,m=jy(t,u),y=o(t,s,m);if(!De(l)||l==="")return new Intl.DateTimeFormat(m,d).format(c);let S={},x,_=null;const g="datetime format";for(let E=0;E<y.length&&(x=y[E],S=n[x]||{},_=S[l],!lt(_));E++)Fy(t,l,x,f,g);if(!lt(_)||!De(x))return r?of:l;let p=`${x}__${l}`;rf(d)||(p=`${p}__${JSON.stringify(d)}`);let v=a.get(p);return v||(v=new Intl.DateTimeFormat(x,pn({},_,d)),a.set(p,v)),h?v.formatToParts(c):v.format(c)}const A$=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Rm(...t){const[e,n,r,s]=t,i=St();let o=St(),a;if(De(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw Ks(qs.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(c);try{a.toISOString()}catch{throw Ks(qs.INVALID_ISO_DATE_ARGUMENT)}}else if(DB(e)){if(isNaN(e.getTime()))throw Ks(qs.INVALID_DATE_ARGUMENT);a=e}else if(Qt(e))a=e;else throw Ks(qs.INVALID_ARGUMENT);return De(n)?i.key=n:lt(n)&&Object.keys(n).forEach(l=>{A$.includes(l)?o[l]=n[l]:i[l]=n[l]}),De(r)?i.locale=r:lt(r)&&(o=r),lt(s)&&(o=s),[i.key||"",a,i,o]}function Xw(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function Qw(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:a}=t,[l,c,u,d]=Tm(...e),f=zt(u.missingWarn)?u.missingWarn:t.missingWarn;zt(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const h=!!u.part,m=jy(t,u),y=o(t,s,m);if(!De(l)||l==="")return new Intl.NumberFormat(m,d).format(c);let S={},x,_=null;const g="number format";for(let E=0;E<y.length&&(x=y[E],S=n[x]||{},_=S[l],!lt(_));E++)Fy(t,l,x,f,g);if(!lt(_)||!De(x))return r?of:l;let p=`${x}__${l}`;rf(d)||(p=`${p}__${JSON.stringify(d)}`);let v=a.get(p);return v||(v=new Intl.NumberFormat(x,pn({},_,d)),a.set(p,v)),h?v.formatToParts(c):v.format(c)}const $$=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Tm(...t){const[e,n,r,s]=t,i=St();let o=St();if(!Qt(e))throw Ks(qs.INVALID_ARGUMENT);const a=e;return De(n)?i.key=n:lt(n)&&Object.keys(n).forEach(l=>{$$.includes(l)?o[l]=n[l]:i[l]=n[l]}),De(r)?i.locale=r:lt(r)&&(o=r),lt(s)&&(o=s),[i.key||"",a,i,o]}function Zw(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}const W8=t=>t,G8=t=>"",J8="text",Y8=t=>t.length===0?"":Ly(t),X8=jB;function e0(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function Q8(t){const e=Qt(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(Qt(t.named.count)||Qt(t.named.n))?Qt(t.named.count)?t.named.count:Qt(t.named.n)?t.named.n:e:e}function Z8(t,e){e.count||(e.count=t),e.n||(e.n=t)}function e6(t={}){const e=t.locale,n=Q8(t),r=gt(t.pluralRules)&&De(e)&&Bt(t.pluralRules[e])?t.pluralRules[e]:e0,s=gt(t.pluralRules)&&De(e)&&Bt(t.pluralRules[e])?e0:void 0,i=x=>x[r(n,x.length,s)],o=t.list||[],a=x=>o[x],l=t.named||St();Qt(t.pluralIndex)&&Z8(n,l);const c=x=>l[x];function u(x,_){const g=Bt(t.messages)?t.messages(x,!!_):gt(t.messages)?t.messages[x]:!1;return g||(t.parent?t.parent.message(x):G8)}const d=x=>t.modifiers?t.modifiers[x]:W8,f=lt(t.processor)&&Bt(t.processor.normalize)?t.processor.normalize:Y8,h=lt(t.processor)&&Bt(t.processor.interpolate)?t.processor.interpolate:X8,m=lt(t.processor)&&De(t.processor.type)?t.processor.type:J8,S={list:a,named:c,plural:i,linked:(x,..._)=>{const[g,p]=_;let v="text",E="";_.length===1?gt(g)?(E=g.modifier||E,v=g.type||v):De(g)&&(E=g||E):_.length===2&&(De(g)&&(E=g||E),De(p)&&(v=p||v));const k=u(x,!0)(S),A=v==="vnode"&&Jt(k)&&E?k[0]:k;return E?d(E)(A,v):A},message:u,type:m,interpolate:h,normalize:f,values:pn(St(),o,l)};return S}const t0=()=>"",Sr=t=>Bt(t);function n0(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:i,fallbackLocale:o,messages:a}=t,[l,c]=Om(...e),u=zt(c.missingWarn)?c.missingWarn:t.missingWarn,d=zt(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn,f=zt(c.escapeParameter)?c.escapeParameter:t.escapeParameter,h=!!c.resolvedMessage,m=De(c.default)||zt(c.default)?zt(c.default)?i?l:()=>l:c.default:n?i?l:()=>l:null,y=n||m!=null&&(De(m)||Bt(m)),S=jy(t,c);f&&t6(c);let[x,_,g]=h?[l,S,a[S]||St()]:C$(t,l,S,o,d,u),p=x,v=l;if(!h&&!(De(p)||gs(p)||Sr(p))&&y&&(p=m,v=p),!h&&(!(De(p)||gs(p)||Sr(p))||!De(_)))return s?of:l;let E=!1;const k=()=>{E=!0},A=Sr(p)?p:k$(t,l,_,p,v,k);if(E)return p;const C=s6(t,_,g,c),I=e6(C),N=n6(t,A,I);let j=r?r(N,l):N;if(f&&De(j)&&(j=LB(j)),__INTLIFY_PROD_DEVTOOLS__){const V={timestamp:Date.now(),key:De(l)?l:Sr(p)?p.key:"",locale:_||(Sr(p)?p.locale:""),format:De(p)?p:Sr(p)?p.source:"",message:j};V.meta=pn({},t.__meta,z8()||{}),x8(V)}return j}function t6(t){Jt(t.list)?t.list=t.list.map(e=>De(e)?Nw(e):e):gt(t.named)&&Object.keys(t.named).forEach(e=>{De(t.named[e])&&(t.named[e]=Nw(t.named[e]))})}function C$(t,e,n,r,s,i){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:c}=t,u=c(t,r,n);let d=St(),f,h=null;const m="translate";for(let y=0;y<u.length&&(f=u[y],d=o[f]||St(),(h=l(d,e))===null&&(h=d[e]),!(De(h)||gs(h)||Sr(h)));y++)if(!K8(f,u)){const S=Fy(t,e,f,i,m);S!==e&&(h=S)}return[h,f,d]}function k$(t,e,n,r,s,i){const{messageCompiler:o,warnHtmlMessage:a}=t;if(Sr(r)){const c=r;return c.locale=c.locale||n,c.key=c.key||e,c}if(o==null){const c=()=>r;return c.locale=n,c.key=e,c}const l=o(r,r6(t,n,s,r,a,i));return l.locale=n,l.key=e,l.source=r,l}function n6(t,e,n){return e(n)}function Om(...t){const[e,n,r]=t,s=St();if(!De(e)&&!Qt(e)&&!Sr(e)&&!gs(e))throw Ks(qs.INVALID_ARGUMENT);const i=Qt(e)?String(e):(Sr(e),e);return Qt(n)?s.plural=n:De(n)?s.default=n:lt(n)&&!rf(n)?s.named=n:Jt(n)&&(s.list=n),Qt(r)?s.plural=r:De(r)?s.default=r:lt(r)&&pn(s,r),[i,s]}function r6(t,e,n,r,s,i){return{locale:e,key:n,warnHtmlMessage:s,onError:o=>{throw i&&i(o),o},onCacheKey:o=>TB(e,n,o)}}function s6(t,e,n,r){const{modifiers:s,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:c,fallbackContext:u}=t,f={locale:e,modifiers:s,pluralRules:i,messages:(h,m)=>{let y=o(n,h);if(y==null&&(u||m)){const[,,S]=C$(u||t,h,e,a,l,c);y=o(S,h)}if(De(y)||gs(y)){let S=!1;const _=k$(t,h,e,y,h,()=>{S=!0});return S?t0:_}else return Sr(y)?y:t0}};return t.processor&&(f.processor=t.processor),r.list&&(f.list=r.list),r.named&&(f.named=r.named),Qt(r.plural)&&(f.pluralIndex=r.plural),f}c8();/*!
  * vue-i18n v11.1.10
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const i6="11.1.10";function o6(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Dy().__INTLIFY_PROD_DEVTOOLS__=!1)}const Fr={UNEXPECTED_RETURN_TYPE:S8,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function Zr(t,...e){return sf(t,null,void 0)}const Dm=qi("__translateVNode"),Pm=qi("__datetimeParts"),Lm=qi("__numberParts"),a6=qi("__setPluralRules"),l6=qi("__injectWithOption"),Mm=qi("__dispose");function Kl(t){if(!gt(t)||gs(t))return t;for(const e in t)if(Wr(t,e))if(!e.includes("."))gt(t[e])&&Kl(t[e]);else{const n=e.split("."),r=n.length-1;let s=t,i=!1;for(let o=0;o<r;o++){if(n[o]==="__proto__")throw new Error(`unsafe key: ${n[o]}`);if(n[o]in s||(s[n[o]]=St()),!gt(s[n[o]])){i=!0;break}s=s[n[o]]}if(i||(gs(s)?v$.includes(n[r])||delete t[e]:(s[n[r]]=t[e],delete t[e])),!gs(s)){const o=s[n[r]];gt(o)&&Kl(o)}}return t}function I$(t,e){const{messages:n,__i18n:r,messageResolver:s,flatJson:i}=e,o=lt(n)?n:Jt(r)?St():{[t]:St()};if(Jt(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:c}=a;l?(o[l]=o[l]||St(),hu(c,o[l])):hu(c,o)}else De(a)&&hu(JSON.parse(a),o)}),s==null&&i)for(const a in o)Wr(o,a)&&Kl(o[a]);return o}function R$(t){return t.type}function c6(t,e,n){let r=gt(e.messages)?e.messages:St();"__i18nGlobal"in n&&(r=I$(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(i=>{t.mergeLocaleMessage(i,r[i])});{if(gt(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(gt(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function r0(t){return K(ps,null,t,0)}const s0="__INTLIFY_META__",i0=()=>[],u6=()=>!1;let o0=0;function a0(t){return(e,n,r,s)=>t(n,r,Kt()||void 0,s)}const d6=()=>{const t=Kt();let e=null;return t&&(e=R$(t)[s0])?{[s0]:e}:null};function T$(t={}){const{__root:e,__injectWithOption:n}=t,r=e===void 0,s=t.flatJson,i=Qu?xe:yr;let o=zt(t.inheritLocale)?t.inheritLocale:!0;const a=i(e&&o?e.locale.value:De(t.locale)?t.locale:ed),l=i(e&&o?e.fallbackLocale.value:De(t.fallbackLocale)||Jt(t.fallbackLocale)||lt(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:a.value),c=i(I$(a.value,t)),u=i(lt(t.datetimeFormats)?t.datetimeFormats:{[a.value]:{}}),d=i(lt(t.numberFormats)?t.numberFormats:{[a.value]:{}});let f=e?e.missingWarn:zt(t.missingWarn)||Zu(t.missingWarn)?t.missingWarn:!0,h=e?e.fallbackWarn:zt(t.fallbackWarn)||Zu(t.fallbackWarn)?t.fallbackWarn:!0,m=e?e.fallbackRoot:zt(t.fallbackRoot)?t.fallbackRoot:!0,y=!!t.fallbackFormat,S=Bt(t.missing)?t.missing:null,x=Bt(t.missing)?a0(t.missing):null,_=Bt(t.postTranslation)?t.postTranslation:null,g=e?e.warnHtmlMessage:zt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,p=!!t.escapeParameter;const v=e?e.modifiers:lt(t.modifiers)?t.modifiers:{};let E=t.pluralRules||e&&e.pluralRules,k;k=(()=>{r&&Gw(null);const X={version:i6,locale:a.value,fallbackLocale:l.value,messages:c.value,modifiers:v,pluralRules:E,missing:x===null?void 0:x,missingWarn:f,fallbackWarn:h,fallbackFormat:y,unresolving:!0,postTranslation:_===null?void 0:_,warnHtmlMessage:g,escapeParameter:p,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};X.datetimeFormats=u.value,X.numberFormats=d.value,X.__datetimeFormatters=lt(k)?k.__datetimeFormatters:void 0,X.__numberFormatters=lt(k)?k.__numberFormatters:void 0;const de=H8(X);return r&&Gw(de),de})(),ol(k,a.value,l.value);function C(){return[a.value,l.value,c.value,u.value,d.value]}const I=ne({get:()=>a.value,set:X=>{k.locale=X,a.value=X}}),N=ne({get:()=>l.value,set:X=>{k.fallbackLocale=X,l.value=X,ol(k,a.value,X)}}),j=ne(()=>c.value),V=ne(()=>u.value),L=ne(()=>d.value);function Z(){return Bt(_)?_:null}function T(X){_=X,k.postTranslation=X}function q(){return S}function z(X){X!==null&&(x=a0(X)),S=X,k.missing=x}const se=(X,de,Re,R,b,w)=>{C();let B;try{__INTLIFY_PROD_DEVTOOLS__,r||(k.fallbackContext=e?V8():void 0),B=X(k)}finally{__INTLIFY_PROD_DEVTOOLS__,r||(k.fallbackContext=void 0)}if(Re!=="translate exists"&&Qt(B)&&B===of||Re==="translate exists"&&!B){const[Q,fe]=de();return e&&m?R(e):b(Q)}else{if(w(B))return B;throw Zr(Fr.UNEXPECTED_RETURN_TYPE)}};function W(...X){return se(de=>Reflect.apply(n0,null,[de,...X]),()=>Om(...X),"translate",de=>Reflect.apply(de.t,de,[...X]),de=>de,de=>De(de))}function he(...X){const[de,Re,R]=X;if(R&&!gt(R))throw Zr(Fr.INVALID_ARGUMENT);return W(de,Re,pn({resolvedMessage:!0},R||{}))}function me(...X){return se(de=>Reflect.apply(Yw,null,[de,...X]),()=>Rm(...X),"datetime format",de=>Reflect.apply(de.d,de,[...X]),()=>Kw,de=>De(de)||Jt(de))}function ve(...X){return se(de=>Reflect.apply(Qw,null,[de,...X]),()=>Tm(...X),"number format",de=>Reflect.apply(de.n,de,[...X]),()=>Kw,de=>De(de)||Jt(de))}function Ce(X){return X.map(de=>De(de)||Qt(de)||zt(de)?r0(String(de)):de)}const G={normalize:Ce,interpolate:X=>X,type:"vnode"};function P(...X){return se(de=>{let Re;const R=de;try{R.processor=G,Re=Reflect.apply(n0,null,[R,...X])}finally{R.processor=null}return Re},()=>Om(...X),"translate",de=>de[Dm](...X),de=>[r0(de)],de=>Jt(de))}function ee(...X){return se(de=>Reflect.apply(Qw,null,[de,...X]),()=>Tm(...X),"number format",de=>de[Lm](...X),i0,de=>De(de)||Jt(de))}function ce(...X){return se(de=>Reflect.apply(Yw,null,[de,...X]),()=>Rm(...X),"datetime format",de=>de[Pm](...X),i0,de=>De(de)||Jt(de))}function ie(X){E=X,k.pluralRules=E}function Ee(X,de){return se(()=>{if(!X)return!1;const Re=De(de)?de:a.value,R=F(Re),b=k.messageResolver(R,X);return gs(b)||Sr(b)||De(b)},()=>[X],"translate exists",Re=>Reflect.apply(Re.te,Re,[X,de]),u6,Re=>zt(Re))}function ke(X){let de=null;const Re=b$(k,l.value,a.value);for(let R=0;R<Re.length;R++){const b=c.value[Re[R]]||{},w=k.messageResolver(b,X);if(w!=null){de=w;break}}return de}function D(X){const de=ke(X);return de??(e?e.tm(X)||{}:{})}function F(X){return c.value[X]||{}}function le(X,de){if(s){const Re={[X]:de};for(const R in Re)Wr(Re,R)&&Kl(Re[R]);de=Re[X]}c.value[X]=de,k.messages=c.value}function be(X,de){c.value[X]=c.value[X]||{};const Re={[X]:de};if(s)for(const R in Re)Wr(Re,R)&&Kl(Re[R]);de=Re[X],hu(de,c.value[X]),k.messages=c.value}function ge(X){return u.value[X]||{}}function M(X,de){u.value[X]=de,k.datetimeFormats=u.value,Xw(k,X,de)}function H(X,de){u.value[X]=pn(u.value[X]||{},de),k.datetimeFormats=u.value,Xw(k,X,de)}function oe(X){return d.value[X]||{}}function ye(X,de){d.value[X]=de,k.numberFormats=d.value,Zw(k,X,de)}function we(X,de){d.value[X]=pn(d.value[X]||{},de),k.numberFormats=d.value,Zw(k,X,de)}o0++,e&&Qu&&(ot(e.locale,X=>{o&&(a.value=X,k.locale=X,ol(k,a.value,l.value))}),ot(e.fallbackLocale,X=>{o&&(l.value=X,k.fallbackLocale=X,ol(k,a.value,l.value))}));const Se={id:o0,locale:I,fallbackLocale:N,get inheritLocale(){return o},set inheritLocale(X){o=X,X&&e&&(a.value=e.locale.value,l.value=e.fallbackLocale.value,ol(k,a.value,l.value))},get availableLocales(){return Object.keys(c.value).sort()},messages:j,get modifiers(){return v},get pluralRules(){return E||{}},get isGlobal(){return r},get missingWarn(){return f},set missingWarn(X){f=X,k.missingWarn=f},get fallbackWarn(){return h},set fallbackWarn(X){h=X,k.fallbackWarn=h},get fallbackRoot(){return m},set fallbackRoot(X){m=X},get fallbackFormat(){return y},set fallbackFormat(X){y=X,k.fallbackFormat=y},get warnHtmlMessage(){return g},set warnHtmlMessage(X){g=X,k.warnHtmlMessage=X},get escapeParameter(){return p},set escapeParameter(X){p=X,k.escapeParameter=X},t:W,getLocaleMessage:F,setLocaleMessage:le,mergeLocaleMessage:be,getPostTranslationHandler:Z,setPostTranslationHandler:T,getMissingHandler:q,setMissingHandler:z,[a6]:ie};return Se.datetimeFormats=V,Se.numberFormats=L,Se.rt=he,Se.te=Ee,Se.tm=D,Se.d=me,Se.n=ve,Se.getDateTimeFormat=ge,Se.setDateTimeFormat=M,Se.mergeDateTimeFormat=H,Se.getNumberFormat=oe,Se.setNumberFormat=ye,Se.mergeNumberFormat=we,Se[l6]=n,Se[Dm]=P,Se[Pm]=ce,Se[Lm]=ee,Se}const Uy={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function f6({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>[...r,...s.type===Ge?s.children:[s]],[]):e.reduce((n,r)=>{const s=t[r];return s&&(n[r]=s()),n},St())}function O$(){return Ge}const h6=pe({name:"i18n-t",props:pn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>Qt(t)||!isNaN(t)}},Uy),setup(t,e){const{slots:n,attrs:r}=e,s=t.i18n||By({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(d=>d[0]!=="_"),o=St();t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=De(t.plural)?+t.plural:t.plural);const a=f6(e,i),l=s[Dm](t.keypath,a,o),c=pn(St(),r),u=De(t.tag)||gt(t.tag)?t.tag:O$();return Yn(u,c,l)}}}),l0=h6;function p6(t){return Jt(t)&&!De(t[0])}function D$(t,e,n,r){const{slots:s,attrs:i}=e;return()=>{const o={part:!0};let a=St();t.locale&&(o.locale=t.locale),De(t.format)?o.key=t.format:gt(t.format)&&(De(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((f,h)=>n.includes(h)?pn(St(),f,{[h]:t.format[h]}):f,St()));const l=r(t.value,o,a);let c=[o.key];Jt(l)?c=l.map((f,h)=>{const m=s[f.type],y=m?m({[f.type]:f.value,index:h,parts:l}):[f.value];return p6(y)&&(y[0].key=`${f.type}-${h}`),y}):De(l)&&(c=[l]);const u=pn(St(),i),d=De(t.tag)||gt(t.tag)?t.tag:O$();return Yn(d,u,c)}}const m6=pe({name:"i18n-n",props:pn({value:{type:Number,required:!0},format:{type:[String,Object]}},Uy),setup(t,e){const n=t.i18n||By({useScope:t.scope,__useComponent:!0});return D$(t,e,$$,(...r)=>n[Lm](...r))}}),c0=m6;function g6(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function y6(t){const e=o=>{const{instance:a,value:l}=o;if(!a||!a.$)throw Zr(Fr.UNEXPECTED_ERROR);const c=g6(t,a.$),u=u0(l);return[Reflect.apply(c.t,c,[...d0(u)]),c]};return{created:(o,a)=>{const[l,c]=e(a);Qu&&t.global===c&&(o.__i18nWatcher=ot(c.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=c,o.textContent=l},unmounted:o=>{Qu&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,c=u0(a);o.textContent=Reflect.apply(l.t,l,[...d0(c)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function u0(t){if(De(t))return{path:t};if(lt(t)){if(!("path"in t))throw Zr(Fr.REQUIRED_VALUE,"path");return t}else throw Zr(Fr.INVALID_VALUE)}function d0(t){const{path:e,locale:n,args:r,choice:s,plural:i}=t,o={},a=r||{};return De(n)&&(o.locale=n),Qt(s)&&(o.plural=s),Qt(i)&&(o.plural=i),[e,a,o]}function v6(t,e,...n){const r=lt(n[0])?n[0]:{};(zt(r.globalInstall)?r.globalInstall:!0)&&([l0.name,"I18nT"].forEach(i=>t.component(i,l0)),[c0.name,"I18nN"].forEach(i=>t.component(i,c0)),[h0.name,"I18nD"].forEach(i=>t.component(i,h0))),t.directive("t",y6(e))}const b6=qi("global-vue-i18n");function _6(t={}){const e=zt(t.globalInjection)?t.globalInjection:!0,n=new Map,[r,s]=w6(t),i=qi("");function o(u){return n.get(u)||null}function a(u,d){n.set(u,d)}function l(u){n.delete(u)}const c={get mode(){return"composition"},async install(u,...d){if(u.__VUE_I18N_SYMBOL__=i,u.provide(u.__VUE_I18N_SYMBOL__,c),lt(d[0])){const m=d[0];c.__composerExtend=m.__composerExtend,c.__vueI18nExtend=m.__vueI18nExtend}let f=null;e&&(f=I6(u,c.global)),v6(u,c,...d);const h=u.unmount;u.unmount=()=>{f&&f(),c.dispose(),h()}},get global(){return s},dispose(){r.stop()},__instances:n,__getInstance:o,__setInstance:a,__deleteInstance:l};return c}function By(t={}){const e=Kt();if(e==null)throw Zr(Fr.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Zr(Fr.NOT_INSTALLED);const n=x6(e),r=S6(n),s=R$(e),i=E6(t,s);if(i==="global")return c6(r,t,s),r;if(i==="parent"){let l=A6(n,e,t.__useComponent);return l==null&&(l=r),l}const o=n;let a=o.__getInstance(e);if(a==null){const l=pn({},t);"__i18n"in s&&(l.__i18n=s.__i18n),r&&(l.__root=r),a=T$(l),o.__composerExtend&&(a[Mm]=o.__composerExtend(a)),C6(o,e,a),o.__setInstance(e,a)}return a}function w6(t,e){const n=Ta(),r=n.run(()=>T$(t));if(r==null)throw Zr(Fr.UNEXPECTED_ERROR);return[n,r]}function x6(t){const e=qt(t.isCE?b6:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Zr(t.isCE?Fr.NOT_INSTALLED_WITH_PROVIDE:Fr.UNEXPECTED_ERROR);return e}function E6(t,e){return rf(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function S6(t){return t.mode==="composition"?t.global:t.global.__composer}function A6(t,e,n=!1){let r=null;const s=e.root;let i=$6(e,n);for(;i!=null;){const o=t;if(t.mode==="composition"&&(r=o.__getInstance(i)),r!=null||s===i)break;i=i.parent}return r}function $6(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function C6(t,e,n){Ht(()=>{},e),Mn(()=>{const r=n;t.__deleteInstance(e);const s=r[Mm];s&&(s(),delete r[Mm])},e)}const k6=["locale","fallbackLocale","availableLocales"],f0=["t","rt","d","n","tm","te"];function I6(t,e){const n=Object.create(null);return k6.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i)throw Zr(Fr.UNEXPECTED_ERROR);const o=Pt(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(n,s,o)}),t.config.globalProperties.$i18n=n,f0.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i||!i.value)throw Zr(Fr.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${s}`,i)}),()=>{delete t.config.globalProperties.$i18n,f0.forEach(s=>{delete t.config.globalProperties[`$${s}`]})}}const R6=pe({name:"i18n-d",props:pn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Uy),setup(t,e){const n=t.i18n||By({useScope:t.scope,__useComponent:!0});return D$(t,e,A$,(...r)=>n[Pm](...r))}}),h0=R6;o6();j8(b8);F8(L8);U8(b$);if(__INTLIFY_PROD_DEVTOOLS__){const t=Dy();t.__INTLIFY__=!0,_8(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}var T6=Object.defineProperty,O6=(t,e,n)=>e in t?T6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tp=(t,e,n)=>O6(t,typeof e!="symbol"?e+"":e,n);let D6=class{constructor(e,n){this.i18n=e,this.messages=n,this.messages.addListener((r,s)=>this.i18n.setLocaleMessage(r,s))}getLocale(){return this.i18n.locale.value}async setLocale(e){await this.messages.loadLocale(e),this.i18n.locale.value=e}getFallbackLocale(){const e=this.i18n.fallbackLocale.value;return typeof e!="string"?"":e}async setFallbackLocale(e){await this.messages.loadLocale(e),this.i18n.fallbackLocale.value=e}getLocales(){return this.messages.getLocales()}translate(e,n){return this.i18n.t(e,n??{})}translateWithDefault(e,n,r){const s=this.i18n.t(e,r??{},{missingWarn:!1});return s===e?this.replaceParameters(n,r):s}replaceParameters(e,n={}){if(typeof n=="number"){const r=e.split("|").map(i=>i.trim()),s=r[n]??r[2]??e;return this.replaceParameters(s,{n})}return Object.entries(n).reduce((r,[s,i])=>r.replace(new RegExp(`\\{.*${s}[^}]*\\}`),Rt(i)),e)}};class P6{constructor(e){tp(this,"listeners",[]),tp(this,"messages",{}),tp(this,"loaders"),this.loaders=Object.entries(e).reduce((n,[r,s])=>{var i;const o=(i=o1(r,/.*\/lang\/(.+)\.yaml/))==null?void 0:i[1];return o&&(n[o]=()=>s().then(({default:a})=>a)),n},{})}getMessages(){return Object.assign({},this.messages)}getLocales(){return Object.keys(this.loaders)}addListener(e){this.listeners.push(e)}async loadLocale(e){if(e in this.messages)return this.messages[e];const n=await(this.loaders[e]??Ye(`Couldn't load messages for '${e}' locale`))();return this.messages[e]=n,this.listeners.forEach(r=>r(e,n)),n}}async function L6(t){const e=t.defaultLocale??"en",n=t.fallbackLocale??"en";return await t.messages.loadLocale(e),await t.messages.loadLocale(n),_6({warnHtmlMessage:!1,locale:e,fallbackLocale:n,messages:t.messages.getMessages()})}function M6(t){return{async install(e){const n=new P6(t.messages),r=await L6({...t,messages:n});e.use(r),zi.setProvider(new D6(r.global,n))}}}const Hc={clientID:{client_id:"https://noeldemartin.github.io/shows-tracker/clientid.jsonld",client_name:"Shows Tracker",redirect_uris:["https://noeldemartin.github.io/shows-tracker/"]}};function N6(t){return Xt(t)}const j6=Object.freeze(Object.defineProperty({__proto__:null,model:N6},Symbol.toStringTag,{value:"Module"}));let zy=new WeakMap;function F6(t){const e=OU(),n=ne(()=>e.values()),r=new Set([t.collection]),s={modelsSet:e,modelsArray:n,collectionsSet:r,async refresh(){const i=new Set;for(const o of r)(await t.withCollection(o,()=>t.all())).forEach(a=>i.add(a));e.reset(i)}};return zy.set(t,s),t.on("created",i=>e.add(Ze(i))),t.on("deleted",i=>e.delete(Ze(i))),t.on("updated",i=>e.add(Ze(i))),qe.on("purge-storage",()=>e.clear()),qe.on("cloud:migration-completed",()=>s.refresh()),qe.on("cloud:migration-cancelled",()=>s.refresh()),qe.on("cloud:backup-completed",()=>s.refresh()),qe.emit("soukai:track-models",t),s}function Cl(t){return"isSoftDeleted"in t?t.isSoftDeleted():!1}function uc(){return zy}function P$(t){return zy.get(t)??F6(t)}function L$(t,e,n=!0){const r=e??new Map;return Tl(t)?(t.forEach(s=>r.set(s.id,s)),r):pt(t)?n?(Object.values(t).forEach(s=>L$(s,r,!1)),r):(r.set(t.id,t),r):r}function U6(t,e){return So((n,r)=>{let s;const i=()=>(s=e(),r()),o=[t.on("deleted",i),t.on("created",i),t.on("updated",i),t.on("modified",i),t.on("relation-loaded",i),qe.on("cloud:migration-cancelled",i),qe.on("cloud:migration-completed",i)],a=()=>{o.forEach(l=>l()),o.splice(0,o.length)};return Eo()&&Oa(a),Dt(i),{get:()=>Be(s,()=>n()),set:()=>console.warn("Computed models ref was not set (it is immutable).")}})}function B6(t,e){const n=U6(t,e),r=ne(()=>Tl(n.value)?n.value.filter(o=>!Cl(o)).map(o=>Jn(o)):pt(n.value)?Object.entries(n.value).reduce((o,[a,l])=>(Tl(l)?o[a]=l.filter(c=>!Cl(c)).map(c=>Jn(c)):Cl(l)||(o[a]=Jn(l)),o),{}):n.value),s=ne(()=>L$(r.value)),i=t.on("modified",(o,a)=>{Object.assign(s.value.get(o.id)??{},{[a]:o.getAttribute(a)})});return Mn(i),r}function M$(t){return So((e,n)=>{let r;const s=[],i=a=>r instanceof io&&a.id===r.id&&n(),o=()=>{s.forEach(a=>a()),s.splice(0,s.length)};return Eo()&&Oa(o),Dt(()=>{const a=t();r instanceof io&&(!cn(a,io)||a.static()!==r.static())&&o(),r=a,n(),r instanceof io&&!s.length&&(s.push(qe.on("cloud:migration-completed",n)),s.push(qe.on("cloud:migration-cancelled",n)),s.push(r.static().on("modified",i)),s.push(r.static().on("updated",i)),s.push(r.static().on("relation-loaded",i)))}),{get:()=>Be(r,()=>e()),set:()=>console.warn("Computed model ref was not set (it is immutable).")}})}function z6(t,e){return B6(t,e)}function Vy(t,e={}){const n=yr([]),r=P$(t);return Dt(()=>n.value=r.modelsArray.value),RU(()=>t.on("updated",()=>n.value=n.value.slice(0))),ne(()=>e.includeSoftDeleted?n.value:n.value.filter(s=>!Cl(s)))}function $i(t,e={}){var n;const r=((n=uc().get(t))==null?void 0:n.modelsArray.value)??[];return e.includeSoftDeleted?r:r.filter(s=>!Cl(s))}function V6(t){return uc().has(t)}function p0(t,e){On(uc().get(t),"Failed ignoring models collection, please track the model first using trackModels()").collectionsSet.delete(e)}async function Li(t,e,n={}){const r=n.refresh??!0,s=On(uc().get(t),"Failed tracking models collection, please track the model first using trackModels()");if(!s.collectionsSet.has(e)&&(s.collectionsSet.add(e),r)){const i=s.modelsArray.value;(await t.withCollection(e,()=>t.all())).forEach(o=>i.push(o)),s.modelsSet.reset(i)}}async function N$(t,e){const{service:n,property:r,transform:s,...i}=e??{},o=s??(c=>c),a=uc().has(t),l=P$(t);for(const[c,u]of Object.entries(i))t.on(c,u);n&&r&&Dt(()=>n.setState(r,o(l.modelsArray.value))),a||await l.refresh()}function H6(){globalThis.testingRuntime&&Object.assign(globalThis.testingRuntime,j6)}function q6(t){return{install(){const e=new _I(xy());H6(),g1(e),kI(t.models),qe.on("purge-storage",()=>e.purgeDatabase())}}}var K6=Object.defineProperty,W6=(t,e,n)=>e in t?K6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$r=(t,e,n)=>W6(t,typeof e!="symbol"?e+"":e,n);let G6=class extends vr{};function J6(t,e){return t}let td=class extends vr{constructor(e,n,r){super(J6(e),r),$r(this,"description"),this.description=n}},Y6=class extends vr{constructor(e,n){super(`Container at ${e.url} is already in use`,n)}},j$=class{constructor(){$r(this,"name"),$r(this,"authenticatedFetch"),$r(this,"booted"),$r(this,"listeners",m1([])),$r(this,"_engine")}get engine(){return this._engine=this._engine??new ug(this.requireAuthenticatedFetch()),this._engine}getAuthenticatedFetch(){return this.authenticatedFetch??null}requireAuthenticatedFetch(){return this.authenticatedFetch??Ye("Authenticated fetch is not ready")}addListener(e){return this.listeners.includes(e)||this.listeners.push(e),()=>{this.removeListener(e)}}removeListener(e){this.listeners.includes(e)&&this.listeners.remove(e)}async boot(){if(this.booted)return this.booted;this.booted=new fs,await this.restoreSession(),this.booted.resolve()}async initAuthenticatedFetch(e){this.authenticatedFetch=e,await this.notifyListeners("onAuthenticatedFetchReady",e)}async startSession(e){const n={authenticator:this,...e};return await this.notifyListeners("onSessionStarted",n),n}async failSession(e,n){await this.notifyListeners("onSessionFailed",e,n)}async endSession(){await this.notifyListeners("onSessionEnded")}async notifyListeners(e,...n){await Promise.all(this.listeners.toArray().map(async r=>{const s=r[e];await(s==null?void 0:s(...n))}))}};const np="inrupt-authenticator";class X6 extends j${constructor(){super(...arguments),$r(this,"_events"),$r(this,"_fetch"),$r(this,"_login"),$r(this,"_logout"),$r(this,"_handleIncomingRedirect")}async login(e){Er.set(np,e);const n={oidcIssuer:e};return Hc.clientID&&(n.clientId=Hc.clientID.client_id,n.clientName=Hc.clientID.client_name,n.redirectUrl=Hc.clientID.redirect_uris[0]),await this._login(n),await Ir({seconds:60}),Ye("Browser should have redirected, but it didn't")}async logout(){await this._logout(),await this.endSession()}async restoreSession(){const{events:e,fetch:n,handleIncomingRedirect:r,login:s,logout:i}=await Qo(async()=>{const{events:o,fetch:a,handleIncomingRedirect:l,login:c,logout:u}=await import("./InruptAuthenticator.lazy-BvpQLGoj-CFTc25qv.js");return{events:o,fetch:a,handleIncomingRedirect:l,login:c,logout:u}},[]);this._fetch=n,this._login=s,this._logout=i,this._events=e,this._handleIncomingRedirect=r,await this.loginFromRedirect()}async loginFromRedirect(){const e=Er.get(np);if(!e)return;this._events().on("error",(r,s)=>{r??(r="Error using Inrupt Authenticator method"),typeof s=="object"?this.failSession(e,new td(r,null,{cause:s})):this.failSession(e,new td(r,s))});const n=await this._handleIncomingRedirect(globalThis.location.href);Er.remove(np),n!=null&&n.isLoggedIn&&n.webId&&await this.initSession(n.webId)}async initSession(e){await this.initAuthenticatedFetch(this._fetch);try{const n=await dt.requireUserProfile(e);await this.startSession({user:n,loginUrl:e})}catch(n){await this.failSession(e,n)}}}let Q6=class extends j${constructor(){super(),$r(this,"store"),this.store=TU("legacy-authenticator",{})}async login(e,n){const{SolidAuthClient:r}=await Qo(async()=>{const{SolidAuthClient:s}=await import("./LegacyAuthenticator.lazy-ChFFqP14-DwiQ4-TI.js");return{SolidAuthClient:s}},[]);throw this.store.webId=n==null?void 0:n.webId,this.store.loginUrl=(n==null?void 0:n.oidcIssuerUrl)??e,await r.login(this.store.loginUrl)===null?(delete this.store.webId,delete this.store.loginUrl,new td("Could not log in with Solid using the legacy authenticator")):(await Ir({seconds:60}),new Error("Browser should have redirected, but it didn't"))}async logout(){const{SolidAuthClient:e}=await Qo(async()=>{const{SolidAuthClient:n}=await import("./LegacyAuthenticator.lazy-ChFFqP14-DwiQ4-TI.js");return{SolidAuthClient:n}},[]);delete this.store.webId,delete this.store.loginUrl,await e.logout(),await this.endSession()}async restoreSession(){if(!this.store.loginUrl)return;const{SolidAuthClient:e}=await Qo(async()=>{const{SolidAuthClient:s}=await import("./LegacyAuthenticator.lazy-ChFFqP14-DwiQ4-TI.js");return{SolidAuthClient:s}},[]),n=await e.currentSession(),r=On(this.store.loginUrl);await this.initAuthenticatedFetch((s,i)=>e.fetch(s,i));try{const s=await dt.requireUserProfile(On((n==null?void 0:n.webId)??this.store.webId));await this.startSession({user:s,loginUrl:r})}catch(s){await this.failSession(r,s)}}};const Hy={},Z6={inrupt:new X6,legacy:new Q6};function ez(t){Hy.default=t}function F$(t){return Hy[t]}function tz(t){Object.entries(t).forEach(([e,n])=>nz(e,n))}function nz(t,e){Hy[t]=e,e.name=e.name??t}const qy={autoReconnect:!0},rz=Io({name:"solid",persist:["autoReconnect","dismissed","previousSession","profiles","staleProfiles","collections"],initialState:{autoReconnect:qy.autoReconnect,dismissed:!1,ignorePreviousSessionError:!1,loginStartupError:null,loginOngoing:!1,preferredAuthenticator:null,previousSession:null,profiles:{},session:null,loginStale:!1,staleProfiles:[],collections:{}},serialize(t){var e;return((e=t.previousSession)==null?void 0:e.error)instanceof Error&&(t.previousSession.error=t.previousSession.error.message),t},computed:{user:t=>{var e,n;return((e=t.session)==null?void 0:e.user)??((n=t.previousSession)==null?void 0:n.profile)??null},authenticator:t=>{var e;return((e=t.session)==null?void 0:e.authenticator)??null},fetch(){var t;return((t=this.authenticator)==null?void 0:t.getAuthenticatedFetch())??globalThis.fetch.bind(globalThis)},error(t){var e;return t.loginStartupError?t.loginStartupError??null:t.ignorePreviousSessionError?null:((e=t.previousSession)==null?void 0:e.error)??null}}});let sz=class extends rz{isLoggedIn(){return!!this.session}wasLoggedIn(){return!!this.previousSession}hasLoggedIn(){return!!(this.session||this.previousSession)}requireAuthenticator(){return this.authenticator??Ye("Could not get authenticator")}requireUser(){return this.user??Ye("Could not get user profile (are you logged in?)")}requireUserProfile(e){return this.getUserProfile(e,{required:!0})}async getUserProfile(e,n={}){var r;let s=null;const i=n.markStale??!((r=this.authenticator)!=null&&r.getAuthenticatedFetch()),o=this.profiles[e]??await Be(await WR(e,{fetch:this.fetch,required:n.required??!1,onLoaded(a){s=a}}),async a=>{a&&(s&&await qe.emit("solid:user-profile-loaded",[a,s]),this.rememberProfile(a))});return o&&i&&this.setState({staleProfiles:dr(this.staleProfiles.concat([o.webId]))}),o}async refreshUserProfile(){if(!this.isLoggedIn())return;this.setState({profiles:Ws(this.profiles,[this.user.webId])});const e=await this.requireUserProfile(this.user.webId);this.setState({session:{...this.session,user:e}})}async login(e,n={}){if(Mi()&&e==="dev"&&(e="http://localhost:3000"),/^https?:\/\//.test(e)||(n.fallbackUrl??(n.fallbackUrl=`http://${e}`),e=`https://${e}`),this.isLoggedIn())return!0;if(this.loginOngoing)throw new Error("Authentication already in progress");return n.loading?ft.loading(Ne("solid.loginOngoing","Logging in..."),()=>this.attemptLogin(e,n)):this.attemptLogin(e,n)}async reconnect(e={}){const{force:n,...r}=e;this.isLoggedIn()||!this.previousSession||this.previousSession.error!==null&&!n||await this.login(this.previousSession.loginUrl,{authenticator:this.previousSession.authenticator,...r,loading:r.loading??!1})}async logout(e=!1){var n,r;const s=!mt.plugin("@aerogel/local-first")||!!((n=mt.service("$cloud"))!=null&&n.ready),i=!mt.plugin("@aerogel/local-first")||!!((r=mt.service("$cloud"))!=null&&r.dirty),[o,a]=e?[!0,{wipeLocalData:s}]:await ft.confirm(s?Ne("solid.logoutConfirmTitle","Log out from this device?"):Ne("solid.disconnectConfirmTitle","Disconnect account?"),s?i?Ne("solid.logoutConfirmMessageWithLocalChanges","There are some changes that haven't been synchronized and will be lost, but the rest of the data will remain in your Solid POD."):Ne("solid.logoutConfirmMessage","Logging out will remove all the data from this device, but you'll still have it in your Solid POD."):Ne("solid.disconnectConfirmMessage","You'll need to introduce your credentials again to connect to your Solid POD."),{acceptText:Ne("solid.logoutConfirmAccept","Log out"),acceptVariant:"danger",cancelText:Ne("solid.logoutConfirmCancel",Ne("ui.cancel","Cancel")),checkboxes:s?i?{wipeLocalData:{label:Ne("solid.logoutConfirmWipeNotice","I understand that changes that haven't been synchronized will be lost."),default:!1,required:!0}}:void 0:{wipeLocalData:{label:Ne("solid.logoutConfirmWipe","Also remove all existing data"),default:!1}}});o&&this.previousSession&&await ft.loading(Ne("solid.logoutOngoing","Logging out..."),async()=>{this.setState({dismissed:!1,ignorePreviousSessionError:!1,loginStartupError:null,previousSession:null,...qy}),this.isLoggedIn()&&await this.authenticator.logout(),(a.wipeLocalData??!0)&&await tf.purge(),await qe.emit("auth:logout"),await qe.emit("auth:after-logout")})}async whenLoggedIn(e){return this.isLoggedIn()?e(this.session):new Promise(n=>{const r=s=>n(e(s));qe.once("auth:login",r)})}dismiss(){this.setState({dismissed:!0})}async findOrCreatePrivateTypeIndex(){return await this.findPrivateTypeIndex()??await this.createPrivateTypeIndex()}async findPrivateTypeIndex(e={}){const{webId:n,privateTypeIndexUrl:r}=this.requireUser(),s=this.requireAuthenticator().engine;return r?(e.fresh&&Tv(`${n}-privateTypeIndex`),kv(`${n}-privateTypeIndex`,()=>Ho.withEngine(s).find(r))):null}async findOrCreatePublicTypeIndex(){return await this.findPublicTypeIndex()??await this.createPublicTypeIndex()}async findPublicTypeIndex(e={}){const{webId:n,publicTypeIndexUrl:r}=this.requireUser(),s=this.requireAuthenticator().engine;return r?(e.fresh&&Tv(`${n}-publicTypeIndex`),kv(`${n}-publicTypeIndex`,()=>Ho.withEngine(s).find(r))):null}async createPrivateContainer(e){const n=this.requireAuthenticator().engine;return Tr.withEngine(n,async()=>{const r=await Tr.find(e.url);if(r&&!e.reuseExisting)throw new Y6(r);const s=r??new Tr({url:e.url,name:e.name});if(await s.save(),e.registerFor){const i=await this.findOrCreatePrivateTypeIndex();await s.register(i,e.registerFor)}return s})}async boot(){var e,n;await bs.booted,Yo("authenticator")&&this.setState({preferredAuthenticator:gl("authenticator")}),Yo("refreshProfile")&&this.setState({staleProfiles:dr(this.staleProfiles.concat(un([(e=this.session)==null?void 0:e.user.webId,(n=this.previousSession)==null?void 0:n.loginUrl])))}),await this.restorePreviousSession(),await this.startupReconnect(),await this.trackSolidModels()}async createPrivateTypeIndex(){const e=this.requireUser(),n=this.requireAuthenticator(),r=await Ho.withEngine(n.engine).createPrivate(e);return Be(r,()=>{e.privateTypeIndexUrl=r.url,Dv(`${e.webId}-privateTypeIndex`,r),this.rememberProfile(e)})}async createPublicTypeIndex(){const e=this.requireUser(),n=this.requireAuthenticator(),r=await Ho.withEngine(n.engine).createPublic(e);return Be(r,()=>{e.privateTypeIndexUrl=r.url,Dv(`${e.webId}-publicTypeIndex`,r),this.rememberProfile(e)})}async attemptLogin(e,n){const r=n.authenticator??this.preferredAuthenticator??"default",s=n.onError??(a=>mt.isMounted()?bs.report(a):this.setState({loginStartupError:a})),i=setTimeout(()=>this.loginStale=!0,1e4),o={dismissed:this.dismissed,ignorePreviousSessionError:this.ignorePreviousSessionError,previousSession:this.previousSession};this.loginOngoing=!0;try{const a=await this.getUserProfile(e,{markStale:!0}),l=(a==null?void 0:a.oidcIssuerUrl)??_s((a==null?void 0:a.webId)??e),c=await this.bootAuthenticator(r),{domain:u}=iI(e);return this.setState({dismissed:!1,ignorePreviousSessionError:!0,previousSession:Gn({profile:a,loginUrl:e,authenticator:r,error:Ne("solid.stuckConnecting","We didn't hear back from the identity provider at `{domain}`, maybe try reconnecting?",{domain:u})})}),await qe.emit("auth:before-login"),await c.login(l,a),!0}catch(a){return this.setState(o),a instanceof G6?!1:n.fallbackUrl?Ir().then(()=>this.login(n.fallbackUrl??"",Ws(n,"fallbackUrl"))):(s(a),!1)}finally{clearTimeout(i),this.setState({loginOngoing:!1,loginStale:!1})}}async restorePreviousSession(){this.previousSession&&await this.bootAuthenticator(this.previousSession.authenticator)}async startupReconnect(){this.reconnectOnStartup()&&await this.reconnect({force:this.forcingReconnect()})}reconnectOnStartup(){return Yo("autoReconnect")?yu(gl("autoReconnect")):this.autoReconnect}forcingReconnect(){return Yo("autoReconnect")&&yu(gl("autoReconnect"))}async bootAuthenticator(e){const n=F$(e);return n.addListener({onSessionStarted:async r=>{this.setState({session:r,previousSession:{authenticator:n.name,loginUrl:r.loginUrl,profile:r.user,error:null}}),this.staleProfiles.includes(r.user.webId)&&await this.refreshUserProfile(),mt.plugin("@aerogel/local-first")||g1(r.authenticator.engine),gg.setEngine(r.authenticator.engine),Ho.setEngine(r.authenticator.engine),oo.setEngine(r.authenticator.engine),await qe.emit("auth:login",r)},onSessionFailed:async(r,s)=>{var i;this.setState({session:null,previousSession:{profile:(i=this.previousSession)==null?void 0:i.profile,authenticator:n.name,loginUrl:r,error:s}})},onSessionEnded:()=>this.setState({session:null}),onAuthenticatedFetchReady:r=>qe.emit("auth:fetch-ready",r)}),await n.boot(),n}rememberProfile(e){this.setState({profiles:{...this.profiles,[e.webId]:e},staleProfiles:gr(this.staleProfiles,e.webId)})}async trackSolidModels(){qe.on("purge-storage",()=>this.collections={}),qe.on("soukai:track-models",async e=>{var n;lx(e)&&(e.on("created",async r=>{var s;const i=r.getContainerUrl();if(!i||r.getDefaultCollection()===i||(s=this.collections[r.static().modelName])!=null&&s.includes(i))return;const o=this.collections[r.static().modelName]??[];o.push(i),this.collections={...this.collections,[r.static().modelName]:o},await Li(e,i,{refresh:!1})}),await Promise.all(((n=this.collections[e.modelName])==null?void 0:n.map(r=>Li(e,r),{refresh:!1}))??[]))});for(const[e,n]of Object.entries(this.collections)){const r=_1().get(e);if(!(!r||!V6(r)))for(const s of n)await Li(r,s)}}};const dt=ts(sz);function iz(){$U("container_url",t=>{if(!t.endsWith("/"))return"containerEndingSlashMissing"})}const oz={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function az(t,e){return O(),re("svg",oz,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M15 2H5L4 8h12zM0 10s2 1 10 1s10-1 10-1l-4-2H4zm8 4h4v1H8z"},null,-1),U("circle",{cx:"6",cy:"15",r:"3",fill:"currentColor"},null,-1),U("circle",{cx:"14",cy:"15",r:"3",fill:"currentColor"},null,-1)]))}const lz=Ue({name:"ooui-user-anonymous",render:az}),cz=["src"],uz=pe({__name:"SolidImage",props:{src:{}},setup(t){const e=jA(async()=>{const r=await Jh.get(t.src)??await n(t.src),s=await(r==null?void 0:r.blob());return s&&URL.createObjectURL(s)});async function n(r){try{const s=await dt.fetch(r);return s.status!==200?null:(await Jh.store(r,s),Jh.get(r))}catch{return null}}return(r,s)=>(O(),re("img",{src:$(e)},null,8,cz))}}),dz={class:"relative flex items-center justify-center rounded-full bg-gray-200"},fz={key:1,class:"text-sm font-semibold tracking-wider text-gray-500","aria-hidden":"true"},U$=pe({__name:"SolidAvatar",setup(t){const e=ne(()=>{var n;return(((n=dt.user)==null?void 0:n.name)??"").trim().split(" ").map(r=>{var s;return(s=r[0])==null?void 0:s.toUpperCase()}).join("").slice(0,3)});return(n,r)=>{var s,i;return O(),re("div",dz,[(s=n.$solid.user)!=null&&s.avatarUrl?(O(),ae(uz,{key:0,src:(i=n.$solid.user)==null?void 0:i.avatarUrl,alt:"",class:"absolute inset-0 size-full rounded-full"},null,8,["src"])):e.value?(O(),re("span",fz,ue(e.value),1)):(O(),ae($(lz),{key:2,class:"size-6 text-gray-500"}))])}}}),hz={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function pz(t,e){return O(),re("svg",hz,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M9 2h9c1.1 0 2 .9 2 2v16c0 1.1-.9 2-2 2H9c-1.1 0-2-.9-2-2v-2h2v2h9V4H9v2H7V4c0-1.1.9-2 2-2"},null,-1),U("path",{fill:"currentColor",d:"M10.09 15.59L11.5 17l5-5l-5-5l-1.41 1.41L12.67 11H3v2h9.67z"},null,-1)]))}const mz=Ue({name:"ic-baseline-log-in",render:pz}),gz={key:2,class:"flex w-full justify-center gap-2"},yz=pe({__name:"SolidLogin",props:{class:{default:""},buttonClass:{},layout:{default:"horizontal"},noLoading:{type:Boolean},allowLegacyAuthenticator:{type:Boolean}},setup(t){const e={inrupt:"Log in using Inrupt's authentication library",legacy:"Log in using the legacy authentication library"},n=ef({url:Ty(),authenticator:Cm()}),r=Object.keys(e),s=xe(!1),i=xe(!1),o=ne(()=>!a.value||i.value),a=ne(()=>mt.development&&(!n.url||n.url==="dev"||n.url.trim().length===0)),l=ne(()=>Mt("flex flex-col items-center gap-2 w-full md:w-auto",t.class)),c=ne(()=>Mt("w-full whitespace-nowrap",{"md:w-auto":t.layout==="horizontal"&&!n.authenticator},t.buttonClass));function u(f){return Ne(`solid.logIn.switchAuthenticator${f.charAt(0).toUpperCase()+f.slice(1)}`,e[f])}async function d(){if(t.noLoading){await dt.login(n.url,{authenticator:n.authenticator});return}await ft.loading(Ne("solid.loginOngoing","Logging in..."),dt.login(n.url))}return(f,h)=>{const m=vE("measure");return O(),ae($(nf),{form:$(n),class:Je(l.value),onSubmit:d},{default:Y(()=>[U("div",{class:Je(["flex w-full flex-col items-center gap-2",{"md:flex-row":f.layout==="horizontal"&&!$(n).authenticator}])},[o.value?(O(),ae($(Ry),{key:0,name:"url","aria-label":f.$td("solid.logIn.label","Login url"),placeholder:f.$td("solid.logIn.placeholder","https://me.solidcommunity.net"),class:"w-full md:min-w-96"},null,8,["aria-label","placeholder"])):Te("",!0),$(n).authenticator?(O(),ae($(Cy),{key:1,name:"authenticator",class:"w-full max-w-full md:min-w-96","label-class":"sr-only","options-class":"md:w-96 w-full max-w-[calc(100vw-4rem)]",label:f.$td("solid.logIn.switchAuthenticatorLabel","Authentication method"),options:$(r),"render-option":u},null,8,["label","options"])):Te("",!0),a.value&&!i.value?(O(),re("div",gz,[K($(at),{variant:"secondary",class:"group gap-0",title:f.$td("solid.logIn.manualUrl","Enter url"),onClick:h[0]||(h[0]=y=>i.value=!0)},{default:Y(()=>[K($(mz),{class:"size-4"}),zs((O(),re("span",{class:Je(["overflow-hidden pl-1 whitespace-nowrap",{"opacity-0":!s.value,"w-0 transition-[width] md:group-hover:w-(--width)":s.value}])},[je(ue(f.$td("solid.logIn.manualUrl","Enter url")),1)],2)),[[m,()=>s.value=!0,void 0,{css:!0}]])]),_:1},8,["title"]),K($(at),{disabled:f.noLoading&&f.$solid.loginOngoing,submit:"",class:"whitespace-nowrap",onClick:h[1]||(h[1]=y=>$(n).url="dev")},{default:Y(()=>[je(ue(f.$td("solid.logIn.dev","Log in to dev server")),1)]),_:1},8,["disabled"])])):(O(),ae($(at),{key:3,disabled:f.noLoading&&f.$solid.loginOngoing,submit:"",class:Je(c.value)},{default:Y(()=>[je(ue(f.$td("solid.logIn.submit","Log in")),1)]),_:1},8,["disabled","class"]))],2),f.allowLegacyAuthenticator&&o.value&&!$(n).authenticator?(O(),ae($(wo),{key:0,class:"text-sm font-normal text-gray-700",onClick:h[2]||(h[2]=y=>$(n).authenticator="inrupt")},{default:Y(()=>[je(ue(f.$td("solid.logIn.switchAuthenticator","Can't log in? Try using a different authentication method")),1)]),_:1})):Te("",!0)]),_:1},8,["form","class"])}}}),vz={$solid:dt};function bz(t={}){return{async install(e){v2(),tz({...Z6,...t.authenticators??{}}),iz(),ez(F$(t.defaultAuthenticator??"inrupt")),b4(n=>{if(n instanceof td)return n.description?`${n.message} (${n.description})`:n.message}),typeof t.autoReconnect=="boolean"&&(qy.autoReconnect=t.autoReconnect,dt.hasPersistedState()||(dt.autoReconnect=t.autoReconnect)),t.onUserProfileLoaded&&qe.on("solid:user-profile-loaded",([n,r])=>{var s;(s=t.onUserProfileLoaded)==null||s.call(t,n,r)}),await Ro(e,vz)}}}var _z=Object.defineProperty,wz=(t,e,n)=>e in t?_z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yt=(t,e,n)=>wz(t,typeof e!="symbol"?e+"":e,n);const rp=new WeakMap;function Nm(t){return un(ni(t).map(e=>{const n=t.instance().requireRelation(e).relatedClass;return ga(n)?!1:n}))}function ni(t){return rp.has(t)||rp.set(t,t.relations.filter(e=>jt.reservedRelations.includes(e)?!1:t.instance().requireRelation(e)instanceof ax)),rp.get(t)??[]}function B$(t){return ni(t.static()).reduce((e,n)=>e.concat(t.getRelationModels(n)??[]),[])}function m0(t){const e=new Set,n=t.instance();e.add(t);for(const r of t.relations)t.reservedRelations.includes(r)||e.add(n.requireRelation(r).relatedClass);return[...e.values()]}function fo(t){return t.getRelatedModels().filter(e=>!cn(e,gg)&&!cn(e,oo)&&!cn(e,mg)&&!cn(e,bd)&&e.static()!==Tr)}function z$(t){if(t.isDirty())return!0;if(!(t instanceof Tr))return!1;const e=n=>{var r;return(r=t.getRelationModels(n))==null?void 0:r.some(s=>z$(s))};return ni(t.static()).some(e)}async function jm(t,e){const n=["authorizations","metadata","operations","tombstone"];let r;do{r=!1;const s=fo(t);for(const i of s)for(const o of i.static("relations"))if(!(n.includes(o)||i.isRelationLoaded(o)||i.getRelation(o)instanceof sx))try{await i.loadRelation(o),r=!0}catch(a){if(!e)throw a;e(a)}}while(r)}const xz=On(()=>mt.service("$cloud"));class Ez{constructor(){Yt(this,"models",new Set),Yt(this,"promises",[])}push(e){this.models.add(e),this.syncAfter(Ir({seconds:1}))}clear(e){if(!e){this.models=new Set;return}for(const n of e)this.models.delete(n)}async syncAfter(e){const n=typeof e=="function"?e():e;return this.promises.push(n),n.then(()=>ar(this.promises,n)),this.promises.length===1&&this.schedule(),n}schedule(){Promise.all(this.promises).then(()=>Ir()).then(()=>{if(this.promises.length!==0){this.schedule();return}const e=this.consume();e.length!==0&&xz.syncIfOnline(e)})}consume(){const e=[],n=new Set;for(const r of this.models)js(r)&&(this.models.delete(r),B$(r).forEach(s=>n.add(s)),e.push(r));for(const r of this.models)this.models.delete(r),!n.has(r)&&e.push(r);return e}}const nd=ts(Ez),Et=On(()=>mt.service("$cloud")),V$=new WeakMap,Ky=new WeakMap,sp=new WeakMap;function H$(t,e){if(e??(e=new Set),!e.has(t)){e.add(t);for(const n of t.relations)H$(t.instance().requireRelation(n).relatedClass,e)}return e}function Sz(t){const e=t.getRelatedModels().concat([t]);for(const n of e)n.cleanDirty(!0)}function Az(t){const e=fo(t).concat([t]);for(const n of e){if(!n.operations||n.operations.length===0)continue;const r=(n.operations??[]).filter(s=>!(s instanceof Gs)||!n.ignoreRdfPropertyHistory(s.property,!0));if(!r.some(s=>!s.isInception(n))){n.setRelationModels("operations",[]);continue}n.setRelationModels("operations",r)}}async function g0(t){Et.setState({localModelUpdates:{...Et.localModelUpdates,[t.url]:1}}),Dz(t.static())&&await Fm(t.static(),Zt(t.url)),Et.autoPush&&Et.ready&&!Et.syncing&&nd.push(t)}function $z(t,e){var n;const r=Pr(Tr),s=(n=Et.registeredModels.find(({modelClass:i})=>i===t.static()))==null?void 0:n.path;return new r({url:pu(W$(t,e).static(),s)})}async function Fm(t,e){var n;(n=Et.modelCollections[t.modelName])!=null&&n.includes(e)||(Et.setState("modelCollections",{...Et.modelCollections,[t.modelName]:(Et.modelCollections[t.modelName]??[]).concat(e)}),await Li(t,e))}async function y0(t){if(Cz(t))return;const e=Et.localModelUpdates[t.url]??0;Et.setState({localModelUpdates:t.isSoftDeleted()?Ws(Et.localModelUpdates,t.url):{...Et.localModelUpdates,[t.url]:e+1}}),await Et.getDocumentsCache().forget(Zt(t.requireDocumentUrl()),t.requireDocumentUrl()),Et.autoPush&&Et.ready&&!Et.syncing&&nd.push(t)}function Um(t,e){const n={},r=Array.from(t);for(const[s,i]of Object.entries(Et.localModelUpdates)){const o=kr(s);(t.has(s)||r.some(a=>a.endsWith("/")&&s.startsWith(a)))&&!(e!=null&&e.has(o))||(n[s]=i)}Et.setState({localModelUpdates:n})}function q$(t,e={}){const n=Array.from(new Set(fo(t).map(r=>r.static()))).map(r=>[r,Pr(r)]);return Be(t.clone({constructors:n}),r=>{Az(r),e.clean&&Sz(r)})}function K$(t){return t.clone({constructors:hl(t)})}async function v0(t,e,n){const r=Pr(Oi),s=e.map(a=>a.url),i=t.filter(a=>!s.includes(a.url)).map(a=>a.requireDocumentUrl()).filter(a=>!n.has(a)),o=await r.all({$in:i});return e.concat(o)}function Cz(t){return!t.getDocumentModels().flatMap(e=>{var n;return((n=e.operations)==null?void 0:n.map(r=>[e,r]))??[]}).some(([e,n])=>{var r,s;return n.date.getTime()!==((s=(r=e.metadata)==null?void 0:r.updatedAt)==null?void 0:s.getTime())?!1:n instanceof Gs?!e.ignoreRdfPropertyHistory(n.property,!0):!0})}function hl(t){const e=t.static();if(!sp.has(e)){const n=Array.from(H$(e)).map(r=>G$(r)?[r,Lz(r)]:[r,Pr(r)]).map(([r,s])=>[[r,s],[s,r]]).flat();for(const r of n)sp.set(r[0],n)}return On(sp.get(e))}function W$(t,e){return e.get(t.url)??K$(t)}function Bm(){return[...Et.registeredModels].map(({modelClass:t})=>$i(t,{includeSoftDeleted:!0})).flat()}function kz(){return Et.schemaMigrations}function Iz(){Et.schemaMigrations.clear()}function b0(t){return Et.schemaMigrations.get(t)}function Pr(t){return V$.get(t)??Pz(t)}function pu(t,e){const n=dt.requireUser().storageUrls[0],r=ga(t)&&ni(t).map(s=>{const i=t.instance().requireRelation(s).relatedClass;return ga(i)?null:i}).filter(Boolean)[0];return e??(e=`/${(r||t).modelName.toLowerCase()}s/`),vp((e.startsWith("/")?n.slice(0,-1):n)+e)}function Rz(t,e){return e.get(t.url)??q$(t)}function Tz(t){for(const{modelClass:e}of Et.registeredModels)if($i(e).some(n=>n.url===t.url))return!0;return!1}function kl(t){return G$(t.static())}function G$(t){return Ky.has(t)}function Oz(t){return!kl(t)}function Dz(t){return Et.registeredModels.some(({modelClass:e})=>e===t)}function Pz(t){var e;const n=t,r=(i,o)=>{i.timestamps=n.timestamps,i.history=n.history,o(),i.timestamps=[],i.history=!1},s=(e=class extends n{initialize(i,o){r(this._proxy.static(),()=>super.initialize(i,o))}initializeRelations(){super.initializeRelations();for(const i of Object.values(this._relations))i.relatedClass=Pr(i.relatedClass)}fixMalformedAttributes(){r(this.static(),()=>super.fixMalformedAttributes())}},Yt(e,"timestamps",!1),Yt(e,"history",!1),e);return n.on("schema-updated",async i=>{await s.updateSchema({...i,timestamps:!1,history:!1})}),t.ensureBooted(),Zm({[`Remote${t.modelName}`]:s}),mt.service("$cloud")&&Et.getEngine()&&s.setEngine(Et.requireEngine()),V$.set(n,s),Ky.set(s,n),s}function Lz(t){return Ky.get(t)??Ye(`Couldn't find local class for ${t.modelName}`)}class Mz extends Oy{constructor(){super(...arguments),Yt(this,"urlMigrations",[]),Yt(this,"collectionMigrations",[])}migrateUrl(e,n,r){this.urlMigrations.push({modelClass:e,local:n,remote:r})}migrateCollection(e,n,r){this.collectionMigrations.push({modelClass:e,local:n,remote:r})}async run(){const e=Xm(),n=await e.getCollections(),r=new Set;for(const s of n){const i=await e.readMany(s);for(const[o,a]of Object.entries(i)){const l=this.replaceUrl(o);await e.create(Zt(l),this.replaceDocumentUrls(a),l),await e.delete(s,o)}}for(const{modelClass:s,remote:i}of this.urlMigrations)Li(s,Zt(i));for(const{modelClass:s,local:i,remote:o}of this.collectionMigrations){const a=Object.assign({},dt.collections),l=(dt.collections[s.modelName]??[]).filter(c=>!i.startsWith(c));p0(s,i),Li(s,o);for(const c of dt.collections[s.modelName]??[]){const u=this.replaceUrl(c);u!==c&&(p0(s,c),Li(s,u))}dt.collections=a,n.filter(c=>i.startsWith(c)).forEach(c=>r.add(c)),l.length>0?a[s.modelName]=l:delete a[s.modelName]}await e.dropCollections(Array.from(r))}replaceDocumentUrls(e){for(const[n,r]of Object.entries(e)){if(n==="@id"&&typeof r=="string"){e[n]=this.replaceUrl(r);continue}typeof r!="object"||r===null||(e[n]=this.replaceDocumentUrls(r))}return e}replaceUrl(e){for(const{local:n,remote:r}of this.urlMigrations)if(e.startsWith(n))return e.replace(n,r);for(const{local:n,remote:r}of this.collectionMigrations)if(e.startsWith(n))return e.replace(n,r);return e}}function Nz(t){const e={};return async()=>("value"in e||(e.value=await t()),e.value)}class J${async loadContainedModels(e,n={}){if(Oz(e)){const u=[];for(const d of ni(e.static())){const f=await e.loadRelationIfUnloaded(d)??[];u.push(...vn(f))}return u}const r={},s=[],i=kn(e.documents,"url"),o=xk(e.resourceUrls,10),a=o.flat().map(u=>({documentUrl:u,completed:!1})),l=kn(a,"documentUrl");n.status&&(n.status.children=a);for(const u of o)await Promise.all(u.map(async d=>{var f;const{children:h,tombstones:m}=await this.loadDocumentChildren(e,d,i,n.onDocumentError,n.onDocumentRead);s.push(...m);for(const[y,S]of Object.entries(h))(r[y]??(r[y]=[])).push(...S);d.endsWith("/")||(On(l.get(d)).completed=!0,await((f=n.onDocumentLoaded)==null?void 0:f.call(n)))}));for(const[u,d]of Object.entries(r))e.setRelationModels(u,d);const c=n.ignoreTombstones?Object.values(r).flat():Object.values(r).flat().concat(s);return n.status&&(n.status.children=c.map(u=>On(l.get(u.requireDocumentUrl())))),c}async loadContainedDocuments(e,n={}){var r,s,i;if(!kl(e))throw Error("Cannot get contained models from local model");const o={},a=e.requireEngine();for(let l=0;l<e.resourceUrls.length;l++){const c=e.resourceUrls[l];if(!c||c.endsWith("/"))continue;o[c]=await a.readOne(e.url,c);const u=(s=(r=n.status)==null?void 0:r.children)==null?void 0:s[l];u&&(u.completed=!0),await((i=n.onDocumentLoaded)==null?void 0:i.call(n))}return o}async loadDocumentChildren(e,n,r,s,i){return this.loadDocumentChildrenFromRemote(e,n,s,i)}async loadDocumentChildrenFromRemote(e,n,r,s){const i={},o=[],a=Nz(async()=>{try{const l=e.documents.find(d=>d.url===n),c=await e.requireEngine().readOne(Zt(n),n),u=await Oi.createManyFromEngineDocuments({[n]:c});return o.push(...u),l&&(s==null||s(l)),c}catch(l){if(cn(l,cs))return null;if(!r)throw l;return r(l),null}});for(const l of ni(e.static())){const c=e.requireRelation(l);if(c.loaded){i[l]=c.getLoadedModels();continue}const u=await a();if(u)try{const d=await c.relatedClass.createManyFromEngineDocuments({[n]:u});i[l]=d}catch(d){if(!r)throw d;r(d)}}return{children:i,tombstones:o}}}const al=new WeakMap;class Y${async loadTypeIndex(e={}){const n=dt.requireUser();return(e.fresh||!al.has(n))&&al.set(n,await dt.findPrivateTypeIndex({fresh:e.fresh})),e.create&&!al.get(n)&&al.set(n,await dt.findOrCreatePrivateTypeIndex()),al.get(n)??null}}class X${async indexLocalModels(e){for(const n of e)await this.addLocalModel(n)}async addLocalModel(e){if(!this.localModels.hasKey(e.url)){this.localModels.add(e),await jm(e);for(const n of fo(e))await this.addLocalModel(n)}}}const jz=Oy;let Q$=class Z$ extends ud(jz,[J$,Y$,X$]){constructor(){super(),Yt(this,"_models"),this.localModels=kn([],"url")}static restore(e){return Be(new Z$,n=>{n.status=e})}get models(){return this._models}set models(e){if(!e){delete this._models,this.localModels=kn([],"url");return}const n=K0(this.status.children??[],"modelUrl");this._models=e,this.localModels=kn([],"url"),this.status.children=e.map(r=>n[r.url]??{modelUrl:r.url,completed:!1})}async run(){if(!this.models)throw new Error("Cant start migration without models");await this.indexLocalModels(this.models);const e=this.status.children??[],n=await this.loadTypeIndex();for(const r of e){const s=this.models.find(({url:i})=>r.modelUrl===i);!s||r.completed||(await this.migrateRegisteredModel(s,r,n),await this.updateProgress(()=>r.completed=!0))}for(const[r,s]of kz())await r.updateSchema(s);Iz()}async migrateRegisteredModel(e,n,r){if(await this.migrate(e,n),!js(e))return;const s=Nm(e.static()),i=r==null?void 0:r.registrations.find(({instanceContainer:o})=>o===e.url);!r||!i||s.length===0||(i.setAttribute("forClass",s.map(o=>{var a;return((a=b0(o))==null?void 0:a.rdfsClasses)??o.rdfsClass}).flat()),await r.save())}async migrate(e,n){this.assertNotCancelled(),await this.migrateChildren(e,n);const r=b0(e.static());if(!r)return;const s=await Pr(e.static()).find(e.url),i=await(s==null?void 0:s.migrateSchema(r));await e.migrateSchema(r,{mintOperationUrl:o=>{var a,l;return(l=(a=i==null?void 0:i.operations)==null?void 0:a.find(c=>!cn(o,Gs)||!cn(c,Gs)?!1:o.property===c.property&&o.date.getTime()===c.date.getTime()))==null?void 0:l.url}})}async migrateChildren(e,n){if(!js(e))return;const r=await this.loadContainedModels(e,{ignoreTombstones:!0});n.children??(n.children=r.map(s=>({modelUrl:s.url,completed:!1})));for(const s of n.children){const i=r.find(({url:o})=>s.modelUrl===o);!i||s.completed||(await this.migrate(i,s),await this.updateProgress(()=>s.completed=!0))}}};const Bo=On(()=>mt.service("$cloud")),Fz=Oy;function Uz(t){return!!t&&"root"in t}class Bz extends ud(Fz,[J$,Y$,X$]){constructor(e){super(),Yt(this,"documentsWithErrors"),Yt(this,"models"),Yt(this,"dirtyRemoteModels"),Yt(this,"rootLocalModels"),Yt(this,"tombstones"),Yt(this,"syncedModelUrls"),Yt(this,"documentsModifiedAt"),Yt(this,"screenLock",null),Yt(this,"localModels"),this.documentsWithErrors=new Set,this.models=e,this.rootLocalModels=[],this.localModels=kn([],"url"),this.tombstones=kn([],"resourceUrl"),this.syncedModelUrls=new Set,this.documentsModifiedAt={}}async run(){const e=dt.requireAuthenticator().engine,n=(s,{headers:i},o)=>{const a=(i==null?void 0:i.get("last-modified"))??o;!a||s.endsWith("/")||(this.documentsModifiedAt[s]=new Date(a))},r=e.listeners.add({onDocumentRead:(s,i)=>n(s,i),onDocumentUpdated:(s,i)=>n(s,i,new Date)});try{this.lockScreen(),this.rootLocalModels=this.models??Bm(),e.setConfig({cachesDocuments:!0,persistentCache:Bo.getDocumentsCache()}),await this.indexLocalModels(this.rootLocalModels),await this.pullChanges(),await this.pushChanges(),e.clearCache(),e.setConfig({cachesDocuments:!1,persistentCache:void 0})}finally{this.releaseScreen(),r()}}lockScreen(){const e=navigator;if(e.wakeLock)try{this.screenLock=e.wakeLock.request("screen").catch(n=>{bs.reportDevelopmentError(n,"Could not request screen wake lock")})}catch(n){bs.reportDevelopmentError(n,"Could not request screen wake lock")}}releaseScreen(){this.screenLock&&(this.screenLock.then(e=>e==null?void 0:e.release()),this.screenLock=null)}getInitialStatus(){return{root:!0,completed:!1,children:[{completed:!1},{completed:!1}]}}calculateCurrentProgress(e){return e??(e=this.status),Uz(e)?s1(this.calculateCurrentProgress(e.children[0])*.9+this.calculateCurrentProgress(e.children[1])*.1,2):super.calculateCurrentProgress(e)}async pullChanges(){const e=this.models?await this.fetchRemoteModelsForLocal(this.models):await this.fetchRemoteModels(),n=kn(e,r=>r instanceof Oi?r.resourceUrl:r.url);this.dirtyRemoteModels=await this.synchronizeModels(n),await this.updateProgress(r=>r.children[0].completed=!0)}async pushChanges(){const e=this.dirtyRemoteModels??[],n=this.status.children[1].children=e.map(()=>({completed:!1}));for(let s=0;s<e.length;s++){const i=e[s],o=n[s];if(i.isSoftDeleted()){i.enableHistory(),i.enableTombstone(),await i.forceDelete(),await this.updateProgress(()=>o.completed=!0);return}await this.saveModelAndRelated(i,o),await this.updateTypeRegistrations(i),await this.updateProgress(()=>o.completed=!0)}const r=Bo.getDocumentsCache();for(const[s,i]of Object.entries(this.documentsModifiedAt))await r.remember(Zt(s),s,i);Um(this.syncedModelUrls,this.documentsWithErrors),await this.updateProgress(s=>s.children[1].completed=!0)}async fetchRemoteModels(){const e=this.status.children[0],n=await this.loadTypeIndex({fresh:!0});if(!n)return[];const r=[],s=this.getTypeRegistrations(n);e.children=s.map(()=>({completed:!1}));for(let i=0;i<s.length;i++)await this.ignoringDocumentErrors(async()=>{var o,a,l;const c=On((o=e.children)==null?void 0:o[i]),{registration:u,registeredModel:d}=On(s[i]),f=Pr(d.modelClass);if(!u.instanceContainer)return;if((a=Bo.rootModelCollections)[l=d.modelClass.modelName]??(a[l]=u.instanceContainer),ga(f)){await Fm(d.modelClass,Zt(u.instanceContainer));const m=await f.find(u.instanceContainer);m&&(await this.loadChildren(m,c),r.push(m)),await this.updateProgress(()=>c.completed=!0);return}const h=await this.fetchRemoteModelsFromContainer(c,d.modelClass,f,u.instanceContainer);r.push(...h),await this.updateProgress(()=>c.completed=!0)});for(const i of r)await jm(i,o=>this.handleDocumentError(o));return v0(this.rootLocalModels,r,this.documentsWithErrors)}async fetchRemoteModelsFromContainer(e,n,r,s){var i;const o=await Pr(Tr).find(s);if(!o)return[];e.children=o.resourceUrls.map(()=>({completed:!1}));const a=await this.loadContainedDocuments(o,{status:e,onDocumentError:c=>this.handleDocumentError(c),onDocumentRead:c=>{c.url.endsWith("/")||!c.updatedAt||c.url in this.documentsModifiedAt||(this.documentsModifiedAt[c.url]=c.updatedAt)},onDocumentLoaded:async()=>{this.assertNotCancelled(),await this.updateProgress()}}),l=await r.createManyFromEngineDocuments(a);l.length>0&&await Fm(n,s);for(let c=0;c<o.resourceUrls.length;c++){const u=o.resourceUrls[c];if(!(u!=null&&u.endsWith("/")))continue;const d=await this.fetchRemoteModelsFromContainer(On((i=e.children)==null?void 0:i[c]),n,r,u);l.push(...d),await this.updateProgress(()=>e.completed=!0)}return l}async fetchRemoteModelsForLocal(e){const n=[],r=this.status.children[0].children=e.map(()=>({completed:!1}));for(let s=0;s<e.length;s++)await this.ignoringDocumentErrors(async()=>{const i=e[s],o=r[s],a=await Pr(i.static()).find(i.url);if(!a){await this.updateProgress(()=>o.completed=!0);return}js(a)&&await this.loadChildren(a,o),n.push(a),await this.updateProgress(()=>o.completed=!0)});for(const s of n)await jm(s,i=>this.handleDocumentError(i));return v0(e,n,this.documentsWithErrors)}getTypeRegistrations(e){const n=new Set,r=[...Bo.registeredModels].map(({modelClass:o})=>{const a=ga(o)?Nm(o):[];return{modelClass:o,rdfsClasses:a.length>0?a.map(l=>l.rdfsClasses).flat():o.rdfsClasses}}),s=e.registrations.map(o=>{const a=r.find(({rdfsClasses:l})=>!!o.instanceContainer&&l.some(c=>o.forClass.includes(c)));return!a||!o.instanceContainer||n.has(o.instanceContainer)?null:(n.add(o.instanceContainer),{registration:o,registeredModel:a})}).filter(o=>!!o),i=s.map(({registration:o})=>o.instanceContainer);return s.filter(({registration:o})=>!i.some(a=>{var l;return a&&a!==o.instanceContainer&&((l=o.instanceContainer)==null?void 0:l.startsWith(a))}))}async updateTypeRegistrations(e){if(!Tz(e))return;const n=js(e)?e:$z(e,this.localModels),r=js(e)?Nm(e.static()):[e.static()];if(r.length===0)return;const s=await this.loadTypeIndex({create:!0});s.registrations.some(i=>i.instanceContainer&&e.url.startsWith(i.instanceContainer))||await n.register(s,r)}async loadChildren(e,n){var r,s;if(this.assertNotCancelled(),!js(e))return;const i=await this.loadContainedModels(e,{status:n,onDocumentError:o=>this.handleDocumentError(o),onDocumentRead:o=>{o.url.endsWith("/")||!o.updatedAt||o.url in this.documentsModifiedAt||(this.documentsModifiedAt[o.url]=o.updatedAt)},onDocumentLoaded:async()=>{this.assertNotCancelled(),await this.updateProgress()}});for(let o=0;o<i.length;o++){const a=i[o];if(a instanceof Oi){this.tombstones.add(a);continue}if(this.tombstones.hasKey(a.url)){await this.deleteChild(e,a);continue}await this.loadChildren(a,(r=n==null?void 0:n.children)==null?void 0:r[o]),(s=n==null?void 0:n.children)!=null&&s[o]&&await this.updateProgress(()=>{var l;return On((l=n.children)==null?void 0:l[o]).completed=!0})}}async deleteChild(e,n){for(const r of e.static("relations")){const s=e.requireRelation(r);if(s.related){if(Array.isArray(s.related)){s.related=s.related.filter(i=>i!==n);continue}if(s.related===n){s.related=null;continue}}}await n.forceDelete()}async saveModelAndRelated(e,n,r){if(this.assertNotCancelled(),r??(r=new Set),r.has(e))return;if(r.add(e),kl(e)&&e.isSoftDeleted()){e.enableHistory(),e.enableTombstone(),await e.forceDelete();return}if(e.getDocumentUrl()&&this.documentsWithErrors.has(e.requireDocumentUrl()))return;const s=e.isDirty();if(await e.save(),(s||kl(e))&&this.syncedModelUrls.add(e.url),kl(e)){const a=e.requireDocumentUrl(),l=this.documentsModifiedAt[a];l&&(await Bo.getDocumentsCache().remember(Zt(a),a,l),delete this.documentsModifiedAt[a])}const i=gr(fo(e),e),o=n?i.map(()=>({completed:!1})):[];n&&(n.children=o);for(let a=0;a<i.length;a++){const l=i[a],c=o[a];await this.saveModelAndRelated(l,c,r),c&&await this.updateProgress(()=>c.completed=!0)}}async synchronizeModels(e){const n=new Set,r=new Set;for(const i of e.items()){if(i instanceof Oi){const a=this.localModels.get(i.resourceUrl);a&&(await a.forceDelete(),r.add(a));continue}const o=W$(i,this.localModels);o.exists()||this.syncedModelUrls.add(o.url),await this.loadChildren(o),await jt.synchronize(o,i,{constructors:hl(o)}),await this.reconcileInconsistencies(o,i),await this.saveModelAndRelated(o),await this.addLocalModel(o),this.rootLocalModels.includes(o)||this.rootLocalModels.push(o),n.add(o.url)}for(const i of this.rootLocalModels){if(r.has(i)||n.has(i.url))continue;await this.loadChildren(i);const o=Rz(i,e);await jt.synchronize(i,o,{constructors:hl(i)}),e.add(o)}const s=[];for(const i of e.getItems()){if(z$(i)){s.push(i);continue}await this.rememberModelDocuments(i)}return s}async reconcileInconsistencies(e,n,r){e.rebuildAttributesFromHistory(),e.setAttributes(n.getAttributes(!0)),r??(r=new Set),r.add(e);for(const i of ni(e.static()))await this.synchronizeContainerDocuments(e.requireRelation(i),n.requireRelation(i));const s=kn(fo(n),"url");for(const i of fo(e))r.has(i)||!i.isRelationLoaded("operations")||!s.hasKey(i.url)||await this.reconcileInconsistencies(i,s.require(i.url),r);e.isDirty()&&await jt.synchronize(e,n,{constructors:hl(e)})}async synchronizeContainerDocuments(e,n){const r=kn(e.related??[],"url"),s=kn(n.related??[],"url"),i=r.getKeys().filter(a=>!s.hasKey(a)&&!s.hasKey(encodeURI(a))),o=s.getKeys().filter(a=>!r.hasKey(a)&&!r.hasKey(encodeURI(a)));for(const a of i){const l=r.require(a),c=q$(l);n.addRelated(c),s.add(c)}for(const a of o){const l=s.require(a),c=K$(l);e.addRelated(c),r.add(c),this.syncedModelUrls.add(c.url)}for(const a of r.items()){const l=s.require(a.url);await jt.synchronize(a,l,{constructors:hl(a)}),await this.saveModelAndRelated(a)}}async rememberModelDocuments(e){if(!js(e)){const r=e.requireDocumentUrl(),s=this.documentsModifiedAt[r];s&&(await Bo.getDocumentsCache().remember(Zt(r),r,s),delete this.documentsModifiedAt[r]);return}const n=ni(e.static()).map(r=>e.getRelationModels(r)??[]).flat();for(const r of n)await this.rememberModelDocuments(r)}async ignoringDocumentErrors(e){try{await e()}catch(n){this.handleDocumentError(n)}}handleDocumentError(e){if(cn(e,j1)){console.warn(e.message),e.documentUrl&&this.documentsWithErrors.add(e.documentUrl);return}if(cn(e,y1)){console.warn(e.message);const n=e.attributes[Xt(e.modelName).primaryKey],r=n&&kr(Rt(n));r&&this.documentsWithErrors.add(r);return}throw e}}const Ft={Disconnected:"disconnected",Offline:"offline",Online:"online",Syncing:"syncing",Migrating:"migrating"},eC={manualSetup:!1},zz=Io({name:"cloud",persist:["localModelUpdates","migrationDismissed","migrationJob","modelCollections","rootModelCollections","pollingEnabled","pollingMinutes","ready","startupSync"],initialState:()=>({autoPush:!0,localModelUpdates:{},migrationDismissed:!1,migrationJob:null,migrationPostponed:!1,modelCollections:{},rootModelCollections:{},pollingEnabled:!0,pollingMinutes:10,ready:!1,manualSetup:eC.manualSetup,registeredModels:[],schemaMigrations:new Map,setupDismissed:!1,setupOngoing:!1,startupSync:!0,status:Ft.Disconnected,syncError:null,syncJob:null}),serialize:t=>{var e;return Ow(t,{migrationJob:(e=t.migrationJob)==null?void 0:e.serialize()})},restore:t=>Ow(t,{migrationJob:t.migrationJob&&Q$.restore(t.migrationJob)}),watch:{migrationJob(t){t==null||t.listeners.add({onUpdated:()=>this.updatePersistedState("migrationJob")})}},computed:{disconnected:({status:t})=>t===Ft.Disconnected,online:({status:t})=>t===Ft.Online,offline:({status:t})=>t===Ft.Offline,syncing:({status:t})=>t===Ft.Syncing,migrating:({status:t})=>t===Ft.Migrating,localChanges({localModelUpdates:t}){return Object.values(t).reduce((e,n)=>e+n,0)},dirty(){return this.localChanges>0},migrationStarted({migrationJob:t}){return!!t},migrationDisabledReason({status:t,ready:e}){return dt.isLoggedIn()?e?t===Ft.Syncing||t===Ft.Migrating?Ne("cloud.migrationNotSyncing","Wait for syncing to finish before starting the migration"):this.online?null:Ne("cloud.migrationNotOnline","You need to be online in order to start the migration"):Ne("cloud.migrationNotReady","You need to backup your data before starting the migration"):Ne("cloud.migrationNotLoggedIn","You need to reconnect before starting the migration")}}});class Vz extends zz{constructor(){super(...arguments),Yt(this,"asyncLock",new ad),Yt(this,"engine",null),Yt(this,"pollingInterval",null),Yt(this,"documentsCache",null)}async whenReady(e){return this.ready?e():new Promise(n=>{const r=()=>n(e());qe.once("cloud:ready",r)})}async setup(e){this.setupOngoing=!0;try{await this.backup(e),await this.setReady(!0),await this.sync()}finally{this.setupOngoing=!1}}getEngine(){return this.engine}requireEngine(){return this.engine??Ye("Could not get required Engine")}dismissSetup(){this.setupDismissed=!0}dismissMigration(){this.migrationDismissed=!0}postponeMigration(){this.migrationPostponed=!0}async syncIfOnline(e={}){this.online&&await this.sync(e)}async sync(e={}){const n=Tl(e)?{models:e}:e instanceof jt?{model:e}:e;!dt.isLoggedIn()||!this.ready||!this.online||await this.asyncLock.run(async()=>{let r=n.model?[n.model]:n.models;const s=Date.now();this.syncError=null,this.status=Ft.Syncing,nd.clear(r);try{await qe.emit("cloud:sync-started",r),n.refreshUserProfile&&await dt.refreshUserProfile();const i=n.syncDirty??!0;let o=0;do{if(this.syncJob=new Bz(r),this.syncJob.listeners.add(n),await Xh(this.syncJob),this.syncJob.cancelled)return;o++,r=this.getDirtyLocalModels().filter(a=>{var l;return!((l=this.syncJob)!=null&&l.documentsWithErrors.has(a.requireDocumentUrl()))})}while(i&&r.length>0&&o<3);Ol("unit")||await Ir({milliseconds:Math.max(500,1e3-(Date.now()-s))}),this.syncJob=null}catch(i){if(Ol())throw i;this.syncJob=null,this.syncError=i,await bs.report(i,Ne("cloud.syncFailed","Sync failed"))}finally{this.status=Ft.Online,await qe.emit("cloud:sync-completed",r)}})}shouldMigrate(){return this.schemaMigrations.size>0}async migrate(e){if(!this.online||!dt.isLoggedIn()||!this.ready)throw new Error("Data cannot be migrated at the moment");this.shouldMigrate()&&await this.asyncLock.run(async()=>{var n;this.status=Ft.Migrating,this.migrationJob??(this.migrationJob=new Q$);const r=Date.now(),s=[],i=(n=this.migrationJob).models??(n.models=Bm());nd.clear(i);try{if(e&&s.push(this.migrationJob.listeners.add(e)),await qe.emit("cloud:migration-started",i),await Xh(this.migrationJob),this.migrationJob.cancelled){await qe.emit("cloud:migration-cancelled",i);return}this.migrationJob=null,this.migrationDismissed=!1,this.migrationPostponed=!1,await Ir({milliseconds:Math.max(0,1e3-(Date.now()-r))}),await qe.emit("cloud:migration-completed",i)}catch(o){await bs.report(o,Ne("cloud.migrationFailed","Migration failed"))}finally{this.status=Ft.Online,s.forEach(o=>o==null?void 0:o())}})}async register(e,n={}){if(this.registeredModels.find(s=>e===s.modelClass))return;const r=this.engine;r&&m0(e).forEach(s=>Pr(s).setEngine(r)),this.whenReady(async()=>{const s=this.rootModelCollections[e.modelName];e.useSoftDeletes(!0),await e.exclusive(async()=>e.collection=s??pu(e,n.path))}),await N$(e,{created:s=>this.ready&&g0(s),updated:s=>this.ready&&y0(s),deleted:s=>this.ready&&Um(new Set([s.url??s.getDeletedPrimaryKey()]))}),ga(e)&&ni(e).forEach(s=>{const i=e.instance().requireRelation(s).relatedClass;i.on("created",o=>this.ready&&g0(o)),i.on("updated",o=>this.ready&&y0(o)),i.on("deleted",o=>this.ready&&Um(new Set([o.url??o.getDeletedPrimaryKey()])))}),this.registeredModels.push({modelClass:e,path:n.path});for(const s of this.modelCollections[e.modelName]??[])await Li(e,s)}registerSchemaMigration(e,n){this.schemaMigrations.set(e,n)}requireRemoteCollection(e){for(const n of this.registeredModels)if(e===n.modelClass)return pu(n.modelClass,n.path);throw new Error(`Failed resolving remote collection for '${e.modelName}' model`)}getDocumentsCache(){return this.documentsCache||(this.documentsCache=new b2(xy(),Xm())),this.documentsCache}async boot(){await dt.booted,dt.isLoggedIn()&&this.login(dt.authenticator),qe.on("auth:login",({authenticator:e})=>this.login(e)),qe.on("auth:logout",()=>this.logout()),qe.once("application-ready",()=>this.onApplicationReady()),qe.once("application-mounted",()=>this.onApplicationMounted()),Dt(()=>{if(this.pollingInterval&&clearInterval(this.pollingInterval),!this.pollingEnabled||this.migrationJob){this.pollingInterval=null;return}this.pollingInterval=setInterval(()=>this.sync(),this.pollingMinutes*60*1e3)}),this.watchNetworkStatus(),await this.bustDocumentsCache(),await this.registerModels()}getDirtyLocalModels(){const e=Object.keys(this.localModelUpdates),n=[];for(const{modelClass:r}of this.registeredModels)for(const s of $i(r,{includeSoftDeleted:!0}))n.push(...this.getModelsIn(e,s));return n}getModelsIn(e,n){const r=[];return e.includes(n.url)&&r.push(n),js(n)&&r.push(...B$(n).map(s=>this.getModelsIn(e,s)).flat()),r}async setReady(e){this.ready||!e||(await qe.emit("cloud:ready"),this.ready=!0)}async backup(e){await qe.emit("cloud:backup-started"),e??(e=new WeakMap);const n=new Mz;for(const{modelClass:r,path:s}of this.registeredModels){for(const[a,l]of Object.entries(e.get(r)??{}))n.migrateUrl(r,a,l);const i=r.instance().getDefaultCollection(),o=pu(r,s);await r.exclusive(async()=>r.collection=o),n.migrateCollection(r,i,o)}await Xh(n),await qe.emit("cloud:backup-completed")}async onApplicationReady(){this.ready||!dt.isLoggedIn()||await this.setReady(!Bm().some(e=>e.url.startsWith("solid://")))}async onApplicationMounted(){if(dt.isLoggedIn()&&!this.ready&&!this.manualSetup){await this.setup();return}this.syncOnStartup()&&await this.sync()}login(e){const n=[...this.registeredModels].map(({modelClass:r})=>m0(r)).flat().concat([Oi]);this.status=Ft.Online,this.engine=e.engine,Pr(Tr).setEngine(this.engine);for(const r of n)Pr(r).setEngine(this.engine)}async logout(){this.setState({autoPush:!0,localModelUpdates:{},migrationDismissed:!1,migrationJob:null,migrationPostponed:!1,modelCollections:{},rootModelCollections:{},pollingEnabled:!0,pollingMinutes:10,ready:!1,schemaMigrations:new Map,setupDismissed:!1,setupOngoing:!1,startupSync:!0,status:Ft.Disconnected,syncError:null,syncJob:null}),await this.getDocumentsCache().clear()}watchNetworkStatus(){globalThis.addEventListener("online",()=>{this.status===Ft.Offline&&(this.status=Ft.Online)}),globalThis.addEventListener("offline",()=>{this.status===Ft.Online&&(this.status=Ft.Offline)})}syncOnStartup(){return Yo("startupSync")?yu(gl("startupSync")):this.migrationJob?!1:this.startupSync}async bustDocumentsCache(){!Yo("bustDocumentsCache")||!yu(gl("bustDocumentsCache"))||await this.getDocumentsCache().clear()}async registerModels(){const e=_1();for(const n of e.values())!lx(n)||!n.cloud||await this.register(n,typeof n.cloud=="boolean"?{}:n.cloud)}}const Ar=ts(Vz),Hz={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function qz(t,e){return O(),re("svg",Hz,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"m6 2l2-2h4l2 2h4v2H2V2zM3 6h14l-1 14H4zm5 2v10h1V8zm3 0v10h1V8z"},null,-1)]))}const Kz=Ue({name:"zondicons-trash",render:qz}),tC=pe({__name:"AccountLoginModal",setup(t){return(e,n)=>(O(),ae($(ai),{title:e.$td("cloud.logIn.title","Connect account")},{default:Y(()=>[K($(Ut),{"lang-key":"cloud.logIn.info","lang-default":"Log in to your [Solid account](https://solidproject.org) to keep data safe across devices."}),K($(wo),{class:"text-sm",onClick:n[0]||(n[0]=r=>e.$ui.alert(e.$td("cloud.logIn.learnMore","What is Solid?"),e.$td("cloud.logIn.learnMoreMessage",`Solid is a decentralized storage protocol built on top of web standards. If you want to use this app across devices, you can use Solid to keep changes in sync. Even if you use it in a single device, this will also keep your data secure in case your device is lost.

In any case, Focus works 100% offline and you can connect your Solid POD later on. If you've never heard of Solid and you're just trying things out, you can keep using it without an account.

[Learn more](https://solidproject.org)`)))},{default:Y(()=>[je(ue(e.$td("cloud.logIn.learnMore","What is Solid?")),1)]),_:1}),K($(yz),{"no-loading":"",class:"mt-4"})]),_:1},8,["title"]))}}),Wz={key:0,class:"mt-4"},Gz={class:"text-base font-semibold"},Jz={class:"ml-1"},Yz=pe({__name:"PurgeData",setup(t){async function e(){await ft.confirm(Ne("settings.purgeConfirmTitle","Delete everything?"),Ne("settings.purgeConfirmMessage","If you proceed, all your data will be deleted forever. If you want to save it before wiping this device, you can [connect to your Solid account](#action:connect) first."),{acceptVariant:"danger",acceptText:Ne("settings.purgeConfirmAccept","Purge data"),actions:{connect:()=>ft.modal(tC)}})&&(await ft.closeAllModals(),await tf.purge())}return(n,r)=>n.$solid.hasLoggedIn()?Te("",!0):(O(),re("details",Wz,[U("summary",null,[U("span",Gz,ue(n.$td("settings.dangerZone","Danger zone")),1)]),K($(at),{variant:"danger",class:"mt-4",onClick:r[0]||(r[0]=s=>e())},{default:Y(()=>[K($(Kz),{class:"size-4"}),U("span",Jz,ue(n.$td("settings.purge","Purge data")),1)]),_:1})]))}}),Xz=[{priority:0,component:Yz}],Qz={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function Zz(t,e){return O(),re("svg",Qz,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M2.93 17.07A10 10 0 1 1 17.07 2.93A10 10 0 0 1 2.93 17.07m12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32M6.7 9.29L9 11.6l4.3-4.3l1.4 1.42L9 14.4l-3.7-3.7l1.4-1.42z"},null,-1)]))}const e7=Ue({name:"zondicons-checkmark-outline",render:Zz}),t7={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function n7(t,e){return O(),re("svg",t7,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5c0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5l5 5z"},null,-1)]))}const r7=Ue({name:"ic-sharp-cloud-upload",render:n7}),s7={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function i7(t,e){return O(),re("svg",s7,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M3.94 6.5L2.22 3.64l1.42-1.42L6.5 3.94c.52-.3 1.1-.54 1.7-.7L9 0h2l.8 3.24c.6.16 1.18.4 1.7.7l2.86-1.72l1.42 1.42l-1.72 2.86c.3.52.54 1.1.7 1.7L20 9v2l-3.24.8c-.16.6-.4 1.18-.7 1.7l1.72 2.86l-1.42 1.42l-2.86-1.72c-.52.3-1.1.54-1.7.7L11 20H9l-.8-3.24c-.6-.16-1.18-.4-1.7-.7l-2.86 1.72l-1.42-1.42l1.72-2.86c-.3-.52-.54-1.1-.7-1.7L0 11V9l3.24-.8c.16-.6.4-1.18.7-1.7M10 13a3 3 0 1 0 0-6a3 3 0 0 0 0 6"},null,-1)]))}const nC=Ue({name:"zondicons-cog",render:i7}),o7={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function a7(t,e){return O(),re("svg",o7,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6q.425 0 .713.288T12 4t-.288.713T11 5H5v14h6q.425 0 .713.288T12 20t-.288.713T11 21zm12.175-8H10q-.425 0-.712-.288T9 12t.288-.712T10 11h7.175L15.3 9.125q-.275-.275-.275-.675t.275-.7t.7-.313t.725.288L20.3 11.3q.3.3.3.7t-.3.7l-3.575 3.575q-.3.3-.712.288t-.713-.313q-.275-.3-.262-.712t.287-.688z"},null,-1)]))}const l7=Ue({name:"material-symbols-logout-rounded",render:a7}),c7={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function u7(t,e){return O(),re("svg",c7,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M10 3v2a5 5 0 0 0-3.54 8.54l-1.41 1.41A7 7 0 0 1 10 3m4.95 2.05A7 7 0 0 1 10 17v-2a5 5 0 0 0 3.54-8.54zM10 20l-4-4l4-4zm0-12V0l4 4z"},null,-1)]))}const qc=Ue({name:"zondicons-refresh",render:u7}),d7={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function f7(t,e){return O(),re("svg",d7,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M6 6h12v12H6z"},null,-1)]))}const h7=Ue({name:"ic-baseline-stop",render:f7}),p7={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function m7(t,e){return O(),re("svg",p7,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M449.07 399.08L278.64 82.58c-12.08-22.44-44.26-22.44-56.35 0L51.87 399.08A32 32 0 0 0 80 446.25h340.89a32 32 0 0 0 28.18-47.17m-198.6-1.83a20 20 0 1 1 20-20a20 20 0 0 1-20 20m21.72-201.15l-5.74 122a16 16 0 0 1-32 0l-5.74-121.95a21.73 21.73 0 0 1 21.5-22.69h.21a21.74 21.74 0 0 1 21.73 22.7Z"},null,-1)]))}const Kc=Ue({name:"ion-warning",render:m7}),g7={class:"relative flex items-center rounded-md bg-gray-100 p-4 pr-12"},y7={class:"flex flex-col overflow-hidden"},v7={class:"font-semibold"},b7={class:"px-2"},_7={key:0,class:"mt-4 flex items-center gap-2"},w7={class:"flex w-full flex-col"},x7={key:1,class:"mt-4 flex items-center gap-2"},E7={key:2,class:"mt-4 flex items-center gap-2"},S7={key:3,class:"mt-4 flex items-center gap-2"},A7={key:4,class:"mt-4 flex items-center gap-2"},$7={key:5,class:"mt-4 flex items-center gap-2"},C7={key:6,class:"mt-4 flex items-center gap-2"},k7={class:"flex flex-col gap-2"},I7={class:"flex items-center"},R7={"aria-hidden":"true"},T7={key:0,"aria-hidden":"true"},O7={key:0,class:"mt-4 flex flex-row-reverse justify-start gap-2"},D7=pe({__name:"AccountModal",setup(t){const e=si("$modalRef"),n=xe(!1),r=Ne("cloud.advanced.polling","Synchronize every {minutes} minutes",{minutes:"%%separator%%"}).split("%%separator%%"),s=ne(()=>dt.error??Ar.syncError),i=ne(()=>{if(s.value)return typeof s.value=="string"?s.value:Ne("cloud.info.error","There has been an error connecting.")}),o=ne(()=>s.value&&typeof s.value!="string");async function a(){Ar.syncJob&&(n.value=!0,await Promise.race([Ar.syncJob.cancel(),Ar.syncJob.completed]),n.value=!1)}return Sy("auth:logout",()=>{var l;return(l=e.value)==null?void 0:l.close()}),(l,c)=>(O(),ae($(ai),{ref:"$modalRef","title-hidden":"","close-hidden":"",title:l.$td("account.title","Account")},{default:Y(()=>{var u,d;return[U("div",g7,[K($(U$),{class:"mr-2 size-16 shrink-0"}),U("div",y7,[U("span",v7,ue(((u=l.$solid.user)==null?void 0:u.name)??l.$td("user.anonymous","Anonymous")),1),K($(wo),{href:(d=l.$solid.user)==null?void 0:d.webId,class:"mt-0.5 truncate text-sm font-light text-gray-500"},{default:Y(()=>{var f;return[je(ue((f=l.$solid.user)==null?void 0:f.webId),1)]}),_:1},8,["href"])]),K($(at),{size:"icon",variant:"ghost",class:"absolute top-1 right-1 hover:bg-gray-200","aria-label":l.$td("user.settings","Settings"),title:l.$td("user.settings","Settings"),onClick:c[0]||(c[0]=f=>l.$ui.modal($(l$)))},{default:Y(()=>[K($(nC),{class:"size-5"})]),_:1},8,["aria-label","title"])]),U("div",b7,[l.$cloud.syncing?(O(),re("div",_7,[K($(qc),{class:"mt-0.5 size-6 shrink-0 animate-spin self-start text-green-500"}),U("div",w7,[K($(Ut),{"lang-key":"cloud.info.syncing","lang-default":"Synchronizing..."}),l.$cloud.syncJob?(O(),ae($(t$),{key:0,job:l.$cloud.syncJob,"filled-class":"bg-green-500"},null,8,["job"])):Te("",!0)])])):l.$solid.loginOngoing?(O(),re("div",x7,[K($(qc),{class:"mt-0.5 size-6 shrink-0 animate-spin self-start text-green-500"}),K($(Ut),{"lang-key":"cloud.info.reconnecting","lang-default":"Reconnecting..."})])):s.value?(O(),re("div",E7,[K($(Kc),{class:"mt-0.5 size-6 shrink-0 self-start text-red-500"}),U("div",null,[K($(Ut),{text:i.value},null,8,["text"]),o.value?(O(),ae($(wo),{key:0,class:"text-sm text-red-700 opacity-50 hover:opacity-75 focus-visible:opacity-75",onClick:c[1]||(c[1]=f=>l.$errors.inspect(s.value))},{default:Y(()=>[je(ue(l.$td("errors.viewDetails","View details")),1)]),_:1})):Te("",!0)])])):l.$cloud.ready?l.$cloud.dirty?(O(),re("div",A7,[K($(Kc),{class:"mt-0.5 size-6 shrink-0 self-start text-yellow-500"}),K($(Ut),{"lang-key":"cloud.info.changes","lang-default":"Everything is up to date. | There is one local change. | There are {n} local changes.","lang-params":l.$cloud.localChanges},null,8,["lang-params"])])):l.$cloud.online||l.$cloud.offline?(O(),re("div",$7,[K($(e7),{class:Je(["mt-0.5 size-6 shrink-0 self-start",{"text-green-500":l.$cloud.online,"text-gray-700":l.$cloud.offline}])},null,8,["class"]),l.$cloud.online?(O(),ae($(Ut),{key:0,"lang-key":"cloud.info.changes","lang-default":"Everything is up to date.","lang-params":0})):(O(),ae($(Ut),{key:1,"lang-key":"cloud.info.offline","lang-default":"Everything is up to date, but you're currently offline."}))])):(O(),re("div",C7,[K($(Kc),{class:"mt-0.5 size-6 shrink-0 self-start text-yellow-500"}),K($(Ut),{"lang-key":"cloud.info.disconnected","lang-default":"You are disconnected from your Solid account, all the changes you make will remain in your device."})])):(O(),re("div",S7,[K($(Kc),{class:"mt-0.5 size-6 shrink-0 self-start text-yellow-500"}),K($(Ut),{"lang-key":"cloud.info.setup","lang-default":"Your data is not backed up yet."})])),K($(hB),{class:"mt-2"},{default:Y(()=>[U("ul",k7,[U("li",null,[K($(Yh),{modelValue:l.$solid.autoReconnect,"onUpdate:modelValue":c[2]||(c[2]=f=>l.$solid.autoReconnect=f),"label-class":"text-base",label:l.$td("cloud.advanced.reconnect","Reconnect on startup")},null,8,["modelValue","label"])]),U("li",null,[K($(Yh),{modelValue:l.$cloud.startupSync,"onUpdate:modelValue":c[3]||(c[3]=f=>l.$cloud.startupSync=f),"label-class":"text-base",label:l.$td("cloud.advanced.startupSync","Synchronize on startup")},null,8,["modelValue","label"])]),U("li",null,[K($(Yh),{modelValue:l.$cloud.pollingEnabled,"onUpdate:modelValue":c[5]||(c[5]=f=>l.$cloud.pollingEnabled=f),"label-class":"text-base"},{default:Y(()=>[U("div",I7,[U("span",R7,ue($(r)[0]),1),K($(yB),{type:"number",text:`${l.$cloud.pollingMinutes}`,"aria-label":l.$td("cloud.advanced.pollingMinutes","Synchronization interval (in minutes)"),class:"focus-within:border-primary-600 mx-1 -mb-px border-b",onUpdate:c[4]||(c[4]=f=>l.$cloud.pollingMinutes=f)},{default:Y(()=>[je(ue(l.$cloud.pollingMinutes),1)]),_:1},8,["text","aria-label"]),$(r).length>1?(O(),re("span",T7,ue($(r)[1]),1)):Te("",!0)])]),_:1},8,["modelValue"])])])]),_:1})]),l.$solid.loginOngoing?Te("",!0):(O(),re("div",O7,[l.$cloud.syncing?(O(),ae($(at),{key:0,variant:"secondary",disabled:n.value,onClick:c[6]||(c[6]=f=>a())},{default:Y(()=>[K($(h7),{class:"size-5"}),U("span",null,ue(n.value?l.$td("cloud.stopping","Stopping..."):l.$td("cloud.stop","Stop synchronization")),1)]),_:1},8,["disabled"])):l.$solid.isLoggedIn()?l.$cloud.ready?(O(),ae($(at),{key:2,disabled:l.$cloud.offline,onClick:c[8]||(c[8]=f=>l.$cloud.sync({refreshUserProfile:!0}))},{default:Y(()=>[K($(qc),{class:"size-5"}),U("span",null,ue(l.$td("cloud.sync","Synchronize")),1)]),_:1},8,["disabled"])):(O(),ae($(at),{key:3,onClick:c[9]||(c[9]=f=>{var h;return l.$cloud.setupDismissed=!1,(h=e.value)==null||h.close(),l.$cloud.manualSetup||l.$cloud.setup()})},{default:Y(()=>[K($(r7),{class:"size-5"}),U("span",null,ue(l.$td("cloud.setup.submit","Back up now")),1)]),_:1})):(O(),ae($(at),{key:1,onClick:c[7]||(c[7]=f=>l.$solid.reconnect({force:!0}))},{default:Y(()=>[K($(qc),{class:"size-5"}),U("span",null,ue(l.$td("cloud.reconnect","Reconnect")),1)]),_:1})),l.$cloud.syncing?Te("",!0):(O(),ae($(at),{key:4,variant:"secondary",onClick:c[10]||(c[10]=f=>l.$solid.logout())},{default:Y(()=>[K($(l7),{class:"size-5"}),U("span",null,ue(l.$cloud.ready?l.$td("cloud.logOut","Log out"):l.$td("cloud.disconnect","Disconnect")),1)]),_:1}))]))]}),_:1},8,["title"]))}}),P7={class:"relative size-12"},L7=["aria-label","title"],M7={key:0,class:"absolute -inset-1 animate-spin rounded-full border-2 border-[currentColor_transparent] text-green-500"},N7={class:"sr-only"},j7=pe({__name:"AccountLoggedIn",setup(t){const e=ne(()=>Ar.syncing||dt.loginOngoing?{loading:!0,classes:"bg-green-500 sr-only",message:n()??""}:dt.error||Ar.syncError?{classes:"bg-red-500",message:Ne("account.error","There has been an error connecting with your account.")}:!dt.isLoggedIn()||Ar.dirty||!Ar.ready?{classes:"bg-yellow-500",message:Ne("account.dirty","There are local changes that haven't been synchronized yet.")}:{classes:Ar.status===Ft.Online?"bg-green-500":"bg-gray-500",message:n()??""});function n(){switch(Ar.status){case Ft.Syncing:return Ne("cloud.status.syncing","Synchronization in progress");case Ft.Migrating:return Ne("cloud.status.migrating","Migration in progress");case Ft.Online:return Ne("cloud.status.online","Online");case Ft.Offline:return Ne("cloud.status.offline","Offline");case Ft.Disconnected:return Ne("cloud.status.disconnected","Disconnected")}}return(r,s)=>(O(),re("div",P7,[U("button",{class:"clickable focus-visible:outline-primary-600 flex size-full rounded-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",type:"button","aria-label":r.$td("account.open","Open account"),title:r.$td("account.open","Open account"),onClick:s[0]||(s[0]=i=>r.$ui.modal(D7))},[K($(U$),{class:"size-full"}),e.value.loading?(O(),re("div",M7)):Te("",!0)],8,L7),U("div",{class:Je(["pointer-events-none absolute right-0 bottom-0 size-3 rounded-full border-2 border-white",e.value.classes])},[U("span",N7,ue(e.value.message),1)],2)]))}}),F7=pe({__name:"AccountLoggedOut",setup(t){return(e,n)=>(O(),ae($(a$),{align:"start",options:[{label:e.$td("user.logIn","Connect account"),click:()=>e.$ui.modal(tC)},{label:e.$td("user.settings","Settings"),click:()=>e.$ui.modal($(l$))}]},{default:Y(()=>[K($(at),{size:"icon",variant:"ghost","aria-label":e.$td("user.menu","Configuration"),title:e.$td("user.menu","Configuration")},{default:Y(()=>[K($(nC),{class:"size-5"})]),_:1},8,["aria-label","title"])]),_:1},8,["options"]))}}),U7=pe({__name:"Account",setup(t){return(e,n)=>e.$solid.hasLoggedIn()?(O(),ae(j7,{key:0})):(O(),ae(F7,{key:1}))}}),B7={$cloud:Ar};function z7(t={}){return{name:"@aerogel/local-first",async install(e){Xz.forEach(n=>mt.addSetting(n)),typeof t.manualSetup=="boolean"&&(eC.manualSetup=t.manualSetup,Ar.manualSetup=t.manualSetup),await Ro(e,B7)}}}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Jo=typeof document<"u";function rC(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function V7(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&rC(t.default)}const yt=Object.assign;function ip(t,e){const n={};for(const r in e){const s=e[r];n[r]=es(s)?s.map(t):t(s)}return n}const Il=()=>{},es=Array.isArray,sC=/#/g,H7=/&/g,q7=/\//g,K7=/=/g,W7=/\?/g,iC=/\+/g,G7=/%5B/g,J7=/%5D/g,oC=/%5E/g,Y7=/%60/g,aC=/%7B/g,X7=/%7C/g,lC=/%7D/g,Q7=/%20/g;function Wy(t){return encodeURI(""+t).replace(X7,"|").replace(G7,"[").replace(J7,"]")}function Z7(t){return Wy(t).replace(aC,"{").replace(lC,"}").replace(oC,"^")}function zm(t){return Wy(t).replace(iC,"%2B").replace(Q7,"+").replace(sC,"%23").replace(H7,"%26").replace(Y7,"`").replace(aC,"{").replace(lC,"}").replace(oC,"^")}function eV(t){return zm(t).replace(K7,"%3D")}function tV(t){return Wy(t).replace(sC,"%23").replace(W7,"%3F")}function nV(t){return t==null?"":tV(t).replace(q7,"%2F")}function Wl(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const rV=/\/$/,sV=t=>t.replace(rV,"");function op(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=lV(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Wl(o)}}function iV(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function _0(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function oV(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&$a(e.matched[r],n.matched[s])&&cC(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function $a(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function cC(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!aV(t[n],e[n]))return!1;return!0}function aV(t,e){return es(t)?w0(t,e):es(e)?w0(e,t):t===e}function w0(t,e){return es(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function lV(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const fi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Gl;(function(t){t.pop="pop",t.push="push"})(Gl||(Gl={}));var Rl;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Rl||(Rl={}));function cV(t){if(!t)if(Jo){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),sV(t)}const uV=/^[^#]+#/;function dV(t,e){return t.replace(uV,"#")+e}function fV(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const af=()=>({left:window.scrollX,top:window.scrollY});function hV(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=fV(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function x0(t,e){return(history.state?history.state.position-e:-1)+t}const Vm=new Map;function pV(t,e){Vm.set(t,e)}function mV(t){const e=Vm.get(t);return Vm.delete(t),e}let gV=()=>location.protocol+"//"+location.host;function uC(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),_0(l,"")}return _0(n,t)+r+s}function yV(t,e,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const h=uC(t,location),m=n.value,y=e.value;let S=0;if(f){if(n.value=h,e.value=f,o&&o===m){o=null;return}S=y?f.position-y.position:0}else r(h);s.forEach(x=>{x(n.value,m,{delta:S,type:Gl.pop,direction:S?S>0?Rl.forward:Rl.back:Rl.unknown})})};function l(){o=n.value}function c(f){s.push(f);const h=()=>{const m=s.indexOf(f);m>-1&&s.splice(m,1)};return i.push(h),h}function u(){const{history:f}=window;f.state&&f.replaceState(yt({},f.state,{scroll:af()}),"")}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function E0(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?af():null}}function vV(t){const{history:e,location:n}=window,r={value:uC(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const d=t.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:gV()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(h){console.error(h),n[u?"replace":"assign"](f)}}function o(l,c){const u=yt({},e.state,E0(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=yt({},s.value,e.state,{forward:l,scroll:af()});i(u.current,u,!0);const d=yt({},E0(r.value,l,null),{position:u.position+1},c);i(l,d,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function bV(t){t=cV(t);const e=vV(t),n=yV(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=yt({location:"",base:t,go:r,createHref:dV.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function _V(t){return typeof t=="string"||t&&typeof t=="object"}function dC(t){return typeof t=="string"||typeof t=="symbol"}const fC=Symbol("");var S0;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(S0||(S0={}));function Ca(t,e){return yt(new Error,{type:t,[fC]:!0},e)}function Ls(t,e){return t instanceof Error&&fC in t&&(e==null||!!(t.type&e))}const A0="[^/]+?",wV={sensitive:!1,strict:!1,start:!0,end:!0},xV=/[.+*?^${}()[\]/\\]/g;function EV(t,e){const n=yt({},wV,e),r=[];let s=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let d=0;d<c.length;d++){const f=c[d];let h=40+(n.sensitive?.25:0);if(f.type===0)d||(s+="/"),s+=f.value.replace(xV,"\\$&"),h+=40;else if(f.type===1){const{value:m,repeatable:y,optional:S,regexp:x}=f;i.push({name:m,repeatable:y,optional:S});const _=x||A0;if(_!==A0){h+=10;try{new RegExp(`(${_})`)}catch(p){throw new Error(`Invalid custom RegExp for param "${m}" (${_}): `+p.message)}}let g=y?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;d||(g=S&&c.length<2?`(?:/${g})`:"/"+g),S&&(g+="?"),s+=g,h+=20,S&&(h+=-8),y&&(h+=-20),_===".*"&&(h+=-50)}u.push(h)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const h=u[f]||"",m=i[f-1];d[m.name]=h&&m.repeatable?h.split("/"):h}return d}function l(c){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const h of f)if(h.type===0)u+=h.value;else if(h.type===1){const{value:m,repeatable:y,optional:S}=h,x=m in c?c[m]:"";if(es(x)&&!y)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const _=es(x)?x.join("/"):x;if(!_)if(S)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=_}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function SV(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function hC(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=SV(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if($0(r))return 1;if($0(s))return-1}return s.length-r.length}function $0(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const AV={type:0,value:""},$V=/[a-zA-Z0-9_]/;function CV(t){if(!t)return[[]];if(t==="/")return[[AV]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${c}": ${h}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function d(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),n=1):f();break;case 4:f(),n=r;break;case 1:l==="("?n=2:$V.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),s}function kV(t,e,n){const r=EV(CV(t.path),n),s=yt(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function IV(t,e){const n=[],r=new Map;e=R0({strict:!1,end:!0,sensitive:!1},e);function s(d){return r.get(d)}function i(d,f,h){const m=!h,y=k0(d);y.aliasOf=h&&h.record;const S=R0(e,d),x=[y];if("alias"in d){const p=typeof d.alias=="string"?[d.alias]:d.alias;for(const v of p)x.push(k0(yt({},y,{components:h?h.record.components:y.components,path:v,aliasOf:h?h.record:y})))}let _,g;for(const p of x){const{path:v}=p;if(f&&v[0]!=="/"){const E=f.record.path,k=E[E.length-1]==="/"?"":"/";p.path=f.record.path+(v&&k+v)}if(_=kV(p,f,S),h?h.alias.push(_):(g=g||_,g!==_&&g.alias.push(_),m&&d.name&&!I0(_)&&o(d.name)),pC(_)&&l(_),y.children){const E=y.children;for(let k=0;k<E.length;k++)i(E[k],_,h&&h.children[k])}h=h||_}return g?()=>{o(g)}:Il}function o(d){if(dC(d)){const f=r.get(d);f&&(r.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const f=OV(d,n);n.splice(f,0,d),d.record.name&&!I0(d)&&r.set(d.record.name,d)}function c(d,f){let h,m={},y,S;if("name"in d&&d.name){if(h=r.get(d.name),!h)throw Ca(1,{location:d});S=h.record.name,m=yt(C0(f.params,h.keys.filter(g=>!g.optional).concat(h.parent?h.parent.keys.filter(g=>g.optional):[]).map(g=>g.name)),d.params&&C0(d.params,h.keys.map(g=>g.name))),y=h.stringify(m)}else if(d.path!=null)y=d.path,h=n.find(g=>g.re.test(y)),h&&(m=h.parse(y),S=h.record.name);else{if(h=f.name?r.get(f.name):n.find(g=>g.re.test(f.path)),!h)throw Ca(1,{location:d,currentLocation:f});S=h.record.name,m=yt({},f.params,d.params),y=h.stringify(m)}const x=[];let _=h;for(;_;)x.unshift(_.record),_=_.parent;return{name:S,path:y,params:m,matched:x,meta:TV(x)}}t.forEach(d=>i(d));function u(){n.length=0,r.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function C0(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function k0(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:RV(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function RV(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function I0(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function TV(t){return t.reduce((e,n)=>yt(e,n.meta),{})}function R0(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function OV(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;hC(t,e[i])<0?r=i:n=i+1}const s=DV(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function DV(t){let e=t;for(;e=e.parent;)if(pC(e)&&hC(t,e)===0)return e}function pC({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function PV(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(iC," "),o=i.indexOf("="),a=Wl(o<0?i:i.slice(0,o)),l=o<0?null:Wl(i.slice(o+1));if(a in e){let c=e[a];es(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function T0(t){let e="";for(let n in t){const r=t[n];if(n=eV(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(es(r)?r.map(i=>i&&zm(i)):[r&&zm(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function LV(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=es(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const MV=Symbol(""),O0=Symbol(""),Gy=Symbol(""),Jy=Symbol(""),Hm=Symbol("");function ll(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function _i(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Ca(4,{from:n,to:e})):f instanceof Error?l(f):_V(f)?l(Ca(2,{from:e,to:f})):(o&&r.enterCallbacks[s]===o&&typeof f=="function"&&o.push(f),a())},u=i(()=>t.call(r&&r.instances[s],e,n,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function ap(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(rC(l)){const u=(l.__vccOpts||l)[e];u&&i.push(_i(u,n,r,o,a,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=V7(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const h=(d.__vccOpts||d)[e];return h&&_i(h,n,r,o,a,s)()}))}}return i}function D0(t){const e=qt(Gy),n=qt(Jy),r=ne(()=>{const l=$(t.to);return e.resolve(l)}),s=ne(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],d=n.matched;if(!u||!d.length)return-1;const f=d.findIndex($a.bind(null,u));if(f>-1)return f;const h=P0(l[c-2]);return c>1&&P0(u)===h&&d[d.length-1].path!==h?d.findIndex($a.bind(null,l[c-2])):f}),i=ne(()=>s.value>-1&&UV(n.params,r.value.params)),o=ne(()=>s.value>-1&&s.value===n.matched.length-1&&cC(n.params,r.value.params));function a(l={}){if(FV(l)){const c=e[$(t.replace)?"replace":"push"]($(t.to)).catch(Il);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:ne(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function NV(t){return t.length===1?t[0]:t}const jV=pe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:D0,setup(t,{slots:e}){const n=Jn(D0(t)),{options:r}=qt(Gy),s=ne(()=>({[L0(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[L0(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&NV(e.default(n));return t.custom?i:Yn("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),mC=jV;function FV(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function UV(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!es(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function P0(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const L0=(t,e,n)=>t??e??n,BV=pe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=qt(Hm),s=ne(()=>t.route||r.value),i=qt(O0,0),o=ne(()=>{let c=$(i);const{matched:u}=s.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=ne(()=>s.value.matched[o.value]);pr(O0,ne(()=>o.value+1)),pr(MV,a),pr(Hm,s);const l=xe();return ot(()=>[l.value,a.value,t.name],([c,u,d],[f,h,m])=>{u&&(u.instances[d]=c,h&&h!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!$a(u,h)||!f)&&(u.enterCallbacks[d]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,d=a.value,f=d&&d.components[u];if(!f)return M0(n.default,{Component:f,route:c});const h=d.props[u],m=h?h===!0?c.params:typeof h=="function"?h(c):h:null,S=Yn(f,yt({},m,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return M0(n.default,{Component:S,route:c})||S}}});function M0(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const zV=BV;function VV(t){const e=IV(t.routes,t),n=t.parseQuery||PV,r=t.stringifyQuery||T0,s=t.history,i=ll(),o=ll(),a=ll(),l=yr(fi);let c=fi;Jo&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=ip.bind(null,P=>""+P),d=ip.bind(null,nV),f=ip.bind(null,Wl);function h(P,ee){let ce,ie;return dC(P)?(ce=e.getRecordMatcher(P),ie=ee):ie=P,e.addRoute(ie,ce)}function m(P){const ee=e.getRecordMatcher(P);ee&&e.removeRoute(ee)}function y(){return e.getRoutes().map(P=>P.record)}function S(P){return!!e.getRecordMatcher(P)}function x(P,ee){if(ee=yt({},ee||l.value),typeof P=="string"){const F=op(n,P,ee.path),le=e.resolve({path:F.path},ee),be=s.createHref(F.fullPath);return yt(F,le,{params:f(le.params),hash:Wl(F.hash),redirectedFrom:void 0,href:be})}let ce;if(P.path!=null)ce=yt({},P,{path:op(n,P.path,ee.path).path});else{const F=yt({},P.params);for(const le in F)F[le]==null&&delete F[le];ce=yt({},P,{params:d(F)}),ee.params=d(ee.params)}const ie=e.resolve(ce,ee),Ee=P.hash||"";ie.params=u(f(ie.params));const ke=iV(r,yt({},P,{hash:Z7(Ee),path:ie.path})),D=s.createHref(ke);return yt({fullPath:ke,hash:Ee,query:r===T0?LV(P.query):P.query||{}},ie,{redirectedFrom:void 0,href:D})}function _(P){return typeof P=="string"?op(n,P,l.value.path):yt({},P)}function g(P,ee){if(c!==P)return Ca(8,{from:ee,to:P})}function p(P){return k(P)}function v(P){return p(yt(_(P),{replace:!0}))}function E(P){const ee=P.matched[P.matched.length-1];if(ee&&ee.redirect){const{redirect:ce}=ee;let ie=typeof ce=="function"?ce(P):ce;return typeof ie=="string"&&(ie=ie.includes("?")||ie.includes("#")?ie=_(ie):{path:ie},ie.params={}),yt({query:P.query,hash:P.hash,params:ie.path!=null?{}:P.params},ie)}}function k(P,ee){const ce=c=x(P),ie=l.value,Ee=P.state,ke=P.force,D=P.replace===!0,F=E(ce);if(F)return k(yt(_(F),{state:typeof F=="object"?yt({},Ee,F.state):Ee,force:ke,replace:D}),ee||ce);const le=ce;le.redirectedFrom=ee;let be;return!ke&&oV(r,ie,ce)&&(be=Ca(16,{to:le,from:ie}),he(ie,ie,!0,!1)),(be?Promise.resolve(be):I(le,ie)).catch(ge=>Ls(ge)?Ls(ge,2)?ge:W(ge):z(ge,le,ie)).then(ge=>{if(ge){if(Ls(ge,2))return k(yt({replace:D},_(ge.to),{state:typeof ge.to=="object"?yt({},Ee,ge.to.state):Ee,force:ke}),ee||le)}else ge=j(le,ie,!0,D,Ee);return N(le,ie,ge),ge})}function A(P,ee){const ce=g(P,ee);return ce?Promise.reject(ce):Promise.resolve()}function C(P){const ee=Ce.values().next().value;return ee&&typeof ee.runWithContext=="function"?ee.runWithContext(P):P()}function I(P,ee){let ce;const[ie,Ee,ke]=HV(P,ee);ce=ap(ie.reverse(),"beforeRouteLeave",P,ee);for(const F of ie)F.leaveGuards.forEach(le=>{ce.push(_i(le,P,ee))});const D=A.bind(null,P,ee);return ce.push(D),G(ce).then(()=>{ce=[];for(const F of i.list())ce.push(_i(F,P,ee));return ce.push(D),G(ce)}).then(()=>{ce=ap(Ee,"beforeRouteUpdate",P,ee);for(const F of Ee)F.updateGuards.forEach(le=>{ce.push(_i(le,P,ee))});return ce.push(D),G(ce)}).then(()=>{ce=[];for(const F of ke)if(F.beforeEnter)if(es(F.beforeEnter))for(const le of F.beforeEnter)ce.push(_i(le,P,ee));else ce.push(_i(F.beforeEnter,P,ee));return ce.push(D),G(ce)}).then(()=>(P.matched.forEach(F=>F.enterCallbacks={}),ce=ap(ke,"beforeRouteEnter",P,ee,C),ce.push(D),G(ce))).then(()=>{ce=[];for(const F of o.list())ce.push(_i(F,P,ee));return ce.push(D),G(ce)}).catch(F=>Ls(F,8)?F:Promise.reject(F))}function N(P,ee,ce){a.list().forEach(ie=>C(()=>ie(P,ee,ce)))}function j(P,ee,ce,ie,Ee){const ke=g(P,ee);if(ke)return ke;const D=ee===fi,F=Jo?history.state:{};ce&&(ie||D?s.replace(P.fullPath,yt({scroll:D&&F&&F.scroll},Ee)):s.push(P.fullPath,Ee)),l.value=P,he(P,ee,ce,D),W()}let V;function L(){V||(V=s.listen((P,ee,ce)=>{if(!J.listening)return;const ie=x(P),Ee=E(ie);if(Ee){k(yt(Ee,{replace:!0,force:!0}),ie).catch(Il);return}c=ie;const ke=l.value;Jo&&pV(x0(ke.fullPath,ce.delta),af()),I(ie,ke).catch(D=>Ls(D,12)?D:Ls(D,2)?(k(yt(_(D.to),{force:!0}),ie).then(F=>{Ls(F,20)&&!ce.delta&&ce.type===Gl.pop&&s.go(-1,!1)}).catch(Il),Promise.reject()):(ce.delta&&s.go(-ce.delta,!1),z(D,ie,ke))).then(D=>{D=D||j(ie,ke,!1),D&&(ce.delta&&!Ls(D,8)?s.go(-ce.delta,!1):ce.type===Gl.pop&&Ls(D,20)&&s.go(-1,!1)),N(ie,ke,D)}).catch(Il)}))}let Z=ll(),T=ll(),q;function z(P,ee,ce){W(P);const ie=T.list();return ie.length?ie.forEach(Ee=>Ee(P,ee,ce)):console.error(P),Promise.reject(P)}function se(){return q&&l.value!==fi?Promise.resolve():new Promise((P,ee)=>{Z.add([P,ee])})}function W(P){return q||(q=!P,L(),Z.list().forEach(([ee,ce])=>P?ce(P):ee()),Z.reset()),P}function he(P,ee,ce,ie){const{scrollBehavior:Ee}=t;if(!Jo||!Ee)return Promise.resolve();const ke=!ce&&mV(x0(P.fullPath,0))||(ie||!ce)&&history.state&&history.state.scroll||null;return Tt().then(()=>Ee(P,ee,ke)).then(D=>D&&hV(D)).catch(D=>z(D,P,ee))}const me=P=>s.go(P);let ve;const Ce=new Set,J={currentRoute:l,listening:!0,addRoute:h,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:S,getRoutes:y,resolve:x,options:t,push:p,replace:v,go:me,back:()=>me(-1),forward:()=>me(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:T.add,isReady:se,install(P){const ee=this;P.component("RouterLink",mC),P.component("RouterView",zV),P.config.globalProperties.$router=ee,Object.defineProperty(P.config.globalProperties,"$route",{enumerable:!0,get:()=>$(l)}),Jo&&!ve&&l.value===fi&&(ve=!0,p(s.location).catch(Ee=>{}));const ce={};for(const Ee in fi)Object.defineProperty(ce,Ee,{get:()=>l.value[Ee],enumerable:!0});P.provide(Gy,ee),P.provide(Jy,Cg(ce)),P.provide(Hm,l);const ie=P.unmount;Ce.add(P),P.unmount=function(){Ce.delete(P),Ce.size<1&&(c=fi,V&&V(),V=null,l.value=fi,ve=!1,q=!1),ie()}}};function G(P){return P.reduce((ee,ce)=>ee.then(()=>C(ce)),Promise.resolve())}return J}function HV(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>$a(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>$a(c,l))||s.push(l))}return[n,r,s]}function qV(t){return qt(Jy)}var KV=Object.defineProperty,WV=(t,e,n)=>e in t?KV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zo=(t,e,n)=>WV(t,typeof e!="symbol"?e+"":e,n);function GV(t,e){return So((n,r)=>{let s=Ws(ho.routesParams.value[t]??{},e);return ot(ho.routesParams,()=>{const i=Ws(ho.routesParams.value[t]??{},e);for(const[o,a]of Object.entries(i))if(a===s[o]){s=i,r();return}}),{get:()=>Be(s,()=>n()),set:()=>console.warn("Computed models ref was not set (it is immutable).")}})}const JV=Io({name:"router",initialState:{flashRoute:null},persist:["flashRoute"]});class YV extends JV{constructor(){super(),zo(this,"currentRoute"),zo(this,"routesParams"),zo(this,"router"),zo(this,"bindings"),zo(this,"history"),zo(this,"routesStopWatchers"),this.router=yr(null),this.bindings={},this.history=[],this.routesStopWatchers={},this.routesParams=yr({}),this.currentRoute=ne(()=>{const e=this.router.value,n=this.routesParams.value;if(!e)return null;const r=$(e.currentRoute);return{...r,params:n==null?void 0:n[r.path],rawParams:r.params}})}use(e,n={}){this.router.value=e,this.bindings=n.bindings??{},e.beforeEach(Mk(()=>this.handleStatic404Redirect())),e.beforeEach(r=>this.onEnterRoute(r.path,r.params))}async boot(){qe.on("auth:before-login",()=>this.storeFlashRoute()),qe.on("auth:login",()=>this.restoreFlashRoute()),qe.on("purge-storage",()=>this.push({name:"home"}))}__get(e){return this.router.value?super.__get(e)??Reflect.get(this.router.value,e):super.__get(e)}async onEnterRoute(e,n){var r;if(e in this.routesParams.value)return;const s={...n};for(const[o,a]of Object.entries(n)){const l=await this.resolveBinding(e,o,a);ot(l,c=>{this.routesParams.value={...this.routesParams.value,[e]:{...this.routesParams.value[e],[o]:c}}}),s[o]=l.value}this.history=this.history.slice(0,3),this.history.unshift(e);const i={...this.routesParams.value,[e]:{...s,...this.routesParams.value[e]??{}}};for(const o in i)this.history.includes(o)||(r=this.routesStopWatchers[o])==null||r.forEach(a=>a());this.routesParams.value=xi(i,this.history),this.routesStopWatchers=xi(this.routesStopWatchers,this.history)}handleStatic404Redirect(){const e=Er.pull("static-404-redirect");e&&this.replace(e)}storeFlashRoute(){this.flashRoute=xi(this.currentRoute.value,["path","query","hash"])}async restoreFlashRoute(){if(!this.flashRoute)return;const e=this.flashRoute;mt.whenReady(()=>this.replace(e)),this.flashRoute=null}async resolveBinding(e,n,r){const s=this.bindings[n];if(Array.isArray(r)||!s)return xe(r);await mt.ready;const i=GV(e,n),o=jA(()=>Promise.resolve(s(r,i.value)));return M$(()=>o.value)}}const ho=ts(YV);class gC{constructor(e){this.value=e}}const To=pe({__name:"Page",props:{class:{}},setup(t){const e=ne(()=>Mt("mx-auto flex w-full max-w-screen-content grow flex-col px-edge py-8",t.class));return(n,r)=>(O(),re("main",{class:Je(e.value)},[$e(n.$slots,"default")],2))}}),XV={class:"text-2xl font-bold"},yC=pe({__name:"NotFound",setup(t){return(e,n)=>(O(),ae(To,{class:"items-center justify-center"},{default:Y(()=>[U("h2",XV,ue(e.$td("notFound.title","404: Not Found")),1),K($(wo),{route:"home"},{default:Y(()=>[je(ue(e.$td("notFound.home","Go home")),1)]),_:1})]),_:1}))}});function QV(t,e){const n=qV(),r=ne(()=>{var i;return(i=ho.routesParams)==null?void 0:i.value[n.path]}),s=ne(()=>!(e!=null&&e.title)||!r.value?null:typeof e.title=="string"?e.title:e.title(r.value));return Dt(()=>tH(s.value)),()=>Object.values(r.value??{}).some(i=>i instanceof gC)?Yn(yC):Yn(t,r.value)}function N0(t,e){return pe({setup:()=>QV(t,e)})}function ZV(t){if(t.component){if(typeof t.component=="function"){const e=t.component;t.component=async()=>{const{default:n}=await e();return N0(n,t)};return}t.component=N0(t.component,t)}}function j0(t){return async function(...e){return await mt.ready,t.call(this,...e)}}function eH(t){if(t.beforeEnter){if(Array.isArray(t.beforeEnter)){t.beforeEnter=t.beforeEnter.map(j0);return}t.beforeEnter=j0(t.beforeEnter)}}function tH(t){if(globalThis.document){if(!t){globalThis.document.title=mt.name;return}globalThis.document.title=`${t} | ${mt.name}`}}function F0(t){return ZV(t),eH(t),t}function nH(t){const e=t.map(F0);return e.some(n=>n.name==="not-found"||n.name==="404")||e.push(F0({name:"not-found",path:"/:path(.*)*",component:yC})),e}const rH={$router:ho};function sH(t){return{async install(e){const n=VV({routes:t.routes,history:bV(t.basePath??Kr.basePath)});ft.registerComponent("router-link",mC),ho.use(n,t),e.use(n),NU({resolve:r=>n.resolve({name:r}).href,visit:async r=>void await n.push({name:r})}),await Ro(e,rH)}}}const lf=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},iH={},oH={class:"mx-auto w-full max-w-screen-md py-4 text-center text-sm text-gray-500"};function aH(t,e){return O(),re("footer",oH,[U("p",null,ue(t.$t("app.footer")),1)])}const lH=lf(iH,[["render",aH]]),cH={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function uH(t,e){return O(),re("svg",cH,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M8.16 3L6.75 4.41L9.34 7H4c-1.11 0-2 .89-2 2v10c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V9c0-1.11-.89-2-2-2h-5.34l2.59-2.59L15.84 3L12 6.84zM4 9h13v10H4zm15.5 0a1 1 0 0 1 1 1a1 1 0 0 1-1 1a1 1 0 0 1-1-1a1 1 0 0 1 1-1m0 3a1 1 0 0 1 1 1a1 1 0 0 1-1 1a1 1 0 0 1-1-1a1 1 0 0 1 1-1"},null,-1)]))}const dH=Ue({name:"mdi-television-classic",render:uH}),fH={},hH={class:"max-w-screen-content px-edge mx-auto flex w-full flex-wrap items-center justify-between gap-2 pt-4 sm:pt-8"},pH={class:"text-primary-600 flex items-center"};function mH(t,e){const n=dH,r=wo,s=CB,i=U7;return O(),re("header",hH,[U("h1",pH,[K(n,{class:"mr-2 size-6 sm:size-7"}),K(r,{route:"home",class:"text-xl font-semibold tracking-tight sm:text-2xl"},{default:Y(()=>[je(ue(t.$t("app.title")),1)]),_:1})]),e[0]||(e[0]=U("div",{class:"grow"},null,-1)),K(s),K(i)])}const gH=lf(fH,[["render",mH]]),yH={};function vH(t,e){const n=gH,r=Md("router-view"),s=lH,i=aB;return O(),ae(i,null,{default:Y(()=>[K(n),K(r),K(s)]),_:1})}const bH=lf(yH,[["render",vH]]),_H={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function wH(t,e){return O(),re("svg",_H,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M4 11v2h12l-5.5 5.5l1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5L16 11z"},null,-1)]))}const xH=Ue({name:"mdi-arrow-right",render:wH}),EH={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function SH(t,e){return O(),re("svg",EH,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"m20.84 2.18l-3.93.78l2.74 3.54l1.97-.4zm-6.87 1.36L12 3.93l2.75 3.53l1.96-.39zm-4.9.96l-1.97.41l2.75 3.53l1.96-.39zm-4.91 1l-.98.19a2 2 0 0 0-1.57 2.35L2 10l4.9-.97zM2 10v10a2 2 0 0 0 2 2h16c1.11 0 2-.89 2-2V10z"},null,-1)]))}const vC=Ue({name:"mdi-movie-open",render:SH}),AH=["src"],Yy=pe({__name:"ShowImage",props:{src:{}},setup(t){function e(n){const r=n.target;r.style.display="none"}return(n,r)=>(O(),re("img",{src:n.src,alt:"",onError:e},null,40,AH))}}),$H={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function CH(t,e){return O(),re("svg",$H,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"},null,-1)]))}const Xy=Ue({name:"mdi-eye",render:CH}),kH={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function IH(t,e){return O(),re("svg",kH,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M.5 2.77L1.78 1.5L21 20.72L19.73 22l-3-3H16v2H8v-2H3a2 2 0 0 1-2-2V5c0-.5.17-.93.46-1.27zM21 17V5H7.82l-2-2H21a2 2 0 0 1 2 2v12c0 .85-.55 1.59-1.3 1.87L19.82 17zM3 17h11.73L3 5.27z"},null,-1)]))}const bC=Ue({name:"mdi-television-off",render:IH}),RH={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function TH(t,e){return O(),re("svg",RH,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M17.65 6.35A7.96 7.96 0 0 0 12 4a8 8 0 0 0-8 8a8 8 0 0 0 8 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18a6 6 0 0 1-6-6a6 6 0 0 1 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"},null,-1)]))}const OH=Ue({name:"mdi-refresh",render:TH});function Wt(t,e){class n{constructor(s){var i;const o=this;n.init(o,s),(i=o._zod).deferred??(i.deferred=[]);for(const a of o._zod.deferred)a()}static init(s,i){var o;s._zod??(s._zod={}),(o=s._zod).traits??(o.traits=new Set),s._zod.traits.add(t),e(s,i);for(const a in n.prototype)Object.defineProperty(s,a,{value:n.prototype[a].bind(s)});s._zod.constr=n,s._zod.def=i}static[Symbol.hasInstance](s){var i,o;return(o=(i=s==null?void 0:s._zod)==null?void 0:i.traits)==null?void 0:o.has(t)}}return Object.defineProperty(n,"name",{value:t}),n}class rd extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const DH={};function cf(t){return DH}function PH(t,e){return typeof e=="bigint"?e.toString():e}function Qy(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function _C(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function sd(t,e,n){Object.defineProperty(t,e,{get(){{const r=n();return t[e]=r,r}},set(r){Object.defineProperty(t,e,{value:r})},configurable:!0})}function Zy(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function wC(t=10){const e="abcdefghijklmnopqrstuvwxyz";let n="";for(let r=0;r<t;r++)n+=e[Math.floor(Math.random()*e.length)];return n}function cl(t){return JSON.stringify(t)}function LH(t){return typeof t=="object"&&t!==null}const MH=Qy(()=>{try{return new Function(""),!0}catch{return!1}}),NH=new Set(["string","number","symbol"]);function jH(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ev(t,e){return new t._zod.constr(e)}function ks(t){return{}}function FH(t){return Object.keys(t).filter(e=>t[e]._zod.qout==="true")}function UH(t){return t.replace(/^\?/,"").replace(/\?$/,"")}function BH(t){const e={},n={},r=[],s=[];for(const[i,o]of Object.entries(t)){i.endsWith("?")&&r.push(i.slice(0,-1)),i.startsWith("?")&&s.push(i.slice(1));const a=UH(i);n[a]=o,e[a]=i}return{shape:n,keyMap:e,optional:r,defaulted:s}}function zH(t,e){const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return Zy(this,"shape",r),r},checks:[]};return sd(n,"shape",()=>({...t._zod.def.shape,...e})),ev(t,n)}function lp(t,e){const n=new Set(Object.keys(e._zod.def.shape)),r=[...t._zod.def.optional.filter(s=>!n.has(s)),...e._zod.def.optional];return ev(t,{...t._zod.def,get shape(){const s={...t._zod.def.shape,...e._zod.def.shape};return Zy(this,"shape",s),s},optional:r,catchall:e._zod.def.catchall,checks:[]})}function cp(t,e=0){for(let n=e;n<t.issues.length;n++)if(t.issues[n].continue!==!0)return!0;return!1}function tv(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Wc(t){return typeof t=="string"?t:t==null?void 0:t.message}function uf(t,e,n){var s,i,o,a,l,c;const r={...t,path:t.path??[]};if(!t.message){const u=Wc((o=(i=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:i.error)==null?void 0:o.call(i,t))??Wc((a=e==null?void 0:e.error)==null?void 0:a.call(e,t))??Wc((l=n.customError)==null?void 0:l.call(n,t))??Wc((c=n.localeError)==null?void 0:c.call(n,t))??"Invalid input";r.message=u}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}const U0=Symbol.for("{{zod.error}}");class Gi{get message(){return JSON.stringify(this.issues,PH,2)}constructor(e){Object.defineProperty(this,"_tag",{value:U0,enumerable:!1}),Object.defineProperty(this,"name",{value:"$ZodError",enumerable:!1}),this.issues=e}static[Symbol.hasInstance](e){return(e==null?void 0:e._tag)===U0}}function VH(t,e,n){const r=n?{...n,async:!1}:{async:!1},s=t._zod.run({value:e,issues:[]},r);if(s instanceof Promise)throw new rd;if(s.issues.length)throw new((this==null?void 0:this.Error)??Gi)(s.issues.map(i=>uf(i,r,cf())));return s.value}function HH(t,e,n){const r=n?{...n,async:!1}:{async:!1},s=t._zod.run({value:e,issues:[]},r);if(s instanceof Promise)throw new rd;return s.issues.length?{success:!1,error:new((this==null?void 0:this.Error)??Gi)(s.issues.map(i=>uf(i,r,cf())))}:{success:!0,data:s.value}}async function qH(t,e,n){const r=n?{...n,async:!0}:{async:!0};let s=t._zod.run({value:e,issues:[]},r);if(s instanceof Promise&&(s=await s),s.issues.length)throw new((this==null?void 0:this.Error)??Gi)(s.issues.map(i=>uf(i,r,cf())));return s.value}async function KH(t,e,n){const r=n?{...n,async:!0}:{async:!0};let s=t._zod.run({value:e,issues:[]},r);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new((this==null?void 0:this.Error)??Gi)(s.issues.map(i=>uf(i,r,cf())))}:{success:!0,data:s.value}}const WH=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},GH=/^-?\d+(?:\.\d+)?/i,xC=Wt("$ZodCheck",(t,e)=>{t._zod??(t._zod={}),t._zod.def=e}),EC={number:"number",bigint:"bigint",object:"date"},JH=Wt("$ZodCheckLessThan",(t,e)=>{xC.init(t,e);const n=EC[typeof e.value];t._zod.onattach=r=>{const s=r._zod.computed.maximum??Number.POSITIVE_INFINITY;e.value<s&&(r._zod.computed.maximum=e.value,r._zod.computed.inclusive=e.inclusive)},t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),YH=Wt("$ZodCheckGreaterThan",(t,e)=>{xC.init(t,e);const n=EC[typeof e.value];t._zod.onattach=r=>{const s=r._zod.computed.minimum??Number.NEGATIVE_INFINITY;e.value>s&&(r._zod.computed.minimum=e.value,r._zod.computed.inclusive=e.inclusive)},t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}});class XH{constructor(e){this.content=[],this.indent=0,this.args=e}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(o=>o),s=Math.min(...r.map(o=>o.length-o.trimStart().length)),i=r.map(o=>o.slice(s)).map(o=>" ".repeat(this.indent*2)+o);for(const o of i)this.content.push(o)}compile(){const e=[...this.content.map(n=>`  ${n}`)];return new Function(...this.args,e.join(`
`))}}const li=Wt("$ZodType",(t,e)=>{var s,i,o;var n;t??(t={}),t._zod.id=e.type+"_"+wC(10),t._zod.def=e,t._zod.computed=t._zod.computed||{};const r=[...t._zod.def.checks??[]];e.type,t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const a of r)(i=(s=a._zod).onattach)==null||i.call(s,t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(o=t._zod.deferred)==null||o.push(()=>{t._zod.run=t._zod.parse});else{const a=(l,c,u)=>{let d=cp(l),f;for(const h of c){if(h._zod.when){if(!h._zod.when(l))continue}else if(d)continue;const m=l.issues.length,y=h._zod.check(l);if(y instanceof Promise&&(u==null?void 0:u.async)===!1)throw new rd;if(f||y instanceof Promise)f=f??Promise.resolve(),f.then(async()=>{await y,l.issues.length!==m&&(d||(d=cp(l,m)))});else{if(l.issues.length===m)continue;d||(d=cp(l,m))}}return f?f.then(()=>l):l};t._zod.run=(l,c)=>{const u=t._zod.parse(l,c);if(u instanceof Promise){if(c.async===!1)throw new rd;return u.then(d=>a(d,r,c))}return a(u,r,c)}}sd(t,"~standard",()=>({validate:a=>{const l=t._zod.run({value:a,issues:[]},{});return l instanceof Promise?l.then(({issues:c,value:u})=>c.length===0?{value:u}:{issues:c}):l.issues.length===0?{value:l.value}:{issues:l.issues}},vendor:"zod",version:1}))}),QH=Wt("$ZodString",(t,e)=>{var n;li.init(t,e),t._zod.pattern=((n=t==null?void 0:t._zod.computed)==null?void 0:n.pattern)??WH(t._zod.computed),t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),ZH=Wt("$ZodNumber",(t,e)=>{li.init(t,e),t._zod.pattern=t._zod.computed.pattern??GH,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const i=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:t,...i?{received:i}:{}}),n}});function B0(t,e,n){t.issues.length&&e.issues.push(...tv(n,t.issues)),e.value[n]=t.value}const eq=Wt("$ZodArray",(t,e)=>{li.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const i=[];for(let o=0;o<s.length;o++){const a=s[o],l=e.element._zod.run({value:a,issues:[]},r);l instanceof Promise?i.push(l.then(c=>B0(c,n,o))):B0(l,n,o)}return i.length?Promise.all(i).then(()=>n):n}});function Gc(t,e,n){t.issues.length?e.issues.push(...tv(n,t.issues)):e.value[n]=t.value}function z0(t,e,n,r){t.issues.length?r[n]===void 0?n in r&&(e.value[n]=void 0):e.issues.push(...tv(n,t.issues)):t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}const SC=Wt("$ZodObjectLike",(t,e)=>{li.init(t,e),sd(t._zod,"shape",()=>e.shape);const n=Qy(()=>{const l=Object.keys(e.shape);return{shape:e.shape,keys:l,keySet:new Set(l),numKeys:l.length,optionalKeys:new Set(e.optional)}});sd(t._zod,"disc",()=>{const l=e.shape,c=new Map;let u=!1;for(const d in l){const f=l[d]._zod;if(f.values||f.disc){u=!0;const h={values:new Set(f.values??[]),maps:f.disc?[f.disc]:[]};c.set(d,h)}}if(u)return c});const r=l=>{const c=new XH(["shape","payload","ctx"]),{keys:u,optionalKeys:d}=n.value,f=y=>{const S=cl(y);return`shape[${S}]._zod.run({ value: input[${S}], issues: [] }, ctx)`};c.write("const input = payload.value;");const h={};for(const y of u)h[y]=wC(15);for(const y of u){if(d.has(y))continue;const S=h[y];c.write(`const ${S} = ${f(y)};`),c.write(`
          if (${S}.issues.length) payload.issues = payload.issues.concat(${S}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${cl(y)}, ...iss.path] : [${cl(y)}]
          })));`)}c.write("payload.value = {"),c.indented(()=>{for(const y of u){if(d.has(y))continue;const S=h[y];c.write(`  ${cl(y)}: ${S}.value,`)}}),c.write("}");for(const y of u){if(!d.has(y))continue;const S=h[y];c.write(`const ${S} = ${f(y)};`);const x=cl(y);c.write(`
        if (${S}.issues.length) {
          if (input[${x}] === undefined) {
            if (${x} in input) {
              payload.value[${x}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${S}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${x}, ...iss.path] : [${x}],
              }))
            );
          }
        } else if (${S}.value === undefined) {
          if (${x} in input) payload.value[${x}] = undefined;
        } else {
          payload.value[${x}] = ${S}.value;
        }  
        `)}c.write("return payload;");const m=c.compile();return(y,S)=>m(l,y,S)};let s;const i=MH.value,o=LH,{catchall:a}=e;t._zod.parse=(l,c)=>{const u=l.value;if(!o(u))return l.issues.push({expected:"object",code:"invalid_type",input:u,inst:t}),l;const d=[];if(i&&(c==null?void 0:c.async)===!1&&c.noPrecompilation!==!0)s||(s=r(e.shape)),l=s(l,c);else{l.value={};const{keys:h,shape:m,optionalKeys:y}=n.value;for(const S of h){const _=m[S]._zod.run({value:u[S],issues:[]},c),g=y.has(S);_ instanceof Promise?d.push(_.then(p=>g?z0(p,l,S,u):Gc(p,l,S))):g?z0(_,l,S,u):Gc(_,l,S)}}if(!a)return d.length?Promise.all(d).then(()=>l):l;const f=[];for(const h of Object.keys(u)){if(n.value.keySet.has(h))continue;if(a._zod.def.type==="never"){f.push(h);continue}const m=a._zod.run({value:u[h],issues:[]},c);m instanceof Promise?d.push(m.then(y=>Gc(y,l,h))):Gc(m,l,h)}return f.length&&l.issues.push({code:"unrecognized_keys",keys:f,input:u,inst:t}),d.length?Promise.all(d).then(()=>l):l}}),tq=Wt("$ZodInterface",(t,e)=>{SC.init(t,e)}),nq=Wt("$ZodObject",(t,e)=>{SC.init(t,e)}),rq=Wt("$ZodEnum",(t,e)=>{li.init(t,e);const n=Object.entries(e.entries).filter(([r,s])=>typeof e.entries[e.entries[r]]!="number").map(([r,s])=>s);t._zod.values=new Set(n),t._zod.pattern=new RegExp(`^(${n.filter(r=>NH.has(typeof r)).map(r=>typeof r=="string"?jH(r):r.toString()).join("|")})$`),t._zod.parse=(r,s)=>{const i=r.value;return t._zod.values.has(i)||r.issues.push({code:"invalid_value",values:n,input:i,inst:t}),r}}),sq=Wt("$ZodOptional",(t,e)=>{li.init(t,e),t._zod.qout="true",e.innerType._zod.values&&(t._zod.values=new Set([...e.innerType._zod.values,void 0]));const n=e.innerType._zod.pattern;n&&(t._zod.pattern=new RegExp(`^(${_C(n.source)})?$`)),t._zod.parse=(r,s)=>r.value===void 0?r:e.innerType._zod.run(r,s)}),iq=Wt("$ZodNullable",(t,e)=>{li.init(t,e),t._zod.qin=e.innerType._zod.qin,t._zod.qout=e.innerType._zod.qout;const n=e.innerType._zod.pattern;n&&(t._zod.pattern=new RegExp(`^(${_C(n.source)}|null)$`)),e.innerType._zod.values&&(t._zod.values=new Set([...e.innerType._zod.values,null])),t._zod.parse=(r,s)=>r.value===null?r:e.innerType._zod.run(r,s)});function oq(t,e){return new t({type:"string",...ks()})}function aq(t,e){return new t({type:"number",checks:[],...ks()})}function lq(t,e){return new JH({check:"less_than",...ks(),value:t,inclusive:!0})}function cq(t,e){return new YH({check:"greater_than",...ks(),value:t,inclusive:!0})}const uq=VH.bind({Error:Gi}),dq=HH.bind({Error:Gi}),fq=qH.bind({Error:Gi}),hq=KH.bind({Error:Gi}),Ji=Wt("ZodMiniType",(t,e)=>{if(!t._zod)throw new Error("Uninitialized schema in mixin ZodMiniType.");li.init(t,e),t.def=e,t.parse=(n,r)=>uq(t,n,r),t.safeParse=(n,r)=>dq(t,n,r),t.parseAsync=async(n,r)=>fq(t,n,r),t.safeParseAsync=async(n,r)=>hq(t,n,r),t.check=(...n)=>t.clone({...e,checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"}}}:r)]}),t.clone=n=>ev(t,n??e),t.brand=()=>t,t.register=(n,r)=>(n.add(t,r),t)}),pq=Wt("ZodMiniString",(t,e)=>{QH.init(t,e),Ji.init(t,e)});function Tn(t){return oq(pq)}const mq=Wt("ZodMiniNumber",(t,e)=>{ZH.init(t,e),Ji.init(t,e)});function Pn(t){return aq(mq)}const gq=Wt("ZodMiniArray",(t,e)=>{eq.init(t,e),Ji.init(t,e)});function df(t,e){return new gq({type:"array",element:t,...ks()})}const AC=Wt("ZodMiniInterface",(t,e)=>{tq.init(t,e),Ji.init(t,e)});function yq(t,e,n=AC){const r=Qy(()=>BH(t)),s={type:"interface",get shape(){const i=r.value.shape;return Zy(this,"shape",i),i},get optional(){return r.value.optional},...ks()};return new n(s)}const $C=Wt("ZodMiniObject",(t,e)=>{nq.init(t,e),Ji.init(t,e)});function Is(t,e){const n={type:"object",shape:t??{},get optional(){return FH(t??{})},...ks()};return new $C(n)}function CC(t,e){return e instanceof li?lp(t,e):t instanceof AC?lp(t,yq(e)):t instanceof $C?lp(t,Is(e)):zH(t,e)}const vq=Wt("ZodMiniEnum",(t,e)=>{rq.init(t,e),Ji.init(t,e)});function bq(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new vq({type:"enum",entries:n,...ks()})}const _q=Wt("ZodMiniOptional",(t,e)=>{sq.init(t,e),Ji.init(t,e)});function sr(t,e){return new _q({type:"optional",innerType:t,...ks()})}const wq=Wt("ZodMiniNullable",(t,e)=>{iq.init(t,e),Ji.init(t,e)});function ys(t,e){return new wq({type:"nullable",innerType:t,...ks()})}const nv=Is({id:Pn(),name:Tn(),overview:sr(ys(Tn())),first_air_date:sr(Tn()),last_air_date:sr(Tn()),poster_path:sr(ys(Tn())),number_of_seasons:sr(Pn()),number_of_episodes:sr(Pn()),vote_average:sr(Pn())}),xq=Is({imdb_id:sr(ys(Tn()))}),kC=Is({id:Pn(),name:Tn(),season_number:Pn(),episode_count:sr(Pn()),overview:sr(ys(Tn())),air_date:sr(ys(Tn()))}),Eq=Is({id:Pn(),name:Tn(),episode_number:Pn(),season_number:Pn(),overview:sr(ys(Tn())),air_date:sr(ys(Tn())),runtime:sr(ys(Pn()))}),Sq=Is({seasons:df(kC),status:bq(["Ended","Canceled","Planned","Pilot","Returning Series","In Production"])}),Aq=CC(nv,Sq),$q=Is({episodes:df(Eq)}),Cq=CC(kC,$q),kq=Is({tv_results:df(nv)}),Iq=Is({page:Pn(),total_results:Pn(),total_pages:Pn(),results:df(nv)});class Rq extends Fa{constructor(){super(...arguments);st(this,"apiKey","f7105a03bb0a59160d88c3d60fbc2ff1");st(this,"baseUrl","https://api.themoviedb.org/3");st(this,"defaultParams",{api_key:this.apiKey,language:"en-US"})}showUrl(n){return`https://www.themoviedb.org/tv/${n.id}`}showImageUrl(n){return n.poster_path?`https://image.tmdb.org/t/p/w500${n.poster_path}`:void 0}async searchShows(n,r){if(r){const i=await this.request(kq,`find/${r}`,{external_source:"imdb_id"});if(i.tv_results.length>0)return i.tv_results}return(await this.request(Iq,"search/tv",{query:n})).results}async getShowDetails(n){return this.request(Aq,`tv/${n}`)}async getShowExternalIds(n){return this.request(xq,`tv/${n}/external_ids`)}async getSeasonDetails(n,r){return this.request(Cq,`tv/${n}/season/${r}`)}async request(n,r,s={}){const i=new URL(`${this.baseUrl}/${r}`);Object.entries(this.defaultParams).forEach(([l,c])=>{i.searchParams.append(l,c)}),Object.entries(s).forEach(([l,c])=>{i.searchParams.append(l,String(c))});const o=await fetch(i.href);if(!o.ok)throw new Error(`TMDB API error: ${o.status} ${o.statusText}`);const a=await o.json();return n.parse(a)}}const cr=_x(Rq),Tq=Is({title:Tn(),imdb:ys(Tn()),type:Pn().check(cq(1),lq(4)),rating:ys(Pn()),status:Tn(),checkedDate:Tn()});class Oq extends Fa{async addShow(e){const n=await cr.getShowDetails(e.id),r=await cr.getShowExternalIds(e.id);return aO(new gn,async s=>{await this.updateShow(s,n,r),s.mintUrl(),await Promise.all(s.episodes.map(i=>i.save())),await s.save()})}findByTmdbId(e){return $i(gn).find(r=>r.tmdbId===e)||null}findByImdbId(e){return $i(gn).find(r=>r.imdbId===e)||null}async update(){const e=$i(gn).filter(n=>n.status==="watching"&&n.episodes.filter(r=>!r.watched).length<3);for(const n of e){const r=n.tmdbId;if(!r)continue;const s=await cr.getShowDetails(r);await this.updateShow(n,s),await Promise.all(n.episodes.map(i=>i.save())),await n.save()}}async importFromTViso(e){const n={imported:[],skipped:[],failed:[]};for(const[r,s]of e.entries())try{const i=Tq.parse(s);if(i.type!==1){n.skipped.push({title:i.title,reason:"Not a TV show"});continue}if(i.imdb&&this.findByImdbId(i.imdb)){n.skipped.push({title:i.title,reason:"Already in catalog"});continue}const a=await cr.searchShows(i.title,i.imdb);if(!a||a.length===0){n.failed.push({title:i.title,reason:"Not found on TMDB"});continue}const l=a[0];if(this.findByTmdbId(l.id)){n.skipped.push({title:i.title,reason:"Already in catalog"});continue}const u=await cr.getShowDetails(l.id);if(!u){n.failed.push({title:i.title,reason:"Failed to get show details"});continue}const d=new gn({name:u.name,description:u.overview,imageUrl:cr.showImageUrl(u),externalUrls:[`https://www.themoviedb.org/tv/${l.id}`],startDate:u.first_air_date?new Date(u.first_air_date):void 0,endDate:u.last_air_date?new Date(u.last_air_date):void 0});if(i.imdb&&d.externalUrls.push(`https://www.imdb.com/title/${i.imdb}`),await d.updateStatus(this.mapTVisoStatusToShowStatus(i.status)),u.seasons)for(const f of u.seasons){if(f.season_number===0)continue;const h=await cr.getSeasonDetails(l.id,f.season_number);if(h){const m=d.relatedSeasons.attach({number:f.season_number,name:f.name,description:f.overview||""});if(h.episodes)for(const y of h.episodes)m.relatedEpisodes.attach({number:y.episode_number,name:y.name||`Episode ${y.episode_number}`,description:y.overview||"",airDate:y.air_date?new Date(y.air_date):void 0})}}d.mintUrl(),await Promise.all(d.episodes.map(f=>f.save())),await d.save(),n.imported.push({title:i.title})}catch{const o=typeof s=="object"&&s!==null&&"title"in s&&typeof s.title=="string"?s.title:`Item ${r+1}`;n.failed.push({title:o,reason:"Validation or import error"})}return n}async boot(){await dt.booted,await N$(gn),await Promise.all($i(gn).map(e=>e.loadRelationsIfUnloaded()))}async updateShow(e,n,r){var o,a,l;await e.loadRelationsIfUnloaded();const s=[cr.showUrl(n)];r!=null&&r.imdb_id&&s.push(`https://www.imdb.com/title/${r.imdb_id}`),e.name=n.name,e.description=n.overview||"",e.externalUrls=Op(e.externalUrls.concat(Op(s))),e.imageUrl??(e.imageUrl=cr.showImageUrl(n)),n.first_air_date&&(e.startDate=new Date(n.first_air_date)),n.last_air_date&&(n.status==="Ended"||n.status==="Canceled")&&(e.endDate=new Date(n.last_air_date));const i=n.seasons.filter(c=>c.season_number>0)??[];if(!(i.length===0||n.number_of_episodes&&e.episodes.length===n.number_of_episodes))for(const c of i){const u=await cr.getSeasonDetails(n.id,c.season_number),d=((o=e.seasons)==null?void 0:o.find(f=>f.number===c.season_number))??e.relatedSeasons.attach({number:c.season_number});if(((a=d.episodes)==null?void 0:a.length)!==u.episodes.length)for(const f of u.episodes){const h=((l=d.episodes)==null?void 0:l.find(m=>m.number===f.episode_number))??d.relatedEpisodes.attach({number:f.episode_number});h.name=f.name,f.overview&&(h.description=f.overview),f.runtime&&(h.duration=Ex({minutes:f.runtime})),f.air_date&&(h.publishedAt=new Date(f.air_date))}}}mapTVisoStatusToShowStatus(e){switch(e.toLowerCase()){case"watching":case"following":return"watching";case"completed":case"watched":return"completed";case"dropped":return"dropped";default:return"pending"}}}const ff=_x(Oq),Dq={class:"hidden md:block"},IC=pe({__name:"ShowsUpdateButton",setup(t){const e=xe(!1);async function n(){e.value=!0;try{await Promise.all([ff.update(),J2(1e3)]),ft.toast(fr("shows.update.success"))}catch(r){bs.report(r)}finally{e.value=!1}}return(r,s)=>{const i=OH,o=at;return O(),ae(o,{variant:"secondary",class:"py-1.5",disabled:e.value,onClick:n},{default:Y(()=>[K(i,{class:Je(["size-4",{"animate-spin":e.value}])},null,8,["class"]),U("span",Dq,ue(r.$t("shows.actions.update")),1)]),_:1},8,["disabled"])}}}),Pq={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function Lq(t,e){return O(),re("svg",Pq,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5l-1.5 1.5l-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16A6.5 6.5 0 0 1 3 9.5A6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14S14 12 14 9.5S12 5 9.5 5"},null,-1)]))}const RC=Ue({name:"mdi-magnify",render:Lq}),Mq={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function Nq(t,e){return O(),re("svg",Mq,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5z"},null,-1)]))}const TC=Ue({name:"mdi-calendar",render:Nq}),jq={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function Fq(t,e){return O(),re("svg",jq,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2L9.19 8.62L2 9.24l5.45 4.73L5.82 21z"},null,-1)]))}const Uq=Ue({name:"mdi-star",render:Fq}),Bq={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function zq(t,e){return O(),re("svg",Bq,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M21 17H3V5h18m0-2H3a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h5v2h8v-2h5a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2"},null,-1)]))}const rv=Ue({name:"mdi-television",render:zq}),Vq={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function Hq(t,e){return O(),re("svg",Vq,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M21 7L9 19l-5.5-5.5l1.41-1.41L9 16.17L19.59 5.59z"},null,-1)]))}const qq=Ue({name:"mdi-check",render:Hq}),Kq={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function Wq(t,e){return O(),re("svg",Kq,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"},null,-1)]))}const sv=Ue({name:"mdi-plus",render:Wq}),Gq={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function Jq(t,e){return O(),re("svg",Gq,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12z"},null,-1)]))}const OC=Ue({name:"mdi-close",render:Jq}),Yq={class:"relative border-b border-gray-200"},Xq={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},Qq=["placeholder","onKeydown"],Zq=["onClick"],e9={class:"max-h-[70vh] overflow-y-auto"},t9={key:0,class:"flex items-center justify-center p-6"},n9={key:1,class:"p-3 text-center text-sm text-red-500"},r9={key:2,class:"p-3 text-center text-sm text-gray-500"},s9={key:3},i9={class:"divide-y divide-gray-100"},o9={class:"flex items-start justify-between"},a9={class:"flex gap-2"},l9=["src","alt"],c9={class:"text-sm font-medium"},u9={key:0,class:"mt-0.5 line-clamp-2 text-xs text-gray-600"},d9=["onClick"],f9={key:1,class:"ml-2 inline-flex shrink-0 items-center rounded-full bg-green-100 px-2 py-0.5 text-xs font-medium text-green-800"},h9={class:"mt-2 flex items-center gap-3 text-xs text-gray-500"},p9={key:0,class:"flex items-center gap-0.5"},m9={key:1,class:"flex items-center gap-0.5 text-[#ffca28]"},g9={key:2,class:"flex items-center gap-0.5"},DC=pe({__name:"SearchShowModal",setup(t){let e=null;const n=xe(""),r=xe([]),s=xe(!1),i=xe(""),o=Vy(gn);function a(){if(e&&clearTimeout(e),n.value.length<2){r.value=[];return}e=window.setTimeout(()=>l(),300)}async function l(){if(!n.value){r.value=[];return}s.value=!0,i.value="";try{const d=await cr.searchShows(n.value);r.value=d.filter(f=>f.name&&f.overview)}catch(d){i.value=fr("shows.search.error"),bs.report(d)}finally{s.value=!1}}function c(d){const f=cr.showUrl(d);return o.value.some(h=>{var m;return(m=h.externalUrls)==null?void 0:m.includes(f)})}async function u(d,f){f(),await ft.loading(fr("shows.search.adding"),async()=>{const h=await ff.addShow(d);ft.toast(fr("shows.search.toast_added",{name:h.name}))})}return Pa(()=>e&&clearTimeout(e)),(d,f)=>{const h=ZA,m=RC,y=OC,S=sv,x=qq,_=rv,g=Uq,p=TC,v=QA,E=YA;return O(),ae(E,{class:"relative z-50"},{default:Y(({close:k})=>[K(h,{class:"fixed inset-0 bg-black/30"}),K(v,{class:"fixed top-16 left-1/2 z-10 w-full max-w-[calc(100vw-(--spacing(8)))] -translate-x-1/2 overflow-hidden rounded-lg bg-white shadow-md md:max-w-xl"},{default:Y(()=>[U("div",Yq,[U("div",Xq,[K(m,{class:"size-4 text-gray-400"})]),zs(U("input",{"onUpdate:modelValue":f[0]||(f[0]=A=>n.value=A),type:"search",class:"block w-full border-0 bg-transparent p-3 pl-10 text-gray-900 placeholder:text-gray-500 focus:ring-0",placeholder:d.$t("shows.search.placeholder"),autofocus:"",onKeydown:zd(()=>k(),["esc"]),onInput:a},null,40,Qq),[[us,n.value]]),U("button",{type:"button",class:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-500",onClick:()=>k()},[K(y,{class:"size-4"})],8,Zq)]),U("div",e9,[s.value?(O(),re("div",t9,f[1]||(f[1]=[U("div",{class:"h-6 w-6 animate-spin rounded-full border-3 border-gray-200 border-t-[#ff4081]"},null,-1)]))):i.value?(O(),re("div",n9,ue(i.value),1)):r.value.length===0&&n.value.length>0?(O(),re("div",r9,ue(d.$t("shows.search.no_results")),1)):r.value.length>0?(O(),re("div",s9,[U("ul",i9,[(O(!0),re(Ge,null,Lt(r.value,A=>(O(),re("li",{key:A.id,class:"p-3"},[U("div",o9,[U("div",a9,[A.poster_path?(O(),re("img",{key:0,src:d.$tmdb.showImageUrl(A),alt:A.name,class:"h-16 w-12 rounded object-cover"},null,8,l9)):Te("",!0),U("div",null,[U("h3",c9,ue(A.name),1),A.overview?(O(),re("p",u9,ue(A.overview),1)):Te("",!0)])]),c(A)?(O(),re("span",f9,[K(x,{class:"mr-0.5 size-3.5"}),je(" "+ue(d.$t("shows.search.already_added")),1)])):(O(),re("button",{key:0,class:"ml-2 inline-flex shrink-0 items-center rounded-full bg-pink-500 px-2 py-0.5 text-xs font-medium text-white hover:bg-pink-600",onClick:C=>u(A,k)},[K(S,{class:"mr-0.5 size-3.5"}),je(" "+ue(d.$t("shows.search.add_to_my_shows")),1)],8,d9))]),U("div",h9,[A.number_of_seasons?(O(),re("span",p9,[K(_,{class:"size-3.5"}),je(" "+ue(d.$t("shows.show.seasons_count",A.number_of_seasons)),1)])):Te("",!0),A.vote_average?(O(),re("span",m9,[K(g,{class:"size-3.5"}),je(" "+ue((A.vote_average/2).toFixed(1))+"/5 ",1)])):Te("",!0),A.first_air_date?(O(),re("span",g9,[K(p,{class:"size-3.5"}),je(" "+ue(new Date(A.first_air_date).getFullYear()),1)])):Te("",!0)])]))),128))])])):Te("",!0)])]),_:2},1024)]),_:1})}}}),y9={class:"hidden md:block"},PC=pe({__name:"ShowsSearchButton",setup(t){return(e,n)=>{const r=RC,s=at;return O(),ae(s,{variant:"secondary",class:"py-1.5",onClick:n[0]||(n[0]=i=>e.$ui.modal(DC))},{default:Y(()=>[K(r,{class:"size-4"}),U("span",y9,ue(e.$t("shows.actions.search")),1)]),_:1})}}}),v9={class:"mb-6 flex flex-wrap items-center justify-between gap-2"},b9={class:"text-xl font-bold"},_9={class:"flex gap-2"},w9={class:"mb-6"},x9={key:0,class:"rounded-lg border border-dashed border-gray-300 p-6 text-center"},E9={class:"mb-2 text-gray-600"},S9={class:"mt-3"},A9={key:1,class:"mb-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},$9={class:"p-3"},C9={class:"mb-2 flex items-start justify-between"},k9={class:"text-base font-semibold"},I9={class:"bg-status-watching flex h-6 w-6 shrink-0 items-center justify-center rounded-full text-white shadow-sm"},R9={class:"flex gap-3"},T9={key:0,class:"h-[100px] w-[70px] flex-shrink-0"},O9={class:"flex-1 overflow-hidden"},D9={class:"mt-1 flex items-center gap-2 text-xs text-gray-500"},P9={class:"flex items-center gap-0.5"},L9={key:0,class:"mt-2 rounded bg-blue-50 p-2"},M9={class:"text-xs font-medium text-blue-700"},N9={class:"text-xs break-words text-blue-600"},j9={class:"mt-2 flex justify-end"},F9=["onClick"],U9={class:"flex justify-center"},B9=pe({__name:"Home",setup(t){const e=Vy(gn),n=ne(()=>e.value.filter(s=>s.status==="watching"&&s.nextEpisode!==null));function r(s){return s.episodes.filter(i=>!i.watched).length}return(s,i)=>{const o=PC,a=IC,l=bC,c=at,u=Xy,d=Yy,f=vC,h=Md("router-link"),m=xH,y=wo,S=To;return O(),ae(S,null,{default:Y(()=>[U("div",v9,[U("h2",b9,ue(s.$t("home.title")),1),U("div",_9,[K(o),K(a)])]),U("div",w9,[n.value.length===0?(O(),re("div",x9,[K(l,{class:"mx-auto mb-3 size-14 text-gray-400"}),U("p",E9,ue(s.$t("home.no_watching_shows")),1),U("div",S9,[K(c,{route:"shows.index",variant:"secondary"},{default:Y(()=>[je(ue(s.$t("home.browse_shows")),1)]),_:1})])])):(O(),re("div",A9,[(O(!0),re(Ge,null,Lt(n.value,x=>(O(),re("div",{key:x.url,class:"relative overflow-hidden rounded-lg border border-[#e0e0ff] bg-white shadow-sm transition-all hover:-translate-y-1 hover:border-[#ff4081] hover:shadow-md"},[K(h,{to:{name:"shows.show",params:{show:x.slug}},class:"block"},{default:Y(()=>[i[0]||(i[0]=U("div",{class:"h-1 w-full bg-gradient-to-r from-[#ff4081] via-[#7e57c2] to-[#ffca28]"},null,-1)),U("div",$9,[U("div",C9,[U("h3",k9,ue(x.name),1),U("div",I9,[K(u,{class:"size-3.5"})])]),U("div",R9,[x.imageUrl?(O(),re("div",T9,[K(d,{src:x.imageUrl,class:"h-full w-full rounded-md object-cover"},null,8,["src"])])):Te("",!0),U("div",O9,[U("div",D9,[U("div",P9,[K(f,{class:"size-3.5"}),U("span",null,ue(s.$t("home.new_episodes",r(x))),1)])]),x.nextEpisode?(O(),re("div",L9,[U("p",M9,ue(s.$t("shows.episode.next_to_watch"))+": ",1),U("p",N9,ue(x.nextEpisode.shortName)+": "+ue(x.nextEpisode.name),1)])):Te("",!0)])]),U("div",j9,[x.nextEpisode?(O(),re("button",{key:0,class:"rounded bg-green-500 px-2 py-1 text-xs font-medium text-white hover:bg-green-600",onClick:Xn(_=>x.nextEpisode.watch(),["prevent"])},ue(s.$t("shows.episode.mark_as_watched")),9,F9)):Te("",!0)])])]),_:2,__:[0]},1032,["to"])]))),128))])),U("div",U9,[n.value.length>0?(O(),ae(y,{key:0,route:"shows.index",class:"flex items-center gap-1 text-sm"},{default:Y(()=>[je(ue(s.$t("home.view_all_shows"))+" ",1),K(m,{class:"ml-0.5 size-4"})]),_:1})):Te("",!0)])])]),_:1})}}}),z9={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function V9(t,e){return O(),re("svg",z9,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6z"},null,-1)]))}const LC=Ue({name:"mdi-delete",render:V9}),H9={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function q9(t,e){return O(),re("svg",H9,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M8.59 16.58L13.17 12L8.59 7.41L10 6l6 6l-6 6z"},null,-1)]))}const MC=Ue({name:"mdi-chevron-right",render:q9}),K9={class:"relative rounded-lg bg-white p-4 shadow-sm sm:p-6"},W9={class:"space-y-2"},G9={class:"flex items-center justify-between"},J9={class:"text-base font-medium"},Y9={class:"space-y-2"},X9=["onClick"],Q9={class:"space-y-2"},Z9={class:"flex items-center justify-between"},eK={class:"text-base font-medium"},tK={class:"flex cursor-pointer items-center justify-between p-2 transition-colors hover:bg-gray-50 sm:p-3"},nK={class:"flex items-center text-sm font-medium"},rK={class:"ml-1.5 text-xs text-gray-500"},sK={class:"flex items-center"},iK=["onClick"],oK={class:"border-t border-gray-200 p-2 sm:p-3"},aK={class:"space-y-2"},lK={class:"flex items-center gap-1.5"},cK={class:"text-xs text-gray-500"},uK=["onUpdate:modelValue","placeholder"],dK=["onClick"],fK={class:"space-y-2 pl-5"},hK=["onUpdate:modelValue","placeholder"],pK={class:"grid grid-cols-1 gap-2 sm:grid-cols-2"},mK=["onUpdate:modelValue","placeholder"],gK=["onUpdate:modelValue"],yK=["onClick"],vK={class:"flex flex-wrap justify-end gap-3 pt-1"},NC=pe({__name:"ShowForm",props:{show:{}},emits:["saved","cancel"],setup(t,{emit:e}){var h,m,y,S,x,_;const n=e,r=ef({name:Ty(((h=t.show)==null?void 0:h.name)??""),description:Cm(((m=t.show)==null?void 0:m.description)??""),imageUrl:Cm(((y=t.show)==null?void 0:y.imageUrl)??""),status:k5(Pp,((S=t.show)==null?void 0:S.status)??"pending")}),s=yr(((x=t.show)==null?void 0:x.seasons)??[]),i=xe(((_=t.show)==null?void 0:_.externalUrls)??[]);function o(){const g=new mo({number:s.value.length+1});g.setRelationModels("episodes",[]),s.value=s.value.concat([g])}function a(g){const p=s.value.indexOf(g);p!==-1&&(s.value.splice(p,1),s.value.forEach((v,E)=>v.number=E+1),s.value=s.value.slice(0))}function l(g){if(!g.episodes)throw new Error("Season episodes not loaded");g.relatedEpisodes.attach({number:g.episodes.length+1}),s.value=s.value.slice(0)}function c(g,p){if(!g.episodes)throw new Error("Season episodes not loaded");g.relatedEpisodes.detach(p),g.episodes.forEach((v,E)=>v.number=E+1),s.value=s.value.slice(0)}function u(){i.value.push("")}function d(g){i.value.splice(g,1)}async function f(){ft.loading(fr("shows.form.saving"),async()=>{var k;const g=t.show??new gn,{status:p,...v}=r.data();g.setAttributes({...v,imageUrl:v.imageUrl||null}),g.externalUrls=i.value.filter(A=>A.trim()!=="");const E=g.watchAction??g.relatedWatchAction.attach();E.status=p??void 0;for(const A of s.value)g.relatedSeasons.attach(A);g.exists()||g.mintUrl(),await Promise.all(((k=g.episodes)==null?void 0:k.map(A=>A.save()))??[]),await g.save(),n("saved",g)})}return(g,p)=>{const v=Cy,E=Ry,k=IB,A=OC,C=sv,I=MC,N=LC,j=at,V=nf;return O(),re("div",K9,[K(V,{class:"space-y-3",form:$(r),onSubmit:f},{default:Y(()=>[K(v,{name:"status",label:g.$t("shows.form.status"),options:$(Pp),"render-option":L=>g.$t(`shows.status.${L}`)},null,8,["label","options","render-option"]),K(E,{name:"name",label:g.$t("shows.form.name")},null,8,["label"]),K(k,{name:"description",label:g.$t("shows.form.description"),rows:"3"},null,8,["label"]),K(E,{name:"imageUrl",label:g.$t("shows.form.image_url")},null,8,["label"]),U("div",W9,[U("div",G9,[U("h3",J9,ue(g.$t("shows.form.external_urls")),1)]),U("div",Y9,[(O(!0),re(Ge,null,Lt(i.value,(L,Z)=>(O(),re("div",{key:Z,class:"flex items-center gap-2"},[K(E,{modelValue:i.value[Z],"onUpdate:modelValue":T=>i.value[Z]=T,class:"flex-1",placeholder:g.$t("shows.form.url_placeholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),U("button",{type:"button",class:"shrink-0 text-red-500 hover:text-red-700",onClick:T=>d(Z)},[K(A,{class:"size-4"})],8,X9)]))),128)),U("button",{type:"button",class:"inline-flex items-center rounded border border-gray-300 bg-white px-2 py-1 text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-50",onClick:u},[K(C,{class:"mr-1 size-3.5"}),je(" "+ue(g.$t("shows.form.add_url")),1)])])]),U("div",Q9,[U("div",Z9,[U("h3",eK,ue(g.$t("shows.form.seasons")),1),U("button",{type:"button",class:"inline-flex items-center rounded border border-gray-300 bg-white px-2 py-1 text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-50",onClick:o},[K(C,{class:"mr-1 size-3.5"}),je(" "+ue(g.$t("shows.form.add_season")),1)])]),(O(!0),re(Ge,null,Lt(s.value,(L,Z)=>{var T;return O(),re("details",{key:Z,class:"group rounded border border-gray-200"},[U("summary",tK,[U("h4",nK,[K(I,{class:"mr-1.5 size-4 transform transition-transform group-open:rotate-90"}),je(" "+ue(g.$t("shows.form.season"))+" "+ue(L.number)+" ",1),U("span",rK," ("+ue(((T=L.episodes)==null?void 0:T.length)||0)+" "+ue(g.$t("shows.show.episodes"))+") ",1)]),U("div",sK,[U("button",{type:"button",class:"shrink-0 text-red-500 hover:text-red-700",onClick:Xn(q=>a(L),["prevent"])},[K(N,{class:"size-4"})],8,iK)])]),U("div",oK,[U("div",aK,[(O(!0),re(Ge,null,Lt(L.episodes,(q,z)=>(O(),re("div",{key:z,class:"mb-2 space-y-2 border-b border-gray-100 pb-2 last:mb-0 last:border-0 last:pb-0"},[U("div",lK,[U("span",cK,ue(q.number)+".",1),zs(U("input",{"onUpdate:modelValue":se=>q.name=se,class:"flex-1 rounded border-gray-300 text-xs focus:border-[#ff4081] focus:ring-[#ff4081]",placeholder:g.$t("shows.form.episode_name")},null,8,uK),[[us,q.name]]),U("button",{type:"button",class:"shrink-0 text-red-500 hover:text-red-700",onClick:se=>c(L,q)},[K(A,{class:"size-4"})],8,dK)]),U("div",fK,[zs(U("textarea",{"onUpdate:modelValue":se=>q.description=se,class:"w-full rounded border-gray-300 text-xs focus:border-[#ff4081] focus:ring-[#ff4081]",placeholder:g.$t("shows.form.episode_description"),rows:"2"},null,8,hK),[[us,q.description]]),U("div",pK,[zs(U("input",{"onUpdate:modelValue":se=>q.duration=se,class:"rounded border-gray-300 text-xs focus:border-[#ff4081] focus:ring-[#ff4081]",placeholder:g.$t("shows.form.episode_duration")},null,8,mK),[[us,q.duration]]),zs(U("input",{"onUpdate:modelValue":se=>q.publishedAt=se,type:"date",class:"rounded border-gray-300 text-xs focus:border-[#ff4081] focus:ring-[#ff4081]"},null,8,gK),[[us,q.publishedAt]])])])]))),128)),U("button",{type:"button",class:"inline-flex items-center text-xs text-[#ff4081] hover:text-[#d81b60]",onClick:q=>l(L)},[K(C,{class:"mr-1 size-3.5"}),je(" "+ue(g.$t("shows.form.add_episode")),1)],8,yK)])])])}),128))]),U("div",vK,[K(j,{variant:"secondary",class:"py-1.5",onClick:p[0]||(p[0]=L=>g.$emit("cancel"))},{default:Y(()=>[je(ue(g.$t("shows.form.cancel")),1)]),_:1}),K(j,{submit:"",class:"py-1.5"},{default:Y(()=>[je(ue(g.show?g.$t("shows.form.update"):g.$t("shows.form.create")),1)]),_:1})])]),_:1},8,["form"]),p[1]||(p[1]=U("div",{class:"absolute -right-2 -bottom-2 rotate-15 transform text-3xl"}," 📺 ",-1))])}}}),bK={},_K={class:"mb-6 text-2xl font-bold"};function wK(t,e){const n=NC,r=To;return O(),ae(r,null,{default:Y(()=>[U("h2",_K,ue(t.$t("shows.create.title")),1),K(n,{onSaved:e[0]||(e[0]=s=>t.$router.push({name:"shows.index"})),onCancel:e[1]||(e[1]=s=>t.$router.push({name:"shows.index"}))})]),_:1})}const xK=lf(bK,[["render",wK]]),EK={class:"mb-6 text-2xl font-bold"},SK=pe({__name:"Edit",props:{show:{}},setup(t){return(e,n)=>{const r=NC,s=To;return O(),ae(s,null,{default:Y(()=>[U("h2",EK,ue(e.$t("shows.edit.title")),1),K(r,{show:e.show,onSaved:n[0]||(n[0]=i=>e.$router.push({name:"shows.show",params:{show:e.show.slug}})),onCancel:n[1]||(n[1]=i=>e.$router.push({name:"shows.show",params:{show:e.show.slug}}))},null,8,["show"])]),_:1})}}}),AK={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function $K(t,e){return O(),re("svg",AK,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M15 13h1.5v2.82l2.44 1.41l-.75 1.3L15 16.69zm4-5H5v11h4.67c-.43-.91-.67-1.93-.67-3a7 7 0 0 1 7-7c1.07 0 2.09.24 3 .67zM5 21a2 2 0 0 1-2-2V5c0-1.11.89-2 2-2h1V1h2v2h8V1h2v2h1a2 2 0 0 1 2 2v6.1c1.24 1.26 2 2.99 2 4.9a7 7 0 0 1-7 7c-1.91 0-3.64-.76-4.9-2zm11-9.85A4.85 4.85 0 0 0 11.15 16c0 2.68 2.17 4.85 4.85 4.85A4.85 4.85 0 0 0 20.85 16c0-2.68-2.17-4.85-4.85-4.85"},null,-1)]))}const jC=Ue({name:"mdi-calendar-clock",render:$K}),CK={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function kK(t,e){return O(),re("svg",CK,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12S6.47 2 12 2m3.59 5L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41z"},null,-1)]))}const FC=Ue({name:"mdi-close-circle",render:kK}),IK={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function RK(t,e){return O(),re("svg",IK,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2m-2 15l-5-5l1.41-1.41L10 14.17l7.59-7.59L19 8z"},null,-1)]))}const iv=Ue({name:"mdi-check-circle",render:RK}),TK={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function OK(t,e){return O(),re("svg",TK,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"m14 12l-4-4v3H2v2h8v3m10 2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3h2V6h12v12H6v-3H4v3a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2"},null,-1)]))}const DK=Ue({name:"mdi-import",render:OK}),PK={class:"mb-4 flex flex-wrap items-center justify-between gap-2"},LK={class:"text-xl font-bold"},MK={key:0,class:"flex gap-2"},NK={class:"hidden sm:block"},jK={class:"hidden sm:block"},FK={key:0,class:"rounded-lg border-2 border-dashed p-6 text-center"},UK={class:"mb-3 text-base"},BK={class:"flex flex-col justify-center gap-3 sm:flex-row"},zK={key:1,class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},VK={class:"p-3"},HK={class:"mb-2 flex items-start justify-between"},qK={class:"text-base font-semibold break-words"},KK=["title"],WK={class:"flex gap-3"},GK={key:0,class:"h-[120px] w-[80px] flex-shrink-0"},JK={class:"flex-1 overflow-hidden"},YK={key:0,class:"line-clamp-2 text-xs text-gray-600"},XK={class:"mt-1.5 flex items-center gap-2 text-xs text-gray-500"},QK={key:0,class:"flex items-center gap-0.5"},ZK={key:0,class:"mt-2 rounded-md border border-blue-100 bg-blue-50 p-2"},eW={class:"flex flex-wrap items-start justify-between gap-2"},tW={class:"flex-1"},nW={class:"text-xs font-medium text-blue-700"},rW={class:"text-xs break-words text-blue-600"},sW=["onClick"],iW={key:1,class:"mt-2 rounded-md border border-green-100 bg-green-50 p-2"},oW={class:"text-xs text-green-600"},aW=pe({__name:"Index",setup(t){const e=Vy(gn);return(n,r)=>{const s=PC,i=IC,o=DK,a=at,l=sv,c=bC,u=Xy,d=iv,f=FC,h=jC,m=Yy,y=rv,S=$y,x=To;return O(),ae(x,null,{default:Y(()=>[U("div",PK,[U("h2",LK,ue(n.$t("shows.index.title")),1),$(e).length>0?(O(),re("div",MK,[K(s),K(i),K(a,{route:"shows.import",variant:"secondary",class:"py-1.5"},{default:Y(()=>[K(o,{class:"size-4"}),U("span",NK,ue(n.$t("shows.actions.import")),1)]),_:1}),K(a,{route:"shows.create",class:"py-1.5"},{default:Y(()=>[K(l,{class:"size-4"}),U("span",jK,ue(n.$t("shows.actions.add")),1)]),_:1})])):Te("",!0)]),$(e).length===0?(O(),re("div",FK,[K(c,{class:"mx-auto mb-3 size-14 text-gray-400"}),U("p",UK,ue(n.$t("shows.index.empty")),1),U("div",BK,[K(a,{class:"transform transition-transform duration-300 hover:scale-105",route:"shows.create"},{default:Y(()=>[je(ue(n.$t("shows.index.add_first")),1)]),_:1}),K(a,{variant:"secondary",class:"transform transition-transform duration-300 hover:scale-105",onClick:r[0]||(r[0]=_=>n.$ui.modal(DC))},{default:Y(()=>[je(ue(n.$t("shows.actions.search")),1)]),_:1}),K(a,{variant:"secondary",class:"transform transition-transform duration-300 hover:scale-105",route:"shows.import"},{default:Y(()=>[je(ue(n.$t("shows.actions.import")),1)]),_:1})])])):(O(),re("div",zK,[(O(!0),re(Ge,null,Lt($(e),(_,g)=>(O(),re(Ge,{key:g},[_.slug?(O(),ae(S,{key:0,class:"relative cursor-pointer overflow-hidden rounded-lg border border-[#e0e0ff] bg-white shadow-sm transition-all hover:-translate-y-1 hover:border-[#ff4081] hover:shadow-md",route:"shows.show","route-params":{show:_.slug}},{default:Y(()=>{var p;return[r[1]||(r[1]=U("div",{class:"h-1 w-full bg-gradient-to-r from-[#ff4081] via-[#7e57c2] to-[#ffca28]"},null,-1)),U("div",VK,[U("div",HK,[U("h3",qK,ue(_.name),1),U("div",{class:Je(["flex h-6 w-6 shrink-0 items-center justify-center rounded-full text-white shadow-sm",`bg-status-${_.status}`]),title:n.$t(`shows.status.${_.status}`)},[_.status==="watching"?(O(),ae(u,{key:0,class:"size-3.5"})):_.status==="completed"?(O(),ae(d,{key:1,class:"size-3.5"})):_.status==="dropped"?(O(),ae(f,{key:2,class:"size-3.5"})):_.status==="pending"?(O(),ae(h,{key:3,class:"size-3.5"})):Te("",!0)],10,KK)]),U("div",WK,[_.imageUrl?(O(),re("div",GK,[K(m,{src:_.imageUrl,class:"h-full w-full rounded-md object-cover"},null,8,["src"])])):Te("",!0),U("div",JK,[_.description?(O(),re("p",YK,ue(_.description),1)):Te("",!0),U("div",XK,[(p=_.seasons)!=null&&p.length?(O(),re("span",QK,[K(y,{class:"size-3.5"}),je(" "+ue(n.$t("shows.show.seasons_count",_.seasons.length)),1)])):Te("",!0)])])]),_.nextEpisode?(O(),re("div",ZK,[U("div",eW,[U("div",tW,[U("p",nW,ue(n.$t("shows.episode.next_to_watch"))+": ",1),U("p",rW,ue(_.nextEpisode.shortName)+": "+ue(_.nextEpisode.name),1)]),U("button",{class:"ml-1 shrink-0 rounded bg-green-500 px-2 py-1 text-xs font-medium text-white hover:bg-green-600",onClick:Xn(v=>_.nextEpisode.watch(),["stop","prevent"])},ue(n.$t("shows.episode.mark_as_watched")),9,sW)])])):(O(),re("div",iW,[U("p",oW,ue(n.$t("shows.episode.all_watched")),1)]))])]}),_:2,__:[1]},1032,["route-params"])):Te("",!0)],64))),128))]))]),_:1})}}}),lW={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function cW(t,e){return O(),re("svg",lW,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M20 11v2H8l5.5 5.5l-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5L8 11z"},null,-1)]))}const uW=Ue({name:"mdi-arrow-left",render:cW}),dW={class:"mb-6"},fW={class:"text-2xl font-bold"},hW={class:"mt-2 text-gray-600"},pW={class:"mb-4"},mW={class:"rounded-lg border bg-white p-6 shadow-sm"},gW={class:"space-y-4"},yW={class:"block text-sm font-medium text-gray-700"},vW=["disabled"],bW={key:0,class:"mr-3 -ml-1 h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_W={key:0,class:"mt-6 rounded-lg border bg-white p-6 shadow-sm"},wW={class:"mb-4 text-lg font-semibold"},xW={class:"grid gap-4 sm:grid-cols-3"},EW={class:"rounded-lg bg-green-50 p-4"},SW={class:"flex items-center"},AW={class:"ml-3"},$W={class:"text-sm font-medium text-green-800"},CW={class:"rounded-lg bg-yellow-50 p-4"},kW={class:"flex items-center"},IW={class:"ml-3"},RW={class:"text-sm font-medium text-yellow-800"},TW={class:"rounded-lg bg-red-50 p-4"},OW={class:"flex items-center"},DW={class:"ml-3"},PW={class:"text-sm font-medium text-red-800"},LW={key:0,class:"mt-4"},MW={class:"mb-2 text-lg font-medium text-green-900"},NW={class:"mt-2 max-h-32 overflow-y-auto rounded border bg-green-50 p-3"},jW={class:"space-y-1 text-sm text-green-600"},FW={key:1,class:"mt-4"},UW={class:"mb-2 text-lg font-medium text-gray-900"},BW={class:"mt-2 max-h-32 overflow-y-auto rounded border bg-gray-50 p-3"},zW={class:"space-y-1 text-sm text-gray-600"},VW={key:2,class:"mt-4"},HW={class:"mb-2 text-lg font-medium text-red-900"},qW={class:"mt-2 max-h-32 overflow-y-auto rounded border bg-gray-50 p-3"},KW={class:"space-y-1 text-sm text-red-600"},WW=pe({__name:"Import",setup(t){const e=xe(null),n=xe(!1),r=xe(null);function s(o){const a=o.target;a.files&&a.files.length>0&&(e.value=a.files[0],r.value=null)}async function i(){if(e.value){n.value=!0,r.value=null;try{const o=await e.value.text(),a=JSON.parse(o),l=await ff.importFromTViso(a);r.value=l,l.imported.length>0&&l.failed.length===0?ft.toast(fr("shows.import.success",{count:l.imported.length})):l.imported.length===0?ft.toast(fr("shows.import.no_shows")):l.imported.length>0&&l.failed.length>0&&ft.toast(fr("shows.import.partial_success",{count:l.imported.length}))}catch{ft.toast(fr("shows.import.error"))}finally{n.value=!1}}}return(o,a)=>{const l=uW,c=at,u=To;return O(),ae(u,null,{default:Y(()=>[U("div",dW,[U("h2",fW,ue(o.$t("shows.import.title")),1),U("p",hW,ue(o.$t("shows.import.description")),1)]),U("div",pW,[K(c,{route:"shows.index",variant:"secondary",class:"py-1.5"},{default:Y(()=>[K(l,{class:"size-4"}),je(" "+ue(o.$t("shows.actions.back")),1)]),_:1})]),U("div",mW,[U("div",gW,[U("div",null,[U("label",yW,ue(o.$t("shows.import.select_file")),1),U("input",{type:"file",accept:".json",class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:rounded-full file:border-0 file:bg-blue-50 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-blue-700 hover:file:bg-blue-100",onChange:s},null,32)]),U("button",{disabled:!e.value||n.value,class:"flex items-center rounded-md bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 disabled:cursor-not-allowed disabled:bg-gray-400",onClick:i},[n.value?(O(),re("svg",bW,a[0]||(a[0]=[U("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),U("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Te("",!0),je(" "+ue(n.value?o.$t("shows.import.importing"):o.$t("shows.import.start_import")),1)],8,vW)])]),r.value?(O(),re("div",_W,[U("h3",wW,ue(o.$t("shows.import.results_title")),1),U("div",xW,[U("div",EW,[U("div",SW,[a[1]||(a[1]=U("div",{class:"flex-shrink-0"},[U("svg",{class:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},[U("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),U("div",AW,[U("p",$W,ue(o.$t("shows.import.imported_count",{count:r.value.imported.length})),1)])])]),U("div",CW,[U("div",kW,[a[2]||(a[2]=U("div",{class:"flex-shrink-0"},[U("svg",{class:"h-5 w-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},[U("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),U("div",IW,[U("p",RW,ue(o.$t("shows.import.skipped_count",{count:r.value.skipped.length})),1)])])]),U("div",TW,[U("div",OW,[a[3]||(a[3]=U("div",{class:"flex-shrink-0"},[U("svg",{class:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},[U("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),U("div",DW,[U("p",PW,ue(o.$t("shows.import.failed_count",{count:r.value.failed.length})),1)])])])]),r.value.imported.length>0?(O(),re("div",LW,[U("h4",MW,ue(o.$t("shows.import.imported_shows"))+" ("+ue(r.value.imported.length)+") ",1),U("div",NW,[U("ul",jW,[(O(!0),re(Ge,null,Lt(r.value.imported,d=>(O(),re("li",{key:d.title},[U("strong",null,ue(d.title),1)]))),128))])])])):Te("",!0),r.value.skipped.length>0?(O(),re("div",FW,[U("h4",UW,ue(o.$t("shows.import.skipped_shows"))+" ("+ue(r.value.skipped.length)+") ",1),U("div",BW,[U("ul",zW,[(O(!0),re(Ge,null,Lt(r.value.skipped,d=>(O(),re("li",{key:d.title},[U("strong",null,ue(d.title),1),je(" - "+ue(d.reason),1)]))),128))])])])):Te("",!0),r.value.failed.length>0?(O(),re("div",VW,[U("h4",HW,ue(o.$t("shows.import.failed_shows"))+" ("+ue(r.value.failed.length)+") ",1),U("div",qW,[U("ul",KW,[(O(!0),re(Ge,null,Lt(r.value.failed,d=>(O(),re("li",{key:d.title},[U("strong",null,ue(d.title),1),je(" - "+ue(d.reason),1)]))),128))])])])):Te("",!0)])):Te("",!0)]),_:1})}}}),GW={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function JW(t,e){return O(),re("svg",GW,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M12 20a8 8 0 0 0 8-8a8 8 0 0 0-8-8a8 8 0 0 0-8 8a8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10a10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67l-.75 1.23L11 13V7z"},null,-1)]))}const YW=Ue({name:"mdi-clock-outline",render:JW}),XW={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function QW(t,e){return O(),re("svg",XW,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4l8-8z"},null,-1)]))}const ZW=Ue({name:"mdi-check-circle-outline",render:QW});function id(t,e={}){return t?t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric",...e}):""}const eG=["open"],tG={class:"flex cursor-pointer items-center justify-between bg-gray-50 px-3 py-2 transition-colors hover:bg-gray-100"},nG={class:"flex flex-wrap items-center text-sm font-medium"},rG={class:"ml-1.5 text-xs text-gray-500"},sG={key:0,class:"ml-1.5 rounded-full bg-green-100 px-1.5 py-0.5 text-xs font-medium text-green-800"},iG=["title"],oG={key:0,class:"divide-y divide-gray-100"},aG={class:"mb-1.5 flex flex-wrap items-start justify-between gap-2"},lG={class:"flex items-center gap-1.5 text-sm font-medium"},cG=["title","onClick"],uG={class:"text-gray-500"},dG={class:"break-words"},fG={class:"flex flex-wrap items-center gap-2 text-xs text-gray-500"},hG={key:0,class:"flex items-center gap-0.5"},pG={key:1,class:"flex items-center gap-0.5"},mG={key:0,class:"pl-8 text-xs text-gray-600"},gG={key:1,class:"p-2.5 text-xs text-gray-500"},yG=pe({__name:"ShowSeason",props:{season:{},open:{type:Boolean}},setup(t){const e=z6(go,()=>t.season.sortedEpisodes),n=ne(()=>e.value.filter(r=>r.watched).length);return(r,s)=>{const i=MC,o=ZW,a=iv,l=YW,c=TC;return O(),re("details",{open:r.open,class:"group overflow-hidden rounded-md border border-gray-200"},[U("summary",tG,[U("h4",nG,[K(i,{class:"mr-1.5 size-4 transform transition-transform group-open:rotate-90"}),je(" "+ue(r.$t("shows.show.season"))+" "+ue(r.season.number)+" ",1),U("span",rG," ("+ue($(e).length)+" "+ue(r.$t("shows.show.episodes"))+") ",1),n.value>0?(O(),re("span",sG,ue(n.value)+"/"+ue($(e).length)+" "+ue(r.$t("shows.episode.watched")),1)):Te("",!0)]),$(e).length&&n.value<$(e).length?(O(),re("button",{key:0,class:"ml-2 shrink-0 rounded bg-green-50 px-2 py-0.5 text-xs font-medium text-green-700 hover:bg-green-100",title:r.$t("shows.season.mark_all_watched"),onClick:s[0]||(s[0]=Xn(u=>r.season.watch(),["prevent"]))},ue(r.$t("shows.season.mark_all_watched")),9,iG)):Te("",!0)]),$(e).length?(O(),re("ul",oG,[(O(!0),re(Ge,null,Lt($(e),u=>(O(),re("li",{key:u.id,class:"p-2.5 transition-colors hover:bg-gray-50"},[U("div",null,[U("div",aG,[U("h5",lG,[U("button",{class:Je(["flex h-6 w-6 shrink-0 items-center justify-center rounded-full transition-colors",u.watchAction?"text-green-500 hover:text-green-600":"text-gray-300 hover:text-gray-400"]),title:u.watchAction?r.$t("shows.episode.watched_on",{date:$(id)(u.watchAction.date,{month:"short"})}):r.$t("shows.episode.mark_as_watched"),onClick:d=>u.toggle()},[u.watchAction?(O(),ae(a,{key:1,class:"size-4"})):(O(),ae(o,{key:0,class:"size-4"}))],10,cG),U("span",uG,ue(u.number)+".",1),U("span",dG,ue(u.name),1)]),U("div",fG,[u.duration?(O(),re("div",hG,[K(l,{class:"size-3.5"}),je(" "+ue($(mO)($(pO)(u.duration)??{})),1)])):Te("",!0),u.publishedAt?(O(),re("div",pG,[K(c,{class:"size-3.5"}),je(" "+ue($(id)(u.publishedAt,{month:"short"})),1)])):Te("",!0)])]),u.description?(O(),re("div",mG,ue(u.description),1)):Te("",!0)])]))),128))])):(O(),re("div",gG,ue(r.$t("shows.show.no_episodes")),1))],8,eG)}}}),vG={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function bG(t,e){return O(),re("svg",vG,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5a5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5a5 5 0 0 0-5-5"},null,-1)]))}const _G=Ue({name:"mdi-link",render:bG}),wG={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function xG(t,e){return O(),re("svg",wG,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M22 14v8h-2v-4l-4 4v-3h-5v-2h5v-3l4 4v-4zM5 19h4v2H5c-1.1 0-2-.9-2-2V5a2 2 0 0 1 2-2h1V.998h2V3h8V.998h2V3h1c1.11 0 2 .89 2 2v7h-2V8H5z"},null,-1)]))}const EG=Ue({name:"mdi-calendar-end",render:xG}),SG={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function AG(t,e){return O(),re("svg",SG,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M2 14h2v3h5v-3l4 4l-4 4v-3H4v3H2zm17 5V8H5v4H3V5c0-1.11.89-2 2-2h1V.998h2V3h8V.998h2V3h1a2 2 0 0 1 2 2v14c0 1.1-.9 2-2 2h-6.17l2-2z"},null,-1)]))}const $G=Ue({name:"mdi-calendar-start",render:AG}),CG={viewBox:"0 0 24 24","aria-hidden":"true",width:"1.2em",height:"1.2em"};function kG(t,e){return O(),re("svg",CG,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83l3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"},null,-1)]))}const IG=Ue({name:"mdi-pencil",render:kG}),RG={viewBox:"0 0 20 20","aria-hidden":"true",width:"1.2em",height:"1.2em"};function TG(t,e){return O(),re("svg",RG,e[0]||(e[0]=[U("path",{fill:"currentColor",d:"M10 12a2 2 0 1 1 0-4a2 2 0 0 1 0 4m0-6a2 2 0 1 1 0-4a2 2 0 0 1 0 4m0 12a2 2 0 1 1 0-4a2 2 0 0 1 0 4"},null,-1)]))}const OG=Ue({name:"zondicons-dots-horizontal-triple",render:TG}),DG={class:"mb-4 flex flex-wrap items-center justify-between gap-2"},PG={class:"flex flex-wrap items-center gap-2"},LG={class:"text-xl font-bold"},MG=["title"],NG={class:"hidden text-sm font-medium text-gray-600 md:block"},jG={key:0,class:"flex gap-2"},FG={class:"rounded-lg bg-white p-4 shadow-sm"},UG={class:"mb-4 flex flex-col gap-4 sm:flex-row"},BG={key:0,class:"mx-auto w-full max-w-[180px] sm:mx-0 sm:w-1/5"},zG={class:"flex-1"},VG={key:0,class:"mb-4"},HG={class:"mb-1 text-base font-medium"},qG={class:"text-sm text-gray-700"},KG={class:"mb-4 grid grid-cols-1 gap-4 sm:grid-cols-2"},WG={key:0,class:"rounded-md bg-gray-50 p-3"},GG={class:"mb-1 text-sm font-medium text-gray-700"},JG={key:0,class:"flex items-center gap-1 text-sm text-gray-600"},YG={key:1,class:"flex items-center gap-1 text-sm text-gray-600"},XG={class:"rounded-md bg-gray-50 p-3"},QG={class:"mb-1 text-sm font-medium text-gray-700"},ZG={class:"text-sm text-gray-600"},eJ={class:"flex items-center gap-1"},tJ={class:"flex items-center gap-1"},nJ={class:"flex items-center gap-1"},rJ={key:1,class:"mb-4"},sJ={class:"mb-1 text-base font-medium"},iJ={class:"space-y-1"},oJ=["href"],aJ={key:0,class:"mb-4"},lJ={class:"mb-3 text-base font-medium"},cJ={class:"space-y-2"},uJ=pe({__name:"Show",props:{show:{}},setup(t){const e={"themoviedb.org":"The Movie Database (TMDB)","imdb.com":"IMDB"},n=ne(()=>t.show.episodes.filter(o=>o.watched).length),r=M$(()=>t.show);function s(o){const{domain:a}=nO(o)??{};return e[a]??o}async function i(){await ft.confirm(fr("shows.show.delete_confirm"),{acceptText:fr("shows.show.delete_confirmAccept"),acceptVariant:"danger"})&&(await t.show.delete(),await ho.push({name:"shows.index"}))}return Ht(()=>t.show.loadRelationsIfUnloaded()),(o,a)=>{const l=OG,c=at,u=IG,d=i$,f=LC,h=o$,m=a$,y=Xy,S=iv,x=FC,_=jC,g=Yy,p=$G,v=EG,E=rv,k=vC,A=_G,C=yG,I=To;return O(),ae(I,null,{default:Y(()=>[U("div",DG,[U("div",PG,[U("h2",LG,[o.$ui.mobile?(O(),ae(m,{key:0,align:"end"},{options:Y(()=>[K(h,null,{default:Y(()=>[K(d,{onSelect:a[0]||(a[0]=N=>o.$router.push({name:"shows.edit",params:{show:o.show.slug}}))},{default:Y(()=>[K(u,{class:"size-4"}),U("span",null,ue(o.$t("shows.actions.edit")),1)]),_:1}),K(d,{onSelect:a[1]||(a[1]=N=>i())},{default:Y(()=>[K(f,{class:"size-4"}),U("span",null,ue(o.$t("shows.actions.delete")),1)]),_:1})]),_:1})]),default:Y(()=>[K(c,{size:"icon",variant:"ghost",title:o.$t("task.actions"),"aria-label":o.$t("task.actions")},{default:Y(()=>[K(l,{class:"size-5"})]),_:1},8,["title","aria-label"])]),_:1})):Te("",!0),je(" "+ue(o.show.name),1)]),U("div",{class:Je(["flex h-8 w-8 shrink-0 items-center justify-center rounded-full text-white shadow-sm",`bg-status-${o.show.status}`]),title:o.$t(`shows.status.${$(r).status}`)},[o.show.status==="watching"?(O(),ae(y,{key:0,class:"size-4"})):o.show.status==="completed"?(O(),ae(S,{key:1,class:"size-4"})):o.show.status==="dropped"?(O(),ae(x,{key:2,class:"size-4"})):o.show.status==="pending"?(O(),ae(_,{key:3,class:"size-4"})):Te("",!0)],10,MG),U("span",NG,ue(o.$t(`shows.status.${$(r).status}`)),1)]),o.$ui.mobile?Te("",!0):(O(),re("div",jG,[K(c,{variant:"secondary",route:"shows.edit","route-params":{show:o.show.slug},class:"py-1.5"},{default:Y(()=>[K(u,{class:"size-4"}),je(" "+ue(o.$t("shows.actions.edit")),1)]),_:1},8,["route-params"]),K(c,{variant:"danger",class:"py-1.5",onClick:a[2]||(a[2]=N=>i())},{default:Y(()=>[K(f,{class:"size-4"}),je(" "+ue(o.$t("shows.actions.delete")),1)]),_:1})]))]),U("div",FG,[U("div",UG,[o.show.imageUrl?(O(),re("div",BG,[K(g,{src:o.show.imageUrl,class:"h-auto w-full rounded-md object-cover shadow-sm"},null,8,["src"])])):Te("",!0),U("div",zG,[o.show.description?(O(),re("div",VG,[U("h3",HG,ue(o.$t("shows.show.description")),1),U("p",qG,ue(o.show.description),1)])):Te("",!0),U("div",KG,[o.show.startDate||o.show.endDate?(O(),re("div",WG,[U("h4",GG,ue(o.$t("shows.show.air_dates")),1),o.show.startDate?(O(),re("div",JG,[K(p,{class:"size-4 text-gray-500"}),U("span",null,ue(o.$t("shows.show.start_date"))+": "+ue($(id)(o.show.startDate)),1)])):Te("",!0),o.show.endDate?(O(),re("div",YG,[K(v,{class:"size-4 text-gray-500"}),U("span",null,ue(o.$t("shows.show.end_date"))+": "+ue($(id)(o.show.endDate)),1)])):Te("",!0)])):Te("",!0),U("div",XG,[U("h4",QG,ue(o.$t("shows.show.episodes_info")),1),U("div",ZG,[U("div",eJ,[K(E,{class:"size-4 text-gray-500"}),U("span",null,ue(o.$t("shows.show.seasons_count",o.show.sortedSeasons.length)),1)]),U("div",tJ,[K(k,{class:"size-4 text-gray-500"}),U("span",null,ue(o.$t("shows.show.total_episodes",o.show.episodes.length)),1)]),U("div",nJ,[K(S,{class:"size-4 text-gray-500"}),U("span",null,ue(o.$t("shows.show.watched_episodes",n.value)),1)])])])]),o.show.externalUrls&&o.show.externalUrls.length>0?(O(),re("div",rJ,[U("h3",sJ,ue(o.$t("shows.show.external_urls")),1),U("div",iJ,[(O(!0),re(Ge,null,Lt(o.show.externalUrls,(N,j)=>(O(),re("div",{key:j,class:"flex items-center gap-1"},[K(A,{class:"size-4 shrink-0 text-gray-500"}),U("a",{href:N,target:"_blank",rel:"noopener noreferrer",class:"text-sm break-all text-blue-600 hover:text-blue-800 hover:underline"},ue(s(N)),9,oJ)]))),128))])])):Te("",!0)])]),o.show.sortedSeasons.length?(O(),re("div",aJ,[U("h3",lJ,ue(o.$t("shows.show.seasons"))+" ("+ue(o.show.sortedSeasons.length)+") ",1),U("div",cJ,[(O(!0),re(Ge,null,Lt(o.show.sortedSeasons,N=>{var j;return O(),ae(C,{key:N.url,season:N,open:N===((j=o.show.nextEpisode)==null?void 0:j.season)},null,8,["season","open"])}),128))])])):Te("",!0)])]),_:1})}}}),dJ={show(t){return $i(gn).find(r=>r.slug===t)??null??new gC(t)}},fJ=nH([{name:"home",path:"/",component:B9},{name:"shows.index",path:"/shows",component:aW},{name:"shows.import",path:"/shows/import",component:WW},{name:"shows.show",path:"/shows/:show",component:uJ},{name:"shows.create",path:"/shows/create",component:xK},{name:"shows.edit",path:"/shows/:show/edit",component:SK}]),hJ={$catalog:ff,$tmdb:cr};tB(bH,{services:hJ,plugins:[M6({messages:Object.assign({"/src/lang/en.yaml":()=>Qo(()=>import("./en-Cf6gYYCi.js"),[])})}),sH({routes:fJ,bindings:dJ}),q6({models:Object.assign({"/src/models/Episode.schema.ts":_2,"/src/models/Episode.ts":EO,"/src/models/Season.schema.ts":wO,"/src/models/Season.ts":xO,"/src/models/Show.schema.ts":bO,"/src/models/Show.ts":_O,"/src/models/WatchAction.schema.ts":yO,"/src/models/WatchAction.ts":vO,"/src/models/index.ts":SO})}),bz(),z7()]});export{II as g};
//# sourceMappingURL=index-Cx8dxdBK.js.map
